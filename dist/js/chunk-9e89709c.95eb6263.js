(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e89709c"],{4137:function(e,t,a){"use strict";var i=a("c242"),s=a.n(i);s.a},ac0d:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return h}));a("5ab2"),a("6d57"),a("e10e");var i=a("ac9f"),s=a("a2e5"),n=a("391c"),r=a("6bf2"),o=a.n(r);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){return{pagination:{currentPage:1,total:0,pageSize:100},optionsClone:{},options:{},btnDisabled:!1,exportObj:{visible:!1,sum:1,current:0,fileName:"导出文件名",excelData:[]},requestMode:"post",requestUrl:"/",requestPageSize:5e3,checklistData:[],isLayering:!1,isQs:!0,billsCode:"",sbc:""}},mounted:function(){},methods:{query:function(){console.log("000000")},fetchData:function(e){this.pagination=c({},this.pagination,{pageSize:e.pageSize?e.pageSize:this.pagination.pageSize,currentPage:e.page?e.page:1});var t={};"{}"!=JSON.stringify(this.optionsClone)?(t=this.isLayering?c({},this.optionsClone,{pageParam:{pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage}}):c({},this.optionsClone,{pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage}),this.query(t)):this.msg("请先查询")},exportCsv:function(e){e.exportObj.visible=!0},closeDialog:function(e){this.exportObj.visible=e,this.exportObj.current=1},searchExport:function(){if(this.btnDisabled=!0,0===this.tableData.length)return this.msg("没有数据无法导出！"),void(this.btnDisabled=!1);var e=Object(n["cloneDeep"])(this.optionsClone);if(this.pagination.total>2e5)return this.msg("导出失败，本次数据超过20W条，请分批导出！"),void(this.btnDisabled=!1);var t=Math.ceil(this.pagination.total/this.requestPageSize);this.exportObj.sum=t,this.exportObj.current=0,this.exportSync(0,t,e,this.requestUrl)},exportSync:function(e,t,a,i){e!=t?(++e,this.isLayering?(a.pageParam.pageSize=this.requestPageSize,a.pageParam.currentPage=e):(a.pageSize=this.requestPageSize,a.currentPage=e),"post"==this.requestMode?this.exportPost(t,e,a,i):this.exportGet(t,e,a,i)):this.btnDisabled=!1},exportPost:function(e,t,a,i){var n=this;this.isQs?Object(s["d"])(i,a,this.isQs).then((function(s){n.exportNormal(s,e,t,a,i)})).catch((function(t){n.exportError(e)})):Object(s["e"])(i,a).then((function(s){n.exportNormal(s,e,t,a,i)})).catch((function(t){n.exportError(e)}))},exportGet:function(e,t,a,i){var n=this;Object(s["c"])(i,a,this.isQs).then((function(s){n.exportNormal(s,e,t,a,i)})).catch((function(t){n.exportError(e)}))},exportNormal:function(e,t,a,i,s){0!=e.code&&(e.data.list=[]),"sendMailFeeOrPayFeeDetail"===this.sbc&&(e.data.list=this.calculation(e.data.list)),"sendReceiveFeeSummary"===this.sbc&&(e.data.list=this.ischeckrow(e.data.list)),this.exportObj=c({},this.exportObj,{sum:t,current:a,excelData:e.data.list}),this.exportCsv(this),this.exportSync(a,t,i,s)},exportError:function(e){this.btnDisabled=!1,this.msg("网络出错，导出部分数据"),this.exportObj=c({},this.exportObj,{sum:e,current:e}),this.exportObj.excelData=[],this.exportCsv(this)},checklistExport:function(){return this.btnDisabled=!0,""==this.checklistData?(this.msg("没有数据无法导出"),void(this.btnDisabled=!1)):this.checklistData.length>1e5?(this.msg("数据量太大，请优化查询条件"),void(this.btnDisabled=!1)):(this.exportObj=c({},this.exportObj,{sum:1,current:1,excelData:this.checklistData}),this.exportCsv(this),void(this.btnDisabled=!1))},clearBtnDisabled:function(){this.btnDisabled=!1},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})},formatterFunc:function(e,t){var a=e.filter((function(e){return e.value===t}));return a.length>0?a[0].label:"-"}}},h={data:function(){return{btnDisabled:!1,exportObj:{visible:!1,sum:1,current:0,fileName:"导出文件名",excelData:[]}}},methods:{exportBasicUtils:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this.btnDisabled=!0,setTimeout((function(){t.btnDisabled=!1}),3e3);var i=e.totalRow,s=e.isBillCode,n=e.checklistData,r=e.fileName,o=e.type;if(this.exportObj.fileName=r,i)if(i>2e5)this.msg("您查询到的数据量过大（最多20万条），请细化查询条件后再进行导出");else if(s||n&&n.length>=i)n.length>0?this.exportObj={fileName:r,sum:1,current:1,excelData:n,visible:!0}:this.msg("暂无数据，无法导出");else if("day"==o)this.exportObj={excelData:[],fileName:r,sum:i,current:1},this.finished(e,e.paramIn,0);else{var l=Math.ceil(i/a);this.exportObj={excelData:[],fileName:r,sum:l,current:0},this.exportByPage(0,l,e,a)}else this.msg("暂无数据，无法导出")},exportByPage:function(e,t,a,i){var n=this;if(e!=t){var r=a.methodType,o=a.url,l=a.paramIn;++e;var u=c({},l,{pageSize:i,currentPage:e});Object(s["a"])(r,o,u,!0,!1).then((function(s){return n.exportObj=c({},n.exportObj,{sum:t,current:e,excelData:s.data.list,visible:!0}),n.exportByPage(e,t,a,i)})).catch((function(e){n.msg("网络出错，导出部分数据"),n.exportObj=c({},n.exportObj,{sum:t,current:t,excelData:[],visible:!0})}))}},callback:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.methodType,r=e.url,o=e.totalRow;Object(s["a"])(n,r,t,!0,!1).then((function(s){i+=s.data.list.length,s.data.currentPage>=s.data.totalPage?a.finished(e,t,i):(t.currentPage=s.data.currentPage,t.currentPage=t.currentPage+1,a.callback(e,t,i)),a.exportObj=c({},a.exportObj,{sum:o,current:i,excelData:s.data.list,visible:!0})})).catch((function(e){a.msg("网络出错，导出部分数据"),a.exportObj=c({},a.exportObj,{sum:o,current:o,excelData:[],visible:!0})}))},finished:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=e.startDateKey,r=e.endDateKey,o=e.totalRow,l=e.fileName,u=e.allEndDate,h=e.queryInternal,p=h||0;p=p>0?p-1:0;var d=new Date(u).getTime(),m=new Date(t[r]).getTime();d==m&&d>new Date(t[s]).getTime()?t[s]=t[s]:t[s]=Object(n["cloneDeep"])(this.addSeconds(t[r],1)),t[r]=Object(n["cloneDeep"])(this.addSeconds(t[s],p)),(new Date(u).getTime()<new Date(t[r]).getTime()||o<=5e3)&&(t[r]=u),new Date(u).getTime()<new Date(t[s]).getTime()?setTimeout((function(){a.exportObj=c({},a.exportObj,{fileName:l,sum:o,current:o,excelData:[],visible:!0})}),1500):(t.currentPage=1,this.callback(e,t,i))},addSeconds:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(e).add(t,"days").format("YYYY-MM-DD")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}}}},afb6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"明细",name:"detail"}},[a("detail",{attrs:{switchOptions:e.switchOptions}})],1),a("el-tab-pane",{attrs:{label:"日汇总",name:"daySummary"}},[a("day-summary",{on:{goto:e.goto}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("div",{staticClass:"search-big-box"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"search-box"},[a("bill-code",{model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"timeSelect",staticClass:"time-select-input",model:{value:e.queryContent.timeType,callback:function(t){e.$set(e.queryContent,"timeType",t)},expression:"queryContent.timeType"}},[a("el-option",{key:0,attrs:{label:"收件时间",value:0}}),a("el-option",{key:1,attrs:{label:"账单日期",value:1}})],1)],1),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:e.queryContent.timeType<1?"datetime":"date",editable:!1,clearable:!1},on:{change:function(t){return e.startDateChange(e.queryContent.startDate1,!0)}},model:{value:e.queryContent.startDate1,callback:function(t){e.$set(e.queryContent,"startDate1",t)},expression:"queryContent.startDate1"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,clearable:!1,"default-time":"23:59:59",type:e.queryContent.timeType<1?"datetime":"date"},model:{value:e.queryContent.endDate1,callback:function(t){e.$set(e.queryContent,"endDate1",t)},expression:"queryContent.endDate1"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("结算对象")]),a("sc-users",{ref:"refSettlement",staticClass:"short-input",attrs:{type:"1",placeholder:""},model:{value:e.queryContent.accountUserId,callback:function(t){e.$set(e.queryContent,"accountUserId",t)},expression:"queryContent.accountUserId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("业务员")]),a("sc-users",{ref:"refUser",staticClass:"short-input",attrs:{placeholder:"",type:"2"},model:{value:e.queryContent.recManId,callback:function(t){e.$set(e.queryContent,"recManId",t)},expression:"queryContent.recManId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("承包区")]),a("sc-users",{ref:"refArea",staticClass:"short-input",attrs:{placeholder:"",type:"2",param:{types:"2"}},model:{value:e.queryContent.areaId,callback:function(t){e.$set(e.queryContent,"areaId",t)},expression:"queryContent.areaId"}})],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收时间")]),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerC",attrs:{type:"datetime",editable:!1},on:{change:function(t){return e.startDateChange(e.queryContent.startSignDate,!1)}},model:{value:e.queryContent.startSignDate,callback:function(t){e.$set(e.queryContent,"startSignDate",t)},expression:"queryContent.startSignDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerD",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime"},model:{value:e.queryContent.endSignDate,callback:function(t){e.$set(e.queryContent,"endSignDate",t)},expression:"queryContent.endSignDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("客户名称")]),a("sc-users",{ref:"refCustomer",staticClass:"short-input",attrs:{placeholder:"",type:"3"},model:{value:e.queryContent.customerId,callback:function(t){e.$set(e.queryContent,"customerId",t)},expression:"queryContent.customerId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("运单发放")]),a("sc-users",{ref:"refUserOrCustomer",staticClass:"short-input",attrs:{placeholder:"",type:"4"},model:{value:e.queryContent.userProvCustomerId,callback:function(t){e.$set(e.queryContent,"userProvCustomerId",t)},expression:"queryContent.userProvCustomerId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("账单类型")]),a("el-select",{ref:"billTypeSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},e._l(e.billTypeStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收状态")]),a("el-select",{ref:"signSelect",staticClass:"select-input",attrs:{placeholder:" "},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("扣款状态")]),a("el-select",{ref:"deductSelect",staticClass:"select-input",attrs:{placeholder:" "},model:{value:e.queryContent.billStatus,callback:function(t){e.$set(e.queryContent,"billStatus",t)},expression:"queryContent.billStatus"}},e._l(e.deductStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])]),a("div",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.resetQueryContent}},[e._v("重置查询条件")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)]),a("div",{staticClass:"expand-collapse"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],on:{click:e.expandCollapse}},[a("i",{staticClass:"el-icon-arrow-up"}),e._v("\n        收起\n        "),a("i",{staticClass:"el-icon-arrow-up"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],on:{click:e.expandCollapse}},[a("i",{staticClass:"el-icon-arrow-down"}),e._v("\n        展开查询\n        "),a("i",{staticClass:"el-icon-arrow-down"})])])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"success"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},r=[],o=(a("f548"),a("9a33"),a("ac0d")),l=a("a3be"),c=a("6bf2"),u=a.n(c),h=a("391c"),p={name:"detail",mixins:[o["b"]],props:{switchOptions:{type:Object,default:{}}},created:function(){},activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{height:356,show:!0,deductStatus:[{label:"全部",id:-1},{label:"已扣款",id:1},{label:"未扣款",id:2}],signStatus:[{label:"全部",id:-1},{label:"已签收",id:1},{label:"未签收",id:0},{label:"第三方签收",id:2}],billTypeStatus:[{id:-1,label:"全部"},{id:0,label:"无对象"},{id:1,label:"客户"},{id:2,label:"承包区"},{id:4,label:"业务员"},{id:5,label:"均重"}],queryContent:{billCode:"",timeType:0,startDate1:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endDate1:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),startDate:"",endDate:"",startSignDate:"",endSignDate:"",accountUserId:"",recManId:"",areaId:"",customerId:"",userProvCustomerId:"",billStatus:-1,signStatus:-1,type:-1,jszl:-1,centerRecCount:-1,areaBillFeeType:-1,billType:-1,isTuijian:-1,isWentijian:-1,isZeroFee:-1,hexiaoFee:0,xzpf:-1,ysfs:-1,centerRecFee:-1,isJibao:-1,totalFee:-1,recManIdNotEqPro:-1,billProvideDiff:-1,recGreaterAccount:0,centerGreaterAccount:0,xlzd:1},billCode:"",tableData:[],tableHead:{columns:[{displayName:"运单号",name:"billCode",size:120,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)},isFrozen:!0},{displayName:"扣款状态",name:"billStatus",value:function(e){var t=e["billStatus"];return 5==t?"待取消扣款":4==t?"已扣款":3==t?"待扣款":"未扣款"}},{displayName:"账单日期",name:"billDate",size:130,formatter:"yyyy-MM-dd"},{displayName:"收件时间",name:"scanDate",size:130,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"账单类型",name:"type",value:function(e){return 0===e["type"]?"无对象":1===e["type"]?"客户":2===e["type"]?"承包区":4===e["type"]?"业务员":5===e["type"]?"均重":void 0}},{displayName:"结算对象",name:"settlementName"},{displayName:"结算重量",name:"accountWeight",showTotal:!0},{displayName:"网点重量",name:"recWeight",showTotal:!0},{displayName:"中心重量",name:"centerWeight",showTotal:!0,value:function(e){return void 0==e["centerWeight"]?"":(e["centerWeight"]+e["recWeight"]).toFixed(2)/1}},{displayName:"揽件业务员",name:"recManName"},{displayName:"揽件业务员工号",name:"recManCode",isCode:!0,size:110},{displayName:"承包区",name:"areaName"},{displayName:"客户名称",name:"customerName",value:function(e){return e["customerName"]?e["customerName"]:e["customerId"]}},{displayName:"目的省",name:"dispatch"},{displayName:"目的市",name:"cityName"},{displayName:"客户运费",name:"customerStmFee",showTotal:!0},{displayName:"客户附加费",name:"customerAddFee",showTotal:!0},{displayName:"中转费",name:"areaCenterFee",showTotal:!0},{displayName:"操作费",name:"areaOperFee",showTotal:!0},{displayName:"均重通票费",name:"avgWeightFee",showTotal:!0},{displayName:"均重加收费",name:"addAvgWeightFee",showTotal:!0},{displayName:"中转费成本",name:"centerRecFee",showTotal:!0},{displayName:"物品类型",name:"goodsType",value:function(e){return 1==e["goodsType"]?"物品":"文件"}},{displayName:"运输方式",name:"classType",value:function(e){return 1==e["classType"]?"汽运":"航空"}},{displayName:"运单发放",name:"userProvCustomerName"},{displayName:"运单发放网点",name:"billProvideSiteName"},{displayName:"签收时间",name:"signDate",size:130,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"sigeStatus",value:function(e){var t="";return 0===e["sigeStatus"]?t="未签收":1===e["sigeStatus"]?t="已签收":2===e["sigeStatus"]&&(t="第三方签收"),t}},{displayName:"退件标识",name:"returnStatus",value:function(e){return 1==e["returnStatus"]?"是":"否"}},{displayName:"问题件",name:"otherStatus",value:function(e){return e["otherDate"]?"是":"否"}},{displayName:"备注",name:"remark"}]},exportObj:{fileName:"星联账单明细"},optionsClone:{},exportUrl:l["Ic"]}},methods:{onSearch:function(){if(this.queryContent.billCode="",this.billCode){var e=Object(h["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");this.queryContent.billCode=e.join(",")}else{var t=Object(h["cloneDeep"])(this.queryContent.endDate1);if(t=this.queryContent.timeType<1?t:u()(t).format("YYYY-MM-DD")+" 23:59:59",this.queryContent.timeType<1){if(this.timeCheck(this.queryContent.startDate1,t,"收件时间"))return}else if(this.timeCheck(this.queryContent.startDate1,t,"账单日期"))return;if(this.signTimeCheck(this.queryContent.startSignDate,this.queryContent.endSignDate))return}this.pagination.currentPage=1,this.queryContent.timeType<1?(this.queryContent.startDate=u()(this.queryContent.startDate1).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.endDate=u()(this.queryContent.endDate1).format("YYYY-MM-DD HH:mm:ss")):(this.queryContent.startDate=u()(this.queryContent.startDate1).format("YYYY-MM-DD"),this.queryContent.endDate=u()(this.queryContent.endDate1).format("YYYY-MM-DD")),this.queryContent.startSignDate&&this.queryContent.endSignDate&&(this.queryContent.startSignDate=u()(this.queryContent.startSignDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.endSignDate=u()(this.queryContent.endSignDate).format("YYYY-MM-DD HH:mm:ss")),this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(h["cloneDeep"])(e)),Object(l["Hc"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.tableData.map((function(e){e.remark&&(e.remark=e.remark.replace(/,/g,"，"))})),t.optionsClone.billCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},exportNew:function(){if(this.optionsClone.billCode)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>5e5)return void this.msg("最大导出不能超过50万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},onClickTable:function(){this.$refs.refUser.autoBlur(),this.$refs.refSettlement.autoBlur(),this.$refs.refArea.autoBlur(),this.$refs.refCustomer.autoBlur(),this.$refs.refUserOrCustomer.autoBlur(),this.$refs.deductSelect.visible=!1,this.$refs.signSelect.visible=!1,this.$refs.timeSelect.visible=!1,this.$refs.billTypeSelect.visible=!1,this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.timePickerC._data.pickerVisible=!1,this.$refs.timePickerD._data.pickerVisible=!1},resetQueryContent:function(){this.billCode="",this.queryContent={billCode:"",timeType:0,startDate1:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endDate1:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),startDate:"",endDate:"",startSignDate:"",endSignDate:"",accountUserId:"",recManId:"",areaId:"",customerId:"",userProvCustomerId:"",billStatus:-1,signStatus:-1,type:-1,jszl:-1,centerRecCount:-1,areaBillFeeType:-1,billType:-1,isTuijian:-1,isWentijian:-1,isZeroFee:-1,hexiaoFee:0,xzpf:-1,ysfs:-1,centerRecFee:-1,isJibao:-1,totalFee:-1,recManIdNotEqPro:-1,billProvideDiff:-1,recGreaterAccount:0,centerGreaterAccount:0,xlzd:1}},timeCheck:function(e,t,a){if(!e&&!t)return this.msg("必须选择收件时间或账单日期"),!0;if(!e)return this.msg(a+"开始时间不能为空"),!0;if(!t)return this.msg(a+"结束时间不能为空"),!0;if(u()(e).isAfter(t))return this.msg(a+"开始时间不能大于结束时间"),!0;var i=u()(t).subtract(31,"days"),s=u()(i).isAfter(u()(e));return!!s&&(this.msg(a+"相差不能大于31天"),!0)},startDateChange:function(e,t){e&&(t?this.$refs.timePickerB.focus():this.$refs.timePickerD.focus())},signTimeCheck:function(e,t){if(!e&&t||e&&!t)return this.msg("请检查签收时间"),!0;if(u()(e).isAfter(t))return this.msg("签收时间的开始时间不能大于结束时间"),!0;var a=u()(t).subtract(31,"days"),i=u()(a).isAfter(u()(e));return!!i&&(this.msg("签收时间相差不能大于31天"),!0)},expandCollapse:function(){var e=this;this.show=!this.show,this.show?this.height=356:this.height=240,this.$nextTick((function(){e.z_method.refreshSpread()}))}},computed:{contentHeight:function(){if(this.z_param.isNode)return this.$store.getters.clientHeight-this.height;var e=this.$store.getters.clientHeight-this.height+60;return window.innerHeight<698&&(e+=100),e}},watch:{switchOptions:{handler:function(e,t){var a=this;this.show||(this.show=!0,this.height=356,this.$nextTick((function(){a.z_method.refreshSpread()}))),this.pagination.pageSize=100,this.pagination.currentPage=1,this.resetQueryContent(),this.queryContent.accountUserId=e.accountUserId,this.queryContent.startDate1=e.billDate,this.queryContent.endDate1=e.billDate,this.queryContent.timeType=1,this.queryContent.type=e.type,this.onSearch()},deep:!0}}},d=p,m=(a("daed"),a("623f")),b=Object(m["a"])(d,n,r,!1,null,"2d5c80a6",null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("div",{staticClass:"search-big-box"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"search-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("账单日期")]),a("div",{staticClass:"datePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{clearable:!1,editable:!1,type:"date"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v("\n              至\n              "),a("el-date-picker",{ref:"timePickerB",attrs:{clearable:!1,editable:!1,type:"date"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("结算对象")]),a("sc-users",{ref:"refSettlement",staticClass:"short-input",attrs:{placeholder:"",type:"1"},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1)]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)]),a("div",{staticClass:"expand-collapse"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],on:{click:e.expandCollapse}},[a("i",{staticClass:"el-icon-arrow-up"}),e._v("\n        收起\n        "),a("i",{staticClass:"el-icon-arrow-up"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],on:{click:e.expandCollapse}},[a("i",{staticClass:"el-icon-arrow-down"}),e._v("\n        展开查询\n        "),a("i",{staticClass:"el-icon-arrow-down"})])])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"success"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},g=[],C={name:"daySummary",mixins:[o["b"]],computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}},data:function(){var e=this;return{show:!0,height:272,startDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),accountUserId:"",tableHead:{dblclick:function(t,a,i){var s=JSON.parse(JSON.stringify(a));e.$emit("goto","detail",s)},columns:[{displayName:"账单日期",name:"billDate",formatter:"yyyy-MM-dd"},{displayName:"账单类型",name:"type",value:function(e){return 0===e["type"]?"无对象":1===e["type"]?"客户":2===e["type"]?"承包区":4===e["type"]?"业务员":5===e["type"]?"均重":void 0}},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"票数",name:"billsNum",showTotal:!0},{displayName:"结算重量",name:"accountWeight",showTotal:!0},{displayName:"网点重量",name:"recWeight",showTotal:!0},{displayName:"中心重量",name:"countCenterWeight",showTotal:!0},{displayName:"签收票数",name:"sigeBillsNum",showTotal:!0},{displayName:"退件票数",name:"returnBillsNum",showTotal:!0},{displayName:"问题件票数",name:"otherBillsNum",showTotal:!0}]},tableData:[],exportObj:{fileName:"星联账单日汇总"},optionsClone:{},requestUrl:l["Kc"]}},methods:{onSearch:function(){var e={},t=Object(h["cloneDeep"])(this.startDate),a=Object(h["cloneDeep"])(this.endDate);if(t)if(a)if(u()(t).isAfter(a))this.msg("开始时间不能大于结束时间");else{if(a=u()(a).format("YYYY-MM-DD")+" 23:59:59",this.accountUserId){if(this.timeCheck(31,t,a))return}else if(this.timeCheck(1,t,a))return;e.currentPage=1,e.startDate=u()(this.startDate).format("YYYY-MM-DD"),e.endDate=u()(this.endDate).format("YYYY-MM-DD"),e.accountUserId=this.accountUserId,e.pageSize=this.pagination.pageSize,e.currentPage=this.pagination.currentPage,this.query(e)}else this.msg("结束时间不能为空");else this.msg("开始时间不能为空")},query:function(e){var t=this;e&&(this.optionsClone=Object(h["cloneDeep"])(e)),Object(l["Jc"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},exportNew:function(){this.searchExport()},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1},timeCheck:function(e,t,a){var i=u()(a).subtract(e,"days"),s=u()(i).isAfter(u()(t));return!!s&&(this.msg("时间相差不能大于"+e+"天"),!0)},expandCollapse:function(){var e=this;this.show=!this.show,this.show?this.height=272:this.height=242,this.$nextTick((function(){e.z_method.refreshSpread()}))}}},D=C,v=(a("4137"),Object(m["a"])(D,y,g,!1,null,"2daff0d0",null)),x=v.exports,w={name:"starLinkBill",components:{detail:f,daySummary:x},data:function(){return{activeName:"detail",switchOptions:{}}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.switchOptions=t}}},S=w,k=Object(m["a"])(S,i,s,!1,null,"0788c8b8",null);t["default"]=k.exports},b6f0:function(e,t,a){},c242:function(e,t,a){},daed:function(e,t,a){"use strict";var i=a("b6f0"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-9e89709c.95eb6263.js.map
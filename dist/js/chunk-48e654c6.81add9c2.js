(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48e654c6"],{"233d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{staticClass:"sz-tab"},[i("summaryh")],1)},s=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sz-main packageBillSummary"},[i("show-more",{model:{value:t.ishowHeights,callback:function(e){t.ishowHeights=e},expression:"ishowHeights"}},[i("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[i("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 73px)","padding-top":"16px"}},[i("ul",[i("li",[i("el-select",{staticClass:"input-80",model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[i("el-option",{key:1,attrs:{label:"账单日期",value:1}}),i("el-option",{key:2,attrs:{label:"扣款时间",value:2}})],1),1==t.type?i("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:t.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:t.dateValue,callback:function(e){t.dateValue=e},expression:"dateValue"}}):t._e(),1!=t.type?i("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:t.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}}):t._e()],1),i("li",[i("label",[t._v("固定费类型：")]),i("sz-accountFee",{staticClass:"inputh-85",model:{value:t.accountFee,callback:function(e){t.accountFee=e},expression:"accountFee"}})],1),i("li",[i("label",[t._v("扣款状态：")]),i("el-select",{staticClass:"inputh-85",model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)])]),i("div",{staticStyle:{display:"inline-block"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")])],1)])]),i("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[i("div",{staticClass:"ulH"}),i("div",[i("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.searchExport}},[t._v("导出")])],1)]),i("div",{staticClass:"sz-content",style:{height:t.contentHeight+t.ishowHeight+"px"}},[i("spread",{attrs:{ngData:t.tableData,headData:t.tableHead},on:{checkboxAllClick:t.checkboxAllClick}}),i("div",{staticClass:"sz-pagination-box"},[i("sz-pagination",{attrs:{page:t.pagination.currentPage,pageSize:t.pagination.pageSize,total:t.pagination.total},on:{fetchData:t.fetchData}})],1)],1),i("csv",{attrs:{visible:t.exportObj.visible,fileName:t.exportObj.fileName,head:t.tableHead,paramData:t.exportObj.excelData,sum:t.exportObj.sum,current:t.exportObj.current},on:{clear:t.closeDialog}}),i("sz-batch-process",{attrs:{title:t.batchTitle,dialogVisible:t.batchDialogVisible,columns:t.columns,tableData:t.cloneCrrow,batchUrl:t.batchUrl},on:{model:t.close}})],1)},o=[],n=(i("9a33"),i("f548"),i("6d57"),i("163d"),i("ac0d")),c=i("391c"),r=i("a3be"),h=i("f37e"),u=i("4055"),d={mixins:[n["b"]],data:function(){return{accountFee:"",ishowHeights:0,ishowHeight:0,currRow:[],type:1,limit:31,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],billsTypeStatus:-2,billsTypeStatusOptions:[{value:-2,label:"全部"},{value:0,label:"客户"},{value:4,label:"业务员"},{value:2,label:"承包区"},{value:99,label:"下级网点"}],accountUserId:"",status:-1,statusOptions:[{value:-1,label:"全部"},{value:0,label:"未扣款"},{value:1,label:"待扣款"},{value:2,label:"已线上扣款"},{value:3,label:"已线下收款"}],tableData:[],tableHead:{columns:[{displayName:"扣款状态",name:"status",size:100,value:function(t){return 0===t.status?"未扣款":1===t.status||5===t.status?"待扣款":2===t.status?"已线上扣款":3===t.status?"已线下收款":""}},{displayName:"账单日期",name:"settlementTime",size:120,formatter:"yyyy-MM-dd"},{displayName:"固定费类型",name:"fixedTypeName",size:100,isCode:!0},{displayName:"结算对象",name:"objectName",size:100,isCode:!0},{displayName:"结算对象编码",name:"objectCode",size:100,isCode:!0},{displayName:"扣款模式",name:"mode",size:150,value:function(t){return Object(h["l"])(Number(t.mode))}},{displayName:"金额",name:"fixedFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扣款人",name:"hexiaoMan",size:100,isCode:!0},{displayName:"扣款时间",name:"heixaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"创建人",name:"creator",size:100,isCode:!0},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},exportObj:{fileName:"对包仓和固定费"},optionsClone:"",requestUrl:"/quote/new/lowerWaterBillAuto/checkQuery",requestMode:"get",batchDialogVisible:!1,columns:[{displayName:"账单日期",name:"settlementTime"},{displayName:"结算对象",name:"objectName"},{displayName:"金额",name:"fixedFee"}],batchTitle:"",batchUrl:"",dialogVisibleEdit:!1,billDate:this.moment().format("YYYY-MM-DD"),pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},accountUserIdEdit:"",accountFeeEdit:"",deduction:4,deductionOptions:[{value:4,label:"自动扣款"},{value:3,label:"手动扣款"}],feeEdit:0,remarkText:"",objectType:-1,objectTypeEdit:-1,cloneCrrow:[]}},methods:{changtype:function(t){this.limit=t?31:1,this.objectType=t?t.type:""},changtypeEdit:function(t){this.objectTypeEdit=t?t.type:""},handleClose:function(){this.dialogVisibleEdit=!1},close:function(){this.batchDialogVisible=!1,this.onSearch()},checkboxAllClick:function(t){this.selectionSite([],t)},selectionSite:function(t,e){this.currRow=this.tableData.filter((function(t){return 1==t.check}))},checkBill:function(t){this.batchTitle=t.toElement.innerText,"手工入账单"==this.batchTitle||0!==this.currRow.length?"手工入账单"==this.batchTitle?(this.billDate=this.moment().format("YYYY-MM-DD"),this.accountUserIdEdit="",this.accountFeeEdit="",this.deduction=4,this.feeEdit=0,this.remarkText="",this.dialogVisibleEdit=!0):this.checkBillPost():this.msg("请选择需要结算的数据！")},checkBillPost:function(){var t=this;if(this.cloneCrrow=Object(c["cloneDeep"])(this.currRow),"手工入账单"==this.batchTitle){if(!this.accountUserIdEdit)return void this.msg("请选择结算对象");if(!this.accountFeeEdit)return void this.msg("请选择固定费类型");if(0===this.feeEdit)return void this.msg("费用金额要大于0");this.moment(this.billDate).format("YYYY-MM-DD"),this.accountUserIdEdit,this.objectTypeEdit,this.accountFeeEdit,this.deduction,this.feeEdit,this.remarkText}else"扣预付款"==this.batchTitle||"线下收款"==this.batchTitle?("线下收款"==this.batchTitle&&this.cloneCrrow.forEach((function(t){t.type=1})),this.cloneCrrow.forEach((function(e){e.settlementTime=t.moment(e.settlementTime).format("YYYY-MM-DD")})),this.cloneCrrow=Object(c["cloneDeep"])(this.cloneCrrow),this.batchUrl="/quote/new/lowerWaterBillAuto/hexiao",this.batchDialogVisible=!0):"取消扣款"==this.batchTitle&&(this.cloneCrrow.forEach((function(e){e.settlementTime=t.moment(e.settlementTime).format("YYYY-MM-DD")})),this.cloneCrrow=Object(c["cloneDeep"])(this.cloneCrrow),this.batchUrl="/quote/new/lowerWaterBillAuto/fanhexiao",this.batchDialogVisible=!0)},onSearch:function(){if(this.currRow=[],1===this.type){if(this.dateValue[2]<0)return void this.msg("开始日期不能大于结束日期,请重新选择日期");if(this.limit<=this.dateValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期")}else{if(this.timeValue[2]<0)return void this.msg("开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.timeValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var t={timeType:this.type,startTime:1===this.type?null==this.dateValue[0]?"":this.dateValue[0]:null==this.timeValue[0]?"":this.timeValue[0],endTime:1===this.type?null==this.dateValue[1]?"":this.dateValue[1]:null==this.timeValue[1]?"":this.timeValue[1],fixedType:this.accountFee,objectId:this.accountUserId,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};-2!==this.billsTypeStatus&&(t.objectType=this.billsTypeStatus),-1!==this.status&&(t.deductStatus=this.status),this.accountUserId&&(t.objectIdType=this.objectType),this.optionsClone=Object(c["cloneDeep"])(t),this.query(t)},query:function(t){var e=this;Object(r["E"])(t).then((function(t){t.data.list&&t.data.list.length>0?(e.tableData=t.data.list,e.pagination.total=t.data.totalRow):(e.pagination.total=0,e.tableData=[],e.msg("没有数据哟"))})).catch((function(t){}))},proving:function(t){return t+="",t=t.replace(/[^\.\d\n]/g,""),t=t.replace(/[^\d.]/g,""),t=t.replace(/^\./g,""),t=t.replace(/\.{2,}/g,"."),t=t.replace(".","$#$").replace(/\./g,"").replace("$#$","."),t=t.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),t.indexOf(".")<0&&""!=t&&(t=parseFloat(t)),t}},watch:{ishowHeights:{handler:function(t,e){var i=this;if(0===t)return this.ishowHeight=t,void this.z_method.refreshSpread();setTimeout((function(){i.ishowHeight=t,i.z_method.refreshSpread()}),400)},deep:!0},feeEdit:{handler:function(t,e){if(t){var i=t+"";i.length<=7?(i=i.split("."),i[0].length<=4?this.feeEdit=this.proving(t):this.feeEdit=e):this.feeEdit=e}else this.feeEdit=0}},remarkText:{handler:function(t,e){u["billUtils"].regRemark(t)?this.remarkText=t:this.remarkText=e}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-140:this.$store.getters.clientHeight-210}}},m=d,p=(i("c95e"),i("623f")),b=Object(p["a"])(m,l,o,!1,null,null,null),f=b.exports,y={name:"checkPackageBill",components:{summaryh:f},data:function(){return{}},methods:{}},g=y,v=Object(p["a"])(g,a,s,!1,null,"c4ec1148",null);e["default"]=v.exports},9653:function(t,e,i){},c95e:function(t,e,i){"use strict";var a=i("9653"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-48e654c6.81add9c2.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"00b8":function(e,t,a){"use strict";var i=a("a21f"),s=a.n(i);s.a},"01ad":function(e,t,a){"use strict";var i=a("fdcb"),s=a.n(i);s.a},"026b":function(e,t,a){"use strict";var i=a("ebfc"),s=a.n(i);s.a},"027d":function(e,t,a){"use strict";var i=a("416f"),s=a.n(i);s.a},"02d5":function(e,t,a){},"0335":function(e,t,a){"use strict";var i=a("5631"),s=a.n(i);s.a},"0364":function(e,t,a){},"0419":function(e,t,a){"use strict";var i=a("0468"),s=a.n(i);s.a},"0465":function(e,t,a){"use strict";var i=a("9568"),s=a.n(i);s.a},"0468":function(e,t,a){},"04a1":function(e,t,a){"use strict";var i=a("8b09"),s=a.n(i);s.a},"0551":function(e,t,a){"use strict";var i=a("0c6e"),s=a.n(i);s.a},"05ef":function(e,t,a){"use strict";var i=a("2620"),s=a.n(i);s.a},"0635":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"账户管理",name:"tab1"}},[a("account",{ref:"account"})],1),e.z_method.showBtn("btn_sendAdvances_import")?a("el-tab-pane",{attrs:{label:"导入加/扣款",name:"tab2"}},[a("manual-import",{ref:"manualImport"})],1):e._e()],1),a("div",{staticClass:"prompt"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom-start"}},[a("i",{staticClass:"el-icon-question"}),a("div",{staticStyle:{width:"400px","line-height":"1.5"},attrs:{slot:"content"},slot:"content"},[e._v("\n        预付款操作说明内容如下："),a("br"),e._v("\n        1、开户"),a("br"),e._v("\n        点击开户按钮，输入要开户的工号/客户号/客户名称，设置开户时充值金额，警戒金额，起止时间，点击保存；"),a("br"),e._v("\n        2、账户状态："),a("br"),e._v("\n        A. 扫描启用：余额大于警戒金额，账户正常使用，正常扫描；"),a("br"),e._v("\n        B. 扫描禁用：余额小于警戒金额，就是欠费了需要充值，账户正常使用，但是不能扫描；"),a("br"),e._v("\n        C. 账户冻结：点击设置按钮，自己设置的状态，相当于预付款停掉，账户没有交易往来了，但可以扫描"),a("br"),e._v("\n        3、欠费充值"),a("br"),e._v("\n        勾选要充值的对象——点击充值按钮，选择户头（来源于网点小金库，可自定义名称，相当于网点虚拟钱包的名字），充值金额，充值类型，备注，确定保存。充值余额到账时间10-20分钟，请提前充值，以免影响正常扫描；"),a("br"),e._v("\n        4、预付款扣款/扫描设置"),a("br"),e._v("\n        结算配置中心-结算规则设置，可设置自动/手动扣款及欠费限制扫描；"),a("br"),e._v("\n        5、扣款/加款"),a("br"),e._v("\n        勾选要加款/扣款的对象，进行操作，此按钮一般作用于发生在系统之外的扣款/加款操作"),a("br"),e._v("\n        6、交易流水查询"),a("br"),e._v("\n        财务管理中心-预付款流水报表，可查月汇总、日汇总和流水明细数据"),a("br"),e._v("\n        导入加/扣款操作说明内容如下："),a("br"),e._v("\n        1、页面显示为上传失败数据，可在线编辑重新上传，也可导出失败数据excel表格编辑后再次批量导入，导入失败的数据刷新/关闭页面/再次执行批量导入操作会消失，请及时编辑；"),a("br"),e._v("\n        2、可选择下载导入模板，进行批量导入操作。一次最大可导入2000条数据，建议单次导入1000条数据，此时性能最佳。导入模板填写：工号/账户名称，交易金额，交易子类型，不能为空。交易子类型来源于结算交易类型配置-费用子类型，户头来源于网点小金库的户头名称。设置准确填写导入模板，可以提升导入成功率；\n      ")])])],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("div",{staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("ul",{staticClass:"clear-both sz-search-box",attrs:{slot:"collapse"},slot:"collapse"},[a("li",[a("label",[e._v("账户状态：")]),a("el-select",{model:{value:e.accountStatus,callback:function(t){e.accountStatus=t},expression:"accountStatus"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.status,value:e.id}})})),1)],1),a("li",[a("label",[e._v("账户名称：")]),a("sc-users",{ref:"refSettlement",attrs:{type:"0",param:{inId:5==e.z_param.userType?"":e.z_param.accountId},remote:5==e.z_param.userType},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",{staticClass:"sz-search-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n            ")])],1)])])],1),a("div",{staticClass:"sz-search-btn"},[e.z_method.showBtn("btn_sendAdvances_recharge")?a("el-button",{staticClass:"green-button",attrs:{disabled:e.isDisabled,type:"primary"},on:{click:function(t){return e.opeCreditProp("chongzhi")}}},[a("span",{staticClass:"icon icon-chongzhi"}),e._v(" 充值\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_charge")?a("el-button",{staticClass:"btn red-button",attrs:{type:"primary",disabled:e.isDisabled},on:{click:function(t){return e.opeCreditProp("koukuan")}}},[a("span",{staticClass:"icon icon-koukuan"}),e._v(" 扣款\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_jiakuan")?a("el-button",{staticClass:"green-button",attrs:{type:"primary",disabled:e.isDisabled},on:{click:function(t){return e.opeCreditProp("jiakuan")}}},[a("span",{staticClass:"icon icon-chongzhi"}),e._v(" 加款\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_tixian")?a("el-button",{staticClass:"btn red-button",attrs:{type:"primary",disabled:e.isDisabled},on:{click:function(t){return e.opeCreditProp("tixian")}}},[a("span",{staticClass:"icon icon-chongzhi"}),e._v(" 提现\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_kaihu")?a("el-button",{staticClass:"btn red-button",attrs:{type:"primary"},on:{click:e.updateAccountStatus}},[a("span",{staticClass:"icon icon-chongzhi"}),e._v(" 开户\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_setUp")?a("el-button",{staticClass:"btn",attrs:{type:"primary",disabled:e.isDisabled},on:{click:function(t){return e.opeCreditProp("shezhi")}}},[a("span",{staticClass:"icon icon-set"}),e._v(" 设置\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_bathSetUp")?a("el-button",{staticClass:"btn",attrs:{disabled:e.isDisabled,type:"primary"},on:{click:e.openBathSetProp}},[e._v("批量设置\n      ")]):e._e(),e.z_method.showBtn("btn_sendAdvances_download")?a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.searchExportUtils}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")]):e._e()],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1)]),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("recharge",{ref:"refRecharge",attrs:{creditAccount:e.creditAccount,type:e.rechargeType},on:{model:e.onRecharge}}),a("deductionProp",{ref:"refDeductionProp",attrs:{creditAccount:e.creditAccount,type:e.deductionType},on:{deductionModel:e.onDeduction}}),a("account-opening",{ref:"refAccountOpen"}),a("account-set-pop",{ref:"refAccountSet",attrs:{creditAccount:e.creditAccount}}),a("account-batch-set-pop",{ref:"refBatchSet",on:{model:e.onBatch}}),a("sc-batch-process",{attrs:{title:"账户批量设置",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=a("ac0d"),c=a("4055"),u=a("391c"),d=a("a3be"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{attrs:{title:(e.type?"充值":"提现")+"提示",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1,"custom-class":e.type?"":"tixian"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticClass:"recharge"},[i("div",{staticClass:"receipt-box"},[i("ul",[i("li",[i("span",[e._v("账户：")]),i("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.accountName,callback:function(t){e.$set(e.creditAccount,"accountName",t)},expression:"creditAccount.accountName"}})],1),i("li",[i("span",[e._v("工号/客户号：")]),i("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.userCode,callback:function(t){e.$set(e.creditAccount,"userCode",t)},expression:"creditAccount.userCode"}})],1),i("li",[i("span",[e._v("户头： ")]),i("sc-account",{attrs:{popperClass:"pop-z-index"},model:{value:e.creditAccount.receiptBursaryId,callback:function(t){e.$set(e.creditAccount,"receiptBursaryId",t)},expression:"creditAccount.receiptBursaryId"}})],1),i("li",[i("span",[e._v(e._s(e.type?"充值":"提现")+"金额：")]),i("div",[i("el-input",{attrs:{type:"number",max:"9999999",maxLength:"10",min:"0"},model:{value:e.creditAccount.money,callback:function(t){e.$set(e.creditAccount,"money",t)},expression:"creditAccount.money"}}),e.type?e._e():i("p",{staticStyle:{color:"red","font-size":"12px"}},[e._v("\n                建议最大提现金额"+e._s(e.promptAmount)+"元\n              ")])],1)]),i("li",[i("span",[e._v(e._s(e.type?"充值":"提现")+"类型：")]),i("sc-fee-type",{directives:[{name:"show",rawName:"v-show",value:e.type,expression:"type"}],attrs:{type:"1",popperClass:"pop-z-index"},model:{value:e.creditAccount.feeType,callback:function(t){e.$set(e.creditAccount,"feeType",t)},expression:"creditAccount.feeType"}}),i("sc-fee-type",{directives:[{name:"show",rawName:"v-show",value:!e.type,expression:"!type"}],attrs:{popperClass:"pop-z-index",type:"4"},model:{value:e.creditAccount.feeType,callback:function(t){e.$set(e.creditAccount,"feeType",t)},expression:"creditAccount.feeType"}})],1),i("li",[i("span",[e._v("备注：")]),i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",maxlength:"100"},model:{value:e.creditAccount.remark,callback:function(t){e.$set(e.creditAccount,"remark",t)},expression:"creditAccount.remark"}})],1)])])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)]),i("el-dialog",{staticClass:"tixian",attrs:{title:"警告","modal-append-to-body":!1,visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("div",{staticClass:"caveat-box"},[i("img",{attrs:{src:a("c97b"),alt:""}}),e._v("\n      单次提现金额"),i("b",{staticStyle:{color:"red"}},[e._v("已大于等于1万元")]),e._v("，请再次确认是否对好账！\n    ")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消提现")]),i("el-button",{attrs:{type:"primary"},on:{click:e.onCaveat}},[e._v("确认提现")])],1)])],1)},m=[],p={props:{creditAccount:{type:Object,default:function(){return{accountName:"",userCode:"",receiptBursaryId:"",money:"",feeType:"",remark:""}}},type:{type:Boolean,default:!0}},data:function(){return{show:!1,centerDialogVisible:!1}},mounted:function(){},methods:{validateDealMoney:function(e){return/^\d+(\.\d{1,2})?$/.test(e)?null==e?"金额不能为空":e>9999999?"金额不能大于9999999":!(e<=0)||"金额必须大于0":"请输入有效数字且最多能输入两位小数！"},onSubmit:function(){var e=this.creditAccount,t=e.receiptBursaryId,a=e.money,i=e.feeType,s=e.remark;if(t&&""!=t){var n=this.validateDealMoney(a);!0===n?i&&""!=i?s&&s.length>100?this.msg("备注最多只能输入100个字符"):c["billUtils"].regRemark(s)?a>=1e4&&!this.type?this.centerDialogVisible=!0:this.carriedOut():this.msg("备注不能有特殊符号和表情"):this.msg("请选择充值类型"):this.msg(n)}else this.msg("请选择户头")},onCaveat:function(){this.centerDialogVisible=!1,this.carriedOut()},carriedOut:function(){this.$emit("model",this.creditAccount,"recharge")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{},computed:{promptAmount:function(){var e=this.creditAccount,t=e.balanceMoney,a=e.guardMoney,i=a<0?0:a,s=t-i;return s>0?s:0}}},b=p,f=(a("397f"),a("210d"),a("623f")),y=Object(f["a"])(b,h,m,!1,null,"77a652e8",null),v=y.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:(e.type?"扣款":"加款")+"提示",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1,"custom-class":e.type?"koukuan":""},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("span",[e._v("账户：")]),a("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.accountName,callback:function(t){e.$set(e.creditAccount,"accountName",t)},expression:"creditAccount.accountName"}})],1),a("li",[a("span",[e._v("工号/客户号：")]),a("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.userCode,callback:function(t){e.$set(e.creditAccount,"userCode",t)},expression:"creditAccount.userCode"}})],1),a("li",[a("span",[e._v("单号/包号： ")]),a("el-input",{attrs:{maxlength:"30 "},model:{value:e.creditAccount.billCode,callback:function(t){e.$set(e.creditAccount,"billCode",t)},expression:"creditAccount.billCode"}})],1),a("li",[a("span",[e._v(e._s(e.type?"扣款":"加款")+"金额：")]),a("el-input",{attrs:{type:"number",max:"9999999",maxlength:"10",min:"0"},model:{value:e.creditAccount.money,callback:function(t){e.$set(e.creditAccount,"money",t)},expression:"creditAccount.money"}})],1),a("li",[a("span",[e._v(e._s(e.type?"扣款":"加款")+"类型：")]),a("sc-fee-type",{directives:[{name:"show",rawName:"v-show",value:e.type,expression:"type"}],attrs:{type:"2",popperClass:"pop-z-index"},model:{value:e.creditAccount.feeType,callback:function(t){e.$set(e.creditAccount,"feeType",t)},expression:"creditAccount.feeType"}}),a("sc-fee-type",{directives:[{name:"show",rawName:"v-show",value:!e.type,expression:"!type"}],attrs:{popperClass:"pop-z-index",type:"3"},model:{value:e.creditAccount.feeType,callback:function(t){e.$set(e.creditAccount,"feeType",t)},expression:"creditAccount.feeType"}})],1),a("li",[a("span",[e._v("备注：")]),a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",maxlength:"100"},model:{value:e.creditAccount.remark,callback:function(t){e.$set(e.creditAccount,"remark",t)},expression:"creditAccount.remark"}})],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)])},C=[],x={props:{creditAccount:{type:Object,default:function(){return{accountName:"",userCode:"",receiptBursaryId:"",money:"",feeType:"",remark:"",billCode:""}}},type:{type:Boolean,default:!0}},data:function(){return{show:!1,refreshRechage:!0}},mounted:function(){},methods:{validatemoney:function(e){return/^\d+(\.\d{1,2})?$/.test(e)?null==e?"金额不能为空":e>9999999?"金额不能大于9999999":!(e<=0)||"金额必须大于0":"请输入有效数字且最多能输入两位小数！"},onSubmit:function(){var e=this.creditAccount,t=e.billCode,a=e.money,i=e.feeType,s=e.remark;if("undefined"!=typeof t&&""!=t&&!/^[0-9a-zA-Z]+$/.test(t))return this.msg("运单号只能是数字或字母");var n=this.validatemoney(a);!0===n?i&&""!=i?s&&s.length>100?this.msg("备注最多只能输入100个字符"):c["billUtils"].regRemark(s)?this.$emit("deductionModel",this.creditAccount,"deduction"):this.msg("备注不能有特殊符号和表情"):this.msg("请选择充值类型"):this.msg(n)},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{}},k=x,D=(a("d6ca"),a("8d23"),Object(f["a"])(k,g,C,!1,null,"f90845a2",null)),w=D.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"开户",visible:e.show,width:"680px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("span",[e._v("工号/客户号：")]),a("sc-users",{attrs:{type:"4",popperClass:"pop-z-index"},model:{value:e.parameter.id,callback:function(t){e.$set(e.parameter,"id",t)},expression:"parameter.id"}})],1),a("li",[a("span",[a("el-checkbox",{model:{value:e.parameter.ischecked,callback:function(t){e.$set(e.parameter,"ischecked",t)},expression:"parameter.ischecked"}},[e._v("开户时充值：")])],1),a("el-input",{attrs:{disabled:!e.parameter.ischecked,maxlength:"10"},model:{value:e.parameter.openMoney,callback:function(t){e.$set(e.parameter,"openMoney",t)},expression:"parameter.openMoney"}}),e._v("\n          元\n        ")],1),a("li",[a("span",[e._v("警戒金额：")]),a("el-input",{attrs:{maxlength:"11"},model:{value:e.parameter.money,callback:function(t){e.$set(e.parameter,"money",t)},expression:"parameter.money"}}),e._v("元\n        ")],1),a("li",{directives:[{name:"show",rawName:"v-show",value:e.parameter.ischecked,expression:"parameter.ischecked"}]},[a("span",[e._v("哪个户头收的款：")]),a("sc-account",{ref:"refScAccount",attrs:{popperClass:"pop-z-index",isDefaultId:!0},model:{value:e.parameter.receiptBursaryId,callback:function(t){e.$set(e.parameter,"receiptBursaryId",t)},expression:"parameter.receiptBursaryId"}})],1),a("li",{directives:[{name:"show",rawName:"v-show",value:e.parameter.ischecked,expression:"parameter.ischecked"}]},[a("span",[e._v("什么方式收的款：")]),a("sc-fee-type",{attrs:{type:"1",popperClass:"pop-z-index"},model:{value:e.parameter.feeType,callback:function(t){e.$set(e.parameter,"feeType",t)},expression:"parameter.feeType"}})],1),a("li",{staticClass:"w100"},[a("span",[e._v("入预付款起止日期：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.parameter.deductionStartDate,callback:function(t){e.$set(e.parameter,"deductionStartDate",t)},expression:"parameter.deductionStartDate"}}),a("i",{staticStyle:{width:"auto"}},[e._v("至")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.parameter.deductionEndDate,callback:function(t){e.$set(e.parameter,"deductionEndDate",t)},expression:"parameter.deductionEndDate"}})],1)]),a("div",{staticClass:"message"},[e._v("\n        入预付款起止日期说明："),a("br"),e._v("\n        1、根据账单时间判定入预付款起止日期！"),a("br"),e._v("\n        2、不在起止日期内时，预付款不会发生任何变化！\n      ")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消开户")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("开始开户")])],1)])},N=[];function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={props:{},data:function(){return{show:!1,parameter:{id:"",openMoney:0,receiptBursaryId:"",money:0,deductionStartDate:"",deductionEndDate:"",feeType:2017,ischecked:!1},parameterClone:{}}},mounted:function(){this.parameterClone=Object(u["cloneDeep"])(this.parameter)},methods:{onSubmit:function(){var e=this,t=this.parameter,a=t.id,i=t.money,s=t.openMoney,n=t.ischecked,l=t.receiptBursaryId,o=t.feeType,r=t.deductionStartDate,c=t.deductionEndDate;if(void 0!=a&&""!==a)if(/^\-*(\d)+(\.\d{1,2})?$/.test(i)){if(i>9999999)return this.msg("警戒金额不能大于9999999");if(i<-9999999)return this.msg("警戒金额不能小于-9999999");if(/^\d+(\.\d{1,2})?$/.test(s))if(n&&(s<=0||s>9999999))this.msg("充值金额要＞0且≤9999999且最多两位小数");else if(!n||l)if(!n||o)if(r&&c)if(this.moment(r).isAfter(c,"day"))this.msg("开始日期不能大于结束日期");else{var u=I({},this.parameter,{deductionStartDate:this.moment(r).format("YYYY-MM-DD"),deductionEndDate:this.moment(c).format("YYYY-MM-DD"),ischecked:n?1:0});Object(d["ec"])(u).then((function(t){0===t.code?(e.msg("开户成功","success"),e.show=!1,e.$parent.onSearch()):e.msg(t.message,"error")}))}else this.msg("起止日期不能为空");else this.msg("'什么方式付的款'为必选项");else this.msg("'哪个户头收的款'为必选项");else this.msg("请输入有效的充值金额且最多能输入两位小数！")}else this.msg("请输入有效的警戒金额且最多能输入两位小数！");else this.msg("请选择工号客户号")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{show:function(e,t){e||(this.parameter=Object(u["cloneDeep"])(this.parameterClone))}}},E=O,z=(a("efe0"),a("4f7e"),Object(f["a"])(E,S,N,!1,null,"3deaa6de",null)),F=z.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"账户设置",visible:e.show,width:"680px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("span",[e._v("账户：")]),a("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.accountName,callback:function(t){e.$set(e.creditAccount,"accountName",t)},expression:"creditAccount.accountName"}})],1),a("li",[a("span",[e._v("工号/客户号：")]),a("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.userCode,callback:function(t){e.$set(e.creditAccount,"userCode",t)},expression:"creditAccount.userCode"}})],1),a("li",[a("span",[e._v("金额：")]),a("el-input",{attrs:{disabled:""},model:{value:e.creditAccount.balanceMoney,callback:function(t){e.$set(e.creditAccount,"balanceMoney",t)},expression:"creditAccount.balanceMoney"}})],1),a("li",[a("span",[e._v("警戒金额：")]),a("el-input",{attrs:{maxlength:"11"},model:{value:e.creditAccount.guardMoney,callback:function(t){e.$set(e.creditAccount,"guardMoney",t)},expression:"creditAccount.guardMoney"}}),e._v("元\n        ")],1),a("li",{staticClass:"w100"},[a("span",[e._v("账户状态：")]),a("p",{staticClass:"sendAdvanceStatusZero"},[a("el-radio-group",{model:{value:e.creditAccount.status,callback:function(t){e.$set(e.creditAccount,"status",t)},expression:"creditAccount.status"}},[1!=e.creditAccount.oldStatus?a("el-radio-button",{attrs:{label:0}},[e._v("扫描启用")]):e._e(),a("el-radio-button",{attrs:{label:3}},[e._v("账户冻结")])],1),3===e.creditAccount.status?a("el-radio",{staticStyle:{"margin-left":"25px"},attrs:{label:"1"},model:{value:e.statusZero,callback:function(t){e.statusZero=t},expression:"statusZero"}},[e._v("账户余额清零")]):e._e(),3===e.creditAccount.status?a("el-radio",{attrs:{label:"0"},model:{value:e.statusZero,callback:function(t){e.statusZero=t},expression:"statusZero"}},[e._v("账户余额不清零")]):e._e()],1)]),a("li",{staticClass:"w100"},[a("span",[e._v("入预付款起止日期：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.creditAccount.deductionStartDate,callback:function(t){e.$set(e.creditAccount,"deductionStartDate",t)},expression:"creditAccount.deductionStartDate"}}),a("i",{staticStyle:{width:"auto"}},[e._v("至")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.creditAccount.deductionEndDate,callback:function(t){e.$set(e.creditAccount,"deductionEndDate",t)},expression:"creditAccount.deductionEndDate"}})],1)]),a("div",{staticClass:"message"},[e._v("\n        入预付款起止日期说明："),a("br"),e._v("\n        1、根据账单时间判定入预付款起止日期！"),a("br"),e._v("\n        2、不在起止日期内时，预付款不会发生任何变化！"),a("br"),e._v("\n        3、选择账户冻结时，请确认是否需要预付款账户余额清零。\n      ")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消设置")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存设置")])],1)])},P=[];function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $={props:{creditAccount:{type:Object,default:function(){return{accountName:"",userCode:"",guardMoney:"",status:"",statusZero:"0",oldStatus:"",balanceMoney:"",deductionStartDate:"",deductionEndDate:""}}}},data:function(){return{show:!1,statusZero:this.creditAccount.statusZero}},mounted:function(){},methods:{onSubmit:function(){var e=this,t=this.creditAccount,a=t.guardMoney,i=t.deductionEndDate,s=t.deductionStartDate;if(null==a)return"金额不能为空";if(!/^\-*(\d)+(\.\d{1,2})?$/.test(a))return this.msg("请输入有效数字且最多能输入两位小数！");if(a>9999999)return this.msg("金额不能大于9999999");if(a<-9999999)return this.msg("金额不能小于-9999999");if(this.moment(s).isAfter(i,"day"))this.msg("开始时间不能大于结束时间");else if(null==s&&null==i||null==s&&""==i||""==s&&null==i||s&&i||""==s&&""==i){console.log("时间正确");var n=j({},this.creditAccount,{reset:this.statusZero,deductionStartDate:""==s?"":this.moment(s).format("YYYY-MM-DD"),deductionEndDate:""==i?"":this.moment(i).format("YYYY-MM-DD")});Object(d["cc"])(n).then((function(t){0===t.code?(e.msg("设置成功","success"),e.show=!1,e.$parent.onSearch()):e.msg(t.message,"error")}))}else this.msg("时间选择错误")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{creditAccount:{immediate:!0,handler:function(e,t){console.log("ab"),this.statusZero="0"}},"creditAccount.status":{immediate:!0,handler:function(e,t){console.log("ab"),this.statusZero="0"}}}},H=$,V=(a("a172"),a("6c8c"),Object(f["a"])(H,M,P,!1,null,"0fa58504",null)),R=V.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"账户批量设置",visible:e.show,width:"680px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",{staticStyle:{"margin-left":"50px"}},[a("li",{staticClass:"w100"},[a("span",[e._v("警戒金额：")]),a("p",[a("el-input",{attrs:{maxlength:"11"},model:{value:e.creditAccount.guardMoney,callback:function(t){e.$set(e.creditAccount,"guardMoney",t)},expression:"creditAccount.guardMoney"}}),e._v("元")],1)]),a("li",{staticClass:"w100"},[a("span",[e._v("账户状态：")]),a("p",{staticClass:"sendAdvanceStatusZero"},[a("el-radio-group",{model:{value:e.creditAccount.status,callback:function(t){e.$set(e.creditAccount,"status",t)},expression:"creditAccount.status"}},[a("el-radio-button",{attrs:{label:0}},[e._v("扫描启用")]),a("el-radio-button",{attrs:{label:3}},[e._v("账户冻结")])],1),3===e.creditAccount.status?a("el-radio",{staticStyle:{"margin-left":"25px"},attrs:{label:"1"},model:{value:e.statusZero,callback:function(t){e.statusZero=t},expression:"statusZero"}},[e._v("账户余额清零")]):e._e(),3===e.creditAccount.status?a("el-radio",{attrs:{label:"0"},model:{value:e.statusZero,callback:function(t){e.statusZero=t},expression:"statusZero"}},[e._v("账户余额不清零")]):e._e()],1)]),a("li",{staticClass:"w100"},[a("span",[e._v("入预付款起止日期：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.creditAccount.deductionStartDate,callback:function(t){e.$set(e.creditAccount,"deductionStartDate",t)},expression:"creditAccount.deductionStartDate"}}),a("i",{staticStyle:{width:"auto"}},[e._v("至")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.creditAccount.deductionEndDate,callback:function(t){e.$set(e.creditAccount,"deductionEndDate",t)},expression:"creditAccount.deductionEndDate"}})],1)]),a("div",{staticClass:"message"},[e._v("\n        入预付款起止日期说明："),a("br"),e._v("\n        1、根据账单时间判定入预付款起止日期！"),a("br"),e._v("\n        2、不在起止日期内时，预付款不会发生任何变化！"),a("br"),e._v("\n        3、选择账户冻结时，请确认是否需要预付款账户余额清零。\n      ")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")])],1)])},U=[];function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W={data:function(){return{show:!1,statusZero:"0",creditAccount:{guardMoney:0,status:"",deductionStartDate:"",deductionEndDate:""},creditAccountClone:{}}},mounted:function(){this.creditAccountClone=Object(u["cloneDeep"])(this.creditAccount)},methods:{onSubmit:function(){var e=this.creditAccount,t=e.guardMoney,a=e.deductionEndDate,i=e.deductionStartDate;if(null==t)return"金额不能为空";if(!/^\-*(\d)+(\.\d{1,2})?$/.test(t))return this.msg("请输入有效警戒金额且最多能输入两位小数！");if(t>9999999)return this.msg("警戒金额不能大于9999999");if(t<-9999999)return this.msg("警戒金额不能小于-9999999");if(this.moment(i).isAfter(a,"day"))this.msg("开始时间不能大于结束时间");else if(""!==this.creditAccount.status)if(null==i&&null==a||null==i&&""==a||""==i&&null==a||i&&a||""==i&&""==a){console.log("时间正确");var s=B({},this.creditAccount,{reset:this.statusZero,deductionStartDate:""!=i?this.moment(i).format("YYYY-MM-DD"):"",deductionEndDate:""!=a?this.moment(a).format("YYYY-MM-DD"):""});this.show=!1,this.$emit("model",s)}else this.msg("时间选择错误");else this.msg("请选择账户状态")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{"creditAccount.status":{immediate:!0,handler:function(e,t){console.log("ab"),this.statusZero="0"}},show:function(e,t){e||(this.creditAccount=Object(u["cloneDeep"])(this.creditAccountClone))}}},L=W,G=(a("4eff"),a("eabf"),Object(f["a"])(L,q,U,!1,null,"f72e0e12",null)),Z=G.exports;function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X={mixins:[r["b"],r["a"]],components:{recharge:v,deductionProp:w,accountOpening:F,accountSetPop:R,accountBatchSetPop:Z},data:function(){var e=this;return{collapseHeight:0,batchUrl:"/basic/account/updateAccount",requestUrl:"/basic/account/querySiteAccount",exportObj:{visible:!1,sum:1,current:0,fileName:"业务员预付款-账户管理",excelData:[]},dialogVisible:!1,batchData:[],columns:[{displayName:"账户名称",name:"accountName"}],rechargeType:!0,deductionType:!0,creditAccount:{accountName:"",userCode:"",receiptBursaryId:"",money:"",feeType:"",remark:"",types:"",billCode:""},creditAccountClone:this.creditAccount,settlementId:"",accountStatus:0,statusList:[{id:-1,status:"全部"},{id:0,status:"扫描启用"},{id:1,status:"扫描禁用"},{id:3,status:"账户冻结"}],tableData:[],currRow:[],tableHead:{columns:[{displayName:"选择",name:"check",allCheck:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,size:50,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"账户编码",name:"accountCode",width:120,isCode:!0},{displayName:"账户名称",name:"accountName",width:120},{displayName:"工号/客户号",name:"userCode",isCode:!0},{displayName:"金额",name:"balanceMoney",showTotal:!0},{displayName:"警戒金额",name:"guardMoney",showTotal:!0},{displayName:"账户状态",name:"status",value:function(t){return c["billUtils"].dict(e.statusList,t.status,"id","status")}},{displayName:"创建人",name:"creator",value:function(e){return"admin"===e.creator?"":e.creator}},{displayName:"创建时间",name:"gmtCreate",formatter:"yyyy-MM-dd hh:mm:ss",size:120},{displayName:"入预付款开始日期",name:"deductionStartDate",formatter:"yyyy-MM-dd",size:120},{displayName:"入预付款结束日期",name:"deductionEndDate",formatter:"yyyy-MM-dd",size:120},{displayName:"修改人",name:"editor",value:function(e){return"admin"===e.editor?"":e.editor}},{displayName:"修改时间",name:"gmtModified",formatter:"yyyy-MM-dd hh:mm:ss",size:120}]}}},mounted:function(){this.onSearch()},methods:{onSearch:function(){this.currRow=[],this.pagination.currentPage=1;var e={status:this.accountStatus,id:this.settlementId,currentPage:1,pageSize:this.pagination.pageSize};this.optionsClone=Object(u["cloneDeep"])(e),this.query(e)},query:function(e){var t=this;Object(d["nb"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))}))},checkboxAllClick:function(e){this.filterCurrRow([],e)},filterCurrRow:function(e,t){this.currRow=Object(u["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},opeCreditProp:function(e){var t=this,a=this.currRow.length;if(a>1||0===a)this.msg("只能选择一条数据");else{var i=this.currRow[0];3!=i.status||"shezhi"==e?Object(d["hb"])(i.id).then((function(a){if(0===a.code){var s=a.data,n=J({},t.creditAccountClone,{accountName:s.accountName,userCode:s.userCode,id:s.id,balanceMoney:s.balanceMoney,guardMoney:s.guardMoney});t.creditAccount=n;var l=i.deductionStartDate,o=i.deductionEndDate;switch(e){case"chongzhi":t.creditAccount.operType=1,t.rechargeType=!0,t.$refs.refRecharge.show=!0;break;case"tixian":t.creditAccount.operType=1,t.rechargeType=!1,t.$refs.refRecharge.show=!0;break;case"koukuan":if(t.creditAccount.operType=0,null!=l&&null!=o&&(Date.now()<i.deductionStartDate||Date.now()>i.deductionEndDate+86399e3))return void t.msg("超出该账户设定有效期，该操作无法进行!","error");t.deductionType=!0,t.$refs.refDeductionProp.show=!0;break;case"jiakuan":if(t.creditAccount.operType=0,null!=l&&null!=o&&(Date.now()<l||Date.now()>o+86399e3))return void t.msg("超出该账户设定有效期，该操作无法进行!","error");t.deductionType=!1,t.$refs.refDeductionProp.show=!0;break;case"shezhi":t.creditAccount=J({},t.creditAccount,{oldStatus:s.status,status:s.status,statusZero:"0",deductionEndDate:"",deductionStartDate:""}),t.$refs.refAccountSet.show=!0;break;default:break}}else t.msg(a.message)})):this.msg("该账户已被冻结,无法执行该操作")}},onRecharge:function(e,t){this.updateAccountMoney(e,t)},onDeduction:function(e,t){this.updateAccountMoney(e,t)},updateAccountMoney:function(e,t){var a=this;Object(d["dc"])(e).then((function(e){0===e.code?(a.msg("成功","success"),"deduction"==t?a.$refs.refDeductionProp.show=!1:a.$refs.refRecharge.show=!1,a.onSearch(),a.currRow=[]):a.msg(e.message)}))},updateAccountStatus:function(){this.$refs.refAccountOpen.show=!0},openBathSetProp:function(){0!==this.currRow.length?this.$refs.refBatchSet.show=!0:this.msg("请选择数据")},onBatch:function(e){var t=e.guardMoney,a=e.deductionEndDate,i=e.deductionStartDate,s=e.status,n=e.reset;this.batchData=Object(u["cloneDeep"])(this.currRow),this.batchData.map((function(e){e.guardMoney=t,e.deductionEndDate=a,e.deductionStartDate=i,e.status=s,e.reset=n,e.gmtModified&&delete e.gmtModified})),this.dialogVisible=!0},close:function(e){this.dialogVisible=!1,this.batchData=[],this.onSearch()},searchExportUtils:function(){0!==this.tableData.length?this.searchExport():this.msg("请先查询有数据的")}},watch:{contentHeight:function(){this.z_method.refreshSpread()}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-160:this.z_param.isNode?this.$store.getters.clientHeight-260+this.collapseHeight:this.$store.getters.clientHeight-190+this.collapseHeight},isDisabled:function(){return 0===this.currRow.length}}},K=X,ee=(a("e5b6"),Object(f["a"])(K,n,l,!1,null,"75dffab4",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"manual-box"},[a("div",{staticClass:"import-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.batchImport}},[e._v("批量导入")]),a("a",{staticClass:"download-btn",attrs:{href:"../attachment/template/advances.xlsx",download:"预付款账户导入模板"}},[a("el-button",{attrs:{type:"primary",disabled:e.downloadDisabled},on:{click:e.downloadBoard}},[e._v("下载导入模板")])],1),a("el-button",{attrs:{type:"primary"},on:{click:e.editImport}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reUpload}},[e._v("重新上传")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.errorDataExport}},[e._v("导出失败数据")])],1),a("div",{staticClass:"import-content-box"},[a("el-table",{ref:"importDataTable",attrs:{height:e.contentHeight,data:e.tableData,border:!0},on:{"selection-change":e.tableSelect}},[a("el-table-column",{attrs:{type:"index",width:"60",align:"center",label:"序号"}}),a("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._l(e.tableColumns,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.name,label:e.displayName,align:"center"}})}))],2)],1),a("sz-import",{ref:"batchImportRef",attrs:{columns:e.importParams.columns,"batch-url":e.importParams.batchUrl,"data-validate":e.dataValidate,"update-data":e.importParams.updateData},on:{model:e.close}}),a("el-dialog",{attrs:{title:"编辑","modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.editDialogVisible,"before-close":e.editHandleClose,width:"500px"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("div",[a("div",{staticClass:"form-input"},[a("span",{staticClass:"label"},[e._v("单号")]),a("el-input",{staticClass:"short-input",attrs:{maxlength:"20"},model:{value:e.editForm.billCode,callback:function(t){e.$set(e.editForm,"billCode",t)},expression:"editForm.billCode"}})],1),a("div",{staticClass:"tip"},[e._v("交易类型为充值或提现时，无需填写单号")]),a("div",{staticClass:"form-input"},[a("span",{staticClass:"label"},[e._v("工号/客户名称")]),a("sc-users",{staticClass:"short-input",attrs:{type:"0",popperClass:"pop-z-index",placeholder:"",param:{inId:5==e.z_param.userType?"":e.z_param.accountId},remote:5==e.z_param.userType},on:{change:e.accountNameChange},model:{value:e.otherParam.userCode,callback:function(t){e.$set(e.otherParam,"userCode",t)},expression:"otherParam.userCode"}})],1),a("div",{staticClass:"form-input"},[a("span",{staticClass:"label"},[e._v("交易金额")]),a("el-input",{staticClass:"short-input",attrs:{maxlength:"50"},model:{value:e.editForm.dealMoney,callback:function(t){e.$set(e.editForm,"dealMoney",t)},expression:"editForm.dealMoney"}})],1),a("div",{staticClass:"form-input"},[a("span",{staticClass:"label"},[e._v("交易子类型")]),a("trade-child-type",{staticClass:"short-input",model:{value:e.editForm.feeTypes,callback:function(t){e.$set(e.editForm,"feeTypes",t)},expression:"editForm.feeTypes"}})],1),a("div",{staticClass:"form-input"},[a("span",{staticClass:"label"},[e._v("户头")]),a("sc-account",{staticClass:"short-input",attrs:{popperClass:"pop-z-index",placeholder:"",clearable:!0},on:{change:e.accountChange},model:{value:e.otherParam.receiptBursary,callback:function(t){e.$set(e.otherParam,"receiptBursary",t)},expression:"otherParam.receiptBursary"}})],1),a("div",{staticClass:"form-input special-form-input"},[a("span",{staticClass:"label"},[e._v("备注")]),a("el-input",{staticClass:"short-input",attrs:{type:"textarea",placeholder:"最多可输入150字",rows:4,resize:"none",maxlength:"150"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.editHandleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitEdit}},[e._v("确 定")])],1)])],1)},ie=[],se=a("d9ba"),ne=(a("47e7"),a("cc57"),a("163d"),a("f548"),a("54d0")),le=(a("ed63"),a("8cf2"),a("ce69")),oe=a.n(le),re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-settlement-component del-arrow-up"},[a("el-select",{ref:"szSettlementSelect",attrs:{clearable:e.clearable,filterable:!0,"filter-method":e.remote,disabled:e.disabled,"no-match-text":" ",placeholder:e.placeholder,popperClass:e.popperClass},on:{change:e.changeItem,clear:e.clear,blur:e.blur},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.feeName,value:e.feeName}})})),1)],1)},ce=[],ue={name:"tradeChildType",props:{value:{type:[Number,String]},default:[Number,String],clearable:{type:Boolean,default:!0},placeholder:{type:String,default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value,options:[],globalOptions:[]}},mounted:function(){this.getSettlement()},methods:{remote:_.debounce((function(e){this.getSettlement(e)}),1e3),getSettlement:function(e){var t=this,a={sign:-1,parentId:-1,feeName:e};Object(d["z"])(a).then((function(e){e.data&&e.data.length>0?(t.options=e.data,0===t.globalOptions.length&&(t.globalOptions=e.data)):t.options=[]})).catch((function(e){}))},changeItem:function(e){var t=this.options.filter((function(t){return t.id==e}));t[0]&&t[0];this.$emit("input",this.inputValue),this.$emit("model",this.chooseObj)},chooseOne:function(e,t,a){var i=this,s={sign:-1,parentId:-1,feeName:e};Object(d["z"])(s).then((function(e){if(e.data&&e.data.length>0){var s;(s=i.options).push.apply(s,Object(ne["a"])(e.data)),i.options=i.options.concat(i.options);var n={};i.options=i.options.reduce((function(e,t){return n[t.id]||(n[t.id]=!0,e.push(t)),e}),[]);var l=i.options.filter((function(e){return e.id==t})),o=l[0]?l[0]:null;null==o?(i.$emit("input",""),i.inputValue=""):(i.$emit("input",t),i.inputValue=t)}a(self,i.inputValue)}))},blur:function(){var e=this;0===this.options.length&&setTimeout((function(){e.options=e.globalOptions}),1e3)},autoBlur:function(){this.$refs.szSettlementSelect&&(this.$refs.szSettlementSelect.visible=!1)},clear:function(){this.inputValue="",this.getSettlement()},msg:function(e){this.$message({showClose:!0,message:e,type:"warning",duration:3e3})}},watch:{value:function(e,t){""==e&&this.clear(),this.inputValue=e,this.$emit("input",e)}}},de=ue,he=Object(f["a"])(de,re,ce,!1,null,"6f5ccda4",null),me=he.exports,pe={name:"manualImport",components:{tradeChildType:me},computed:{tableColumns:function(){var e=[];return e=Object(u["cloneDeep"])(this.importParams.columns),e.push({displayName:"失败原因",name:"msg"}),e.push({displayName:"上传时间",name:"updateTime"}),e},contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-180:this.z_param.isNode?this.$store.getters.clientHeight-240:this.$store.getters.clientHeight-180}},data:function(){return{tableData:[],importParams:{columns:[{displayName:"单号",name:"billCode",size:120},{displayName:"工号/账户名称",name:"userCode",size:120},{displayName:"交易金额",name:"dealMoney",size:80},{displayName:"交易子类型",name:"feeTypes",size:80},{displayName:"户头",name:"receiptBursary",size:100},{displayName:"备注",name:"remark",size:100}],batchUrl:"/basic/account/import",updateData:[]},selection:[],editDialogVisible:!1,editForm:{billCode:"",userCode:"",dealMoney:"",feeTypes:"",receiptBursary:"",remark:""},btnDisabled:!1,downloadDisabled:!1,otherParam:{receiptBursary:"",userCode:""}}},methods:{batchImport:function(){this.$refs.batchImportRef.import(),this.tableData=[]},close:function(e){if(0!==e.length){var t=e.filter((function(e){return 2===e.importStatus&&0!==e.resultCode}));if(this.tableData.length>0&&this.tableData.length>this.selection.length){var a=this.selection.map((function(e){return e.index})),i=this.tableData.filter((function(e){return!a.includes(e.index)}));t.push.apply(t,Object(ne["a"])(i)),this.tableData=t}else this.tableData=t;this.tableData.map((function(e,t){e.index=t}))}},dataValidate:function(e){return new Promise((function(t,a){var i="";null!=e.userCode&&""!=e.userCode||(i="工号/账户名称不能为空!"),null==e.dealMoney?i+="交易金额不能为空!":(/^\d+(\.\d{1,2})?$/.test(e.dealMoney)||(i+="交易金额必须为有效数字且最多能输入两位小数!"),e.dealMoney>9999999&&(i+="金额不能大于9999999!"),e.dealMoney<=0&&(i+="金额必须大于0!")),e.feeTypes||(i+="交易子类型不能为空!"),e.remark&&e.remark.length>150&&(i+="备注不能超过150个字符!"),i?a(i):(e.userCode=String(e.userCode),e.userCode=e.userCode.replace(/[(\n)+]|[(\r\n)+]/g,""),t(e))}))},tableSelect:function(e){this.selection=e},dataCheckNull:function(){return this.selection.length<1&&(this.$message({message:"请选择勾选数据再操作",type:"warning",showClose:!0}),!0)},editImport:function(){this.dataCheckNull()||(this.editDialogVisible=!0)},reUpload:function(){this.dataCheckNull()||(this.importParams.updateData=Object(u["cloneDeep"])(this.selection))},editHandleClose:function(){this.editForm={billCode:"",userCode:"",dealMoney:"",feeTypes:"",receiptBursary:"",remark:""},this.otherParam={receiptBursary:"",userCode:""},this.editDialogVisible=!1},submitEdit:function(){var e=this;if(this.editForm.billCode||this.editForm.userCode||this.editForm.dealMoney||this.editForm.feeTypes||this.editForm.receiptBursary||this.editForm.remark)if(""!==this.editForm.billCode&&/[^a-zA-Z0-9]/g.test(this.editForm.billCode))this.$message({message:"单号只允许输入数字或字母",type:"warning",showClose:!0});else if(!this.editForm.dealMoney||/^\d+(\.\d{1,2})?$/.test(this.editForm.dealMoney))if(this.editForm.dealMoney&&this.editForm.dealMoney>9999999)this.$message({message:"交易金额不能大于9999999",type:"warning",showClose:!0});else if(this.editForm.dealMoney&&this.editForm.dealMoney<=0)this.$message({message:"交易金额必须大于0",type:"warning",showClose:!0});else if(!this.editForm.remark||c["billUtils"].regRemark(this.editForm.remark)){this.editForm.dealMoney&&(this.editForm.dealMoney=Number(this.editForm.dealMoney));var t={};Object.keys(this.editForm).forEach((function(a){Object(u["trim"])(e.editForm[a])&&(t[a]=Object(u["trim"])(e.editForm[a]))})),this.selection.forEach((function(a){Object.keys(t).forEach((function(i){e.$set(e.tableData[a.index],i,t[i])}))})),this.editDialogVisible=!1,this.editForm={billCode:"",userCode:"",dealMoney:"",feeTypes:"",receiptBursary:"",remark:""},this.otherParam={receiptBursary:"",userCode:""}}else this.$message({message:"备注只能输入数字或字母或中文或常见符号!",type:"warning",showClose:!0});else this.$message({message:"交易金额必须为有效数字且最多能输入两位小数",type:"warning",showClose:!0});else this.$message({message:"不可全部为空",type:"warning",showClose:!0})},errorDataExport:function(){var e=this;if(0!==this.tableData.length){this.btnDisabled=!0;var t=Object(u["cloneDeep"])(this.tableColumns),a=Object(u["cloneDeep"])(this.tableData),i=[];t.forEach((function(e){i.push(e.displayName)}));var s=[];s.push(i);for(var n=function(e){var i=[];t.forEach((function(t){void 0!==a[e][t.name]?i.push(a[e][t.name]):i.push("")})),s.push(i)},l=0;l<a.length;l++)n(l);var o=oe.a.utils.aoa_to_sheet(s);this.openDownloadDialog(this.sheet2blob(o),"预付款账户导入模板.xlsx"),setTimeout((function(){e.btnDisabled=!1}),1500)}else this.$message({message:"没有数据无法导出",type:"warning",showClose:!0})},sheet2blob:function(e,t){t=t||"sheet1";var a={SheetNames:[t],Sheets:{}};a.Sheets[t]=e;var i={bookType:"xlsx",bookSST:!1,type:"binary"},s=oe.a.write(a,i),n=new Blob([l(s)],{type:"application/octet-stream"});function l(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),i=0;i!==e.length;++i)a[i]=255&e.charCodeAt(i);return t}return n},openDownloadDialog:function(e,t){"object"==Object(se["a"])(e)&&e instanceof Blob&&(e=URL.createObjectURL(e));var a,i=document.createElement("a");i.href=e,i.download=t||"",window.MouseEvent?a=new MouseEvent("click"):(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null)),i.dispatchEvent(a)},downloadBoard:function(){var e=this;this.downloadDisabled=!0,setTimeout((function(){e.downloadDisabled=!1}),1500)},accountChange:function(e){this.editForm.receiptBursary=e?e.accountName:""},accountNameChange:function(e){this.editForm.userCode=e.name}},watch:{}},be=pe,fe=(a("30bb"),Object(f["a"])(be,ae,ie,!1,null,"32687d0c",null)),ye=fe.exports,ve={name:"sendAdvances",components:{account:te,manualImport:ye},data:function(){return{activeName:"tab1"}},mounted:function(){},methods:{onTabClick:function(){this.z_method.refreshSpread()}},watch:{}},ge=ve,Ce=(a("5694"),Object(f["a"])(ge,i,s,!1,null,"546f606a",null));t["default"]=Ce.exports},"0828":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"日汇总",name:"tab1"}},[a("summaryH",{attrs:{bilTypes:e.bilType},on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2",lazy:""}},[a("detailH",{ref:"detailed",attrs:{bilTypes:e.bilType}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main detail added-weight-feeNew"},[a("div",{staticClass:"addedWeightFee sz-search"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("ul",{staticClass:"clear-both sz-search-box",attrs:{slot:"collapse"},slot:"collapse"},[a("li",{staticClass:"detail-li1"},[a("sc-bill-code",{model:{value:e.billCode,callback:function(t){e.billCode="string"===typeof t?t.trim():t},expression:"billCode"}})],1),a("li",{staticClass:"detail-li2",staticStyle:{"flex-direction":"column","align-items":"flex-start","justify-content":"center"}},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:" "},[e._v("签收时间：")]),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:" "},[e._v("目的地省：")]),a("sc-province",{model:{value:e.provinceId,callback:function(t){e.provinceId=t},expression:"provinceId"}})],1)]),a("ul",{staticClass:"clear-both"},[a("li",[a("label",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dateType,callback:function(t){e.dateType=t},expression:"dateType"}},e._l(e.dateTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1)])]),a("li",[a("el-button",{attrs:{type:"danger"},on:{click:e.onReset}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 重置 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1)])])],1),a("div",{staticClass:"sz-search-btn",staticStyle:{"justify-content":"flex-end","padding-right":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExportDetail}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n    ")])],1),a("div",{style:{height:e.contentHeight+e.collapseHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticStyle:{position:"absolute",right:"0",bottom:"-20px"}},[e.billCode.length<1?a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}}):e._e()],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:"对有偿/续重派费-明细-",exportUrl:"/bills/new/sendaBills/checkExport",exportOption:e.optionsClone}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=(a("9a33"),a("ac0d")),c=a("391c"),u=a("a3be"),d=(a("f1ac9"),a("4055"));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={mixins:[r["b"]],props:["bilTypes"],data:function(){return{settleParam:{types:""},userId:"",customerId:"",provinceId:"",billTypeStatus:-2,billCode:"",settlementId:"",accountUserType:"",siteId:"",dateType:2,dateTypeOptions:[{label:"收件时间",id:2},{label:"到件时间",id:3}],collapseHeight:0,optionsClone:{},requestUrl:u["B"],exportObj:{fileName:"对有偿/续重派费-明细-"},dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],limit:31,dateValue2:[],tableData:[],tableHead:{columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(e){e&&d["billUtils"].openBills(e)}},{displayName:"扫描时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName",size:100,isCode:!0},{displayName:"客户编码",name:"customerCode",size:100,isCode:!0},{displayName:"业务员",name:"scanUserName",size:100,isCode:!0},{displayName:"业务员编号",name:"scanUserCode",size:100,isCode:!0},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:120,isCode:!0},{displayName:"目的地省",name:"dispProvName",size:120,isCode:!0},{displayName:"目的城市",name:"dispCityName",size:120,isCode:!0},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0},{displayName:"有偿派费",name:"dispFee",size:100,showTotal:!0},{displayName:"续重派费",name:"dispAddFee",size:100,showTotal:!0},{displayName:"有偿派费差额",name:"subFee",size:100,showTotal:!0},{displayName:"运单发放",name:"billUseSiteName",size:100,isCode:!0},{displayName:"运单发放网点",name:"billProvideManName",size:100,isCode:!0},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"}]}}},methods:{checkDate:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"签收时间",i=this.moment(t).diff(this.moment(e),"second");return i/=86400,i?i<0?(this.msg(a+"开始时间不能大于结束时间,请重新选择时间"),!1):!(this.limit<=i)||(this.msg(a+"最多可查询"+this.limit+"天的数据,请重新选择时间"),!1):(this.msg("请选择完整的"+a),!1)},onSearch:function(){this.pagination.currentPage=1;var e=this.pagination.pageSize,t={};if(this.billCode&&""!=this.billCode){var a=this.billCode.split(/[,\r\n]/);if(a.length>1e3)return void this.msg("最多支持1000个运单号查询");t={billCodes:a.join(","),querySource:1}}else{if(!this.dateValue[2]&&!this.dateValue2[2])return void this.msg("签收时间、收件时间/到件时间必须选择一个");if(this.dateValue[2]<0)return void this.msg("签收开始时间不能大于结束时间");if(this.dateValue[2]>=this.limit)return void this.msg("签收时间最多可查询".concat(this.limit,"天"));if(0!=this.dateValue2.length){var i=this.dateType?"收件时间":"到件时间";if(this.dateValue2[2]&&this.dateValue2[2]<0)return void this.msg("".concat(i,"开始时间不能大于结束时间"));if(this.dateValue2[2]&&this.dateValue2[2]>=this.limit)return void this.msg("".concat(i,"时间最多可查询").concat(this.limit,"天"));if(!!this.dateValue2[0]!==!!this.dateValue2[1])return void this.msg("输入的".concat(i,"时间不完整"));t=m({},t,{type:this.dateType,startDate:this.dateValue2[0],endDate:this.dateValue2[1]})}t.startDate||t.endDate||(t.type=""),t=m({},t,{pageSize:e,currentPage:1,startSignDate:this.dateValue[0],endSignDate:this.dateValue[1],billType:this.billTypeStatus,accountUserId:this.settlementId,accountUserType:this.accountUserType,lowSiteId:this.siteId,dispProvId:this.provinceId,salesmanId:this.userId,customerId:this.customerId,querySource:1})}-2==this.billTypeStatus&&delete t.billType,this.optionsClone=Object(c["cloneDeep"])(t),this.query(this.optionsClone)},query:function(e){var t=this;this.checklistData=[],Object(u["A"])(e).then((function(e){t.settleParam.types&&(t.settleParam.types=""),e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.checklistData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[],t.settleParam.types&&(t.settleParam.types="")}))},onReset:function(){this.billCode="",this.dateValue=[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.billTypeStatus=-2,this.settlementId="",this.accountUserType="",this.siteId="",this.dateType=2,this.dateValue2=[],this.provinceId="",this.customerId="",this.userId=""},settlementChange:function(e){this.accountUserType=null!==e?e.type:""},detailed:function(e){var t=this;this.onReset(),this.dateValue=[this.moment(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.signDate).format("YYYY-MM-DD")+" 23:59:59"],this.billTypeStatus=e.billType,this.accountUserType=e.billType,99==e.billType?this.settleParam.types="99":this.settleParam.types="0,2,4",setTimeout((function(){t.settlementId=e.accountUserId,t.onSearch()}),0)},searchExportDetail:function(){this.queryContent=m({},this.optionsClone),0!==this.checklistData.length?(!this.billCode||""==this.billCode)&&this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():this.checklistExport():this.msg("请先查询")}},computed:{contentHeight:function(){var e=this;setTimeout((function(){e.z_method.refreshSpread()}));var t=this.collapseHeight?110:0;return this.z_param.isActiveH?this.$store.getters.clientHeight-280-t+this.collapseHeight:this.$store.getters.clientHeight-350+this.collapseHeight-t}}},b=p,f=(a("ca64"),a("ae2d"),a("623f")),y=Object(f["a"])(b,n,l,!1,null,"06cc6ad8",null),v=y.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"addedWeightFee"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"right",margin:"6px 6px 0 0"}},[a("el-button",{staticStyle:{padding:"9px 15px !important"},attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("ul",[a("li",[a("label",[e._v("签收日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("扣款状态：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.deductionStatus,callback:function(t){e.deductionStatus=t},expression:"deductionStatus"}},e._l(e.deductionStatusObj,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])])]),a("div",{staticStyle:{"border-top":"5px solid #e9eef2",padding:"10px 0px 0px 15px"}},[a("ul",[a("li",{staticStyle:{height:"32px"}}),a("li",{staticClass:"m-r-20 last-child"},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n          ")])],1)])])],1),a("div",{style:{height:e.contentHeight+e.collapseHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticStyle:{position:"absolute",right:"0"}},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sc-batch-process",{attrs:{title:e.title,height:500,dialogVisible:e.dialogVisible,columns:e.columns,tableData:e.batchTableData,totalNum:e.totalNum,batchUrl:e.importUrl,optionsH:e.optionsH,types:"addedWeightFeeS"},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑备注","modal-append-to-body":!1,visible:e.centerDialogVisible,"close-on-click-modal":!1,width:"400px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字！",maxlength:"30","show-word-limit":"",rows:3},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSaveRemark}},[e._v("确 定")])],1)],1)],1)},C=[],x={mixins:[r["b"],r["a"]],props:["bilTypes"],data:function(){return{batchTableData:[],textarea:"",centerDialogVisible:!1,billTypeStatus:-2,deductionStatus:-1,deductionStatusObj:[{label:"全部",id:-1},{label:"未扣款",id:2},{label:"已线上扣款",id:1},{label:"已线下收款",id:4},{label:"待扣款",id:0}],title:"",dialogVisible:!1,importUrl:"",optionsH:{},columns:[],currRow:[],totalNum:0,isQs:!1,collapseHeight:0,optionsClone:"",requestUrl:u["D"],limit:31,settlementId:"",settlementType:"",siteId:"",tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(0,"days").format("YYYY-MM-DD")],tableHead:{dblclick:this.dblclick,columns:[{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"settlementName",size:120,isCode:!0},{displayName:"结算对象编码",name:"settlementCode",isCode:!0},{displayName:"签收票数",name:"feeNum",showTotal:!0,size:120},{displayName:"有偿派费",name:"dispFee",showTotal:!0,size:120},{displayName:"续重派费",name:"addDispFee",showTotal:!0,size:120},{displayName:"有偿派费差额",name:"subFee",showTotal:!0,size:120},{displayName:"扣款金额",name:"hexiaoFee",showTotal:!0,size:120},{displayName:"扣款状态",name:"hexiaoStatus",value:function(e){return void 0===e.hexiaoStatus||2===e.hexiaoStatus?"未扣款":1===e.hexiaoStatus?"已线上扣款":4===e.hexiaoStatus?"已线下收款":0===e.hexiaoStatus||3===e.hexiaoStatus?"待扣款":void 0}},{displayName:"扣款人",name:"hexiaoMan",isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"备注",name:"remark",size:150,isConversionComma:!0}]}}},activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},methods:{checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=Object(c["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},actionBut:function(e){var t=this;if(0!==this.currRow.length){this.columns=[{displayName:"签收日期",name:"signDate",minWidth:"120"},{displayName:"结算对象",name:"settlementName",minWidth:"120"}];var a="/bills/new/addDispFee/",i=[{title:"扣续重派费",url:a+"hexiaoDispFee",type:1},{title:"线下收派费差",url:a+"offLineCollection",type:5},{title:"扣派费差额",url:a+"hexiaoSubFee",type:2},{title:"取消扣款",url:a+"fanhexiao",type:3},{title:"编辑备注",url:a+"updateRemark",type:4}],s="",n=0;switch(e){case"hexiaosub":s="确定执行扣派费差额审核操作吗？",this.importUrl=i[2].url,this.title=i[2].title,n=i[2].type;break;case"underlineSub":s="确定执行线下收派费差操作吗？",this.importUrl=i[1].url,this.title=i[1].title,n=i[1].type;break;case"hexiao":s="确定执行扣续重派费审核操作吗？",this.importUrl=i[0].url,this.title=i[0].title,n=i[0].type;break;case"fanhexiao":s="确定执行取消扣款操作吗？",this.importUrl=i[3].url,this.title=i[3].title,n=i[3].type;break;default:return this.importUrl=i[4].url,this.title="批量编辑备注处理结果",n=i[4].type,void this.checkBillPost(4)}this.title="批量"+this.title+"处理结果",""!=s&&this.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then((function(){t.checkBillPost(n)})).catch((function(){}))}else this.msg("请选择数据")},checkBillPost:function(e){var t=this;this.batchTableData=this.currRow.map((function(a){var i={signDate:t.moment(a.signDate).format("YYYY-MM-DD"),settlementId:a.accountUserId,billType:a.billType,type:e,settlementType:a.billType,remark:t.textarea,settlementName:a.settlementName};return console.log(i,"44"),i})),console.log(this.batchTableData,"4"),this.totalNum=this.currRow.length,this.dialogVisible=!0},close:function(e){this.dialogVisible=!1,this.title="",this.columns=[],this.totalNum=0,this.importUrl="","noSearch"!=e&&this.onSearch()},onSaveRemark:function(){""!=this.textarea&&d["billUtils"].regRemark(this.textarea)?(this.centerDialogVisible=!1,this.actionBut()):this.msg("请输入正确的备注")},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},settlementChange:function(e){this.settlementType=null!==e?e.type:""},onSearch:function(){this.currRow=[];var e=d["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],this.limit,"签收日期","days");if(e){this.pagination.currentPage=1;var t={pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage,lowSettlementId:this.siteId,signDateStart:this.dateValue[0]+" 00:00:00",signDateEnd:this.dateValue[1]+" 23:59:59",settlementId:this.settlementId,settlementType:this.settlementType,billType:this.billTypeStatus,state:this.deductionStatus};-1==this.deductionStatus&&delete t.state,this.optionsClone=Object(c["cloneDeep"])(t),this.query(t)}},query:function(e){var t=this;Object(u["C"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},editRemark:function(){var e=this.currRow.length;0!==e?(this.textarea=1==e?this.currRow[0].remark:"",this.centerDialogVisible=!0):this.msg("请选择数据")},searchExport:function(){if(0!==this.tableData.length){var e={totalRow:this.pagination.total,checklistData:this.tableData,fileName:"对有偿/续重派费-汇总结算-",url:this.requestUrl,paramIn:this.optionsClone,type:"page",methodType:"post"};this.exportBasicUtils(e)}else this.msg("请先查询有数据的")}},computed:{contentHeight:function(){var e=this;setTimeout((function(){e.z_method.refreshSpread()}),0);var t=this.collapseHeight?60:0;return this.z_param.isActiveH?this.$store.getters.clientHeight-210-t+this.collapseHeight:this.z_param.isNode?this.$store.getters.clientHeight-270+this.collapseHeight-t:this.$store.getters.clientHeight-190+this.collapseHeight-t}}},k=x,D=(a("c00d"),Object(f["a"])(k,g,C,!1,null,"2cd8c91b",null)),w=D.exports,S={name:"addedWeightFeeCheck",components:{summaryH:w,detailH:v},data:function(){return{activeName:"tab1",bilType:[{label:"全部",id:-2},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}]}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){var a=this;this.activeName=e,this.z_method.refreshSpread(),this.$nextTick((function(){a.$refs.detailed.detailed(t)}))}}},_=S,N=(a("19f0"),Object(f["a"])(_,i,s,!1,null,null,null));t["default"]=N.exports},"0855":function(e,t,a){"use strict";var i=a("acc3"),s=a.n(i);s.a},"0997":function(e,t,a){},"0a07":function(e,t,a){"use strict";var i=a("545f"),s=a.n(i);s.a},"0a5d":function(e,t,a){},"0aac":function(e,t,a){},"0aae":function(e,t,a){"use strict";var i=a("b5c2"),s=a.n(i);s.a},"0baa":function(e,t,a){},"0bc8":function(e,t,a){"use strict";var i=a("0baa"),s=a.n(i);s.a},"0c6e":function(e,t,a){},"0cf0":function(e,t,a){"use strict";var i=a("333c"),s=a.n(i);s.a},"0dba":function(e,t,a){},"0e48":function(e,t,a){"use strict";var i=a("dcb2"),s=a.n(i);s.a},"0f10":function(e,t,a){},"0f84":function(e,t,a){},1186:function(e,t,a){},1191:function(e,t,a){"use strict";var i=a("1e32"),s=a.n(i);s.a},"129f":function(e,t,a){},1361:function(e,t,a){"use strict";var i=a("0aac"),s=a.n(i);s.a},"139b":function(e,t,a){},"152f":function(e,t,a){},1655:function(e,t,a){"use strict";var i=a("dd5c"),s=a.n(i);s.a},1699:function(e,t,a){},"16b6":function(e,t,a){},"182a":function(e,t,a){"use strict";var i=a("fb26"),s=a.n(i);s.a},1849:function(e,t,a){"use strict";var i=a("6367"),s=a.n(i);s.a},"19f0":function(e,t,a){"use strict";var i=a("5cbf"),s=a.n(i);s.a},"1a25":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("div",{attrs:{id:"tip"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Bottom Left 提示文字",placement:"bottom-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          1、数据保存：月汇总数据永久保存，日汇总完整保存近1年的数据，流水明细完整保存近3个月数据，请及时存档；"),a("br"),e._v("\n          2、查询数据跳转：月汇总双击表格进入相应对象的日汇总，日汇总双击表格进入相应日期的流水明细，方便查询；"),a("br"),e._v("\n          3、结算流水明细：按时间选择可查询16天数据，按查询条件选择“账户名称”或“费用子类型”或“来源”进行查询，最大可查31天数据；"),a("br"),e._v("\n          4、来源说明：系统自动、手动执行（页面手动操作）、手工导入；"),a("br"),e._v("\n          5、导出：最大支持80w数据；"),a("br")]),a("i",{staticClass:"el-icon-question"})])],1),e.z_method.showBtn("btn_advanceFlowStatement_monthSum")?a("el-tab-pane",{attrs:{label:"结算月汇总",name:"tab1"}},[a("summaryMH",{on:{goto:e.goto}})],1):e._e(),e.z_method.showBtn("btn_advanceFlowStatement_daySum")?a("el-tab-pane",{attrs:{label:"结算日汇总",name:"tab2"}},[a("summaryDH",{ref:"refSummaryDH",on:{goto:e.goto}})],1):e._e(),e.z_method.showBtn("btn_advanceFlowStatement")?a("el-tab-pane",{attrs:{label:"结算流水明细",name:"tab3"}},[a("detailH",{ref:"refDetailH"})],1):e._e()],1),e.z_method.showBtn("btn_advanceFlowStatement")||e.z_method.showBtn("btn_advanceFlowStatement_daySum")||e.z_method.showBtn("btn_advanceFlowStatement_monthSum")?e._e():a("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","font-size":"24px","margin-left":"-100px"}},[e._v("请联系神州网点管理员开通权限")])],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main detail"},[a("div",{staticClass:"advanceFlowStatementDetail"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search1",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left"}},[a("sz-odd-numbers",{ref:"oddNum",attrs:{isSerial:""},on:{codeType:e.codeType},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticStyle:{float:"left","margin-left":"4px","margin-right":"4px"}},[a("ul",[a("li",{staticStyle:{margin:"0px"}},[a("span",{staticStyle:{"line-height":"25px",width:"20px",background:"#33acf9","text-align":"center",color:"#fff"}},[e._v("账户名称")]),a("sc-users",{ref:"refUserCustom",staticClass:"accountC",attrs:{type:"0",multiple:!0,multipleLimit:5,placeholder:"",param:{inId:5==e.z_param.userType?"":e.z_param.accountId},remote:5==e.z_param.userType},on:{change:e.changeUser1,search:e.searchNull},model:{value:e.accountId,callback:function(t){e.accountId=t},expression:"accountId"}})],1)])]),a("div",{staticClass:"dh_content"},[a("div",{staticClass:"h_36"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-90"},[e._v("交易时间：")]),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-50"},[e._v("操作人：")]),a("sc-users",{ref:"refUserId",attrs:{type:"2"},on:{change:e.changeUser},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),a("li",[a("label",{staticClass:"w-r-80"},[e._v("费用子类型：")]),a("cost-subtypes",{model:{value:e.costId,callback:function(t){e.costId=t},expression:"costId"}})],1)])]),a("div",[a("ul",[a("li",[a("label",{staticClass:"w-r-90"},[e._v("业务发生时间：")]),a("sc-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1),a("li",[a("label",{staticClass:"w-r-50"},[e._v("来源：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valueSelect,callback:function(t){e.valueSelect=t},expression:"valueSelect"}},e._l(e.optionSelect,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])])]),a("div",{staticClass:"kk",staticStyle:{float:"right","margin-right":"20px","margin-top":"40px"}},[a("el-button",{attrs:{type:"danger"},on:{click:e.reset}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 重置\n          ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"justify-content":"flex-end","padding-right":"20px"}},[e.z_method.showBtn("btn_advanceFlowStatement_export")?a("el-button",{attrs:{type:"primary"},on:{click:e.isearchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")]):e._e()],1)],1),a("div",{style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticStyle:{position:"absolute",right:"0"}},[e.billCode.length<1?a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}}):e._e()],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.columns,exportName:e.exportFileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},l=[],o=a("d9ba"),r=(a("9a33"),a("cc57"),a("163d"),a("ac0d")),c=a("391c"),u=a("a3be"),d=a("f37e"),h=(a("f1ac9"),{mixins:[r["b"]],data:function(){var e=this;return{isBillCode:!0,billCode:"",dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).format("YYYY-MM-DD")+" 23:59:59"],dateValue2:[],costId:"",userId:"",userIdName:"",accountId:[],exportUrl:"/bills/collect/downFile",ishowHeight:0,ishowHeights:0,optionsClone:{},exportFileName:"预付款流水报表明细",exportObj:{fileName:"预付款流水报表明细-"},limit:16,valueSelect:-1,optionSelect:[{id:-1,label:"全部"},{id:1,label:"系统自动"},{id:2,label:"手工执行"},{id:3,label:"手工导入"}],tableData:[],columns:[{displayName:"交易流水号",name:"waterCode"},{displayName:"账户名称",name:"accountName"},{displayName:"运单号",name:"billCode"},{displayName:"工号/客户号",name:"userCode"},{displayName:"交易类型",name:"dealType"},{displayName:"费用子类",name:"feeTypeName"},{displayName:"交易前金额",name:"nowBalance"},{displayName:"交易金额",name:"dealMoney"},{displayName:"交易后金额",name:"afterMoney"},{displayName:"业务发生时间",name:"businessDate"},{displayName:"产生时间",name:"gmtCreate"},{displayName:"操作人",name:"creator"},{displayName:"交易备注",name:"remark"},{displayName:"来源",name:"sourceName"}],tableHead:{columns:[{displayName:"交易流水号",name:"waterCode",size:150,isCode:!0},{displayName:"账户名称",name:"accountName",size:100,isCode:!0},{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"工号/客户号",name:"userCode",size:100,isCode:!0},{displayName:"交易类型",name:"dealType",size:100,value:function(e){return Object(d["B"])(Number(e.dealType))}},{displayName:"费用子类",name:"feeTypeName",size:100,isCode:!0},{displayName:"交易前金额",name:"nowBalance",size:100},{displayName:"交易金额",name:"dealMoney",size:100,showTotal:!0,value:function(e){var t=e.dealType,a=e.dealMoney;return 0===t||"扣款"==t?a<=0?Math.abs(a):-a:a}},{displayName:"交易后金额",name:"afterMoney",size:100},{displayName:"业务发生时间",name:"businessDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"产生时间",name:"gmtCreate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"操作人",name:"creator",size:100,isCode:!0},{displayName:"交易备注",name:"remark",size:120,isConversionComma:!0},{displayName:"来源",name:"source",size:120,value:function(e){return Object(d["p"])(Number(e.source))}}]}}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},accountId:{handler:function(e){this.changeLimit()},deep:!0},costId:{handler:function(e){this.changeLimit()},deep:!0},valueSelect:{handler:function(e){this.changeLimit()},deep:!0}},methods:{searchNull:function(e){""===e&&this.$refs.refUserCustom.getSettlement()},changeUser1:function(e,t){this.$refs.refUserCustom.getSettlement()},changeLimit:function(){0!==this.accountId.length||-1!==this.valueSelect||this.costId?this.limit=31:this.limit=16},detailHAction:function(e){var t=this;this.reset(),this.tableData=[],this.pagination.currentPage=1,this.pagination.total=0,this.accountId=[e.accountId],this.dateValue=[this.moment(e.feeDate).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.feeDate).format("YYYY-MM-DD")+" 23:59:59"],setTimeout((function(){t.onSearch()}),400)},changeUser:function(e){this.userIdName=e?e.name:"",console.log(this.userIdName)},codeType:function(e){this.isBillCode=1!==Number(e)},isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},reset:function(){this.billCode="",this.$refs.oddNum.clear(),this.$refs.oddNum.currentType=0,this.dateValue=[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).format("YYYY-MM-DD")+" 23:59:59"],this.valueSelect=-1,this.dateValue2=[],this.userId="",this.userIdName="",this.costId="",this.accountId=[],this.$refs.refUserId.clear()},onSearch:function(){var e=this.billCode;if(e=","==e.substring(e.length-1)?e.substring(0,e.length-1):e,e.length<1)if(3===this.dateValue.length){if(this.dateValue[2]<0)return void this.msg("交易的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue[2])return void this.msg("交易时间最多可查询"+this.limit+"天的数据,请重新选择时间");if(0!=this.dateValue2.length){var t="业务发生";if(3===this.dateValue2.length){if(this.dateValue2[2]<0)return void this.msg(t+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(t+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else if(2===this.dateValue2.length){if(null!=this.dateValue2[0]||null!=this.dateValue2[1])return void this.msg("请填写完整的"+t+"时间段")}else if(1===this.dateValue2.length&&null!=this.dateValue2[0])return void this.msg("请填写完整的"+t+"时间段")}}else if(2===this.dateValue.length){if(null!=this.dateValue[0]||null!=this.dateValue[1])return void this.msg("请填写完整的交易时间段");if(0==this.dateValue2.length)return void this.msg("交易时间、业务发生时间不能同时为空");var a="业务发生";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+a+"时间段"):void this.msg("交易时间、业务发生时间不能同时为空"):void this.msg("请填写完整的"+a+"时间段");if(this.dateValue2[2]<0)return void this.msg(a+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(a+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{if(0!==this.dateValue.length)return void this.msg("请填写完整的交易时间段");if(0==this.dateValue2.length)return void this.msg("交易时间、业务发生时间不能同时为空");var i="业务发生";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+i+"时间段"):void this.msg("交易时间、业务发生时间不能同时为空"):void this.msg("请填写完整的"+i+"时间段");if(this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{for(var s=e.split(","),n=0;n<s.length;n++)""!=s[n]&&null!=s[n]&&void 0!=Object(o["a"])(s[n])||(s.splice(n,1),n-=1);if(s.length>1e3){var l=this.isBillCode?"单号哦！":"流水号哦！";return void this.msg("客官，一次不能查超过1000个"+l)}e=s.join("\r\n")}var r={startDate:this.dateValue[0],endDate:this.dateValue[1],billCode:e,startBusinessDate:null==this.dateValue2[0]?"":this.dateValue2[0],endBusinessDate:null==this.dateValue2[1]?"":this.dateValue2[1],creator:this.userIdName,creatorId:this.userId,feeType:this.costId,currentPage:1,pageSize:this.pagination.pageSize,isBillCode:this.isBillCode,accountIds:this.accountId.join(","),source:this.valueSelect};this.optionsClone=Object(c["cloneDeep"])(r),this.query(r)},query:function(e){var t=this;Object(u["x"])(e).then((function(e){0===e.code?e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},computed:{contentHeight:function(){var e=0;return this.z_method.showBtn("btn_advanceFlowStatement_export")||(e=30),this.z_param.isActiveH?this.$store.getters.clientHeight-260+e:this.z_param.isNode?this.$store.getters.clientHeight-340+e:this.$store.getters.clientHeight-260+e}}}),m=h,p=(a("75c0"),a("7211"),a("623f")),b=Object(p["a"])(m,n,l,!1,null,"f5418c2a",null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main advanceFlowStatement"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("交易月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthTime,callback:function(t){e.monthTime=t},expression:"monthTime"}})],1),a("li",[a("label",[e._v("账户名称：")]),a("sc-users",{attrs:{type:"0",param:{inId:5==e.z_param.userType?"":e.z_param.accountId},remote:5==e.z_param.userType},model:{value:e.accountId,callback:function(t){e.accountId=t},expression:"accountId"}})],1)])]),a("div",{staticClass:"buttonMove"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n        ")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{attrs:{data:e.checklistData,height:e.contentHeight+e.ishowHeight,border:"","highlight-current-row":"","row-class-name":e.tableRowClassName},on:{"row-dblclick":e.rowDblclick}},[a("el-table-column",{attrs:{prop:"feeDate",label:"月份",formatter:e.formatterMonth,"min-width":"50"}}),a("el-table-column",{attrs:{prop:"accountName",label:"结算账户","show-overflow-tooltip":"","min-width":"120"}}),a("el-table-column",{attrs:{label:"手工及罚款类"}},[a("el-table-column",{attrs:{prop:"amount21",label:"充值","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount19",label:"手工加款","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount20",label:"提现","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount18",label:"手工扣款","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount22",label:"业务罚款","min-width":"90"}})],1),a("el-table-column",{attrs:{label:"发件方向"}},[a("el-table-column",{attrs:{prop:"amount10",label:"面单费用","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount11",label:"发件主要费用","min-width":"100"}}),a("el-table-column",{attrs:{prop:"amount12",label:"发件增值费用","min-width":"100"}}),a("el-table-column",{attrs:{prop:"amount13",label:"发件代收到付费用","min-width":"120"}}),a("el-table-column",{attrs:{prop:"amount23",label:"固定费","min-width":"120"}})],1),a("el-table-column",{attrs:{label:"派件方向"}},[a("el-table-column",{attrs:{prop:"amount14",label:"派件费用","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount15",label:"派件考核奖罚","min-width":"100"}}),a("el-table-column",{attrs:{prop:"amount16",label:"派件代收到付款","min-width":"110"}})],1),a("el-table-column",{attrs:{prop:"amount3",label:"当月交易额","min-width":"120"}}),a("el-table-column",{attrs:{prop:"amount1",label:"上月余额","min-width":"120"}}),a("el-table-column",{attrs:{prop:"amount2",label:"本月余额","min-width":"120"}})],1),a("div",{staticStyle:{position:"absolute",right:"0",bottom:"-40px"}},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},v=[],g={mixins:[r["b"]],data:function(){var e=this;return{isQs:!1,isLayering:!0,ishowHeight:0,ishowHeights:0,monthTime:this.moment().format("YYYY-MM"),accountId:"",exportObj:{fileName:"预付款流水报表-结算月汇总-"},checklistData:[],tableHead:{columns:[{displayName:"月份",name:"feeDate",value:function(t){if(t.feeDate){var a=e.moment(t.feeDate).format("YYYY-MM")+"";return a.slice(5)/1+"月"}return""}},{displayName:"结算账户",name:"accountName",isCode:!0},{displayName:"充值",name:"amount21"},{displayName:"手工加款",name:"amount19"},{displayName:"提现",name:"amount20"},{displayName:"手工扣款",name:"amount18"},{displayName:"业务罚款",name:"amount22"},{displayName:"面单费用",name:"amount10"},{displayName:"发件主要费用",name:"amount11"},{displayName:"发件增值费用",name:"amount12"},{displayName:"发件代收到付费用",name:"amount13"},{displayName:"固定费",name:"amount23"},{displayName:"派件费用",name:"amount14"},{displayName:"派件考核奖罚",name:"amount15"},{displayName:"派件代收到付款",name:"amount16"},{displayName:"当月交易额",name:"amount3"},{displayName:"上月余额",name:"amount1"},{displayName:"本月余额",name:"amount2"}]}}},watch:{ishowHeights:{handler:function(e,t){var a=this;0!==e?setTimeout((function(){a.ishowHeight=e}),400):this.ishowHeight=e},deep:!0}},methods:{rowDblclick:function(e){this.$emit("goto","tab2",e)},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2!==0?"warning-row":""},formatterMonth:function(e,t){var a=this.moment(e.feeDate).format("YYYY-MM")+"";return a.slice(5)/1+"月"},onSearch:function(){var e={pageParam:{currentPage:1,pageSize:this.pagination.pageSize},param:{accountId:this.accountId,startDate:this.moment(this.monthTime).format("YYYY-MM")+"-01"}};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)},query:function(e){var t=this;Object(u["y"])(e).then((function(e){0===e.code?e.data?(t.checklistData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.checklistData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.checklistData=[]}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-230:this.z_param.isNode?this.$store.getters.clientHeight-295:this.$store.getters.clientHeight-230}}},C=g,x=(a("26d0"),Object(p["a"])(C,y,v,!1,null,null,null)),k=x.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main advanceFlowStatement"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("交易时间：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("账户名称：")]),a("sc-users",{ref:"refAccount",attrs:{type:"0",param:{inId:5==e.z_param.userType?"":e.z_param.accountId},remote:5==e.z_param.userType},model:{value:e.accountId,callback:function(t){e.accountId=t},expression:"accountId"}})],1)])]),a("div",{staticClass:"buttonMove"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n        ")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{attrs:{data:e.tableData,height:e.contentHeight+e.ishowHeight,border:"","highlight-current-row":"","row-class-name":e.tableRowClassName},on:{"row-dblclick":e.rowDblclick}},[a("el-table-column",{attrs:{prop:"feeDate",label:"日期",formatter:e.formatterMonth,"min-width":"90"}}),a("el-table-column",{attrs:{prop:"accountName",label:"结算账户","show-overflow-tooltip":"","min-width":"100"}}),a("el-table-column",{attrs:{label:"手工及罚款类"}},[a("el-table-column",{attrs:{prop:"amount21",label:"充值","min-width":"80"}}),a("el-table-column",{attrs:{prop:"amount19",label:"手工加款","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount20",label:"提现","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount18",label:"手工扣款","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount22",label:"业务罚款","min-width":"90"}})],1),a("el-table-column",{attrs:{label:"发件方向"}},[a("el-table-column",{attrs:{prop:"amount10",label:"面单费用","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount11",label:"发件主要费用","min-width":"100"}}),a("el-table-column",{attrs:{prop:"amount12",label:"发件增值费用","min-width":"100"}}),a("el-table-column",{attrs:{prop:"amount13",label:"发件代收到付费用","min-width":"120"}}),a("el-table-column",{attrs:{prop:"amount23",label:"固定费","min-width":"120"}})],1),a("el-table-column",{attrs:{label:"派件方向"}},[a("el-table-column",{attrs:{prop:"amount14",label:"派件费用","min-width":"90"}}),a("el-table-column",{attrs:{prop:"amount15",label:"派件考核奖罚","min-width":"100"}}),a("el-table-column",{attrs:{prop:"amount16",label:"派件代收到付款","min-width":"110"}})],1),a("el-table-column",{attrs:{prop:"amount3",label:"当日交易额","min-width":"120"}}),a("el-table-column",{attrs:{prop:"amount1",label:"上日余额","min-width":"120"}}),a("el-table-column",{attrs:{prop:"amount2",label:"本日余额","min-width":"120"}})],1),a("div",{staticStyle:{position:"absolute",right:"0",bottom:"-40px"}},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},w=[],S={mixins:[r["b"]],data:function(){return{requestUrl:u["w"],limit:16,isQs:!1,isLayering:!0,ishowHeight:0,ishowHeights:0,dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).format("YYYY-MM-DD")],accountId:"",exportObj:{fileName:"预付款流水报表-结算日汇总-"},tableData:[],tableHead:{columns:[{displayName:"日期",name:"feeDate",formatter:"yyyy-MM-dd"},{displayName:"结算账户",name:"accountName",isCode:!0},{displayName:"充值",name:"amount21"},{displayName:"手工加款",name:"amount19"},{displayName:"提现",name:"amount20"},{displayName:"手工扣款",name:"amount18"},{displayName:"业务罚款",name:"amount22"},{displayName:"面单费用",name:"amount10"},{displayName:"发件主要费用",name:"amount11"},{displayName:"发件增值费用",name:"amount12"},{displayName:"发件代收到付费用",name:"amount13"},{displayName:"固定费",name:"amount23"},{displayName:"派件费用",name:"amount14"},{displayName:"派件考核奖罚",name:"amount15"},{displayName:"派件代收到付款",name:"amount16"},{displayName:"当日交易额",name:"amount3"},{displayName:"上日余额",name:"amount1"},{displayName:"当日余额",name:"amount2"}]}}},watch:{ishowHeights:{handler:function(e,t){var a=this;0!==e?setTimeout((function(){a.ishowHeight=e}),400):this.ishowHeight=e},deep:!0},accountId:{handler:function(e){this.limit=e?31:16},deep:!0}},methods:{rowDblclick:function(e){this.$emit("goto","tab3",e)},SummaryDHAction:function(e){var t=this;this.pagination.total=0,this.tableData=[],this.accountId=e.accountId;var a=this.moment(e.feeDate).startOf("month").format("YYYY-MM-DD"),i=this.moment(e.feeDate).endOf("month").format("YYYY-MM-DD");this.dateValue=[a,i],setTimeout((function(){t.onSearch()}),500)},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2!==0?"warning-row":""},formatterMonth:function(e,t){return this.moment(e.feeDate).format("YYYY-MM-DD")},onSearch:function(){if(this.dateValue[2]<0)this.msg("交易开始时间不能大于结束时间,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择交易时间");else{var e={pageParam:{currentPage:1,pageSize:this.pagination.pageSize},param:{accountId:this.accountId,endDate:this.dateValue[1],startDate:this.dateValue[0]}};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["v"])(e).then((function(e){0===e.code?e.data?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-230:this.z_param.isNode?this.$store.getters.clientHeight-295:this.$store.getters.clientHeight-230}}},_=S,N=(a("b997"),Object(p["a"])(_,D,w,!1,null,null,null)),T=N.exports,I={name:"advanceFlowStatement",components:{summaryMH:k,summaryDH:T,detailH:f},data:function(){return{activeName:"tab3"}},beforeRouteEnter:function(e,t,a){a((function(e){var t=document.getElementById("tip"),a=0;e.z_method.showBtn("btn_advanceFlowStatement_daySum")&&(a+=120,e.activeName="tab2"),e.z_method.showBtn("btn_advanceFlowStatement_monthSum")&&(a+=120,e.activeName="tab1"),e.z_method.showBtn("btn_advanceFlowStatement")&&(a+=140,e.activeName="tab3"),t.style.marginLeft=a+"px"}))},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,"tab2"==e?this.$refs.refSummaryDH.SummaryDHAction(t):"tab3"==e&&(this.$refs.refDetailH.detailHAction(t),this.z_method.refreshSpread())}}},O=I,E=(a("48ab"),Object(p["a"])(O,i,s,!1,null,null,null));t["default"]=E.exports},"1ac8":function(e,t,a){"use strict";var i=a("e816"),s=a.n(i);s.a},"1b98":function(e,t,a){"use strict";var i=a("5094"),s=a.n(i);s.a},"1b9a":function(e,t,a){"use strict";var i=a("3cee"),s=a.n(i);s.a},"1c69":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("detail-bill",{ref:"detailBill"})],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"handListProcess-page"},[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box handListProcess-box"},[a("bill-code",{nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.queryContent.billCodes,callback:function(t){e.$set(e.queryContent,"billCodes",t)},expression:"queryContent.billCodes"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("el-select",{staticClass:"input-80",on:{change:e.changeType},model:{value:e.queryContent.dateType,callback:function(t){e.$set(e.queryContent,"dateType",t)},expression:"queryContent.dateType"}},[a("el-option",{key:1,attrs:{label:"账单日期",value:1}}),a("el-option",{key:2,attrs:{label:"收件时间",value:2}}),a("el-option",{key:3,attrs:{label:"到件时间",value:3}})],1),1==e.queryContent.dateType?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.queryContent.dateValue,callback:function(t){e.$set(e.queryContent,"dateValue",t)},expression:"queryContent.dateValue"}}):e._e(),1!=e.queryContent.dateType?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.queryContent.timeValue,callback:function(t){e.$set(e.queryContent,"timeValue",t)},expression:"queryContent.timeValue"}}):e._e()],1),a("li",[a("span",{staticClass:"label"},[e._v("结算对象：")]),a("sc-users",{ref:"refSettlement",staticClass:"short-input",staticStyle:{width:"120px"},attrs:{type:"7",param:e.settleParam,optionAdd:e.optionAdd},on:{change:e.settlementChange},model:{value:e.queryContent.accountUserId,callback:function(t){e.$set(e.queryContent,"accountUserId",t)},expression:"queryContent.accountUserId"}})],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"70px"}},[e._v("业务员：")]),a("sc-users",{ref:"refUser",staticClass:"short-input",staticStyle:{width:"120px"},attrs:{type:"2",optionAdd:e.optionAdd},model:{value:e.queryContent.scanUserId,callback:function(t){e.$set(e.queryContent,"scanUserId",t)},expression:"queryContent.scanUserId"}})],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("签收时间：")]),a("el-date-picker",{ref:"timePickerC",staticClass:"qian-160",staticStyle:{width:"155px"},attrs:{type:"datetime",editable:!1,clearable:!0,"default-time":"00:00:00"},on:{change:e.startDateChangeB},model:{value:e.queryContent.startSignDate,callback:function(t){e.$set(e.queryContent,"startSignDate",t)},expression:"queryContent.startSignDate"}}),a("div",{staticStyle:{margin:"0 5px"}},[e._v("至")]),a("el-date-picker",{ref:"timePickerD",staticClass:"qian-160",staticStyle:{width:"155px"},attrs:{type:"datetime",editable:!1,"default-time":"23:59:59",clearable:!0},model:{value:e.queryContent.endSignDate,callback:function(t){e.$set(e.queryContent,"endSignDate",t)},expression:"queryContent.endSignDate"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("客户名称：")]),a("sc-users",{ref:"refCustomer",staticClass:"short-input",staticStyle:{width:"120px"},attrs:{type:"3",optionAdd:e.optionAdd},model:{value:e.queryContent.customerId,callback:function(t){e.$set(e.queryContent,"customerId",t)},expression:"queryContent.customerId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("账单类型：")]),a("el-select",{ref:"billType",staticClass:"short-input",staticStyle:{width:"120px"},attrs:{placeholder:""},model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},e._l(e.billType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("扣款状态：")]),a("el-select",{ref:"billStatus",staticClass:"short-input",staticStyle:{width:"120px"},attrs:{placeholder:""},model:{value:e.queryContent.billStatus,callback:function(t){e.$set(e.queryContent,"billStatus",t)},expression:"queryContent.billStatus"}},e._l(e.billStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"88px"}},[e._v("签收状态：")]),a("el-select",{staticStyle:{width:"120px"},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"72px"}},[e._v("订单渠道：")]),a("el-select",{staticStyle:{width:"120px"},model:{value:e.queryContent.source,callback:function(t){e.$set(e.queryContent,"source",t)},expression:"queryContent.source"}},e._l(e.sourceStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticStyle:{position:"absolute",bottom:"0",right:"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")])],1)])],1)])]),a("div",{staticClass:"content-box "},[a("div",{staticClass:"btn-box"},[a("div",[e.z_method.showBtn("btn_handList_Process")?a("el-button",{attrs:{type:"success",disabled:0===e.currentRow.length},on:{click:e.openEdit}},[e._v("\n          编辑\n        ")]):e._e(),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n            手工单处理为原线下电子面单账单数据，可通过查询条件来源来区分线下电子面单订单类型，"),a("br"),e._v("\n            包含掌中通、码上寄、丰巢、线下网点客户、业务员客户、开放平台客户、快递云平台、快递超市、快递管家、C端、"),a("br"),e._v("\n            其它(K8、CRM、企业下单、逆向物流、菜鸟保税、格格、腾云宝、速递易、邮趣驿站、零公里平台、收发室、"),a("br"),e._v("\n            快递鸟、乐收平台、佰米平台、摩西管家、喜来、圆滴、指尖快递、富友、蓝店、聚点、熊猫快收、小兵驿站)\n          ")]),a("i",{staticClass:"el-icon-question pointer m-l-8",staticStyle:{"margin-left":"10px","font-size":"16px"}})])],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{"ng-data":e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.batchRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.titleDialog,"modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.editDialogVisible,width:"600px"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[1===e.currentRow.length?a("div",{staticClass:"form-box-handler"},[a("div",[a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("客户：")]),a("sc-users",{staticClass:"form-input",staticStyle:{width:"170px",display:"inline-block"},attrs:{type:"3","popper-class":"max-index",disabled:99===e.editForm.type},model:{value:e.editForm.customerId,callback:function(t){e.$set(e.editForm,"customerId",t)},expression:"editForm.customerId"}}),a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("业务员：")]),a("sc-users",{staticClass:"form-input",staticStyle:{width:"180px",display:"inline-block"},attrs:{type:"2",disabled:99===e.editForm.type,"popper-class":"max-index"},model:{value:e.editForm.scanUserId,callback:function(t){e.$set(e.editForm,"scanUserId",t)},expression:"editForm.scanUserId"}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("下级网点：")]),a("sc-site",{staticStyle:{width:"170px",display:"inline-block"},attrs:{disabled:99!==e.editForm.type,"popper-class":"max-index",param:{child:!0}},model:{value:99!==e.editForm.type?"":e.editForm.accountUserId,callback:function(t){e.$set(99!==e.editForm.type?"":e.editForm,"accountUserId",t)},expression:"editForm.type!==99?'':editForm.accountUserId"}}),a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("备注：")]),a("el-input",{staticStyle:{width:"180px",display:"inline-block"},attrs:{maxlength:"30"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark","string"===typeof t?t.trim():t)},expression:"editForm.remark"}})],1)]):e._e(),e.currentRow.length>1?a("div",{staticClass:"edit-col-row-box"},[a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("名称")]),a("div",{staticClass:"col-row-30"},[e._v("是否修改")]),a("div",{staticClass:"col-row-40"},[e._v("内容")])]),a("div",{staticClass:"edit-col-row edit-col-row2"},[a("div",{staticClass:"col-row-30"},[e._v("客户")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.customerCheckChange},model:{value:e.batchEditForm.isCustomerIdEdit,callback:function(t){e.$set(e.batchEditForm,"isCustomerIdEdit",t)},expression:"batchEditForm.isCustomerIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"refCustomerIdEdit1",attrs:{type:"3","popper-class":"max-index",disabled:!e.batchEditForm.isCustomerIdEdit},model:{value:e.batchEditForm.customerId,callback:function(t){e.$set(e.batchEditForm,"customerId",t)},expression:"batchEditForm.customerId"}})],1)]),a("div",{staticClass:"edit-col-row "},[a("div",{staticClass:"col-row-30"},[e._v("业务员")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.userCheckChange},model:{value:e.batchEditForm.isUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isUserIdEdit",t)},expression:"batchEditForm.isUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"refUserIdEdit1",attrs:{type:"2","popper-class":"max-index",disabled:!e.batchEditForm.isUserIdEdit},model:{value:e.batchEditForm.scanUserId,callback:function(t){e.$set(e.batchEditForm,"scanUserId",t)},expression:"batchEditForm.scanUserId"}})],1)]),a("div",{staticClass:"edit-col-row edit-col-row2"},[a("div",{staticClass:"col-row-30"},[e._v("下级网点")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.accountCheckChange},model:{value:e.batchEditForm.isAccountUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isAccountUserIdEdit",t)},expression:"batchEditForm.isAccountUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-site",{attrs:{disabled:!e.batchEditForm.isAccountUserIdEdit,"popper-class":"max-index",param:{child:!0}},model:{value:e.batchEditForm.accountUserId,callback:function(t){e.$set(e.batchEditForm,"accountUserId",t)},expression:"batchEditForm.accountUserId"}})],1)]),a("div",{staticClass:"edit-col-row "},[a("div",{staticClass:"col-row-30"},[e._v("备注")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.remarkCheckChange},model:{value:e.batchEditForm.isRemarkEdit,callback:function(t){e.$set(e.batchEditForm,"isRemarkEdit",t)},expression:"batchEditForm.isRemarkEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("el-input",{staticStyle:{width:"170px"},attrs:{disabled:!e.batchEditForm.isRemarkEdit,maxlength:"30"},model:{value:e.batchEditForm.remark,callback:function(t){e.$set(e.batchEditForm,"remark","string"===typeof t?t.trim():t)},expression:"batchEditForm.remark"}})],1)])]):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editBatchUpdate}},[e._v("确 定")])],1)]),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],staticClass:"hdialog",attrs:{title:"总成本",visible:e.dialogVisiblecost,"before-close":e.handleClose,"modal-append-to-body":!1,width:"320px",center:""},on:{"update:visible":function(t){e.dialogVisiblecost=t}}},[a("div",{staticClass:"pdH"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.feeCostDta,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"成本项",width:"180"}}),a("el-table-column",{attrs:{prop:"fee",label:"金额"}})],1)],1)])],1)},l=[],o=(a("2b45"),a("ed63"),a("8cf2"),a("9a33"),a("f548"),a("163d"),a("ac0d")),r=a("391c"),c=a("6bf2"),u=a.n(c),d=a("a3be"),h=a("f37e"),m=a("4055"),p={mixins:[o["b"]],activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},created:function(){this.queryContentClone=Object.assign({},this.queryContent)},watch:{},data:function(){var e=this;return{feeCostDta:[],dialogVisiblecost:!1,settleParam:{types:""},height:302,optionAdd:[{code:"",id:0,name:"为空"}],titleDialog:"编辑",editForm:{billCode:"",accountUserId:"",scanUserId:"",customerId:"",remark:""},limit:31,batchEditForm:{isUserIdEdit:!1,isCustomerIdEdit:!1,isAccountUserIdEdit:!1,isRemarkEdit:!1,scanUserId:"",accountUserId:"",remark:"",customerId:""},codeType:!0,signStatusOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],sourceStatusOptions:[{value:-1,label:"全部"},{value:1,label:"掌中通"},{value:2,label:"码上寄"},{value:3,label:"丰巢"},{value:5,label:"线下网点客户"},{value:6,label:"业务员客户"},{value:7,label:"开放平台客户"},{value:8,label:"快递云平台"},{value:9,label:"快递超市"},{value:10,label:"快递管家"},{value:11,label:"C端"},{value:4,label:"其它"}],feeType:[{label:"全部",id:-1},{label:"退件费",id:1},{label:"转账费",id:2},{label:"拦截费",id:0}],billType:[{label:"全部",id:-2},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}],billStatus:[{label:"全部",id:-1},{label:"未扣款",id:2},{label:"已线上扣款",id:1},{label:"已线下收款",id:6}],queryContent:{dateType:1,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billCodes:"",startScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),startSignDate:"",endSignDate:"",scanUserId:"",type:-2,billStatus:-1,accountUserId:"",accountUserType:"",signStatus:-1,source:-1,customerId:""},optionsClone:{},tableHead:{columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:50,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"运单号",name:"billCode",size:150,isCode:!0,isFrozen:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"扣款状态",name:"billStatus",value:function(e){return Object(h["m"])(Number(e.billStatus))}},{displayName:"寄件人",name:"senderName"},{displayName:"寄件人电话",name:"senderPhone"},{displayName:"寄件详细地址",name:"senderAddress",isConversionComma:!0,value:function(e){return e.senderAddress?e.senderAddress.replace("\n",""):""}},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"揽收业务员",name:"scanUserName"},{displayName:"揽收业务员工号",name:"scanUserCode",isCode:!0},{displayName:"结算对象",name:"accountUserName",size:150},{displayName:"结算对象编码",name:"accountUserCode",size:150,isCode:!0},{displayName:"账单类型",name:"type",value:function(e){var t=e["type"];return-1===t?"无对象":0===t?"客户":2===t?"承包区":4===t?"业务员":99===t?"下级网点":(str.replace,"")}},{displayName:"账单日期",name:"billTime",size:150,formatter:"yyyy-MM-dd"},{displayName:"收件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"目的地省",name:"dispProvName"},{displayName:"目的地市",name:"dispCityName"},{displayName:"订单渠道",name:"source"},{displayName:"收件人",name:"receiverName"},{displayName:"收件人电话",name:"receiverPhone"},{displayName:"收件详细地址",name:"receiverAddress",isConversionComma:!0,value:function(e){return e.receiverAddress?e.receiverAddress.replace("\n",""):""}},{displayName:"结算重量",name:"accountWeight"},{displayName:"网点重量",name:"recWeight"},{displayName:"中心重量",name:"centerWeight"},{displayName:"增值加收费",name:"valueAddedFee"},{displayName:"中转费/客户运费/通票费",name:"avgWeightFee",size:200},{displayName:"操作费/附加费/加收费",name:"operAddFee",size:200},{displayName:"应收费用",name:"toAccountFee"},{displayName:"总成本",name:"totalCost",dblclick:function(t,a){e.showDig(a)}},{displayName:"物品类型",name:"goodsType",value:function(e){return Object(h["q"])(Number(e.goodsType))}},{displayName:"运输方式",name:"classType",value:function(e){return Object(h["C"])(Number(e.classType))}},{displayName:"运单发放",name:"billProvideManName"},{displayName:"运单发放网点",name:"billUseSiteName"},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",value:function(e){return Object(h["x"])(Number(e.signStatus))}},{displayName:"退件标识",name:"returnStatus",value:function(e){return 1==e["returnStatus"]?"是":"否"}},{displayName:"问题件",name:"problemPiecesType",value:function(e){return e["problemPiecesType"]?"是":"否"}},{displayName:"修改人",name:"editor"},{displayName:"修改时间",name:"gmtModified",formatter:"yyyy-MM-dd hh:mm:ss",size:150},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},tableData:[],currentRow:[],batchRow:[],batchTitle:"",batchUrl:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode"}],exportObj:{fileName:"发件手工单处理"},exportUrl:"/bills/new/sendaBillsHandwork/export",deductDialogVisible:!1,deductForm:{fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:0,isBatch:0},editUserId:"",editDialogVisible:!1}},methods:{handleClose:function(){this.dialogVisiblecost=!1,this.feeCostDta=[]},showDig:function(e){this.dialogVisiblecost=!0,this.feeCostDta=[{name:"代收到付手续费",fee:e.szGoodsPaymentServiceFee},{name:"中转费成本",fee:e.centerRecFee},{name:"二级中转费",fee:e.twoLevelFee},{name:"有偿派费",fee:e.dispFee},{name:"业务员提成",fee:e.userRoyalty},{name:"罚款",fee:e.fine},{name:"面单成本",fee:e.billCost},{name:"建包费",fee:this.fmtCreaBagFee(e.creaBagFee)},{name:"总成本",fee:e.totalCost}]},changeType:function(e){1===e?this.queryContent.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")]:this.queryContent.timeValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]},userCheckChange:function(e){e||(this.batchEditForm.scanUserId="")},accountCheckChange:function(e){e||(this.batchEditForm.accountUserId="")},remarkCheckChange:function(e){e||(this.batchEditForm.remark="")},customerCheckChange:function(e){e||(this.batchEditForm.customerId="")},editBatchUpdate:function(){if(1===this.currentRow.length)this.batchTitle="编辑",this.batchRow=[Object(r["cloneDeep"])(this.editForm)],this.batchRow=this.batchRow.map((function(e){return e.accountUserId=99!==e.type?0:e.accountUserId?e.accountUserId:0,e.scanUserId=99===e.type?0:e.scanUserId?e.scanUserId:0,e.customerId=99===e.type?0:e.customerId?e.customerId:0,e}));else{if(!this.batchEditForm.isUserIdEdit&&!this.batchEditForm.isCustomerIdEdit&&!this.batchEditForm.isAccountUserIdEdit&&!this.batchEditForm.isRemarkEdit)return void(this.editDialogVisible=!1);this.batchTitle="批量编辑";var e={scanUserId:this.batchEditForm.isUserIdEdit?this.batchEditForm.scanUserId?this.batchEditForm.scanUserId:0:void 0,customerId:this.batchEditForm.isCustomerIdEdit?this.batchEditForm.customerId?this.batchEditForm.customerId:0:void 0,accountUserId:this.batchEditForm.isAccountUserIdEdit?this.batchEditForm.accountUserId?this.batchEditForm.accountUserId:0:void 0,remark:this.batchEditForm.isRemarkEdit?this.batchEditForm.remark:void 0};this.batchRow=this.currentRow.map((function(t){return{forcedUpdate:!1,scanUserId:e.scanUserId,customerId:e.customerId,accountUserId:e.accountUserId,remark:e.remark,billCode:t.billCode}}))}this.editDialogVisible=!1,this.batchUpdateAjax()},batchUpdateAjax:function(){var e=this;this.batchUrl="/bills/new/sendaBillsHandwork/forcedUpdate",console.log(this.batchRow),console.log("this.batchRow"),this.$nextTick((function(){e.batchDialogVisible=!0}))},settlementChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},keyup:function(){this.queryContent.billCodes=this.queryContent.billCodes.replace(/,/g,"").replace(/，/g,"")},startDateChangeA:function(e){e&&this.$refs.timePickerB.focus()},startDateChangeB:function(e){e&&this.$refs.timePickerD.focus()},onSearch:function(){var e=Object.assign({},this.queryContent);if(Object(r["trim"])(this.queryContent.billCodes)){console.log(Object(r["trim"])(this.queryContent.billCodes)),console.log(" trim(this.queryContent.billCodes)");var t=Object(r["trim"])(this.queryContent.billCodes).split(/[,\r\n]/);if(t.length>1e3){var a="最多支持1000个单号查询";return void this.msg(a)}e.billCodes=t.join(",")}else{e.billCodes="",this.queryContent.billCodes="";var i=2===this.queryContent.dateType?"收件":"到件";if(1===this.queryContent.dateType)if(3===this.queryContent.dateValue.length){if(this.queryContent.dateValue[2]<0)return void this.msg("账单开始日期不能大于结束日期,请重新选择账单日期");if(this.limit<=this.queryContent.dateValue[2])return void this.msg("账单日期最多可查询"+this.limit+"天");!0}else{if(this.queryContent.dateValue[0]||this.queryContent.dateValue[1])return void this.msg("请填写完整的账单日期");if(!this.queryContent.startSignDate&&!this.queryContent.endSignDate)return void this.msg("请填写完整的账单日期")}else if(3===this.queryContent.timeValue.length){if(this.queryContent.timeValue[2]<0)return void this.msg(i+"开始时间不能大于结束时间,请重新选择"+i+"时间");if(this.limit<=this.queryContent.timeValue[2])return void this.msg(i+"时间最多可查询"+this.limit+"天");!0}else{if(this.queryContent.timeValue[0]||this.queryContent.timeValue[1])return void this.msg("请填写完整的"+i+"时间");if(!this.queryContent.startSignDate&&!this.queryContent.endSignDate)return void this.msg("请填写完整的账单日期")}var s="",n="";if(s=1===this.queryContent.dateType?null==this.queryContent.dateValue[0]?"":this.queryContent.dateValue[0]+" 00:00:00":null==this.queryContent.timeValue[0]?"":this.queryContent.timeValue[0],n=1===this.queryContent.dateType?null==this.queryContent.dateValue[1]?"":this.queryContent.dateValue[1]+" 23:59:59":null==this.queryContent.timeValue[1]?"":this.queryContent.timeValue[1],this.queryContent.startSignDate||this.queryContent.endSignDate){if(this.timeCheck(this.queryContent.startSignDate,this.queryContent.endSignDate,"签收时间"))return;e.startSignDate=u()(this.queryContent.startSignDate).format("YYYY-MM-DD HH:mm:ss"),e.endSignDate=u()(this.queryContent.endSignDate).format("YYYY-MM-DD HH:mm:ss")}s&&n?(e.startScanDate=s,e.endScanDate=n):(e.startScanDate="",e.endScanDate=""),e.dateValue=void 0,e.timeValue=void 0}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,e.pageSize=this.pagination.pageSize,e.currentPage=this.pagination.currentPage,this.query(e)},query:function(e){var t=this;e&&(this.optionsClone=Object(r["cloneDeep"])(e)),Object(d["kb"])(this.optionsClone).then((function(e){t.settleParam.types="",0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.tableData.map((function(e){0===e.billStatus&&(e.deductOperator="",e.deductDate="")})),t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){try{console.log(e),console.log("query  res"),e.message?t.msg(e.message):e.status&&503===e.status||t.msg("暂无数据！")}catch(a){}t.settleParam.types="",t.pagination.total=0,t.tableData=[]}))},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},heightChange:function(e){var t=this;this.height=e?302:182,this.$nextTick((function(){t.z_method.refreshSpread()}))},resetQueryContent:function(){this.codeType=!0,this.queryContent={dateType:1,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billCodes:"",startScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),startSignDate:"",endSignDate:"",scanUserId:"",type:-2,billStatus:-1,accountUserId:"",accountUserType:"",signStatus:-1,source:-1,customerId:""},this.$refs.refSettlement.clear(),this.$refs.refUser.clear(),this.$refs.refCustomer.clear()},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.refUser.autoBlur(),this.$refs.refCustomer.autoBlur()},getType:function(e){this.codeType=e},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请填写完整的签收时间"),!0;if(u()(e).isAfter(t))return this.msg("签收开始时间不能大于结束时间,请重新选择签收时间"),!0;var i=u()(t).subtract(31,"days"),s=u()(i).isAfter(u()(e));return!!s&&(this.msg(a+"最多可查询"+this.limit+"天"),!0)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},openDeduct:function(e,t){1===this.currentRow.length?(this.deductForm={fineCode:this.currentRow[0].fineCode,accountUserName:this.currentRow[0].accountUserName,fineFee:this.currentRow[0].fineFee,deductFee:Object(r["cloneDeep"])(this.currentRow[0].fineFee),remark:Object(r["cloneDeep"])(this.currentRow[0].remark),fineType:this.currentRow[0].fineType,type:this.currentRow[0].type,id:this.currentRow[0].id,deductFeeType:t,isBatch:0},this.deductDialogVisible=!0):this.currentRow.length>1&&(this.batchTitle=e,this.deductForm.deductFeeType=t,this.batchUpdateAjax())},checkNum:function(e){var t=!1;if(e.toString().includes(".")){var a=e.toString().split("."),i=a[1].length;i>2&&(t=!0)}return t},singleDeduct:function(){0===this.deductForm.deductFee||"0"===this.deductForm.deductFee||""!==this.deductForm.deductFee&&this.deductForm.deductFee?0!=this.deductForm.deductFee?/^\d+(\.\d+)?$/.test(this.deductForm.deductFee)?this.checkNum(this.deductForm.deductFee)?this.msg("扣款金额小数点只能保留2位小数!"):Number(this.deductForm.deductFee)<0||Number(this.deductForm.deductFee)>9999999?this.msg("扣款金额的范围是0~9999999"):!this.deductForm.remark||m["billUtils"].regRemark(this.deductForm.remark)?this.deductForm.deductFeeType<2?this.deductAjax():this.underlineDeductAjax():this.msg("只能输入数字或字母或中文或常见符号!"):this.msg("请输入有效数字且最多能输入两位小数！"):this.msg("扣款金额不能为0!"):this.msg("扣款金额不能为空!")},deductAjax:function(){var e=this;Object(d["oc"])(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:"",isBatch:0})}))},underlineDeductAjax:function(){var e=this;Object(d["tc"])(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:"",isBatch:0})}))},openEdit:function(){var e=this;0!==this.currentRow.length?(this.editForm={},1===this.currentRow.length?(this.titleDialog="编辑",setTimeout((function(){e.editForm={forcedUpdate:!0,type:e.currentRow[0].type,billCode:e.currentRow[0].billCode,remark:e.currentRow[0].remark,accountUserId:e.currentRow[0].accountUserId,scanUserId:e.currentRow[0].scanUserId?e.currentRow[0].scanUserId:"",customerId:e.currentRow[0].customerId?e.currentRow[0].customerId:""}}),0)):(this.titleDialog="批量编辑",this.batchEditForm={isUserIdEdit:!1,isCustomerIdEdit:!1,isAccountUserIdEdit:!1,isRemarkEdit:!1,scanUserId:"",accountUserId:"",remark:"",forcedUpdate:!1,customerId:""}),this.editDialogVisible=!0):this.msg("请选择需要结算的数据！")},confirmEdit:function(){this.editUserId?(this.editDialogVisible=!1,this.batchTitle="编辑",this.batchUpdateAjax()):this.msg("请选择业务员!")},batchUpdate:function(e){0!==this.currentRow.length?(this.batchTitle=e.target.innerText,this.batchUpdateAjax()):this.msg("请选择要操作的数据!")},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},close:function(e){this.batchDialogVisible=!1,this.batchRow=[],"noSearch"!==e&&(this.currentRow=[],this.query())},fmtCreaBagFee:function(e){return e||0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-230:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},b=p,f=(a("182a"),a("00b8"),a("623f")),y=Object(f["a"])(b,n,l,!1,null,"031a3bc0",null),v=y.exports,g={name:"handListProcess",components:{detailBill:v},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))}}},C=g,x=(a("04a1"),Object(f["a"])(C,i,s,!1,null,"dd2e77e8",null));t["default"]=x.exports},"1c77":function(e,t,a){},"1dcc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab page-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总",name:"tab1"}},[a("month-summary",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detail-bill",{ref:"detailBill"})],1)],1)],1)},s=[],n=a("bb74"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box handListProcess-box"},[a("sc-bill-code",{ref:"billcodeRef",attrs:{twoText:["单号","包号"],onlyBill:!1},on:{typeChange:e.getType},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.queryContent.billCodes,callback:function(t){e.$set(e.queryContent,"billCodes",t)},expression:"queryContent.billCodes"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",{staticClass:"label"},[a("span",{staticClass:"label"},[e._v("账单日期：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.queryContent.dateValue,callback:function(t){e.$set(e.queryContent,"dateValue",t)},expression:"queryContent.dateValue"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("扣款状态：")]),a("el-select",{staticStyle:{width:"91px"},model:{value:e.queryContent.status,callback:function(t){e.$set(e.queryContent,"status",t)},expression:"queryContent.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("签收状态：")]),a("el-select",{staticStyle:{width:"91px"},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label",staticStyle:{"padding-left":"1px"}},[e._v("城市：")]),a("sc-city",{staticStyle:{width:"85px"},attrs:{optionAdd:e.optionAdd2},model:{value:e.queryContent.cityId,callback:function(t){e.$set(e.queryContent,"cityId",t)},expression:"queryContent.cityId"}})],1),a("li",[a("span",{staticClass:"label",staticStyle:{"padding-left":"1px"}},[e._v("问题件：")]),a("el-select",{staticStyle:{width:"85px"},model:{value:e.queryContent.isProblem,callback:function(t){e.$set(e.queryContent,"isProblem",t)},expression:"queryContent.isProblem"}},e._l(e.isQuesOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label",staticStyle:{"padding-left":"1px"}},[e._v("退件：")]),a("el-select",{staticStyle:{width:"85px"},model:{value:e.queryContent.returnStatus,callback:function(t){e.$set(e.queryContent,"returnStatus",t)},expression:"queryContent.returnStatus"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("班次类型：")]),a("sc-select-multiple",{ref:"topSearchTransport",attrs:{params:{dictionaryType:"transportType"}},model:{value:e.queryContent.transport,callback:function(t){e.$set(e.queryContent,"transport",t)},expression:"queryContent.transport"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("物品类型：")]),a("sc-select-multiple",{ref:"topSearchGoods",attrs:{params:{dictionaryType:"goodsType"}},model:{value:e.queryContent.goodsType,callback:function(t){e.$set(e.queryContent,"goodsType",t)},expression:"queryContent.goodsType"}})],1)]),a("div",{staticStyle:{position:"absolute",bottom:"0",right:"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")])],1)])],1)])]),a("div",{staticClass:"content-box "},[a("div",{staticClass:"btn-box"},[a("div"),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{"ng-data":e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.batchRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.titleDialog,"modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.editDialogVisible,width:"600px"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[1===e.currentRow.length?a("div",{staticClass:"form-box-handler"},[a("div",[a("label",{staticStyle:{width:"91px","text-align":"right",display:"inline-block"}},[e._v("客户：")]),a("sc-users",{staticClass:"form-input",staticStyle:{width:"170px",display:"inline-block"},attrs:{type:"3","popper-class":"max-index",disabled:99===e.editForm.type},model:{value:e.editForm.customerId,callback:function(t){e.$set(e.editForm,"customerId",t)},expression:"editForm.customerId"}}),a("label",{staticStyle:{width:"91px","text-align":"right",display:"inline-block"}},[e._v("业务员：")]),a("sc-users",{staticClass:"form-input",staticStyle:{width:"180px",display:"inline-block"},attrs:{type:"2",disabled:99===e.editForm.type,"popper-class":"max-index"},model:{value:e.editForm.scanUserId,callback:function(t){e.$set(e.editForm,"scanUserId",t)},expression:"editForm.scanUserId"}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("label",{staticStyle:{width:"91px","text-align":"right",display:"inline-block"}},[e._v("下级网点：")]),a("sc-site",{staticStyle:{width:"170px",display:"inline-block"},attrs:{disabled:99!==e.editForm.type,"popper-class":"max-index",param:{child:!0}},model:{value:99!==e.editForm.type?"":e.editForm.accountUserId,callback:function(t){e.$set(99!==e.editForm.type?"":e.editForm,"accountUserId",t)},expression:"editForm.type!==99?'':editForm.accountUserId"}}),a("label",{staticStyle:{width:"91px","text-align":"right",display:"inline-block"}},[e._v("备注：")]),a("el-input",{staticStyle:{width:"180px",display:"inline-block"},attrs:{maxlength:"30"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark","string"===typeof t?t.trim():t)},expression:"editForm.remark"}})],1)]):e._e(),e.currentRow.length>1?a("div",{staticClass:"edit-col-row-box"},[a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("名称")]),a("div",{staticClass:"col-row-30"},[e._v("是否修改")]),a("div",{staticClass:"col-row-40"},[e._v("内容")])]),a("div",{staticClass:"edit-col-row edit-col-row2"},[a("div",{staticClass:"col-row-30"},[e._v("客户")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.customerCheckChange},model:{value:e.batchEditForm.isCustomerIdEdit,callback:function(t){e.$set(e.batchEditForm,"isCustomerIdEdit",t)},expression:"batchEditForm.isCustomerIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"refCustomerIdEdit1",attrs:{type:"3","popper-class":"max-index",disabled:!e.batchEditForm.isCustomerIdEdit},model:{value:e.batchEditForm.customerId,callback:function(t){e.$set(e.batchEditForm,"customerId",t)},expression:"batchEditForm.customerId"}})],1)]),a("div",{staticClass:"edit-col-row "},[a("div",{staticClass:"col-row-30"},[e._v("业务员")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.userCheckChange},model:{value:e.batchEditForm.isUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isUserIdEdit",t)},expression:"batchEditForm.isUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"refUserIdEdit1",attrs:{type:"2","popper-class":"max-index",disabled:!e.batchEditForm.isUserIdEdit},model:{value:e.batchEditForm.scanUserId,callback:function(t){e.$set(e.batchEditForm,"scanUserId",t)},expression:"batchEditForm.scanUserId"}})],1)]),a("div",{staticClass:"edit-col-row edit-col-row2"},[a("div",{staticClass:"col-row-30"},[e._v("下级网点")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.accountCheckChange},model:{value:e.batchEditForm.isAccountUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isAccountUserIdEdit",t)},expression:"batchEditForm.isAccountUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-site",{attrs:{disabled:!e.batchEditForm.isAccountUserIdEdit,"popper-class":"max-index",param:{child:!0}},model:{value:e.batchEditForm.accountUserId,callback:function(t){e.$set(e.batchEditForm,"accountUserId",t)},expression:"batchEditForm.accountUserId"}})],1)]),a("div",{staticClass:"edit-col-row "},[a("div",{staticClass:"col-row-30"},[e._v("备注")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.remarkCheckChange},model:{value:e.batchEditForm.isRemarkEdit,callback:function(t){e.$set(e.batchEditForm,"isRemarkEdit",t)},expression:"batchEditForm.isRemarkEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("el-input",{staticStyle:{width:"170px"},attrs:{disabled:!e.batchEditForm.isRemarkEdit,maxlength:"30"},model:{value:e.batchEditForm.remark,callback:function(t){e.$set(e.batchEditForm,"remark","string"===typeof t?t.trim():t)},expression:"batchEditForm.remark"}})],1)])]):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editBatchUpdate}},[e._v("确 定")])],1)])],1)},o=[],r=(a("163d"),a("2b45"),a("ed63"),a("8cf2"),a("9a33"),a("f548"),a("ac0d")),c=a("391c"),u=a("6bf2"),d=a.n(u),h=a("a3be"),m=a("4055"),p=a("f37e"),b=function(e){return{dblclick:e.dblclick,columns:[{displayName:"账单日期",name:"scanComeDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"下级网点",name:"scanSite",size:120,isCode:!0},{displayName:"账单票数",name:"comeNum",size:120,isCode:!0},{displayName:"结算重量",name:"accountWeight",size:120,isCode:!0},{displayName:"增值加收费",name:"valueAddedFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"中转费/通票费",name:"centerRecFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"操作费/加收费",name:"operAddFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"费用合计",name:"totalFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扣款金额",name:"deductMoney",size:120,isCode:!0},{displayName:"费用差额",name:"chargeFee",size:120,isCode:!0},{displayName:"扣款状态",name:"deductStatus",size:120,value:function(e){return Object(p["j"])(Number(e.deductStatus))}},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"结算编码",name:"settlementEncoding",isCode:!0,size:120},{displayName:"结算流水号",name:"transactionSettlement",isCode:!0,size:120,showTotal:!0},{displayName:"费用为0的票数",showTotal:!0,name:"votesIsZero"},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]}},f=function(e){return{dblclick:e.dblclick,columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"账单日期",name:"billTime",formatter:"yyyy-MM-dd",size:150},{displayName:"扫描时间",name:"scanTime",formatter:"yyyy-MM-dd hh:mm:ss",size:150},{displayName:"下级网点",name:"accountUserName"},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"scanUserName"},{displayName:"业务员工号",name:"scanUserCode",isCode:!0},{displayName:"班次类型",name:"classTypeName",size:100},{displayName:"物品类型",name:"goodsTypeName"},{displayName:"目的地",name:"dispProvName"},{displayName:"城市",name:"dispCityName"},{displayName:"结算重量",name:"accountWeight",showTotal:!0},{displayName:"收件重量",name:"recWeight"},{displayName:"中心重量",name:"centerWeight"},{displayName:"派件网点",name:"dispSiteName"},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",value:function(e){return Object(p["x"])(Number(e.signStatus))}},{displayName:"增值加收费",name:"valueAddedFee",showTotal:!0,formatter:"0.00"},{displayName:"中转费/通票费",name:"avgWeightFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"操作费/加收费",name:"operAddFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"费用合计",name:"toAccountFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"问题件",name:"problemPiecesType",size:100,value:function(e){return Object(p["s"])(Number(e.problemPiecesType))}},{displayName:"退件标识",name:"returnStatus",size:100,value:function(e){return Object(p["s"])(Number(e.returnStatus))}},{displayName:"面单类型",name:"billType",size:100,value:function(e){return Object(p["t"])(Number(e.billType))}},{displayName:"面单发放网点",name:"billUseSiteName"},{displayName:"面单发送",name:"billProvideManName"}]}},y="对应付中转费账单-日汇总",v="对应付中转费账单-明细",g="/bills/reconciliation/transferFee/detail/export",C="/bills/reconciliation/transferFee/day",x={mixins:[r["b"]],activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},created:function(){this.queryContentClone=Object.assign({},this.queryContent)},watch:{},data:function(){return{type:1,optionAdd2:[{children:[{fullName:"为空",id:0}]}],settleParam:{types:"99"},height:352,optionAdd:[{code:"",id:0,name:"为空"}],statusOptions:[{value:"",label:"全部"},{value:2,label:"未扣款"},{value:1,label:"已线上扣款"},{value:6,label:"已线下收款"}],isStatusOptions:[{value:"",label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],isQuesOptions:[{value:"",label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],titleDialog:"编辑",editForm:{billCode:"",accountUserId:"",scanUserId:"",customerId:"",remark:""},limit:31,batchEditForm:{isUserIdEdit:!1,isCustomerIdEdit:!1,isAccountUserIdEdit:!1,isRemarkEdit:!1,scanUserId:"",accountUserId:"",remark:"",customerId:""},codeType:0,signStatusOptions:[{value:"",label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],sourceStatusOptions:[{value:"",label:"全部"},{value:1,label:"掌中通粉丝"},{value:2,label:"码上寄"},{value:3,label:"丰巢"},{value:4,label:"其它"}],feeType:[{label:"全部",id:-1},{label:"退件费",id:1},{label:"转账费",id:2},{label:"拦截费",id:0}],billType:[{label:"全部",id:-2},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}],billStatus:[{label:"全部",id:-1},{label:"未扣款",id:2},{label:"已线上扣款",id:1},{label:"已线下收款",id:6}],transportOptions:[{value:"",label:"全部"},{value:1,label:"汽运"},{value:2,label:"航空"},{value:5,label:"铁运"}],queryContent:{status:"",transport:"",cityId:"",returnStatus:"",signStatus:"",isProblem:"",goodsType:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billCodes:""},optionsClone:{},tableHead:f(this),tableData:[],currentRow:[],batchRow:[],batchTitle:"",batchUrl:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode"}],exportObj:{fileName:v},exportUrl:g,deductDialogVisible:!1,deductForm:{fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:0,isBatch:0},editUserId:"",editDialogVisible:!1}},methods:{changeType:function(e){1===e?this.queryContent.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")]:this.queryContent.timeValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]},userCheckChange:function(e){e||(this.batchEditForm.scanUserId="")},accountCheckChange:function(e){e||(this.batchEditForm.accountUserId="")},remarkCheckChange:function(e){e||(this.batchEditForm.remark="")},customerCheckChange:function(e){e||(this.batchEditForm.customerId="")},editBatchUpdate:function(){if(1===this.currentRow.length)this.batchTitle="编辑",this.batchRow=[Object(c["cloneDeep"])(this.editForm)],this.batchRow=this.batchRow.map((function(e){return e.accountUserId=99!==e.type?0:e.accountUserId?e.accountUserId:0,e.scanUserId=99===e.type?0:e.scanUserId?e.scanUserId:0,e.customerId=99===e.type?0:e.customerId?e.customerId:0,e}));else{if(!this.batchEditForm.isUserIdEdit&&!this.batchEditForm.isCustomerIdEdit&&!this.batchEditForm.isAccountUserIdEdit&&!this.batchEditForm.isRemarkEdit)return void(this.editDialogVisible=!1);this.batchTitle="批量编辑";var e={scanUserId:this.batchEditForm.isUserIdEdit?this.batchEditForm.scanUserId?this.batchEditForm.scanUserId:0:void 0,customerId:this.batchEditForm.isCustomerIdEdit?this.batchEditForm.customerId?this.batchEditForm.customerId:0:void 0,accountUserId:this.batchEditForm.isAccountUserIdEdit?this.batchEditForm.accountUserId?this.batchEditForm.accountUserId:0:void 0,remark:this.batchEditForm.isRemarkEdit?this.batchEditForm.remark:void 0};this.batchRow=this.currentRow.map((function(t){return{forcedUpdate:!1,scanUserId:e.scanUserId,customerId:e.customerId,accountUserId:e.accountUserId,remark:e.remark,billCode:t.billCode}}))}this.editDialogVisible=!1,this.batchUpdateAjax()},batchUpdateAjax:function(){var e=this;this.batchUrl="/bills/new/sendaBillsHandwork/forcedUpdate",console.log(this.batchRow),console.log("this.batchRow"),this.$nextTick((function(){e.batchDialogVisible=!0}))},summaryToDetail:function(e){var t=this;this.resetQueryContent(),this.queryContent.dateValue=[this.moment(e.scanComeDate).format("YYYY-MM-DD"),this.moment(e.scanComeDate).format("YYYY-MM-DD")],setTimeout((function(){t.onSearch()}),0)},settlementChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},keyup:function(){this.queryContent.billCodes=this.queryContent.billCodes.replace(/,/g,"").replace(/，/g,"")},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},startDateChangeA:function(e){e&&this.$refs.timePickerB.focus()},startDateChangeB:function(e){e&&this.$refs.timePickerD.focus()},onSearch:function(){var e=Object(c["cloneDeep"])(this.queryContent);if(Object(c["trim"])(this.queryContent.billCodes)){console.log(Object(c["trim"])(this.queryContent.billCodes)),console.log(" trim(this.queryContent.billCodes)");var t=Object(c["trim"])(this.queryContent.billCodes).split(/[,\r\n]/);if(t.length>1e3){var a="最多支持1000个单号查询";return void this.msg(a)}e.billCodes="",e.bagNos="",0===this.codeType?e.billCodes=t.join(","):e.bagNos=t.join(",")}else{e.billCodes="",e.bagNos="";var i="账单日期";if(this.queryContent.dateValue[2]&&this.queryContent.dateValue[2]<0)return void this.msg("".concat(i,"开始时间不能大于结束时间"));if(this.queryContent.dateValue[2]&&this.queryContent.dateValue[2]>=this.limit)return void this.msg("".concat(i,"最多可查询").concat(this.limit,"天"));if(!!this.queryContent.dateValue[0]!==!!this.queryContent.dateValue[1])return void this.msg("账单日期必须选择一个完整的时间")}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,e.pageSize=this.pagination.pageSize,e.startDate=null==this.queryContent.dateValue[0]?"":this.queryContent.dateValue[0]+" 00:00:00",e.endDate=null==this.queryContent.dateValue[1]?"":this.queryContent.dateValue[1]+" 23:59:59",e.dateValue1=void 0,e.dateValue=void 0,e.timeValue=void 0,e.type=this.type,e.problemPiecesType=this.queryContent.isProblem;var s=this.queryContent,n=s.transport,l=s.goodsType;n&&n.length>0&&(e.classTypes=n.join(",")),l&&l.length>0&&(e.objectTypes=l.join(",")),e.dispatchId=this.queryContent.cityId,e.billStatus=this.queryContent.status,e.currentPage=this.pagination.currentPage,delete e.goodsType,delete e.transport,this.query(e)},query:function(e){var t=this;e&&(this.optionsClone=Object(c["cloneDeep"])(e)),h["O"].getTransferFeeDtBill(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.tableData.map((function(e){0===e.billStatus&&(e.deductOperator="",e.deductDate="")})),t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){try{console.log(e),console.log("query  res"),e.message?t.msg(e.message):e.status&&503===e.status||t.msg("暂无数据！")}catch(a){}t.pagination.total=0,t.tableData=[]}))},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},heightChange:function(e){var t=this;this.height=e?352:232,this.$nextTick((function(){t.z_method.refreshSpread()}))},resetQueryContent:function(){this.queryContent={status:"",cityId:"",returnStatus:"",signStatus:"",isProblem:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billCodes:""},this.$refs.topSearchTransport.initAllSelected(),this.$refs.topSearchGoods.initAllSelected(),this.$refs.billcodeRef.type=!0},onClickTable:function(){},getType:function(e){this.codeType=e?0:1},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请填写完整的签收时间"),!0;if(d()(e).isAfter(t))return this.msg("签收开始时间不能大于结束时间,请重新选择签收时间"),!0;var i=d()(t).subtract(31,"days"),s=d()(i).isAfter(d()(e));return!!s&&(this.msg(a+"最多可查询"+this.limit+"天"),!0)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},openDeduct:function(e,t){1===this.currentRow.length?(this.deductForm={fineCode:this.currentRow[0].fineCode,accountUserName:this.currentRow[0].accountUserName,fineFee:this.currentRow[0].fineFee,deductFee:Object(c["cloneDeep"])(this.currentRow[0].fineFee),remark:Object(c["cloneDeep"])(this.currentRow[0].remark),fineType:this.currentRow[0].fineType,type:this.currentRow[0].type,id:this.currentRow[0].id,deductFeeType:t,isBatch:0},this.deductDialogVisible=!0):this.currentRow.length>1&&(this.batchTitle=e,this.deductForm.deductFeeType=t,this.batchUpdateAjax())},checkNum:function(e){var t=!1;if(e.toString().includes(".")){var a=e.toString().split("."),i=a[1].length;i>2&&(t=!0)}return t},singleDeduct:function(){0===this.deductForm.deductFee||"0"===this.deductForm.deductFee||""!==this.deductForm.deductFee&&this.deductForm.deductFee?0!=this.deductForm.deductFee?/^\d+(\.\d+)?$/.test(this.deductForm.deductFee)?this.checkNum(this.deductForm.deductFee)?this.msg("扣款金额小数点只能保留2位小数!"):Number(this.deductForm.deductFee)<0||Number(this.deductForm.deductFee)>9999999?this.msg("扣款金额的范围是0~9999999"):!this.deductForm.remark||m["billUtils"].regRemark(this.deductForm.remark)?this.deductForm.deductFeeType<2?this.deductAjax():this.underlineDeductAjax():this.msg("只能输入数字或字母或中文或常见符号!"):this.msg("请输入有效数字且最多能输入两位小数！"):this.msg("扣款金额不能为0!"):this.msg("扣款金额不能为空!")},deductAjax:function(){var e=this;Object(h["oc"])(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:"",isBatch:0})}))},underlineDeductAjax:function(){var e=this;Object(h["tc"])(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:"",isBatch:0})}))},openEdit:function(){var e=this;0!==this.currentRow.length?(this.editForm={},1===this.currentRow.length?(this.titleDialog="编辑",setTimeout((function(){e.editForm={forcedUpdate:!0,type:e.currentRow[0].type,billCode:e.currentRow[0].billCode,remark:e.currentRow[0].remark,accountUserId:e.currentRow[0].accountUserId,scanUserId:e.currentRow[0].scanUserId?e.currentRow[0].scanUserId:"",customerId:e.currentRow[0].customerId?e.currentRow[0].customerId:""}}),0)):(this.titleDialog="批量编辑",this.batchEditForm={isUserIdEdit:!1,isCustomerIdEdit:!1,isAccountUserIdEdit:!1,isRemarkEdit:!1,scanUserId:"",accountUserId:"",remark:"",forcedUpdate:!1,customerId:""}),this.editDialogVisible=!0):this.msg("请选择需要结算的数据！")},confirmEdit:function(){this.editUserId?(this.editDialogVisible=!1,this.batchTitle="编辑",this.batchUpdateAjax()):this.msg("请选择业务员!")},batchUpdate:function(e){0!==this.currentRow.length?(this.batchTitle=e.target.innerText,this.batchUpdateAjax()):this.msg("请选择要操作的数据!")},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},close:function(e){this.batchDialogVisible=!1,this.batchRow=[],"noSearch"!==e&&(this.currentRow=[],this.query())}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+80:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},k=x,D=(a("8d2e"),a("3a7f"),a("623f")),w=Object(D["a"])(k,l,o,!1,null,"3ba710c0",null),S=w.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendFeeBillSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",[a("li",[a("label",[e._v("账单日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("扣款状态：")]),a("el-select",{model:{value:e.deductStatus,callback:function(t){e.deductStatus=t},expression:"deductStatus"}},e._l(e.hexiaoStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"inline-block",margin:"5px 0 5px 0",float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"}),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRowNew,batchUrl:e.batchUrl,"data-validate":e.dataValidate,isJson:e.isJson},on:{model:e.close}})],1)},N=[],T=(a("6d57"),{mixins:[r["b"]],data:function(){return{ishowHeights:0,ishowHeight:0,requestUrl:C,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],limit:31,optionsClone:{},billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:0,label:"客户"},{value:4,label:"业务员"},{value:2,label:"承包区"}],deductStatus:-1,hexiaoStatusOptions:[{value:-1,label:"全部"},{value:0,label:"未扣款"},{value:1,label:"待扣款"},{value:2,label:"已线上扣款"},{value:3,label:"已线下收款"}],exportObj:{fileName:y},tableData:[],tableHead:b(this),currRow:[],batchTitle:"",batchDialogVisible:!1,columns:[],currRowNew:[],batchUrl:"",isJson:"",editDialogVisible:!1,remarkText:""}},methods:{close:function(){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()},handleClose:function(){this.editDialogVisible=!1},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},checkBill:function(e){0!==this.currRow.length?(this.batchTitle=e.toElement.innerText,this.columns=[{displayName:"签收日期",name:"scanTime",minWidth:"120"},{displayName:"结算对象",name:"accountUserName",minWidth:"120"}],"编辑备注"==this.batchTitle?(this.remarkText="",1===this.currRow.length&&this.currRow[0].remark&&(this.remarkText=this.currRow[0].remark),this.editDialogVisible=!0):this.checkBillPost()):this.msg("请选择需要结算的数据！")},checkBillPost:function(){var e=this;this.currRowNew=Object(c["cloneDeep"])(this.currRow),this.currRowNew.forEach((function(t){var a=e.moment(t.scanTime).format("YYYY-MM-DD");t.scanTime=a,t.scanDate=a,t.settlementAmount=t.szBillFee})),this.isJson=!1,"扣预付款"==this.batchTitle?this.batchUrl="/bills/fengchaoBill/settlementOnLine":"线下收款"==this.batchTitle?this.batchUrl="/bills/fengchaoBill/settlementOffLine":"取消扣款"==this.batchTitle?this.batchUrl="/bills/fengchaoBill/cancelSettlement":"编辑备注"==this.batchTitle&&(this.currRowNew.forEach((function(t){t.remark=e.remarkText})),this.editDialogVisible=!1,this.batchUrl="/bills/fengchaoBill/saveRemark"),this.batchDialogVisible=!0},dblclick:function(e,t,a){this.$emit("goto","tab2",t)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始日期不能大于结束日期,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={startDate:null==this.dateValue[0]?"":this.dateValue[0],endDate:null==this.dateValue[1]?"":this.dateValue[1],deductStatus:this.deductStatus,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},ischeckrow:function(e){return e.forEach((function(t,a){t.remark&&(e[a].remark=t.remark.replace(/,/g,"-"))})),e},query:function(e){var t=this;h["O"].getTransferFeeBill(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=t.ischeckrow(e.data.list),t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){try{console.log(e),console.log("query  res"),e.message?t.msg(e.message):e.status&&503===e.status||t.msg("暂无数据！")}catch(a){}t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},remarkText:{handler:function(e,t){m["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-160:this.$store.getters.clientHeight-240}}}),I=T,O=(a("daea"),Object(D["a"])(I,_,N,!1,null,null,null)),E=O.exports,z={name:"sendFeeBill",mixins:[n["a"]],components:{detailBill:S,monthSummary:E},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailBill.summaryToDetail(t)}}},F=z,M=(a("3fb8"),Object(D["a"])(F,i,s,!1,null,"34162521",null));t["default"]=M.exports},"1e32":function(e,t,a){},"1e56":function(e,t,a){},2074:function(e,t,a){"use strict";var i=a("a716"),s=a.n(i);s.a},"210d":function(e,t,a){"use strict";var i=a("d365"),s=a.n(i);s.a},2121:function(e,t,a){"use strict";var i=a("2fc6"),s=a.n(i);s.a},"21b5":function(e,t,a){},"238a5":function(e,t,a){},2595:function(e,t,a){"use strict";var i=a("e209"),s=a.n(i);s.a},2620:function(e,t,a){},"26cb":function(e,t,a){"use strict";var i=a("3dcd"),s=a.n(i);s.a},"26d0":function(e,t,a){"use strict";var i=a("b856"),s=a.n(i);s.a},"278a":function(e,t,a){},"285a":function(e,t,a){},2912:function(e,t,a){},"29ac":function(e,t,a){"use strict";var i=a("bfe2"),s=a.n(i);s.a},"2a24":function(e,t,a){"use strict";var i=a("dffb"),s=a.n(i);s.a},"2abd":function(e,t,a){"use strict";var i=a("ed93"),s=a.n(i);s.a},"2af4":function(e,t,a){},"2b30":function(e,t,a){},"2ba7":function(e,t,a){"use strict";var i=a("9941"),s=a.n(i);s.a},"2cbf":function(e,t,a){},"2d11":function(e,t,a){"use strict";var i=a("0f10"),s=a.n(i);s.a},"2d1f":function(e,t,a){},"2e16":function(e,t,a){},"2fc6":function(e,t,a){},"30bb":function(e,t,a){"use strict";var i=a("9acf"),s=a.n(i);s.a},"31cb":function(e,t,a){"use strict";var i=a("9bba"),s=a.n(i);s.a},"32f2":function(e,t,a){"use strict";var i=a("4279"),s=a.n(i);s.a},"333c":function(e,t,a){},3351:function(e,t,a){},"35dc":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"synchronous-bill-issue"},[a("el-dialog",{attrs:{title:"同步面单发放",visible:e.show,width:"460px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("span",[e._v("如果同步面单发放后，还需要批带，请选择同步后批带按钮；")])]),a("li",[a("span",[e._v("同步后不需要批带，选择同步面单发放按钮即可！")])])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.show=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.showBatchProcess}},[e._v("同步面单发放")]),a("el-button",{attrs:{type:"primary"},on:{click:e.showIssueAndBatchRadio}},[e._v("同步后批带")])],1)]),a("el-dialog",{attrs:{title:"批带",visible:e.issueAndBatchShow,"modal-append-to-body":!1,width:"330px",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.issueAndBatchShow=t}}},[a("div",{staticClass:"recharge-box issue-and-batch"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("el-radio",{attrs:{label:"3"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("运单发放业务员设置为揽件业务员")])],1),a("li",[a("el-radio",{attrs:{label:"4"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("运单发放客户更新客户名称")])],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showBillIssueAndBatch}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.issueAndBatchShow=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"同步面单发放",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.issueUrl,columns:e.columns,isQs:!0},on:{model:e.close}}),a("billIssueAndBatch",{attrs:{title:"同步面单发放并批带",dialogVisible:e.issueAndBatchVisible,tableData:e.issueAndBatchData,issueUrl:e.issueUrl,batchUrl:e.batchUrl,columns:e.columns,isQs:!0},on:{model:e.issueAndBatchClose}})],1)},s=[],n=(a("6d57"),a("54d0")),l=(a("a3be"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-box"},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.title,visible:e.dialogVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,width:e.width+"px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"batch-content-box",style:{width:e.width?e.width+"px":"700px",height:e.height?e.height+"px":"500px"}},[a("div",{staticClass:"content-center"},[a("div",{staticClass:"line"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":14,percentage:e.progress,status:"success"}})],1),a("div",{staticClass:"width-full"},[a("div",{staticClass:"scroll-table-box"},[a("table",{staticClass:"table-head"},[a("tr",[e._l(e.columns,(function(t){return a("td",{key:t.index,style:{width:t.size+"px"}},[e._v(e._s(t.displayName))])})),a("td",{staticStyle:{width:"250px"}},[e._v("同步处理结果")]),a("td",{staticStyle:{width:"250px"}},[e._v("批带处理结果")])],2)]),a("div",{staticClass:"table-body-box",style:{height:e.height-174+"px"}},[a("table",{staticClass:"table-body"},e._l(e.impData,(function(t){return a("tr",{key:t.index},[e._l(e.columns,(function(i){return a("td",{key:i.index,style:{width:i.size+"px"}},[e._v(e._s(t[i.name]))])})),a("td",{staticStyle:{width:"250px"}},[0===t.issueResultCode?a("div",[a("i",{staticClass:"el-icon-success"}),a("span",[e._v("成功")])]):e._e(),1===t.issueRequestStatus?a("i",{staticClass:"el-icon-loading"}):e._e(),t.issueRequestStatus>1&&0!==t.issueResultCode?a("div",[a("i",{staticClass:"el-icon-error"}),a("span",{attrs:{title:t.issueMsg}},[e._v(e._s(t.issueMsg||"失败"))])]):e._e()]),a("td",{staticStyle:{width:"250px"}},[0===t.batchResultCode?a("div",[a("i",{staticClass:"el-icon-success"}),a("span",[e._v("成功")])]):e._e(),1===t.batchRequestStatus?a("i",{staticClass:"el-icon-loading"}):e._e(),t.batchRequestStatus>1&&0!==t.batchResultCode?a("div",[a("i",{staticClass:"el-icon-error"}),a("span",{attrs:{title:t.batchMsg}},[e._v(e._s(t.batchMsg||"失败"))])]):e._e()])],2)})),0)])])]),a("p",{staticClass:"tip-write"},[e._v("同步共"+e._s(e.totalNum)+"条，成功"+e._s(e.successNum)+"条，失败"+e._s(e.failedNum)+"条，"+e._s(e.totalNum-e.successNum-e.failedNum)+"条未处理;批带共"+e._s(e.totalNum)+"条，成功"+e._s(e.batchSuccessNum)+"条，失败"+e._s(e.batchFailedNum)+"条，"+e._s(e.totalNum-e.batchSuccessNum-e.batchFailedNum)+"条未处理")])]),a("div",{staticClass:"content-bottom"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0===e.status,expression:"status===0"}],staticClass:"batch-btn",attrs:{type:"success"},on:{click:e.startNew}},[e._v("开始")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2===e.status,expression:"status===2"}],staticClass:"batch-btn",attrs:{type:"success"},on:{click:e.continueBatch}},[e._v("继续")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1===e.status,expression:"status===1"}],staticStyle:{width:"95px"},attrs:{type:"danger"},on:{click:e.suspendBatch}},[e._v("暂停")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3===e.status,expression:"status===3"}],staticClass:"batch-btn",attrs:{type:"success"},on:{click:e.handleClose}},[e._v("已结束")])],1)])])],1)}),o=[],r=(a("163d"),a("a2e5")),c=a("391c"),u={name:"billIssueAndBatch",props:{title:{type:[Number,String],default:"批量处理"},width:{type:[Number,String],default:700},height:{type:Number,default:500},dialogVisible:{type:Boolean,default:!1},tableData:{type:Array,default:function(){return[]},required:!0},columns:{type:Array,default:function(){return[]},required:!0},issueUrl:{type:String,default:"",required:!0},batchUrl:{type:String,default:"",required:!0},dataValidate:{type:Function},isJson:{type:Boolean,default:!0},isBatchJson:{type:Boolean,default:!1},continueFlag:{type:Boolean,default:!0}},computed:{progress:function(){return parseInt(100*(this.successNum+this.failedNum)/this.totalNum)||0}},data:function(){return{status:0,totalNum:0,successNum:0,failedNum:0,batchSuccessNum:0,batchFailedNum:0,count:0,impData:[]}},methods:{handleClose:function(){var e=this;0!==this.status?(this.$emit("model",""),this.handleClose2()):0===this.status&&this.$confirm("此操作将停止执行, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("model","noSearch"),e.handleClose2()})).catch((function(){}))},startNew:function(){if(this.status=1,this.impData&&this.impData.length>0){var e=Object(c["cloneDeep"])(this.impData[this.count]);this.oneRow(e)}},oneRow:function(e){var t=this;this.impData[this.count]["issueRequestStatus"]=1,this.impData[this.count]["batchRequestStatus"]=1,this.dataValidate?this.dataValidate(e).then((function(e){t.sendRequest(e)})).catch((function(e){t.importError(e)})):this.sendRequest(e)},sendRequest:function(e){var t=this;this.isJson?Object(r["e"])(this.issueUrl,e,!1,!1).then((function(e){t.handleIssueRequestResult(e)})).catch((function(e){t.importIssueError(e.message)})):Object(r["d"])(this.issueUrl,e,!1,!1).then((function(e){t.handleIssueRequestResult(e)})).catch((function(e){t.importIssueError(e.message)}))},handleIssueRequestResult:function(e){this.$set(this.impData[this.count],"issueRequestStatus",2),this.$set(this.impData[this.count],"issueResultCode",e.code),0===e.code?this.successNum++:(this.failedNum++,this.impData[this.count]["issueMsg"]=e.message),this.handleBatchRequest(e)},handleBatchRequest:function(e){var t=this;if(this.continueFlag||0===e.code){var a=Object(c["cloneDeep"])(this.impData[this.count]);this.isBatchJson?Object(r["e"])(this.batchUrl,a,!1,!1).then((function(e){t.handleBatchRequestResult(e)})).catch((function(e){t.importBatchError(e.message)})):Object(r["d"])(this.batchUrl,a,!1,!1).then((function(e){t.handleBatchRequestResult(e)})).catch((function(e){t.importBatchError(e.message)}))}else{var i=Object(c["cloneDeep"])(e);i.message="批处理失败",this.handleBatchRequestResult(i)}},handleBatchRequestResult:function(e){this.$set(this.impData[this.count],"batchRequestStatus",2),this.$set(this.impData[this.count],"batchResultCode",e.code),0===e.code?this.batchSuccessNum++:(this.batchFailedNum++,this.impData[this.count]["batchMsg"]=e.message),this.impData.length>this.count+1?1===this.status&&this.callBack():this.status=3},importError:function(e){try{this.$set(this.impData[this.count],"issueMsg",e),this.$set(this.impData[this.count],"batchMsg",e)}finally{this.$set(this.impData[this.count],"issueRequestStatus",2),this.$set(this.impData[this.count],"batchRequestStatus",2),this.failedNum++,this.batchFailedNum++,this.impData.length>this.count+1?1===this.status&&this.callBack():this.status=3}},importIssueError:function(e){try{this.$set(this.impData[this.count],"issueMsg",e)}finally{this.$set(this.impData[this.count],"issueRequestStatus",2),this.failedNum++,this.handleBatchRequest({message:e})}},importBatchError:function(e){try{this.$set(this.impData[this.count],"batchMsg",e)}finally{this.$set(this.impData[this.count],"batchRequestStatus",2),this.batchFailedNum++,this.impData.length>this.count+1?1===this.status&&this.callBack():this.status=3}},callBack:function(){this.count++;var e=Object(c["cloneDeep"])(this.impData[this.count]);this.oneRow(e)},suspendBatch:function(){this.status=2},continueBatch:function(){this.status=1,this.callBack()},handleClose2:function(){this.successNum=0,this.batchSuccessNum=0,this.failedNum=0,this.batchFailedNum=0,this.count=0,this.status=0}},watch:{tableData:function(e){this.impData=Object(c["cloneDeep"])(e),this.totalNum=e.length}}},d=u,h=(a("e7bf"),a("fb0f"),a("623f")),m=Object(h["a"])(d,l,o,!1,null,"78f1c7fa",null),p=m.exports,b={props:{checkedRows:{type:Array,default:[]},type:{type:Boolean,default:!1}},components:{billIssueAndBatch:p},data:function(){return{batchType:"3",title:"同步面单发放",columns:[{displayName:"运单号",name:"billCode"}],batchData:[],dialogVisible:!1,checkList:[],input:"",billCode:"",show:!1,issueAndBatchShow:!1,issueAndBatchVisible:!1,issueAndBatchData:[],batchUrl:"",issueUrl:""}},mounted:function(){},methods:{issueAndBatchClose:function(){this.batchType="3",this.issueAndBatchVisible=!1,this.type?this.$parent.fetchData({page:this.$parent.pagination.currentPage}):this.$parent.onSearch()},close:function(){this.dialogVisible=!1,this.type?this.$parent.fetchData({page:this.$parent.pagination.currentPage}):this.$parent.onSearch()},showIssueAndBatchRadio:function(){this.show=!1,this.issueAndBatchShow=!0},showBillIssueAndBatch:function(){var e=this;this.issueAndBatchData=Object(n["a"])(this.checkedRows),this.issueAndBatchData.forEach((function(t){t.batchType=e.batchType})),this.issueUrl="/bills/new/sendaBills/sysBillProvid",this.batchUrl="/bills/new/sendaBills/batch",this.issueAndBatchShow=!1,this.dialogVisible=!1,this.issueAndBatchVisible=!0},showBatchProcess:function(){this.batchData=Object(n["a"])(this.checkedRows),this.issueUrl="/bills/new/sendaBills/sysBillProvid",this.show=!1,this.dialogVisible=!0,this.issueAndBatchVisible=!1},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{}},f=b,y=(a("1b98"),a("9b62"),Object(h["a"])(f,i,s,!1,null,"e600a784",null));t["a"]=y.exports},3807:function(e,t,a){"use strict";var i=a("6acc"),s=a.n(i);s.a},"385f":function(e,t,a){"use strict";var i=a("0f84"),s=a.n(i);s.a},"397f":function(e,t,a){"use strict";var i=a("1699"),s=a.n(i);s.a},"3a7f":function(e,t,a){"use strict";var i=a("a684"),s=a.n(i);s.a},"3b4d":function(e,t,a){},"3b53":function(e,t,a){"use strict";var i=a("4b24"),s=a.n(i);s.a},"3c65":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"日汇总",name:"tab1"}},[a("summaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detailH",{ref:"detailed"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main detail-new"},[a("div",{staticClass:"twoTransferFeeNew"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search1",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"f-l"},[a("sc-bill-code",{ref:"oddNum",model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 166px)"}},[a("div",{staticClass:"h_36"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-time"},[e._v("签收时间：")]),a("sc-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:!1,limit:e.limit,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("目的地省：")]),a("sc-province",{staticClass:"w-i-85",attrs:{res:"dispProvince"},model:{value:e.dispProvince,callback:function(t){e.dispProvince=t},expression:"dispProvince"}})],1)])]),a("div",{staticStyle:{display:"inline-block",width:"calc(100% - 73px)"}},[a("ul",[a("li",[a("el-select",{staticClass:"time-select",attrs:{clearable:e.selectClearable},model:{value:e.timeType,callback:function(t){e.timeType=t},expression:"timeType"}},[a("el-option",{key:1,attrs:{label:"收件时间",value:0}}),a("el-option",{key:2,attrs:{label:"到件时间",value:1}})],1),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1)]),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"justify-content":"flex-end","padding-right":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.isearchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[e.billCode.length<1?a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}}):e._e()],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},l=[],o=a("d9ba"),r=(a("9a33"),a("ac0d")),c=a("391c"),u=a("a3be"),d=(a("f37e"),{mixins:[r["b"]],data:function(){var e=this;return{typesParams:{types:"0,2,4,99"},accountType:"",selectClearable:!1,dispProvince:"",params:{child:!0},billType:-2,billTypeList:[{name:"全部",value:-2},{name:"业务员",value:4},{name:"承包区",value:2},{name:"客户",value:0},{name:"无对象",value:-1},{name:"下级网点",value:99}],selectDateType2:1,ishow:!0,ishowHeight:0,ishowHeights:0,optionsClone:"",requestUrl:u["Wb"],exportUrl:u["Ub"],exportObj:{fileName:"二级中转费结算-明细-"},billCode:"",dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],limit:31,dateValue2:[],areaId:"",recManId:"",customerId:"",accountUserId:"",subAccountUserId:"",tableData:[],timeType:0,tableHead:{columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"收件时间",name:"recTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"到件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"recManName"},{displayName:"业务员编码",name:"recManCode",isCode:!0},{displayName:"结算对象",name:"settlementName",size:120},{displayName:"结算对象编码",name:"settlementCode",size:120},{displayName:"目的地省",name:"provinceName"},{displayName:"目的地市",name:"cityName"},{displayName:"结算重量",name:"accountWeight"},{displayName:"二级中转费",name:"twoLevelFee"},{displayName:"运单发放",name:"billProvideManName"},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收时间",name:"signTime",formatter:"yyyy-MM-dd hh:mm:ss",size:150}]}}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},methods:{isearchExport:function(){0!==this.tableData.length?this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},reset:function(){this.accountType="",this.dispProvince="",this.billCode="",this.dateValue=[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.recManId="",this.customerId="",this.dateValue2=[],this.areaId="",this.accountUserId="",this.subAccountUserId="",this.billType=-2},detailed:function(e){this.reset(),this.dateValue=[this.moment(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.signDate).format("YYYY-MM-DD")+" 23:59:59"],this.timeType=0,this.billType=e.type,this.accountType=e.type,99==this.billType?this.typesParams={types:"99"}:this.typesParams={types:"0,2,4"},this.accountUserId=e.accountUserId||"",this.onSearch()},onSearch:function(){var e=this.billCode;if(e=","==e.substring(e.length-1)?e.substring(0,e.length-1):e,e.length>1){for(var t=e.split(","),a=0;a<t.length;a++)""!=t[a]&&null!=t[a]&&void 0!=Object(o["a"])(t[a])||(t.splice(a,1),a-=1);if(t.length>1e3)return void this.msg("查询单号不能超过1000个单号");e=t.join(",")}else{if(0===this.dateValue.length&&0===this.dateValue2.length&&this.msg("签收时间、收件时间不能同时为空"),0===this.dateValue.length||!this.dateValue[0]&&!this.dateValue[1])return void this.msg("签收时间不能为空");if(!this.dateValue[0]||!this.dateValue[1])return void this.msg("请输入完整的签收时间");if(this.dateValue[2]&&this.dateValue[2]<0)return void this.msg("签收的开始时间不能大于结束时间,请重新选择时间");if(this.dateValue[2]&&this.limit<=this.dateValue[2])return void this.msg("签收时间最多可查询"+this.limit+"天的数据,请重新选择时间");var i="";if(i=this.timeType?"到件":"收件",!this.dateValue2[0]===!!this.dateValue2[1])return void this.msg("请输入完整的".concat(i,"时间"));if(this.dateValue2[2]&&this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.dateValue2[2]&&this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var s={timeType:this.timeType,currentPage:this.pagination.currentPage,pageSize:this.pagination.pageSize,accountUserId:this.accountUserId,subAccountUserId:this.subAccountUserId,dispProvince:this.dispProvince,customerId:this.customerId,recManId:this.recManId,startSignDate:null==this.dateValue[0]?"":this.dateValue[0],endSignDate:null==this.dateValue[1]?"":this.dateValue[1],type:this.billType,accountType:this.accountType};3===this.dateValue2.length&&(s.startDate=null==this.dateValue2[0]?"":this.dateValue2[0],s.endDate=null==this.dateValue2[1]?"":this.dateValue2[1]),e.length>0&&(s.billCode=e),this.optionsClone=Object(c["cloneDeep"])(s),this.query(s)},query:function(e){var t=this;Object(u["Vb"])(e).then((function(e){"undefined"===typeof e.data?(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")),t.typesParams={types:"0,2,4,99"}})).catch((function(e){t.pagination.total=0,t.tableData=[],t.typesParams={types:"0,2,4,99"}}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-240:this.z_param.isNode?this.$store.getters.clientHeight-300:this.$store.getters.clientHeight-260}}}),h=d,m=(a("f942"),a("623f")),p=Object(m["a"])(h,n,l,!1,null,null,null),b=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main summary-new"},[a("div",{staticClass:"twoTransferFeeNew"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"right",margin:"6px 6px 0 0"}},[a("el-button",{staticStyle:{padding:"9px 15px !important"},attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("ul",[a("li",[a("label",[e._v("签收日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("扣款状态：")]),a("el-select",{model:{value:e.billState,callback:function(t){e.billState=t},expression:"billState"}},e._l(e.chargeStatusOptions,(function(e){return a("el-option",{key:e.state,attrs:{label:e.name,value:e.state}})})),1)],1)])])]),a("div",{staticStyle:{"border-top":"10px solid #e9eef2",padding:"10px 0px 0px 15px"}},[a("ul",[a("li",{staticStyle:{height:"32px"}}),a("li",{staticClass:"m-r-15 last-child"},[a("el-button",{attrs:{type:"primary"},on:{click:e.exportNew}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n          ")])],1)])])],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},y=[],v=(a("cc57"),a("163d"),{mixins:[r["b"]],data:function(){var e=this;return{exportUrl:u["Yb"],billState:-1,billStatus:[{name:"未结算",state:-1},{name:"结算未推送",state:0},{name:"结算待扣款",state:1},{name:"结算已扣款",state:2}],billTypes:[{name:"全部",state:-2},{name:"无对象",state:-1},{name:"客户",state:0},{name:"承包区",state:2},{name:"业务员",state:4},{name:"下级网点",state:99}],chargeStatusOptions:[{name:"全部",state:-1},{name:"未扣款",state:0},{name:"待扣款",state:1},{name:"已线上扣款",state:2},{name:"已线下收款",state:3}],currRow:[],ishowHeight:0,ishowHeights:0,optionsClone:"",limit:16,exportObj:{fileName:"二级中转费结算-汇总-"},tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],tableHead:{dblclick:this.dblclick,columns:[{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"settlementName",size:120,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:120,isCode:!0},{displayName:"票数",name:"totalCount",size:120,isCode:!0},{displayName:"二级中转费",name:"twoLevelFee",size:120,formatter:"0.00"},{displayName:"扣款金额",name:"hexiaoFee",size:120,formatter:"0.00"},{displayName:"费用差额",name:"subFee",size:120,formatter:"0.00"},{displayName:"扣款状态",name:"hexiaoStatus",value:function(t){if(1===t.hexiaoOffline)return"已线下收款";var a=e.billStatus.filter((function(e){return e.state==Number(t.hexiaoStatus)}));return a.length>0?""===t.type?"未扣款":99===t.type||"下级网点"==t.type?a[0].name:-1===t.hexiaoStatus?"未扣款":"已线上扣款":t.hexiaoStatus}},{displayName:"扣款人",name:"hexiaoMan",isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},methods:{exportNew:function(){this.tableData.length>0?this.pagination.total>this.pagination.pageSize?(console.log("第一个"),this.searchExport()):(this.checklistData=this.tableData,console.log("第二个"),this.checklistExport()):this.msg("没有数据无法导出!")},checkboxAllClick:function(e){this.selectionSite([],e)},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={hexiaoStatus:this.billState,currentPage:this.pagination.currentPage,endSignDate:this.dateValue[1],pageSize:this.pagination.pageSize,startSignDate:this.dateValue[0]};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["Xb"])(e).then((function(e){"undefined"===typeof e.data?(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-170:this.z_param.isNode?this.$store.getters.clientHeight-250:this.$store.getters.clientHeight-190}}}),g=v,C=(a("c6fe"),Object(m["a"])(g,f,y,!1,null,null,null)),x=C.exports,k={name:"twoTransferFeeCheck",components:{summaryH:x,detailH:b},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t)}}},D=k,w=(a("8b86"),Object(m["a"])(D,i,s,!1,null,null,null));t["default"]=w.exports},"3cee":function(e,t,a){},"3dcd":function(e,t,a){},"3e22":function(e,t,a){"use strict";var i=a("d61d"),s=a.n(i);s.a},"3ee1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"日汇总",name:"tab1"}},[a("month-summary",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detail-bill",{ref:"detailBill"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box handListProcess-box"},[a("bill-code",{nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.queryContent.billCodes,callback:function(t){e.$set(e.queryContent,"billCodes",t)},expression:"queryContent.billCodes"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",{staticClass:"label"},[a("span",{staticClass:"label"},[e._v("签收时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.queryContent.timeValue,callback:function(t){e.$set(e.queryContent,"timeValue",t)},expression:"queryContent.timeValue"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("签收状态：")]),a("el-select",{staticStyle:{width:"90px"},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"76px"}},[e._v("退件：")]),a("el-select",{staticStyle:{width:"90px"},model:{value:e.queryContent.returnType,callback:function(t){e.$set(e.queryContent,"returnType",t)},expression:"queryContent.returnType"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("发件时间：")]),a("sc-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.queryContent.dateValue,callback:function(t){e.$set(e.queryContent,"dateValue",t)},expression:"queryContent.dateValue"}})],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"72px"}},[e._v("问题件：")]),a("el-select",{staticStyle:{width:"90px"},model:{value:e.queryContent.probStamp,callback:function(t){e.$set(e.queryContent,"probStamp",t)},expression:"queryContent.probStamp"}},e._l(e.isQuesOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticStyle:{position:"absolute",bottom:"0",right:"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")])],1)])],1)])]),a("div",{staticClass:"content-box "},[a("div",{staticClass:"btn-box"},[a("div"),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{"ng-data":e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.batchRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.titleDialog,"modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.editDialogVisible,width:"600px"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[1===e.currentRow.length?a("div",{staticClass:"form-box-handler"},[a("div",[a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("客户：")]),a("sc-users",{staticClass:"form-input",staticStyle:{width:"170px",display:"inline-block"},attrs:{type:"3","popper-class":"max-index",disabled:99===e.editForm.type},model:{value:e.editForm.customerId,callback:function(t){e.$set(e.editForm,"customerId",t)},expression:"editForm.customerId"}}),a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("业务员：")]),a("sc-users",{staticClass:"form-input",staticStyle:{width:"180px",display:"inline-block"},attrs:{type:"2",disabled:99===e.editForm.type,"popper-class":"max-index"},model:{value:e.editForm.scanUserId,callback:function(t){e.$set(e.editForm,"scanUserId",t)},expression:"editForm.scanUserId"}})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("下级网点：")]),a("sc-site",{staticStyle:{width:"170px",display:"inline-block"},attrs:{disabled:99!==e.editForm.type,"popper-class":"max-index",param:{child:!0}},model:{value:99!==e.editForm.type?"":e.editForm.accountUserId,callback:function(t){e.$set(99!==e.editForm.type?"":e.editForm,"accountUserId",t)},expression:"editForm.type!==99?'':editForm.accountUserId"}}),a("label",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("备注：")]),a("el-input",{staticStyle:{width:"180px",display:"inline-block"},attrs:{maxlength:"30"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark","string"===typeof t?t.trim():t)},expression:"editForm.remark"}})],1)]):e._e(),e.currentRow.length>1?a("div",{staticClass:"edit-col-row-box"},[a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("名称")]),a("div",{staticClass:"col-row-30"},[e._v("是否修改")]),a("div",{staticClass:"col-row-40"},[e._v("内容")])]),a("div",{staticClass:"edit-col-row edit-col-row2"},[a("div",{staticClass:"col-row-30"},[e._v("客户")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.customerCheckChange},model:{value:e.batchEditForm.isCustomerIdEdit,callback:function(t){e.$set(e.batchEditForm,"isCustomerIdEdit",t)},expression:"batchEditForm.isCustomerIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"refCustomerIdEdit1",attrs:{type:"3","popper-class":"max-index",disabled:!e.batchEditForm.isCustomerIdEdit},model:{value:e.batchEditForm.customerId,callback:function(t){e.$set(e.batchEditForm,"customerId",t)},expression:"batchEditForm.customerId"}})],1)]),a("div",{staticClass:"edit-col-row "},[a("div",{staticClass:"col-row-30"},[e._v("业务员")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.userCheckChange},model:{value:e.batchEditForm.isUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isUserIdEdit",t)},expression:"batchEditForm.isUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"refUserIdEdit1",attrs:{type:"2","popper-class":"max-index",disabled:!e.batchEditForm.isUserIdEdit},model:{value:e.batchEditForm.scanUserId,callback:function(t){e.$set(e.batchEditForm,"scanUserId",t)},expression:"batchEditForm.scanUserId"}})],1)]),a("div",{staticClass:"edit-col-row edit-col-row2"},[a("div",{staticClass:"col-row-30"},[e._v("下级网点")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.accountCheckChange},model:{value:e.batchEditForm.isAccountUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isAccountUserIdEdit",t)},expression:"batchEditForm.isAccountUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-site",{attrs:{disabled:!e.batchEditForm.isAccountUserIdEdit,"popper-class":"max-index",param:{child:!0}},model:{value:e.batchEditForm.accountUserId,callback:function(t){e.$set(e.batchEditForm,"accountUserId",t)},expression:"batchEditForm.accountUserId"}})],1)]),a("div",{staticClass:"edit-col-row "},[a("div",{staticClass:"col-row-30"},[e._v("备注")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.remarkCheckChange},model:{value:e.batchEditForm.isRemarkEdit,callback:function(t){e.$set(e.batchEditForm,"isRemarkEdit",t)},expression:"batchEditForm.isRemarkEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("el-input",{staticStyle:{width:"170px"},attrs:{disabled:!e.batchEditForm.isRemarkEdit,maxlength:"30"},model:{value:e.batchEditForm.remark,callback:function(t){e.$set(e.batchEditForm,"remark","string"===typeof t?t.trim():t)},expression:"batchEditForm.remark"}})],1)])]):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editBatchUpdate}},[e._v("确 定")])],1)])],1)},l=[],o=(a("163d"),a("2b45"),a("ed63"),a("8cf2"),a("9a33"),a("f548"),a("ac0d")),r=a("391c"),c=a("6bf2"),u=a.n(c),d=a("a3be"),h=a("4055"),m=a("f37e"),p=function(e){return{dblclick:e.dblclick,columns:[{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算网点",name:"dispAccountName",size:120,isCode:!0},{displayName:"结算网点编码",name:"dispAccountCode",size:120,isCode:!0},{displayName:"签收票数",name:"signNum",size:120,isCode:!0},{displayName:"应付派件费",formatter:"0.00",name:"dispFee",size:120,isCode:!0},{displayName:"加款金额",value:function(e){return"未加款"==e.deductName?"":e.dispFeeHexiao},name:"dispFeeHexiao",size:120,isCode:!0},{displayName:"差额",value:function(e){return"未加款"==e.deductName?"":e.balance},name:"balance",size:120,isCode:!0},{displayName:"加款状态",name:"deductName"},{displayName:"结算流水号",name:"waterNumber",size:120,value:function(e){return"已线下返款"==e.deductName||"未加款"==e.deductName?"":e.waterNumber}},{displayName:"结算编码",name:"accountNumber",isCode:!0,size:120,value:function(e){return"已线下返款"==e.deductName||"未加款"==e.deductName?"":e.accountNumber}},{displayName:"加款人",name:"hexiaoMan",value:function(e){return"未加款"==e.deductName?"":e.hexiaoMan}},{displayName:"加款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss",value:function(t){return"未加款"==t.deductName?"":e.moment(t.hexiaoTime).format("YYYY-MM-DD HH:mm:ss")}}]}},b=function(e){return{dblclick:e.dblclick,columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"产品类型",name:"productName"},{displayName:"下级网点",name:"dispNextSiteName"},{displayName:"下级网点编码",name:"dispNextSiteCode",isCode:!0},{displayName:"结算网点",name:"dispAccountName"},{displayName:"派件业务员",name:"dispManName"},{displayName:"派件业务员工号",name:"dispManCode",isCode:!0},{displayName:"签收业务员",name:"signManName"},{displayName:"签收业务员工号",name:"signMaCode",isCode:!0},{displayName:"结算重量",name:"accountWeight"},{displayName:"应付派费",name:"dispFee"},{displayName:"寄件网点",name:"sendSiteName"},{displayName:"发件时间",name:"scanDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"派件时间",name:"dispTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",value:function(e){return Object(m["x"])(Number(e.signStatus))}},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"面单类型",name:"billType",size:100,value:function(e){return Object(m["t"])(Number(e.billType))}},{displayName:"是否退件",name:"returnType",size:100,value:function(e){return e.returnType?"是":"否"}},{displayName:"问题件标识",name:"probStamp",size:100,value:function(e){return e.probStamp?"是":"否"}},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]}},f="对应收派费账单-汇总",y="对应收派费账单-明细",v="/bills/reconciliation/dispFee/detail/export",g="/bills/reconciliation/dispFee/day",C={mixins:[o["b"]],activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},created:function(){this.queryContentClone=Object.assign({},this.queryContent)},watch:{},data:function(){return{settleParam:{types:""},height:352,optionAdd:[{code:"",id:0,name:"为空"}],isStatusOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],isQuesOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],titleDialog:"编辑",editForm:{billCode:"",accountUserId:"",scanUserId:"",customerId:"",remark:""},limit:31,batchEditForm:{isUserIdEdit:!1,isCustomerIdEdit:!1,isAccountUserIdEdit:!1,isRemarkEdit:!1,scanUserId:"",accountUserId:"",remark:"",customerId:""},codeType:0,signStatusOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],sourceStatusOptions:[{value:-1,label:"全部"},{value:1,label:"掌中通粉丝"},{value:2,label:"码上寄"},{value:3,label:"丰巢"},{value:4,label:"其它"}],feeType:[{label:"全部",id:-1},{label:"退件费",id:1},{label:"转账费",id:2},{label:"拦截费",id:0}],billType:[{label:"全部",id:-2},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}],billStatus:[{label:"全部",id:-1},{label:"未扣款",id:2},{label:"已线上扣款",id:1},{label:"已线下收款",id:6}],queryContent:{returnType:-1,probStamp:-1,goodsType:-1,signStatus:-1,dateValue:[],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billCodes:""},optionsClone:{},tableHead:b(this),tableData:[],currentRow:[],batchRow:[],batchTitle:"",batchUrl:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode"}],exportObj:{fileName:y},exportUrl:v,deductDialogVisible:!1,deductForm:{fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:0,isBatch:0},editUserId:"",editDialogVisible:!1}},methods:{changeType:function(e){1===e?this.queryContent.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")]:this.queryContent.timeValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]},userCheckChange:function(e){e||(this.batchEditForm.scanUserId="")},accountCheckChange:function(e){e||(this.batchEditForm.accountUserId="")},remarkCheckChange:function(e){e||(this.batchEditForm.remark="")},customerCheckChange:function(e){e||(this.batchEditForm.customerId="")},editBatchUpdate:function(){if(1===this.currentRow.length)this.batchTitle="编辑",this.batchRow=[Object(r["cloneDeep"])(this.editForm)],this.batchRow=this.batchRow.map((function(e){return e.accountUserId=99!==e.type?0:e.accountUserId?e.accountUserId:0,e.scanUserId=99===e.type?0:e.scanUserId?e.scanUserId:0,e.customerId=99===e.type?0:e.customerId?e.customerId:0,e}));else{if(!this.batchEditForm.isUserIdEdit&&!this.batchEditForm.isCustomerIdEdit&&!this.batchEditForm.isAccountUserIdEdit&&!this.batchEditForm.isRemarkEdit)return void(this.editDialogVisible=!1);this.batchTitle="批量编辑";var e={scanUserId:this.batchEditForm.isUserIdEdit?this.batchEditForm.scanUserId?this.batchEditForm.scanUserId:0:void 0,customerId:this.batchEditForm.isCustomerIdEdit?this.batchEditForm.customerId?this.batchEditForm.customerId:0:void 0,accountUserId:this.batchEditForm.isAccountUserIdEdit?this.batchEditForm.accountUserId?this.batchEditForm.accountUserId:0:void 0,remark:this.batchEditForm.isRemarkEdit?this.batchEditForm.remark:void 0};this.batchRow=this.currentRow.map((function(t){return{forcedUpdate:!1,scanUserId:e.scanUserId,customerId:e.customerId,accountUserId:e.accountUserId,remark:e.remark,billCode:t.billCode}}))}this.editDialogVisible=!1,this.batchUpdateAjax()},batchUpdateAjax:function(){var e=this;this.batchUrl="/bills/new/sendaBillsHandwork/forcedUpdate",console.log(this.batchRow),console.log("this.batchRow"),this.$nextTick((function(){e.batchDialogVisible=!0}))},summaryToDetail:function(e){var t=this;this.resetQueryContent(),this.queryContent.timeValue=[this.moment(e.signDate).format("YYYY-MM-DD 00:00:00"),this.moment(e.signDate).format("YYYY-MM-DD 23:59:59")],setTimeout((function(){t.onSearch()}),0)},settlementChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},keyup:function(){this.queryContent.billCodes=this.queryContent.billCodes.replace(/,/g,"").replace(/，/g,"")},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},startDateChangeA:function(e){e&&this.$refs.timePickerB.focus()},startDateChangeB:function(e){e&&this.$refs.timePickerD.focus()},onSearch:function(){var e=Object(r["cloneDeep"])(this.queryContent);if(Object(r["trim"])(this.queryContent.billCodes)){console.log(Object(r["trim"])(this.queryContent.billCodes)),console.log(" trim(this.queryContent.billCodes)");var t=Object(r["trim"])(this.queryContent.billCodes).split(/[,\r\n]/);if(t.length>1e3){var a="最多支持1000个单号查询";return void this.msg(a)}e.billCodes="",e.bagNos="",0===this.codeType?e.billCodes=t.join(","):e.bagNos=t.join(",")}else{if(e.billCodes=null,e.bagNos=null,!this.queryContent.dateValue[2]&&!this.queryContent.timeValue[2])return void this.msg("签收时间必须选择一个完整的时间");if(this.queryContent.timeValue[2]<0)return void this.msg("签收开始时间不能大于结束时间");if(this.queryContent.timeValue[2]>=this.limit)return void this.msg("签收时间最多可查询".concat(this.limit,"天"));var i="发件";if(this.queryContent.dateValue[2]&&this.queryContent.dateValue[2]<0)return void this.msg("".concat(i,"开始时间不能大于结束时间"));if(this.queryContent.dateValue[2]&&this.queryContent.dateValue[2]>=this.limit)return void this.msg("".concat(i,"时间最多可查询").concat(this.limit,"天"));if(!!this.queryContent.dateValue[0]!==!!this.queryContent.dateValue[1])return void this.msg("发件时间必须选择一个完整的时间")}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,e.signDateStart=this.queryContent.timeValue[0],e.signDatEnd=this.queryContent.timeValue[1],e.scanDateStart=this.queryContent.dateValue[0],e.scanDateEnd=this.queryContent.dateValue[1],e.pageSize=this.pagination.pageSize,e.currentPage=this.pagination.currentPage,e.dateValue=void 0,e.timeValue=void 0,this.query(e)},query:function(e){var t=this;e&&(this.optionsClone=Object(r["cloneDeep"])(e)),d["O"].getDispatchDtBill(this.optionsClone).then((function(e){t.settleParam.types="",0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.tableData.map((function(e){0===e.billStatus&&(e.deductOperator="",e.deductDate="")})),t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){try{console.log(e),console.log("query  res"),e.message?t.msg(e.message):e.status&&503===e.status||t.msg("暂无数据！")}catch(a){}t.settleParam.types="",t.pagination.total=0,t.tableData=[]}))},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},heightChange:function(e){var t=this;this.height=e?352:232,this.$nextTick((function(){t.z_method.refreshSpread()}))},resetQueryContent:function(){this.queryContent={returnType:-1,probStamp:-1,goodsType:-1,signStatus:-1,dateValue:[],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billCodes:""}},onClickTable:function(){},getType:function(e){this.codeType=e?0:1},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请填写完整的签收时间"),!0;if(u()(e).isAfter(t))return this.msg("签收开始时间不能大于结束时间,请重新选择签收时间"),!0;var i=u()(t).subtract(31,"days"),s=u()(i).isAfter(u()(e));return!!s&&(this.msg(a+"最多可查询"+this.limit+"天"),!0)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},openDeduct:function(e,t){1===this.currentRow.length?(this.deductForm={fineCode:this.currentRow[0].fineCode,accountUserName:this.currentRow[0].accountUserName,fineFee:this.currentRow[0].fineFee,deductFee:Object(r["cloneDeep"])(this.currentRow[0].fineFee),remark:Object(r["cloneDeep"])(this.currentRow[0].remark),fineType:this.currentRow[0].fineType,type:this.currentRow[0].type,id:this.currentRow[0].id,deductFeeType:t,isBatch:0},this.deductDialogVisible=!0):this.currentRow.length>1&&(this.batchTitle=e,this.deductForm.deductFeeType=t,this.batchUpdateAjax())},checkNum:function(e){var t=!1;if(e.toString().includes(".")){var a=e.toString().split("."),i=a[1].length;i>2&&(t=!0)}return t},singleDeduct:function(){0===this.deductForm.deductFee||"0"===this.deductForm.deductFee||""!==this.deductForm.deductFee&&this.deductForm.deductFee?0!=this.deductForm.deductFee?/^\d+(\.\d+)?$/.test(this.deductForm.deductFee)?this.checkNum(this.deductForm.deductFee)?this.msg("扣款金额小数点只能保留2位小数!"):Number(this.deductForm.deductFee)<0||Number(this.deductForm.deductFee)>9999999?this.msg("扣款金额的范围是0~9999999"):!this.deductForm.remark||h["billUtils"].regRemark(this.deductForm.remark)?this.deductForm.deductFeeType<2?this.deductAjax():this.underlineDeductAjax():this.msg("只能输入数字或字母或中文或常见符号!"):this.msg("请输入有效数字且最多能输入两位小数！"):this.msg("扣款金额不能为0!"):this.msg("扣款金额不能为空!")},deductAjax:function(){var e=this;returnDeductAjax(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:"",isBatch:0})}))},underlineDeductAjax:function(){var e=this;returnUnderlineDeductAjax(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",type:"",id:"",deductFeeType:"",isBatch:0})}))},openEdit:function(){var e=this;0!==this.currentRow.length?(this.editForm={},1===this.currentRow.length?(this.titleDialog="编辑",setTimeout((function(){e.editForm={forcedUpdate:!0,type:e.currentRow[0].type,billCode:e.currentRow[0].billCode,remark:e.currentRow[0].remark,accountUserId:e.currentRow[0].accountUserId,scanUserId:e.currentRow[0].scanUserId?e.currentRow[0].scanUserId:"",customerId:e.currentRow[0].customerId?e.currentRow[0].customerId:""}}),0)):(this.titleDialog="批量编辑",this.batchEditForm={isUserIdEdit:!1,isCustomerIdEdit:!1,isAccountUserIdEdit:!1,isRemarkEdit:!1,scanUserId:"",accountUserId:"",remark:"",forcedUpdate:!1,customerId:""}),this.editDialogVisible=!0):this.msg("请选择需要结算的数据！")},confirmEdit:function(){this.editUserId?(this.editDialogVisible=!1,this.batchTitle="编辑",this.batchUpdateAjax()):this.msg("请选择业务员!")},batchUpdate:function(e){0!==this.currentRow.length?(this.batchTitle=e.target.innerText,this.batchUpdateAjax()):this.msg("请选择要操作的数据!")},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},close:function(e){this.batchDialogVisible=!1,this.batchRow=[],"noSearch"!==e&&(this.currentRow=[],this.query())}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+80:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},x=C,k=(a("8517"),a("d386"),a("623f")),D=Object(k["a"])(x,n,l,!1,null,"8fccd66a",null),w=D.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main dispatchFeeBillSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",[a("li",[a("label",[e._v("签收日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("加款状态：")]),a("el-select",{model:{value:e.hexiaoStatus,callback:function(t){e.hexiaoStatus=t},expression:"hexiaoStatus"}},e._l(e.hexiaoStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"inline-block",margin:"5px 0 5px 0",float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"}),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,sendFeeBill:"",fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRowNew,batchUrl:e.batchUrl,"data-validate":e.dataValidate,isJson:e.isJson},on:{model:e.close}})],1)},_=[],N=(a("6d57"),a("cc57"),{mixins:[o["b"]],data:function(){return{ishowHeights:0,ishowHeight:0,requestUrl:g,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],limit:31,optionsClone:{},billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:0,label:"客户"},{value:4,label:"业务员"},{value:2,label:"承包区"}],hexiaoStatus:-1,hexiaoStatusOptions:[{value:-1,label:"全部"},{value:3,label:"未加款"},{value:2,label:"已线上加款"},{value:5,label:"已线下返款"}],exportObj:{fileName:f},tableData:[],tableHead:p(this),currRow:[],batchTitle:"",batchDialogVisible:!1,columns:[],currRowNew:[],batchUrl:"",isJson:"",editDialogVisible:!1,remarkText:""}},methods:{close:function(){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()},handleClose:function(){this.editDialogVisible=!1},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},dblclick:function(e,t,a){this.$emit("goto","tab2",t,this.tableHead.columns[a.col].name)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始日期不能大于结束日期,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={startDate:null==this.dateValue[0]?"":this.dateValue[0],endDate:null==this.dateValue[1]?"":this.dateValue[1],deductStatus:this.hexiaoStatus,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(r["cloneDeep"])(e),this.query(e)}},ischeckrow:function(e){return e.forEach((function(t,a){t.remark&&(e[a].remark=t.remark.replace(/,/g,"-")),"未加款"===t.deductName&&(e[a].hexiaoTime="",e[a].hexiaoMan="",e[a].accountNumber="",e[a].waterNumber="",e[a].balance="",e[a].dispFeeHexiao="")})),e},query:function(e){var t=this;d["O"].getDispatchFeeBill(e).then((function(e){0===e.code?e.data&&e.data.totalRow>0&&e.data.list.length>0?(t.tableData=t.ischeckrow(e.data.list),t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){try{console.log(e),console.log("query  res"),e.message?t.msg(e.message):e.status&&503===e.status||t.msg("暂无数据！")}catch(a){}t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},remarkText:{handler:function(e,t){h["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-160:this.$store.getters.clientHeight-240}}}),T=N,I=(a("9a3f"),Object(k["a"])(T,S,_,!1,null,null,null)),O=I.exports,E={name:"dispatchFeeBill",components:{detailBill:w,monthSummary:O},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailBill.summaryToDetail(t)}}},z=E,F=(a("05ef"),Object(k["a"])(z,i,s,!1,null,"cfd8c490",null));t["default"]=F.exports},"3ef9":function(e,t,a){},"3fac":function(e,t,a){},"3fb8":function(e,t,a){"use strict";var i=a("88bd"),s=a.n(i);s.a},"3fc7":function(e,t,a){"use strict";var i=a("d485"),s=a.n(i);s.a},"40a8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"明细结算",name:"tab1"}},[a("detailH",{ref:"detailed"})],1),a("el-tab-pane",{attrs:{label:"汇总查询",name:"tab2",lazy:!0}},[a("summaryH",{on:{goto:e.goto}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main collectFeesDetail"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left","margin-top":"5px"}},[a("sc-bill-code",{ref:"billcodeRef",nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticStyle:{float:"left",height:"84px",width:"60px","line-height":"30px","margin-top":"30px","margin-left":"14px"}},[a("el-radio",{attrs:{label:"1"},on:{change:e.check1},model:{value:e.PQradio,callback:function(t){e.PQradio=t},expression:"PQradio"}},[e._v("有派签")]),a("el-radio",{attrs:{label:"2"},on:{change:e.check2},model:{value:e.PQradio,callback:function(t){e.PQradio=t},expression:"PQradio"}},[e._v("无派签")])],1),a("div",[a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v(e._s("2"==e.PQradio?"扫描":"签收")+"时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:"2"!=e.PQradio,editable:!1,isCheckMsg:!1,disabled:2===e.signStatus||0===e.signStatus},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("费用类型：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.feeType,callback:function(t){e.feeType=t},expression:"feeType"}},e._l(e.feeTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("账单类型：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-80"},[e._v("结算对象：")]),a("sc-users",{staticClass:"w-i-85",attrs:{type:"7",param:{types:"2,4,99"}},on:{change:e.checkSettlementType},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.PQradio,expression:"PQradio==1"}],staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("派件时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("业务员：")]),a("sc-users",{staticClass:"w-i-85",attrs:{type:"2",param:{types:"1,2,4"}},model:{value:e.usersId,callback:function(t){e.usersId=t},expression:"usersId"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("结算状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-80"},[e._v("中心结算状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.centerSignStatus,callback:function(t){e.centerSignStatus=t},expression:"centerSignStatus"}},e._l(e.centerSignStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"dh_content h-show"},[a("ul",[a("li",{staticClass:"m-l-20 m-r-20"},[a("label",{staticClass:"w-r-62"},[e._v("是否退件：")]),a("el-select",{model:{value:e.isBack,callback:function(t){e.isBack=t},expression:"isBack"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-102"},[e._v("是否问题件：")]),a("el-select",{model:{value:e.isProblem,callback:function(t){e.isProblem=t},expression:"isProblem"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"w-r-62"},[e._v("渠道来源：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.source,callback:function(t){e.source=t},expression:"source"}},e._l(e.sourceType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("异常数据包含："),a("br"),e._v("①代收到付款都为0的；"),a("br"),e._v("②有中心结算时间，但是中心结算网点不是登陆网点"),a("br"),e._v("和登陆网点的下级网点的；")]),a("span",{staticClass:"w-r-62"},[e._v("是否异常：")])]),a("el-select",{staticClass:"w-i-85",model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:"1"==e.PQradio,expression:"PQradio=='1'"}],staticClass:"m-r-0"},[a("label",{staticClass:"w-r-80"},[e._v("签收状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.signStatus,callback:function(t){e.signStatus=t},expression:"signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:"1"==e.PQradio,expression:"PQradio=='1'"}],staticClass:"m-l-20"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("①现代收到付金额和上次金额不一致"),a("br"),e._v("②现结算对象与上次结算对象不一致；")]),a("el-checkbox",{staticClass:"m-rh",staticStyle:{"margin-right":"16px"},model:{value:e.cancelSettlement,callback:function(t){e.cancelSettlement=t},expression:"cancelSettlement"}},[e._v("需取消结算")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("中心尚未与网点结算的数据，此类数"),a("br"),e._v("据禁止与业务员及下级网点结算；")]),a("el-checkbox",{model:{value:e.beSettled,callback:function(t){e.beSettled=t},expression:"beSettled"}},[e._v("等待结算")])],1)],1),a("li",{directives:[{name:"show",rawName:"v-show",value:"1"==e.PQradio,expression:"PQradio=='1'"}]},[a("label",{staticClass:"w-r-80"},[e._v("是否扫码付：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.scanCodePayment,callback:function(t){e.scanCodePayment=t},expression:"scanCodePayment"}},e._l(e.scanCodePaymentOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"h-test",class:{"h-show1":"2"==e.PQradio},staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[e.z_method.showBtn("btn_collectFee_writeOff")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            扣预付款\n          ")])],1):e._e(),e.z_method.showBtn("btn_collectFee_writeOff")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            线下收款\n          ")])],1):e._e(),e.z_method.showBtn("btn_collectFee_cancelWriteOff")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            取消扣款\n          ")])],1):e._e(),e.z_method.showBtn("btn_collectFee_edit")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            编辑\n          ")])],1):e._e(),e.z_method.showBtn("btn_collectFee_recalculate")?a("li",[a("el-button",{attrs:{type:"success",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            重新计算\n          ")])],1):e._e(),e.z_method.showBtn("btn_collectFee_edit")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            编辑备注\n          ")])],1):e._e()])]),a("div",{staticStyle:{"margin-right":"10px"}},[a("el-button",{attrs:{type:"danger"},on:{click:e.showCell}},[e._v("\n        显示列设置\n      ")])],1),e.z_method.showBtn("btn_collectFee_export")?a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.isearchExport}},[e._v("导出")])],1):e._e()]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight-10+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sc-cell-setting",{ref:"refTxCell",attrs:{menuName:"收派件到收到付",menuKey:"collectFeesDetail",spreadHeadData:e.tableHead.columns},on:{model:e.onColumns}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.editTitle,visible:e.editDialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"500px",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("div",{staticClass:"edit"},["编辑备注"!==e.batchTitle?[a("div",{staticClass:"form-box"},[1===e.currRow.length?[a("div",{staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("运单号：")]),a("el-input",{staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:e.billCodeEdit,callback:function(t){e.billCodeEdit=t},expression:"billCodeEdit"}})],1),a("div",{staticClass:"form-box-item white-h"},[a("el-checkbox",{staticStyle:{height:"32px","line-height":"32px","margin-left":"140px"},on:{change:e.changNZ},model:{value:e.checkedEdit,callback:function(t){e.checkedEdit=t},expression:"checkedEdit"}},[e._v(e._s(99==e.currRow[0].dispAccountType?"需要转入自营账单":"需要转入下级账单"))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.iShowNZ,expression:"iShowNZ"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("结算对象：")]),a("sc-users",{ref:"clearZ",attrs:{type:"7",param:{types:"2,4"},"popper-class":"max-index"},model:{value:e.accountUserIdEditZ,callback:function(t){e.accountUserIdEditZ=t},expression:"accountUserIdEditZ"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.iShowNZ,expression:"!iShowNZ"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("下级网点：")]),a("sc-users",{ref:"clearN",attrs:{type:"7",param:{types:"99"},"popper-class":"max-index"},model:{value:e.accountUserIdEditN,callback:function(t){e.accountUserIdEditN=t},expression:"accountUserIdEditN"}})],1),a("div",{staticClass:"form-box-item white-h"},[a("span",{staticClass:"form-title"},[e._v("实收货款：")]),a("el-input",{staticStyle:{width:"180px"},attrs:{disabled:5===e.currRow[0].operateStatus},model:{value:e.feeEdit,callback:function(t){e.feeEdit=t},expression:"feeEdit"}})],1),a("div",{staticClass:"form-box-item",staticStyle:{color:"red",height:"40px"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"padding-left":"20px"}},[e._v("提示：实收货款如果手工更改过，账单的扣款金额就以实收货款为准；")])])]:[a("div",{staticClass:"form-box-item",staticStyle:{height:"40px"}},[a("el-radio-group",{model:{value:e.transType,callback:function(t){e.transType=t},expression:"transType"}},[a("el-radio",{staticStyle:{"padding-left":"90px"},attrs:{label:0},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(0)}}},[e._v("需要转入下级账单\n                ")]),a("el-radio",{staticStyle:{"padding-left":"40px"},attrs:{label:1},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(1)}}},[e._v("需要转入自营账单\n                ")])],1)],1),a("div",{staticClass:"form-box-item white-h",staticStyle:{color:"red",height:"40px"}},[1===e.transType?a("i",{staticClass:"el-icon-warning",staticStyle:{"padding-left":"60px"}},[e._v("选择后下级账单会变更为自营账单，原自营账单不做变更；")]):0===e.transType?a("i",{staticClass:"el-icon-warning",staticStyle:{"padding-left":"60px"}},[e._v("选择后自营账单会变更为下级账单，原下级账单不做变更；")]):[99===e.settlementTypeEdit?a("i",{key:"title-h",staticClass:"el-icon-warning",staticStyle:{"padding-left":"120px"}},[e._v("当前选择状态仅对下级账单进行转换；")]):99!==e.settlementTypeEdit&&""!=e.settlementTypeEdit?a("i",{key:"title-h",staticClass:"el-icon-warning",staticStyle:{"padding-left":"120px"}},[e._v("当前选择状态仅对自营账单进行转换；")]):a("i",{key:"title-h",staticClass:"el-icon-warning",staticStyle:{"padding-left":"10px"}},[e._v("不选择转入类型变更仅对同类型账单进行转换；勾选后对所有账单有效；")])]],2),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.transType,expression:"transType === 1"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("结算对象：")]),a("sc-users",{ref:"clearZ",attrs:{type:"7",param:{types:"2,4"},"popper-class":"max-index"},model:{value:e.accountUserIdEditZ,callback:function(t){e.accountUserIdEditZ=t},expression:"accountUserIdEditZ"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.transType,expression:"transType === 0"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("下级网点：")]),a("sc-users",{ref:"clearN",attrs:{type:"7",param:{types:"99"},"popper-class":"max-index"},model:{value:e.accountUserIdEditN,callback:function(t){e.accountUserIdEditN=t},expression:"accountUserIdEditN"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.transType&&0!==e.transType,expression:"transType == '' && transType !== 0"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("结算对象：")]),a("sc-users",{ref:"clearZN",attrs:{type:"7",param:{types:"2,4,99"},"popper-class":"max-index"},on:{change:e.checkSettlementTypeEdit},model:{value:e.accountUserIdEditZN,callback:function(t){e.accountUserIdEditZN=t},expression:"accountUserIdEditZN"}})],1)]],2)]:e._e(),"编辑备注"===e.batchTitle?[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("备注：")]),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字！",maxlength:"30","show-word-limit":"",resize:"none",rows:"4"},model:{value:e.remarkText,callback:function(t){e.remarkText="string"===typeof t?t.trim():t},expression:"remarkText"}})],1)],1)]:e._e()],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.isdisabledFn},on:{click:e.checkBillPost}},[e._v("确 定")])],1)]),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate,isJson:e.isJson,isSucessMsg:e.isSucessMsg},on:{model:e.close}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=(a("9a33"),a("f548"),a("163d"),a("ac0d")),c=a("391c"),u=a("a3be"),d=a("f37e"),h=a("4055");a("49a5");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={mixins:[r["b"]],data:function(){var e=this;return{scanCodePayment:-1,scanCodePaymentOptions:[{value:-1,label:"全部"},{value:2,label:"是"},{value:1,label:"否"}],PQradio:"1",isSucessMsg:!0,isJson:!1,limit:16,ishowHeights:0,ishowHeight:0,billCode:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],dateValue2:[],feeType:-2,feeTypeOptions:[{value:-2,label:"全部"},{value:0,label:"代收"},{value:1,label:"到付"}],billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:4,label:"业务员"},{value:2,label:"承包区"},{value:-1,label:"无对象"},{value:99,label:"下级网点"}],status:-2,statusOptions:[{value:-2,label:"全部"},{value:0,label:"未结算"},{value:1,label:"已线下收款"},{value:2,label:"已线上扣款"}],signStatus:-1,signStatusOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],centerSignStatus:-2,centerSignStatusOptions:[{value:-2,label:"全部"},{value:-1,label:"无结算"},{value:0,label:"待结算"},{value:3,label:"待审核"},{value:1,label:"结算成功"},{value:2,label:"结算失败"}],isBack:-2,isProblem:-2,queryType:0,cancelSettlement:!1,beSettled:!1,isStatusOptions:[{value:-2,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],source:"",sourceType:[{label:"全部",id:""},{label:"淘宝COD",id:"TB_ONLINE"},{label:"快递管家COD",id:"KDGJ_COD"},{label:"快递管家普通COD",id:"KDGJ_PTCOD"},{label:"网点录单",id:"WDLD"},{label:"掌中通录单",id:"ZZT"},{label:"快递鸟",id:"KDN"},{label:"菜鸟线下",id:"WAY_ BILL_OFFLINE"},{label:"菜鸟",id:"WAY_BILL"},{label:"微信",id:"Wechat"},{label:"shenzhou",id:"shenzhou"}],accountUserId:"",usersId:"",currRow:[],tableData:[],tableHeadNew:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[]},tableHead:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,hlock:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"结算状态",name:"operateStatus",hlock:!0,size:100,lock:!0,value:function(e){return Object(d["w"])(Number(e.operateStatus))}},{displayName:"运单号",name:"billCode",size:150,hlock:!0,isCode:!0,lock:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"费用类型",name:"goodsPaymentType",isFrozen:!0,hlock:!0,size:100,lock:!0,value:function(e){return Object(d["o"])(Number(e.goodsPaymentType))}},{displayName:"账单类型",name:"dispAccountType",size:100,value:function(e){return Object(d["b"])(Number(e.dispAccountType))}},{displayName:"扫描时间",name:"scanDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"业务员",name:"userName",size:100,isCode:!0},{displayName:"业务员编号",name:"userCode",size:100,isCode:!0},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:100,isCode:!0},{displayName:"应结算金额",name:"oughtSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"已结算金额",name:"haveSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"代收/到付款",name:"goodsPaymentFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"实收货款",name:"factGoods",size:100,showTotal:!0,formatter:"0.00"},{displayName:"手续费提成",name:"szServiceFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"手续费收入",name:"ztPaiFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"寄件网点",name:"sendSiteName",size:100,isCode:!0},{displayName:"派件时间",name:"dispDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(d["z"])(Number(e.signStatus))}},{displayName:"签收人",name:"signMan",size:100,isCode:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"扣款人",name:"operateManName",size:100,isCode:!0},{displayName:"扣款时间",name:"operateDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算状态",name:"ztStatus",value:function(e){return Object(d["F"])(Number(e.ztStatus))}},{displayName:"中心结算时间",name:"balanceDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算网点",name:"paySiteName",size:100,isCode:!0},{displayName:"问题件",name:"otherType",value:function(e){return Object(d["s"])(Number(e.otherType))}},{displayName:"退件",name:"returnType",value:function(e){return Object(d["s"])(Number(e.returnType))}},{displayName:"是否异常",name:"errorType",value:function(e){return Object(d["s"])(Number(e.errorType))}},{displayName:"上次扣款对象",name:"lastAccountName",isCode:!0},{displayName:"上次扣款金额",name:"lastAccountFee",size:100,showTotal:!0},{displayName:"渠道来源",name:"source",size:100,isCode:!0},{displayName:"是否扫码付",name:"payType",value:function(e){return 1==e.payType?"否":2==e.payType?"是":"否"}},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},optionsClone:"",exportUrl:"/bills/newGoodsPaymentDispatch/export",editDialogVisible:!1,batchTitle:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode",size:100}],batchUrl:"",billCodeEdit:"",checkedEdit:!1,transType:"",iShowNZ:!1,feeEdit:0,accountUserIdEditZ:"",accountUserIdEditN:"",accountUserIdEditZN:"",remarkText:"",editTitle:"",settlementType:0,settlementTypeEdit:"",exportObj:{fileName:"收派件代收到付-明细结算"}}},created:function(){},methods:{onColumns:function(e){this.tableHeadNew.columns=e},check1:function(){this.reset(),this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"]},check2:function(){this.dateValue2=[],this.feeType=-2,this.billsTypeStatus=-2,this.status=-2,this.signStatus=-1,this.centerSignStatus=-2,this.accountUserId="",this.usersId="",this.payStatus=-2,this.queryType=0,this.source="",this.isBack=0,this.isProblem=0,this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]},clickitem:function(e){e===this.transType?this.transType="":this.transType=e},changNZ:function(){this.iShowNZ=!this.iShowNZ},checkSettlementType:function(e){e?99===e.type?this.settlementType=2:this.settlementType=1:this.settlementType=0},checkSettlementTypeEdit:function(e){this.settlementTypeEdit=e?e.type:""},detailed:function(e,t){var a=this;this.reset(),"1"===e.hradio?this.dateValue=[this.moment(e.date).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.date).format("YYYY-MM-DD")+" 23:59:59"]:(this.dateValue=[],this.dateValue2=[this.moment(e.date).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.date).format("YYYY-MM-DD")+" 23:59:59"]),this.feeType=e.goodsPaymentType,this.billsTypeStatus=e.dispAccountType,this.settlementType=99===e.dispAccountType?2:1,"notSettleVotes"===t&&(this.status=0),"otherVotes"===t&&(this.isProblem=1),setTimeout((function(){e.dispAccountId&&(a.accountUserId=e.dispAccountId),a.onSearch()}),0)},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},dataValidate:function(e){var t=this;return new Promise((function(a,i){if(2!==e.payType)if(1!==e.errorType||"扣预付款"!==t.batchTitle&&"线下收款"!==t.batchTitle){if(4===e.operateStatus){if("扣预付款"===t.batchTitle||"线下收款"===t.batchTitle)return void i("该运单中心未结算，不能结算！");if("编辑"===t.batchTitle)return void i("该运单中心未结算，不能编辑！");if("取消扣款"===t.batchTitle)return void i("该运单中心未结算，不能取消扣款！")}else if(0===e.operateStatus){if("取消扣款"===t.batchTitle)return void i("状态为未结算，不能取消扣款！")}else if(5===e.operateStatus){if("扣预付款"===t.batchTitle||"线下收款"===t.batchTitle)return void i("该运单为已结算状态，不能重复结算！")}else if(1===e.operateStatus||2===e.operateStatus){if("扣预付款"===t.batchTitle||"线下收款"===t.batchTitle)return void i("该运单为已结算，不能重复结算！");if("编辑"===t.batchTitle)return void i("该运单为已结算，请先取消结算再编辑！")}"编辑"===t.batchTitle?e.msg="派件账单结算对象同步更改，请前往派件账单核对！":e.msg="",a(e)}else i("当前数据为异常数据，不允许结算！");else i("该运单已线上扫码支付，不能处理！")}))},reset:function(e){this.PQradio="1",this.billCode="",this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],this.dateValue2=[],this.feeType=-2,this.billsTypeStatus=-2,this.status=-2,this.signStatus=-1,this.centerSignStatus=-2,this.isBack=-2,this.isProblem=-2,this.accountUserId="",this.usersId="",this.payStatus=-2,this.queryType=0,this.source="",this.cancelSettlement=!1,this.beSettled=!1,this.scanCodePayment=-1},showCell:function(){this.$refs.refTxCell.open()},onSearch:function(){this.currRow=[];var e="";if(this.billCode){if(!h["billUtils"].regRemark(this.billCode))return void this.msg("单号不能有特殊符号和表情");var t=Object(c["trim"])(this.billCode).split(/[,\r\n]/);if(t.length>1e3)return void this.msg("最多支持1000个运单号查询");e=t.join(",")}else if("1"===this.PQradio)if(3===this.dateValue.length){if(this.dateValue[2]<0)return void this.msg("签收的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue[2])return void this.msg("签收时间最多可查询"+this.limit+"天的数据,请重新选择时间");if(0!=this.dateValue2.length){var a="派件";if(3===this.dateValue2.length){if(this.dateValue2[2]<0)return void this.msg(a+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(a+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else if(2===this.dateValue2.length){if(null!=this.dateValue2[0]||null!=this.dateValue2[1])return void this.msg("请填写完整的"+a+"时间段")}else if(1===this.dateValue2.length&&null!=this.dateValue2[0])return void this.msg("请填写完整的"+a+"时间段")}}else if(2===this.dateValue.length){if(null!=this.dateValue[0]||null!=this.dateValue[1])return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、派件时间不能同时为空");var i="派件";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+i+"时间段"):void this.msg("签收时间、派件时间不能同时为空"):void this.msg("请填写完整的"+i+"时间段");if(this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{if(0!==this.dateValue.length)return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、派件时间不能同时为空");var s="派件";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+s+"时间段"):void this.msg("签收时间、派件时间不能同时为空"):void this.msg("请填写完整的"+s+"时间段");if(this.dateValue2[2]<0)return void this.msg(s+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(s+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{if(this.dateValue[2]<0)return void this.msg("开始时间不能大于结束时间,请重新选择扫描时间");if(this.limit<=this.dateValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择扫描时间")}this.pagination.currentPage=1;var n={};"1"===this.PQradio?n={signStartDate:null==this.dateValue[0]?"":this.dateValue[0],signEndDate:null==this.dateValue[1]?"":this.dateValue[1],scanStartDate:null==this.dateValue2[0]?"":this.dateValue2[0],scanEndDate:null==this.dateValue2[1]?"":this.dateValue2[1],payStatus:this.payStatus,dispAccountType:this.billsTypeStatus,settlementId:this.accountUserId,operateStatus:this.status,userId:this.usersId,signStatus:this.signStatus,ztStatus:this.centerSignStatus,isProblem:this.isProblem,queryType:this.queryType,cancelSettlement:this.cancelSettlement,beSettled:this.beSettled,isReturn:this.isBack,isError:this.queryType,source:this.source,goodsPaymentType:this.feeType,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage,payType:this.scanCodePayment}:"2"===this.PQradio&&(n={scanStartDate:"1970-01-01 00:00:00",scanEndDate:"1970-01-01 23:59:59",signStartDate:"1970-01-01 00:00:00",signEndDate:"1970-01-01 23:59:59",scStartDate:null==this.dateValue[0]?"":this.dateValue[0],scEndDate:null==this.dateValue[1]?"":this.dateValue[1],pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage,goodsPaymentType:this.feeType,dispAccountType:this.billsTypeStatus,settlementId:this.accountUserId,isReturn:this.isBack,isProblem:this.isProblem,source:this.source,isError:this.queryType,queryType:this.queryType}),this.accountUserId&&(n.settlementType=this.settlementType),e&&(n.billCode=e),this.optionsClone=Object(c["cloneDeep"])(n),this.query(n)},query:function(e){var t=this;Object(u["M"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},handleClose:function(){this.editDialogVisible=!1},checkBill:function(e){var t=this;if(0!==this.currRow.length){if(this.batchTitle=e.toElement.innerText,1===this.currRow.length){if(2===this.currRow[0].payType&&"编辑备注"!==this.batchTitle)return void this.msg("该运单已线上扫码支付，不能处理！");if(1===this.currRow[0].errorType&&("扣预付款"===this.batchTitle||"线下收款"===this.batchTitle))return void this.msg("当前数据为异常数据，不允许结算！");var a=this.currRow[0].operateStatus;if(4===a){if("扣预付款"===this.batchTitle||"线下收款"===this.batchTitle)return void this.msg("该运单中心未结算，不能结算！");if("编辑"===this.batchTitle)return void this.msg("该运单中心未结算，不能编辑！");if("取消扣款"===this.batchTitle)return void this.msg("该运单中心未结算，不能取消扣款！")}else if(0===a){if("取消扣款"===this.batchTitle)return void this.msg("状态为未结算，不能取消扣款！")}else if(5===a){if("扣预付款"===this.batchTitle||"线下收款"===this.batchTitle)return void this.msg("该运单为已结算状态，不能重复结算！")}else if(1===a||2===a){if("扣预付款"===this.batchTitle||"线下收款"===this.batchTitle)return void this.msg("该运单为已结算，不能重复结算！");if("编辑"===this.batchTitle)return void this.msg("该运单为已结算，请先取消结算再编辑！")}}"编辑备注"==this.batchTitle||"编辑"==this.batchTitle?(this.settlementTypeEdit="",this.remarkText="",this.billCodeEdit="",this.checkedEdit=!1,this.transType="",this.feeEdit=0,this.accountUserIdEditN="",this.accountUserIdEditZ="",this.accountUserIdEditZN="",setTimeout((function(){t.$refs.clearN.clear(),t.$refs.clearZ.clear()}),0),this.editTitle=(this.currRow.length>1?"批量":"")+this.batchTitle,1===this.currRow.length?"编辑"==this.batchTitle?(99===this.currRow[0].dispAccountType?this.iShowNZ=!1:this.iShowNZ=!0,this.billCodeEdit=this.currRow[0].billCode,this.feeEdit=this.currRow[0].factGoods,setTimeout((function(){99===t.currRow[0].dispAccountType?t.accountUserIdEditN=t.currRow[0].dispAccountId:t.accountUserIdEditZ=t.currRow[0].dispAccountId}),0)):this.remarkText=this.currRow[0].remark:setTimeout((function(){t.$refs.clearZN.clear()}),0),this.editDialogVisible=!0):this.checkBillPost()}else this.msg("请选择需要结算的数据！")},checkBillPost:function(){var e=this;if(this.isJson=!1,"扣预付款"==this.batchTitle||"线下收款"==this.batchTitle||"取消扣款"==this.batchTitle)this.currRow=this.currRow.map((function(t){return{operateStatus:t.operateStatus,billCode:t.billCode,scanSiteId:t.scanSiteId,errorType:t.errorType,payType:t.payType,deductType:"扣预付款"==e.batchTitle?2:"线下收款"==e.batchTitle?1:0}})),this.batchUrl="/bills/newGoodsPaymentDispatch/writeOff";else if("重新计算"==this.batchTitle)this.currRow=this.currRow.map((function(e){return{operateStatus:e.operateStatus,billCode:e.billCode,scanSiteId:e.scanSiteId,payType:e.payType}})),this.batchUrl="/bills/newGoodsPaymentDispatch/reCalculateFee";else if("编辑备注"==this.batchTitle)this.isJson=!0,this.currRow=this.currRow.map((function(t){return{billCode:t.billCode,remark:e.remarkText,selfOrBlew:2,scanSiteId:t.scanSiteId}})),this.editDialogVisible=!1,this.batchUrl="/bills/newGoodsPaymentDispatch/remark";else if("编辑"==this.batchTitle){if(this.isJson=!0,1===this.currRow.length){if(this.iShowNZ){if(!this.accountUserIdEditZ)return void this.msg("结算对象不能为空")}else if(!this.accountUserIdEditN)return void this.msg("下级网点不能为空");var t={billCode:this.currRow[0].billCode,scanSiteId:this.currRow[0].scanSiteId,operateStatus:this.currRow[0].operateStatus};t.factGoods=this.feeEdit,99===this.currRow[0].dispAccountType?(t.selfOrBlew=2,this.checkedEdit?(t.settlementId=this.accountUserIdEditZ,t.transType=1):(t.settlementId=this.accountUserIdEditN,t.transType=3)):(t.selfOrBlew=1,this.checkedEdit?(t.settlementId=this.accountUserIdEditN,t.transType=0):(t.settlementId=this.accountUserIdEditZ,t.transType=2)),this.currRow=[t]}else{var a={};if(0===this.transType){if(!this.accountUserIdEditN)return void this.msg("下级网点不能为空");a.settlementId=this.accountUserIdEditN,a.transType=0}else if(1===this.transType){if(!this.accountUserIdEditZ)return void this.msg("结算对象不能为空");a.settlementId=this.accountUserIdEditZ,a.transType=1}else{if(!this.accountUserIdEditZN)return void this.msg("结算对象不能为空");a.settlementId=this.accountUserIdEditZN,99===this.settlementTypeEdit?a.transType=3:a.transType=2}this.currRow=this.currRow.map((function(e){return p({},a,{billCode:e.billCode,operateStatus:e.operateStatus,scanSiteId:e.scanSiteId,payType:e.payType,selfOrBlew:99===e.dispAccountType?2:1})}))}this.editDialogVisible=!1,this.batchUrl="/bills/newGoodsPaymentDispatch/edit"}this.batchDialogVisible=!0},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))},proving:function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e},close:function(){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()}},watch:{signStatus:{handler:function(e,t){2!==e&&0!==e||(this.dateValue=[],3!==this.dateValue2.length&&(this.dateValue2=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]))},deep:!0},PQradio:{handler:function(e,t){2==e?(this.isBack=0,this.isProblem=0):(this.isBack=-2,this.isProblem=-2)},deep:!0},ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},feeEdit:{handler:function(e,t){if(e){var a=e+"";a.length<=7?(a=a.split("."),a[0].length<=4?this.feeEdit=this.proving(e):this.feeEdit=t):this.feeEdit=t}else this.feeEdit=0}},remarkText:{handler:function(e,t){h["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-240:this.z_param.isNode?this.$store.getters.clientHeight-330:this.$store.getters.clientHeight-260},isdisabledFn:function(){if("编辑备注"==this.batchTitle)return!(this.remarkText.length>0)}}},f=b,y=(a("4cc9"),a("623f")),v=Object(y["a"])(f,n,l,!1,null,null,null),g=v.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main collectFeeSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 73px)"}},[a("ul",[a("li",[a("el-radio",{attrs:{label:"1"},model:{value:e.radioTime,callback:function(t){e.radioTime=t},expression:"radioTime"}},[e._v("签收时间")]),a("el-radio",{attrs:{label:"2"},model:{value:e.radioTime,callback:function(t){e.radioTime=t},expression:"radioTime"}},[e._v("派件时间")])],1),a("li",[a("label",[e._v("日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("费用类型：")]),a("el-select",{staticClass:"w-i-106",model:{value:e.feeType,callback:function(t){e.feeType=t},expression:"feeType"}},e._l(e.feeTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",[e._v("账单类型：")]),a("el-select",{staticClass:"w-i-106",model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{staticClass:"w-i-106",attrs:{type:"7"},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},x=[],k=(a("cc57"),{mixins:[r["b"]],data:function(){return{isQs:!1,requestUrl:u["L"],exportObj:{fileName:"收派件代收到付-汇总"},radioTime:"1",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],feeType:-2,feeTypeOptions:[{value:-2,label:"全部"},{value:0,label:"代收"},{value:1,label:"到付"}],billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:4,label:"业务员"},{value:2,label:"承包区"},{value:-1,label:"无对象"},{value:99,label:"下级网点"}],accountUserId:"",tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"日期",name:"date",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"accountUserName",size:150,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:150,isCode:!0},{displayName:"费用类型",name:"goodsPaymentType",size:100,value:function(e){return Object(d["o"])(Number(e.goodsPaymentType))}},{displayName:"账单类型",name:"dispAccountType",size:100,value:function(e){return Object(d["b"])(Number(e.dispAccountType))}},{displayName:"应结算金额",name:"oughtSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"已结算金额",name:"haveSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"未结算金额",name:"notSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"应结算票数",name:"oughtSettleVotes",size:100,showTotal:!0},{displayName:"已结算票数",name:"haveSettleVotes",size:100,showTotal:!0},{displayName:"未结算票数",name:"notSettleVotes",size:100,showTotal:!0},{displayName:"问题件数",name:"otherVotes",size:100,showTotal:!0},{displayName:"退件数",name:"returnVotes",size:100,showTotal:!0}]},limit:16,ishowHeights:0,ishowHeight:0}},methods:{dblclick:function(e,t,a){t.hradio=this.radioTime,this.$emit("goto","tab1",t,this.tableHead.columns[a.col].name)},onSearch:function(){if(this.dateValue[2]<0)this.msg("开始日期不能大于结束日期,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={dateType:this.radioTime,startDate:null==this.dateValue[0]?"":this.dateValue[0],endDate:null==this.dateValue[1]?"":this.dateValue[1],goodsPaymentType:this.feeType,dispAccountType:this.billsTypeStatus,settlementId:this.accountUserId,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["K"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-170:this.z_param.isNode?this.$store.getters.clientHeight-260:this.$store.getters.clientHeight-190}}}),D=k,w=(a("1655"),Object(y["a"])(D,C,x,!1,null,null,null)),S=w.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main collectAbnormalData"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left","margin-top":"5px"}},[a("sc-bill-code",{ref:"billcodeRef",nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",[a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("签收时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("费用类型：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.feeType,callback:function(t){e.feeType=t},expression:"feeType"}},e._l(e.feeTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("账单类型：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("结算对象：")]),a("sc-users",{staticClass:"w-i-85",attrs:{type:"7",param:{types:"2,4,99"}},on:{change:e.checkSettlementType},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1)])]),a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("派件时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("结算状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("业务员：")]),a("sc-users",{staticClass:"w-i-85",attrs:{type:"2",param:{types:"1,2,4"}},model:{value:e.usersId,callback:function(t){e.usersId=t},expression:"usersId"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("签收状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.signStatus,callback:function(t){e.signStatus=t},expression:"signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 322px)"}},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("是否退件：")]),a("el-select",{model:{value:e.isBack,callback:function(t){e.isBack=t},expression:"isBack"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-102"},[e._v("是否问题件：")]),a("el-select",{model:{value:e.isProblem,callback:function(t){e.isProblem=t},expression:"isProblem"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",{staticClass:"m-fe"},[a("label",{staticClass:"w-r-76"},[e._v("代收/到付款：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.gtZroe,callback:function(t){e.gtZroe=t},expression:"gtZroe"}},e._l(e.gtZroeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticStyle:{"margin-right":"10px"}},[a("el-button",{attrs:{type:"danger"},on:{click:e.showCell}},[e._v("\n        显示列设置\n      ")])],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.isearchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("cell-setting",{ref:"cellSetAction",attrs:{cellObj:e.tableHead.columns,spreadHeadData:e.tableHeadNew.columns,menuName:"collectAbnormalData"},on:{callBack:e.changeCell}})],1)},N=[],T=(a("ed63"),a("8cf2"),a("54d0"));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={mixins:[r["b"]],data:function(){var e=this;return{limit:16,ishowHeights:0,ishowHeight:0,billCode:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],dateValue2:[],feeType:-2,feeTypeOptions:[{value:-2,label:"全部"},{value:0,label:"代收"},{value:1,label:"到付"}],billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:4,label:"业务员"},{value:2,label:"承包区"},{value:-1,label:"无对象"},{value:99,label:"下级网点"}],status:-2,statusOptions:[{value:-2,label:"全部"},{value:0,label:"未结算"},{value:1,label:"已线下收款"},{value:2,label:"已线上扣款"}],signStatus:-2,signStatusOptions:[{value:-2,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"}],isBack:-2,isProblem:-2,isStatusOptions:[{value:-2,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],gtZroe:-2,gtZroeOptions:[{value:-2,label:"全部"},{value:0,label:"＝0"},{value:1,label:"＞0"}],accountUserId:"",usersId:"",tableData:[],tableHeadNew:{columns:[]},tableHead:{columns:[{displayName:"结算状态",name:"operateStatus",size:100,value:function(e){return Object(d["w"])(Number(e.operateStatus))}},{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"费用类型",name:"goodsPaymentType",size:100,value:function(e){return Object(d["o"])(Number(e.goodsPaymentType))}},{displayName:"账单类型",name:"dispAccountType",size:100,value:function(e){return Object(d["b"])(Number(e.dispAccountType))}},{displayName:"业务员",name:"userName",size:100,isCode:!0},{displayName:"业务员编号",name:"userCode",size:100,isCode:!0},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:100,isCode:!0},{displayName:"应结算金额",name:"oughtSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"已结算金额",name:"haveSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"代收/到付款",name:"goodsPaymentFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"实收货款",name:"factGoods",size:100,showTotal:!0,formatter:"0.00"},{displayName:"手续费提成",name:"szServiceFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"手续费收入",name:"ztPaiFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"寄件网点",name:"sendSiteName",size:100,isCode:!0},{displayName:"派件时间",name:"dispDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(d["y"])(Number(e.signStatus))}},{displayName:"签收人",name:"signMan",size:100,isCode:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"扣款人",name:"operateManName",size:100,isCode:!0},{displayName:"扣款时间",name:"operateDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算时间",name:"balanceDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算网点",name:"paySiteName",size:100,isCode:!0},{displayName:"问题件",name:"otherType",value:function(e){return Object(d["s"])(Number(e.otherType))}},{displayName:"退件",name:"returnType",value:function(e){return Object(d["s"])(Number(e.returnType))}},{displayName:"渠道来源",name:"source",size:100,isCode:!0},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},optionsClone:"",exportUrl:"/bills/newGoodsPaymentDispatch/export",settlementType:0,exportObj:{fileName:"收派件代收到付-异常数据"}}},created:function(){var e=this,t={menu:"collectAbnormalData"};Object(u["Pc"])(t).then((function(t){0===t.code?t.data?e.changeCell(JSON.parse(t.data)):(e.tableHeadNew=Object(c["cloneDeep"])(O({},e.tableHead)),e.z_method.refreshSpread()):e.msg(t.message)})).catch((function(t){e.msg(t.message)}))},methods:{checkSettlementType:function(e){e?99===e.type?this.settlementType=2:this.settlementType=1:this.settlementType=0},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},reset:function(){this.billCode="",this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.dateValue2=[],this.feeType=-2,this.billsTypeStatus=-2,this.status=-2,this.signStatus=-2,this.isBack=-2,this.isProblem=-2,this.accountUserId="",this.usersId="",this.payStatus=-2,this.gtZroe=-2},showCell:function(){this.$refs.cellSetAction.open()},changeCell:function(e){var t=Object(c["cloneDeep"])(O({},this.tableHead)),a=Object(T["a"])(e);t=t.columns.filter((function(e){var t=a.map((function(e){return e.displayName}));return t.includes(e.displayName)})),this.tableHeadNew.columns=t,this.z_method.refreshSpread()},onSearch:function(){var e="";if(this.billCode){if(!h["billUtils"].regRemark(this.billCode))return void this.msg("单号不能有特殊符号和表情");var t=Object(c["trim"])(this.billCode).split(/[,\r\n]/);if(t.length>1e3)return void this.msg("最多支持1000个运单号查询");e=t.join(",")}else if(3===this.dateValue.length){if(this.dateValue[2]<0)return void this.msg("签收的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue[2])return void this.msg("签收时间最多可查询"+this.limit+"天的数据,请重新选择时间");if(0!=this.dateValue2.length){var a="派件";if(3===this.dateValue2.length){if(this.dateValue2[2]<0)return void this.msg(a+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(a+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else if(2===this.dateValue2.length){if(null!=this.dateValue2[0]||null!=this.dateValue2[1])return void this.msg("请填写完整的"+a+"时间段")}else if(1===this.dateValue2.length&&null!=this.dateValue2[0])return void this.msg("请填写完整的"+a+"时间段")}}else if(2===this.dateValue.length){if(null!=this.dateValue[0]||null!=this.dateValue[1])return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、派件时间不能同时为空");var i="派件";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+i+"时间段"):void this.msg("签收时间、派件时间不能同时为空"):void this.msg("请填写完整的"+i+"时间段");if(this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{if(0!==this.dateValue.length)return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、派件时间不能同时为空");var s="派件";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+s+"时间段"):void this.msg("签收时间、派件时间不能同时为空"):void this.msg("请填写完整的"+s+"时间段");if(this.dateValue2[2]<0)return void this.msg(s+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(s+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var n={signStartDate:null==this.dateValue[0]?"":this.dateValue[0],signEndDate:null==this.dateValue[1]?"":this.dateValue[1],scanStartDate:null==this.dateValue2[0]?"":this.dateValue2[0],scanEndDate:null==this.dateValue2[1]?"":this.dateValue2[1],payStatus:this.payStatus,dispAccountType:this.billsTypeStatus,settlementId:this.accountUserId,operateStatus:this.status,userId:this.usersId,signStatus:this.signStatus,isProblem:this.isProblem,isReturn:this.isBack,isError:1,isZeroFee:this.gtZroe,goodsPaymentType:this.feeType,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.accountUserId&&(n.settlementType=this.settlementType),e&&(n.billCode=e),this.optionsClone=Object(c["cloneDeep"])(n),this.query(n)},query:function(e){var t=this;Object(u["M"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-330:this.$store.getters.clientHeight-260}}},z=E,F=(a("0e48"),Object(y["a"])(z,_,N,!1,null,null,null)),M=F.exports,P={name:"collectFee",components:{summaryH:S,detailH:g,abnormalDataH:M},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t,a)}}},Y=P,j=Object(y["a"])(Y,i,s,!1,null,"15240eb8",null);t["default"]=j.exports},"416f":function(e,t,a){},"419a":function(e,t,a){var i=function(e){"use strict";var t,a=Object.prototype,i=a.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function r(e,t,a,i){var s=t&&t.prototype instanceof b?t:b,n=Object.create(s.prototype),l=new T(i||[]);return n._invoke=w(e,a,l),n}function c(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(i){return{type:"throw",arg:i}}}e.wrap=r;var u="suspendedStart",d="suspendedYield",h="executing",m="completed",p={};function b(){}function f(){}function y(){}var v={};v[n]=function(){return this};var g=Object.getPrototypeOf,C=g&&g(g(I([])));C&&C!==a&&i.call(C,n)&&(v=C);var x=y.prototype=b.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function D(e,t){function a(s,n,l,o){var r=c(e[s],e,n);if("throw"!==r.type){var u=r.arg,d=u.value;return d&&"object"===typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,l,o)}),(function(e){a("throw",e,l,o)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return a("throw",e,l,o)}))}o(r.arg)}var s;function n(e,i){function n(){return new t((function(t,s){a(e,i,t,s)}))}return s=s?s.then(n,n):n()}this._invoke=n}function w(e,t,a){var i=u;return function(s,n){if(i===h)throw new Error("Generator is already running");if(i===m){if("throw"===s)throw n;return O()}a.method=s,a.arg=n;while(1){var l=a.delegate;if(l){var o=S(l,a);if(o){if(o===p)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var r=c(e,t,a);if("normal"===r.type){if(i=a.done?m:d,r.arg===p)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(i=m,a.method="throw",a.arg=r.arg)}}}function S(e,a){var i=e.iterator[a.method];if(i===t){if(a.delegate=null,"throw"===a.method){if(e.iterator["return"]&&(a.method="return",a.arg=t,S(e,a),"throw"===a.method))return p;a.method="throw",a.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(i,e.iterator,a.arg);if("throw"===s.type)return a.method="throw",a.arg=s.arg,a.delegate=null,p;var n=s.arg;return n?n.done?(a[e.resultName]=n.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,p):n:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function I(e){if(e){var a=e[n];if(a)return a.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var s=-1,l=function a(){while(++s<e.length)if(i.call(e,s))return a.value=e[s],a.done=!1,a;return a.value=t,a.done=!0,a};return l.next=l}}return{next:O}}function O(){return{value:t,done:!0}}return f.prototype=x.constructor=y,y.constructor=f,y[o]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},k(D.prototype),D.prototype[l]=function(){return this},e.AsyncIterator=D,e.async=function(t,a,i,s,n){void 0===n&&(n=Promise);var l=new D(r(t,a,i,s),n);return e.isGeneratorFunction(a)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},k(x),x[o]="Generator",x[n]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){while(t.length){var i=t.pop();if(i in e)return a.value=i,a.done=!1,a}return a.done=!0,a}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function s(i,s){return o.type="throw",o.arg=e,a.next=i,s&&(a.method="next",a.arg=t),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n],o=l.completion;if("root"===l.tryLoc)return s("end");if(l.tryLoc<=this.prev){var r=i.call(l,"catchLoc"),c=i.call(l,"finallyLoc");if(r&&c){if(this.prev<l.catchLoc)return s(l.catchLoc,!0);if(this.prev<l.finallyLoc)return s(l.finallyLoc)}else if(r){if(this.prev<l.catchLoc)return s(l.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return s(l.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=e,l.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),N(a),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var i=a.completion;if("throw"===i.type){var s=i.arg;N(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,i){return this.delegate={iterator:I(e),resultName:a,nextLoc:i},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=i}catch(s){Function("r","regeneratorRuntime = r")(i)}},"41ee":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总查询",name:"tab1"}},[a("summaryH",{ref:"summaryH",on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细结算",name:"tab2"}},[a("detailH",{ref:"detailH"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收时间:")]),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"datetime",editable:!1,disabled:2===e.queryContent.signStatus||0===e.queryContent.signStatus},on:{change:function(t){return e.startDateChange(e.queryContent.signStartDate,!0)}},model:{value:e.queryContent.signStartDate,callback:function(t){e.$set(e.queryContent,"signStartDate",t)},expression:"queryContent.signStartDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime",disabled:2===e.queryContent.signStatus||0===e.queryContent.signStatus},model:{value:e.queryContent.signEndDate,callback:function(t){e.$set(e.queryContent,"signEndDate",t)},expression:"queryContent.signEndDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("结算状态:")]),a("el-select",{ref:"settleSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.operateStatus,callback:function(t){e.$set(e.queryContent,"operateStatus",t)},expression:"queryContent.operateStatus"}},e._l(e.settlementStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("费用类型:")]),a("el-select",{ref:"feeType",staticClass:"short-input",attrs:{placeholder:""},model:{value:e.queryContent.goodsPaymentType,callback:function(t){e.$set(e.queryContent,"goodsPaymentType",t)},expression:"queryContent.goodsPaymentType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"timeSelect",staticClass:"time-select-input",model:{value:e.queryContent.timeType,callback:function(t){e.$set(e.queryContent,"timeType",t)},expression:"queryContent.timeType"}},[a("el-option",{key:0,attrs:{label:"收件时间",value:0}}),a("el-option",{key:1,attrs:{label:"录单时间",value:1}})],1)],1),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerC",attrs:{type:"datetime",editable:!1},on:{change:function(t){return e.startDateChange(e.queryContent.startDate,!1)}},model:{value:e.queryContent.startDate,callback:function(t){e.$set(e.queryContent,"startDate",t)},expression:"queryContent.startDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerD",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime"},model:{value:e.queryContent.endDate,callback:function(t){e.$set(e.queryContent,"endDate",t)},expression:"queryContent.endDate"}})],1)])]),a("ul",{staticClass:"search-input-box h-test3"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收状态:")]),a("el-select",{ref:"signStatus",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label unique-label"},[e._v("是否问题件:")]),a("el-select",{ref:"questionSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.otherType,callback:function(t){e.$set(e.queryContent,"otherType",t)},expression:"queryContent.otherType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("是否退件:")]),a("el-select",{ref:"returnSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.returnType,callback:function(t){e.$set(e.queryContent,"returnType",t)},expression:"queryContent.returnType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])]),a("div",{staticClass:"search-btn-box"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)],1)])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"}),a("div",{style:{height:e.contentHeight-20+"px"}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("cell-setting",{ref:"cellSetAction",attrs:{cellObj:e.tableHead.columns,spreadHeadData:e.tableHeadNew.columns,menuName:"nextSendMailPayFeeDetail"},on:{callBack:e.changeCell}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("9a33"),a("ed63"),a("8cf2"),a("54d0")),r=(a("163d"),a("ac9f")),c=a("ac0d"),u=a("391c"),d=a("6bf2"),h=a.n(d),m=a("f37e"),p=a("a3be");a("4055"),a("49a5");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={mixins:[c["b"]],created:function(){var e=this,t={menu:"nextSendMailPayFeeDetail"};Object(p["Pc"])(t).then((function(t){0===t.code?t.data?e.changeCell(JSON.parse(t.data)):(e.tableHeadNew=Object(u["cloneDeep"])(f({},e.tableHead)),e.z_method.refreshSpread()):e.msg(t.message)})).catch((function(t){e.msg(t.message)}))},activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{isSucessMsg:!0,height:342,signStatus:[{label:"全部",id:-1},{label:"已签收",id:1},{label:"未签收",id:0},{label:"第三方签收",id:2}],trueOrFalse:[{label:"全部",id:-1},{label:"是",id:1},{label:"否",id:0}],sourceType:[{label:"全部",id:""},{label:"淘宝COD",id:"TB_ONLINE"},{label:"快递管家COD",id:"KDGJ_COD"},{label:"快递管家普通COD",id:"KDGJ_PTCOD"},{label:"网点录单",id:"WDLD"},{label:"掌中通录单",id:"ZZT"},{label:"快递鸟",id:"KDN"},{label:"菜鸟线下",id:"WAY_ BILL_OFFLINE"},{label:"菜鸟",id:"WAY_BILL"},{label:"微信",id:"Wechat"},{label:"shenzhou",id:"shenzhou"}],settlementStatus:[{label:"全部",id:-1},{label:"未结算",id:0},{label:"已线上加款",id:2},{label:"已线下返款",id:1}],billType:[{label:"全部",id:-3},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"下级网点",id:99},{label:"无对象",id:-1}],feeType:[{label:"全部",id:-1},{label:"代收",id:0},{label:"到付",id:1}],settleParam:{types:""},tableData:[],tableHead:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,hlock:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"结算状态",hlock:!0,name:"operateStatus",size:100,value:function(e){return Object(m["v"])(Number(e.operateStatus))}},{displayName:"费用类型",name:"goodsPaymentType",isFrozen:!0,hlock:!0,value:function(e){return Object(m["o"])(Number(e.goodsPaymentType))}},{displayName:"收件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"录单时间",name:"enterDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"userName"},{displayName:"业务员工号",name:"userCode",isCode:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"目的地省",name:"dispProvName"},{displayName:"应结算金额",name:"toAccountFee",size:100,showTotal:!0},{displayName:"已结算金额",name:"factGoods",size:100,showTotal:!0},{displayName:"代收/到付款",name:"goodsPaymentFee",size:100,showTotal:!0},{displayName:"手续费成本",name:"serviceCost",size:100,showTotal:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"派件网点",name:"dispSiteName",size:100},{displayName:"派件时间",name:"dispDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(m["z"])(Number(e.signStatus))}},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收人",name:"signManName",isCode:!0},{displayName:"是否问题件",name:"otherType",value:function(e){return Object(m["s"])(Number(e.otherType))}},{displayName:"是否退件",name:"returnType",value:function(e){return Object(m["s"])(Number(e.returnType))}},{displayName:"渠道来源",name:"source",size:100}]},tableHeadNew:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[]},billCode:"",queryContent:{queryType:0,timeType:0,billCodes:"",startDate:"",endDate:"",scanStartDate:"",scanEndDate:"",signStartDate:new Date(h()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),signEndDate:new Date(h()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),enterStartDate:"",enterEndDate:"",billType:-3,signStatus:-1,accountUserId:"",accountUserType:"",userId:"",operateStatus:-1,customerId:"",gtZroe:-1,otherType:-1,returnType:-1,goodsPaymentType:-1,cancelSettlement:!1,beSettled:!1,source:""},optionsClone:{},exportUrl:p["Qb"],exportObj:{fileName:"付发件代收到付-明细结算"},batchDialogVisible:!1,currentRow:[],batchRow:[],batchUrl:"",columns:[{displayName:"运单号",name:"billCode",size:100}],batchTitle:"",editDialogVisible:!1,remarkDialogVisible:!1,remark:"",titleDialog:"编辑",editForm:{billCode:"",userId:"",customerId:"",remark:""},batchEditForm:{isUserIdEdit:!1,isCustomerIdEdit:!1,userId:"",customerId:""}}},methods:{changeNZ:function(e){this.editForm.isNet?this.editForm.ishowZN=!e:this.editForm.ishowZN=e},detailed:function(e,t){var a=this;this.resetQueryContent(),this.queryContent.accountUserId="",12===t.col&&(this.queryContent.operateStatus=0),13===t.col&&(this.queryContent.otherType=1),this.queryContent.signStartDate=h()(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.queryContent.signEndDate=h()(e.signDate).format("YYYY-MM-DD")+" 23:59:59",this.queryContent.billType=e.billType,this.queryContent.accountUserType=e.billType,this.queryContent.goodsPaymentType=e.goodsPaymentType,99===e.billType?this.settleParam.types="99":this.settleParam.types="0,2,4",setTimeout((function(){a.queryContent.accountUserId=e.accountUserId,a.onSearch()}),0)},checkboxAllClick:function(e){this.selectionSite([],e)},close:function(e){this.batchDialogVisible=!1,this.batchRow=[],"noSearch"!==e&&(this.currentRow=[],this.query())},showCell:function(){this.$refs.cellSetAction.open()},changeCell:function(e){var t=Object(u["cloneDeep"])(f({},this.tableHead)),a=Object(o["a"])(e);t=t.columns.filter((function(e){var t=a.map((function(e){return e.displayName}));return t.includes(e.displayName)})),this.tableHeadNew.columns=t,this.z_method.refreshSpread()},startDateChange:function(e,t){e&&(t?this.$refs.timePickerB.focus():this.$refs.timePickerD.focus())},resetQueryContent:function(){this.queryContent={queryType:0,timeType:0,billCodes:"",startDate:"",endDate:"",scanStartDate:"",scanEndDate:"",signStartDate:new Date(h()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),signEndDate:new Date(h()().format("YYYY-MM-DD")+" 23:59:59"),enterStartDate:"",enterEndDate:"",billType:-3,signStatus:-1,accountUserId:"",accountUserType:"",userId:"",operateStatus:-1,customerId:"",gtZroe:-1,otherType:-1,returnType:-1,goodsPaymentType:-1,cancelSettlement:!1,beSettled:!1,source:""},this.billCode=""},onSearch:function(){if(this.queryContent.billCodes="",Object(u["trim"])(this.billCode)){var e=Object(u["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");this.queryContent.billCodes=e.join(",")}else{if(!this.queryContent.signStartDate&&!this.queryContent.signEndDate&&!this.queryContent.startDate&&!this.queryContent.endDate)return void this.msg("签收时间、收件时间/录单时间不能同时为空");if(this.queryContent.signStartDate||this.queryContent.signEndDate){if(this.timeCheck(this.queryContent.signStartDate,this.queryContent.signEndDate,"签收时间"))return;this.queryContent.signStartDate=h()(this.queryContent.signStartDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.signEndDate=h()(this.queryContent.signEndDate).format("YYYY-MM-DD HH:mm:ss")}if(this.queryContent.startDate||this.queryContent.endDate)if(this.queryContent.timeType<1){if(this.timeCheck(this.queryContent.startDate,this.queryContent.endDate,"收件时间"))return;this.queryContent.scanStartDate=h()(this.queryContent.startDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.scanEndDate=h()(this.queryContent.endDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.enterStartDate="",this.queryContent.enterEndDate=""}else{if(this.timeCheck(this.queryContent.startDate,this.queryContent.endDate,"录单时间"))return;this.queryContent.enterStartDate=h()(this.queryContent.startDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.enterEndDate=h()(this.queryContent.endDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.scanStartDate="",this.queryContent.scanEndDate=""}else this.queryContent.startDate||this.queryContent.endDate||(this.queryContent.scanStartDate="",this.queryContent.scanEndDate="",this.queryContent.enterStartDate="",this.queryContent.enterEndDate="")}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(u["cloneDeep"])(e)),Object(p["Rb"])(this.optionsClone).then((function(e){t.settleParam.types="","undefined"===typeof e.data?(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.settleParam.types="",t.pagination.total=0,t.tableData=[]}))},settleChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请选择完整的"+a+"时间段"),!0;if(h()(e).isAfter(t))return this.msg(a+"开始时间不能大于结束时间"),!0;var i=h()(t).subtract(31,"days"),s=h()(i).isAfter(h()(e));return!!s&&(this.msg(a+"相差不能大于31天"),!0)},heightChange:function(e){var t=this;this.height=e?342:220,this.$nextTick((function(){t.z_method.refreshSpread()}))},clickitem:function(e){e===this.batchEditForm.transType?this.batchEditForm.transType="":this.batchEditForm.transType=e},userCheckChange:function(e){e?(this.batchEditForm.nestSiteId="",this.batchEditForm.isNestSiteIdEdit=!1):this.batchEditForm.userId=""},customerCheckChange:function(e){e?(this.batchEditForm.nestSiteId="",this.batchEditForm.isNestSiteIdEdit=!1):this.batchEditForm.customerId=""},siteCheckChange:function(e){e?(this.batchEditForm.userId="",this.batchEditForm.customerId="",this.batchEditForm.isUserIdEdit=!1,this.batchEditForm.isCustomerIdEdit=!1):this.batchEditForm.nestSiteId=""}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+120:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}},watch:{"queryContent.signStatus":{handler:function(e,t){2!==e&&0!==e||(this.queryContent.signEndDate="",this.queryContent.signStartDate="",this.queryContent.startDate&&this.queryContent.endDate||(this.queryContent.startDate=this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.queryContent.endDate=this.moment().format("YYYY-MM-DD")+" 23:59:59"))},deep:!0}}},v=y,g=(a("1361"),a("3e22"),a("623f")),C=Object(g["a"])(v,n,l,!1,null,"3a716c8d",null),x=C.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("签收日期:")]),a("div",{staticClass:"datePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"date",editable:!1,clearable:!1},on:{change:e.startDateChange},model:{value:e.queryContent.signStartDate,callback:function(t){e.$set(e.queryContent,"signStartDate",t)},expression:"queryContent.signStartDate"}}),e._v("\n              至\n              "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,clearable:!1,type:"date"},model:{value:e.queryContent.signEndDate,callback:function(t){e.$set(e.queryContent,"signEndDate",t)},expression:"queryContent.signEndDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("费用类型:")]),a("el-select",{ref:"feeType",staticClass:"short-select",attrs:{placeholder:""},model:{value:e.queryContent.goodsPaymentType,callback:function(t){e.$set(e.queryContent,"goodsPaymentType",t)},expression:"queryContent.goodsPaymentType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},D=[],w={mixins:[c["b"]],activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){return{height:260,feeType:[{label:"全部",id:-1},{label:"代收",id:0},{label:"到付",id:1}],queryContent:{signStartDate:h()().subtract(1,"days").format("YYYY-MM-DD"),signEndDate:h()().subtract(1,"days").format("YYYY-MM-DD"),accountUserId:"",accountUserType:"",goodsPaymentType:-1},optionsClone:{},requestUrl:p["Tb"],exportObj:{fileName:"付发件代收到付-汇总查询"},tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"accountUserName",size:120},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0,size:120},{displayName:"费用类型",name:"goodsPaymentType",value:function(e){return Object(m["o"])(e.goodsPaymentType)},size:120},{displayName:"代收/到付款",name:"goodsPaymentFee",showTotal:!0,size:120},{displayName:"手续费",name:"szServiceFee",showTotal:!0,size:120},{displayName:"应结算金额",name:"toAccountFee",showTotal:!0,size:120},{displayName:"已结算金额",name:"accountFee",showTotal:!0,size:120},{displayName:"未结算金额",name:"notAccountFee",showTotal:!0},{displayName:"应结算票数",name:"toAccountCount",showTotal:!0},{displayName:"已结算票数",name:"accountCount",size:120,showTotal:!0},{displayName:"未结算票数",name:"notAccountCount",size:120,showTotal:!0},{displayName:"问题件票数",name:"otherCount",size:120,showTotal:!0},{displayName:"退件数",name:"returnCount",size:120,showTotal:!0}]}}},methods:{dblclick:function(e,t,a){this.$emit("goto","tab2",t,a)},settleChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},startDateChange:function(e){e&&this.$refs.timePickerB.focus()},onSearch:function(){if(this.queryContent.signStartDate||this.queryContent.signDateEnd)if(this.queryContent.signStartDate)if(this.queryContent.signEndDate)if(h()(this.queryContent.signStartDate).isAfter(this.queryContent.signEndDate))this.msg("签收日期开始时间不能大于结束时间");else{var e=h()(this.queryContent.signEndDate).format("YYYY-MM-DD")+" 23:59:59",t=h()(e).subtract(16,"days"),a=h()(t).isAfter(h()(this.queryContent.signStartDate));a?this.msg("签收日期相差不能大于16天"):(this.queryContent.signStartDate=h()(this.queryContent.signStartDate).format("YYYY-MM-DD"),this.queryContent.signEndDate=h()(this.queryContent.signEndDate).format("YYYY-MM-DD"),this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent))}else this.msg("请选择完整的签收日期时间段");else this.msg("请选择完整的签收日期时间段");else this.msg("签收日期不能为空!")},query:function(e){var t=this;e&&(this.optionsClone=Object(u["cloneDeep"])(e)),Object(p["Sb"])(this.optionsClone).then((function(e){"undefined"===typeof e.data?(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.feeType.visible=!1},exportNew:function(){this.searchExport()},heightChange:function(e){var t=this;this.height=e?260:220,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+70:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},S=w,_=(a("31cb"),Object(g["a"])(S,k,D,!1,null,"2c1f65b4",null)),N=_.exports,T={name:"nextSendGoodsFeeOrPayFee",components:{summaryH:N,detailH:x},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailH.detailed(t,a)}}},I=T,O=Object(g["a"])(I,i,s,!1,null,"2355973a",null);t["default"]=O.exports},4279:function(e,t,a){},4472:function(e,t,a){"use strict";var i=a("2b30"),s=a.n(i);s.a},4568:function(e,t,a){},"460e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"月汇总",name:"tab2"}},[a("month-summary",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab1"}},[a("detail-bill",{ref:"detailBill"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{attrs:{onlyBill:!1,twoText:["单号","流水号"],resetType:e.resetBillCode},on:{typeChange:e.getType},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"timeSelect",staticClass:"time-select-input",model:{value:e.queryContent.dateType,callback:function(t){e.$set(e.queryContent,"dateType",t)},expression:"queryContent.dateType"}},[a("el-option",{key:0,attrs:{value:0,label:"中心结算时间"}}),a("el-option",{key:1,attrs:{value:1,label:"业务发生时间"}})],1)],1),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"datetime",editable:!1,clearable:!1},on:{change:e.startDateChange},model:{value:e.queryContent.startScanDate,callback:function(t){e.$set(e.queryContent,"startScanDate",t)},expression:"queryContent.startScanDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerB",attrs:{type:"datetime",editable:!1,clearable:!1},model:{value:e.queryContent.endScanDate,callback:function(t){e.$set(e.queryContent,"endScanDate",t)},expression:"queryContent.endScanDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("费用类型")]),a("el-select",{ref:"feeType",staticClass:"short-input",attrs:{placeholder:""},model:{value:e.queryContent.fineType,callback:function(t){e.$set(e.queryContent,"fineType",t)},expression:"queryContent.fineType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("扣款状态")]),a("el-select",{ref:"deductStatus",staticClass:"short-input",attrs:{placeholder:""},model:{value:e.queryContent.deductStatus,callback:function(t){e.$set(e.queryContent,"deductStatus",t)},expression:"queryContent.deductStatus"}},e._l(e.deductStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("运单发放")]),a("sc-users",{ref:"refUserOrCustomer",staticClass:"short-input",attrs:{placeholder:"",type:"4"},model:{value:e.queryContent.salesManId,callback:function(t){e.$set(e.queryContent,"salesManId",t)},expression:"queryContent.salesManId"}})],1)]),a("ul",{staticClass:"search-input-box"})]),a("div",{staticClass:"search-btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("div"),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{"ng-data":e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},l=[],o=(a("163d"),a("2b45"),a("ed63"),a("8cf2"),a("9a33"),a("ac0d")),r=a("391c"),c=a("6bf2"),u=a.n(c),d=a("a3be"),h=a("4055"),m={name:"detailBill",mixins:[o["b"]],activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{height:342,billCode:"",codeType:!0,resetBillCode:0,feeType:[{label:"全部",id:-1},{label:"退件费",id:1},{label:"转账费",id:2},{label:"拦截费",id:0}],billType:[{label:"全部",id:-3},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}],deductStatus:[{label:"全部",id:-1},{label:"未扣款",id:0},{label:"已线上扣款",id:1},{label:"已线下收款",id:2}],queryContent:{startScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),fineWater:"",fineCode:"",recManId:"",fineType:-1,settlementType:-3,deductOperatorId:"",deductStatus:-1,dateType:0,accountUserId:"",accountUserType:"",customerId:"",salesManId:"",preSiteId:""},optionsClone:{},tableHead:{columns:[{displayName:"结算编号/单号",name:"fineCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"结算流水号",name:"fineWater",isCod:!0,size:150},{displayName:"中心结算时间",name:"fineDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"业务发生时间",name:"scanDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"费用类型",name:"fineType",value:function(e){var t=e["fineType"];return 1===t?"退件费":2===t?"转账费":0===t?"拦截费":""}},{displayName:"客户",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"recManName"},{displayName:"业务员工号",name:"recManCode",isCode:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode"},{displayName:"金额",name:"fineFee",showTotal:!0},{displayName:"扣款金额",name:"deductFee",showTotal:!0},{displayName:"扣款状态",name:"deductStatus",value:function(e){return 0===e.deductStatus?"未扣款":1===e.deductStatus?"已线上扣款":2===e.deductStatus?"已线下收款":void 0}},{displayName:"扣款人",name:"deductOperator"},{displayName:"扣款时间",name:"deductDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"运单发放",name:"salesManName"},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},tableData:[],currentRow:[],batchRow:[],batchTitle:"",batchUrl:"",batchDialogVisible:!1,columns:[],exportObj:{fileName:"对退件/转账/拦截费-明细结算"},exportUrl:d["G"],deductDialogVisible:!1,deductForm:{fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",settlementType:"",id:"",deductFeeType:0,isBatch:0},editUserId:"",editDialogVisible:!1,settleParam:{types:""}}},methods:{summaryToDetail:function(e){var t=this;this.resetQueryContent(),this.queryContent.startScanDate=u()(e.accountDate).format("YYYY-MM")+"-01 00:00:00",this.queryContent.endScanDate=u()(new Date(u()(e.accountDate).add(1,"M").format("YYYY-MM-DD HH:mm:ss")).getTime()-1e3).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.fineType=e.fineType,this.queryContent.settlementType=e.settlementType,this.queryContent.accountUserType=e.settlementType,99===e.settlementType?this.settleParam.types="99":this.settleParam.types="0,2,4",setTimeout((function(){t.queryContent.accountUserId=e.accountUserId,t.onSearch()}),0)},settlementChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},startDateChange:function(e){e&&this.$refs.timePickerB.focus()},onSearch:function(){if(Object(r["trim"])(this.billCode)){var e=Object(r["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3){var t="最多支持1000个"+(this.codeType?"单":"流水")+"号查询";return void this.msg(t)}this.codeType?(this.queryContent.fineCode=e.join(","),this.queryContent.fineWater=""):(this.queryContent.fineWater=e.join(","),this.queryContent.fineCode="")}else{if(this.queryContent.fineWater="",this.queryContent.fineCode="",!this.queryContent.startScanDate&&!this.queryContent.endScanDate)return void this.msg("查询时间不能为空");if(this.queryContent.startScanDate||this.queryContent.endScanDate){if(this.timeCheck(this.queryContent.startScanDate,this.queryContent.endScanDate,0===this.queryContent.dateType?"结算时间":"业务发生时间"))return;this.queryContent.startScanDate=u()(this.queryContent.startScanDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.endScanDate=u()(this.queryContent.endScanDate).format("YYYY-MM-DD HH:mm:ss")}}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(r["cloneDeep"])(e)),Object(d["F"])(this.optionsClone).then((function(e){t.settleParam.types="",0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.tableData.map((function(e){0===e.deductStatus&&(e.deductOperator="",e.deductDate="")})),t.optionsClone.fineWater||t.optionsClone.fineCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.settleParam.types="",t.pagination.total=0,t.tableData=[]}))},exportNew:function(){if(this.optionsClone.fineWater||this.optionsClone.fineCode)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},heightChange:function(e){var t=this;this.height=e?342:220,this.$nextTick((function(){t.z_method.refreshSpread()}))},resetQueryContent:function(){this.billCode="",this.resetBillCode++,this.codeType=!0,this.queryContent={startScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),endScanDate:new Date(u()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),fineWater:"",fineCode:"",recManId:"",fineType:-1,settlementType:-3,deductOperatorId:"",deductStatus:-1,dateType:0,accountUserId:"",accountUserType:"",customerId:"",salesManId:"",preSiteId:""}},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.refUser.autoBlur(),this.$refs.refCustomer.autoBlur(),this.$refs.refDeduct.autoBlur(),this.$refs.refUserOrCustomer.autoBlur(),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.timeSelect.visible&&(this.$refs.timeSelect.visible=!1),this.$refs.feeType.visible&&(this.$refs.feeType.visible=!1),this.$refs.billType.visible&&(this.$refs.billType.visible=!1),this.$refs.deductStatus.visible&&(this.$refs.deductStatus.visible=!1)},getType:function(e){this.codeType=e},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请选择完整的"+a+"时间段"),!0;if(u()(e).isAfter(t))return this.msg(a+"开始时间不能大于结束时间"),!0;var i=u()(t).subtract(31,"days"),s=u()(i).isAfter(u()(e));return!!s&&(this.msg(a+"相差不能大于31天"),!0)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},openDeduct:function(e,t){1===this.currentRow.length?(this.deductForm={fineCode:this.currentRow[0].fineCode,accountUserName:this.currentRow[0].accountUserName,fineFee:this.currentRow[0].fineFee,deductFee:Object(r["cloneDeep"])(this.currentRow[0].fineFee),remark:Object(r["cloneDeep"])(this.currentRow[0].remark),fineType:this.currentRow[0].fineType,settlementType:this.currentRow[0].settlementType,id:this.currentRow[0].id,deductFeeType:t,isBatch:0},this.deductDialogVisible=!0):this.currentRow.length>1&&(this.batchTitle=e,this.deductForm.deductFeeType=t,this.batchUpdateAjax())},checkNum:function(e){var t=!1;if(e.toString().includes(".")){var a=e.toString().split("."),i=a[1].length;i>2&&(t=!0)}return t},singleDeduct:function(){0===this.deductForm.deductFee||"0"===this.deductForm.deductFee||""!==this.deductForm.deductFee&&this.deductForm.deductFee?0!=this.deductForm.deductFee?/^\d+(\.\d+)?$/.test(this.deductForm.deductFee)?this.checkNum(this.deductForm.deductFee)?this.msg("扣款金额小数点只能保留2位小数!"):Number(this.deductForm.deductFee)<0||Number(this.deductForm.deductFee)>9999999?this.msg("扣款金额的范围是0~9999999"):!this.deductForm.remark||h["billUtils"].regRemark(this.deductForm.remark)?this.deductForm.deductFeeType<2?this.deductAjax():this.underlineDeductAjax():this.msg("只能输入数字或字母或中文或常见符号!"):this.msg("请输入有效数字且最多能输入两位小数！"):this.msg("扣款金额不能为0!"):this.msg("扣款金额不能为空!")},deductAjax:function(){var e=this;Object(d["oc"])(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",settlementType:"",id:"",deductFeeType:"",isBatch:0})}))},underlineDeductAjax:function(){var e=this;Object(d["tc"])(this.deductForm).then((function(t){0===t.code&&(e.$message({message:"操作成功!",type:"success"}),e.query(),e.deductDialogVisible=!1,e.deductForm={fineCode:"",accountUserName:"",fineFee:"",deductFee:"",remark:"",fineType:"",settlementType:"",id:"",deductFeeType:"",isBatch:0})}))},openEdit:function(){this.editUserId="",this.currentRow.length>0&&(this.$refs.editUsers&&this.$refs.editUsers.clear(),this.editDialogVisible=!0)},confirmEdit:function(){this.editUserId?(this.editDialogVisible=!1,this.batchTitle="编辑",this.batchUpdateAjax()):this.msg("请选择业务员!")},batchUpdate:function(e){0!==this.currentRow.length?(this.batchTitle=e.target.innerText,this.batchUpdateAjax()):this.msg("请选择要操作的数据!")},batchUpdateAjax:function(){var e=this;"批量扣款"===this.batchTitle||"批量线下收款"===this.batchTitle?("批量扣款"===this.batchTitle?this.batchUrl="/bills/financeFeeBill/deductMoney":"批量线下收款"===this.batchTitle&&(this.batchUrl="/bills/financeFeeBill/underLineDeductMoney"),this.batchRow=this.currentRow.map((function(t){return{id:t.id,fineCode:t.fineCode,fineType:t.fineType,settlementType:t.settlementType,deductFee:t.fineFee,deductFeeType:e.deductForm.deductFeeType,remark:t.remark,isBatch:1,accountUserName:t.accountUserName}}))):"取消扣款"===this.batchTitle?(this.batchUrl="/bills/financeFeeBill/deductMoney",this.batchRow=this.currentRow.map((function(e){return{id:e.id,fineCode:e.fineCode,fineType:e.fineType,settlementType:e.settlementType,deductFeeType:0,isBatch:1}}))):"编辑"===this.batchTitle?this.batchRow=this.currentRow.map((function(t){return{id:t.id,fineCode:t.fineCode,userId:e.editUserId,settlementType:t.settlementType}})):this.batchRow=this.currentRow.map((function(e){return{id:e.id,fineCode:e.fineCode,settlementType:e.settlementType}})),"编辑"===this.batchTitle?this.batchUrl="/bills/financeFeeBill/updateRecUserId":"同步寄件结算对象"===this.batchTitle?this.batchUrl="/bills/financeFeeBill/syncRecUserId":"同步派件结算对象"===this.batchTitle?this.batchUrl="/bills/financeFeeBill/syncPaiUserId":"同步运单发放"===this.batchTitle&&(this.batchUrl="/bills/financeFeeBill/syncBillSendUserId"),"批量扣款"===this.batchTitle||"批量线下收款"===this.batchTitle?this.columns=[{displayName:"结算编号/单号",name:"fineCode",size:100},{displayName:"结算对象",name:"accountUserName",size:100},{displayName:"扣款金额",name:"deductFee",size:50}]:this.columns=[{displayName:"结算编号/单号",name:"fineCode",size:100}],this.batchDialogVisible=!0},dataValidate:function(e){return new Promise((function(t,a){99!==e.settlementType?t(e):a("失败，不可处理下级账单!")}))},close:function(e){this.batchDialogVisible=!1,this.batchRow=[],"noSearch"!==e&&(this.currentRow=[],this.query())}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+60:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},p=m,b=(a("2121"),a("623f")),f=Object(b["a"])(p,n,l,!1,null,"de8919d2",null),y=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("结算月份")]),a("div",{staticClass:"datePicker"},[a("el-date-picker",{ref:"timePicker",attrs:{editable:!1,clearable:!1,type:"month"},model:{value:e.queryContent.accountDate,callback:function(t){e.$set(e.queryContent,"accountDate",t)},expression:"queryContent.accountDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("费用类型")]),a("el-select",{ref:"feeType",staticClass:"short-select",attrs:{placeholder:""},model:{value:e.queryContent.fineType,callback:function(t){e.$set(e.queryContent,"fineType",t)},expression:"queryContent.fineType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{"ng-data":e.tableData,"head-data":e.tableHead}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},g=[],C={name:"monthSummary",mixins:[o["b"]],activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){return{height:260,feeType:[{label:"全部",id:-1},{label:"退件费",id:1},{label:"转账费",id:2},{label:"拦截费",id:0}],billType:[{label:"全部",id:-3},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}],queryContent:{accountDate:new Date,fineType:-1,settlementType:-3,accountUserId:"",accountUserType:"",preSiteId:""},optionsClone:{},tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"结算月份",name:"accountDate",formatter:"yyyy-MM",isCode:!0},{displayName:"费用类型",name:"fineType",value:function(e){var t=e["fineType"];return 1===t?"退件费":2===t?"转账费":0===t?"拦截费":""}},{displayName:"金额",name:"fineFee",showTotal:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"应扣总金额",name:"deductFee",showTotal:!0},{displayName:"已扣款金额",name:"deductedFee",showTotal:!0},{displayName:"未扣款金额",name:"notDeductFee",showTotal:!0}]},exportObj:{fileName:"对退件/转账/拦截费-月汇总"},requestUrl:d["I"]}},methods:{dblclick:function(e,t,a){this.$emit("goto","tab1",t)},onSearch:function(){this.queryContent.accountDate?(this.queryContent.accountDate=u()(this.queryContent.accountDate).format("YYYY-MM"),this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)):this.msg("结算月份不能为空")},query:function(e){var t=this;e&&(this.optionsClone=Object(r["cloneDeep"])(e)),Object(d["H"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.pagination.total=e.data.totalRow,t.tableData=e.data.list):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},settlementChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},exportNew:function(){this.searchExport()},onClickTable:function(){this.$refs.timePicker._data.pickerVisible=!1,this.$refs.feeType.visible&&(this.$refs.feeType.visible=!1)},heightChange:function(e){var t=this;this.height=e?260:220,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+60:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},x=C,k=(a("b7ae"),Object(b["a"])(x,v,g,!1,null,"0a94824c",null)),D=k.exports,w={name:"returnTransferInterceptFeeCheck",components:{detailBill:y,monthSummary:D},data:function(){return{activeName:"tab2"}},methods:{onTabClick:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailBill.summaryToDetail(t)}}},S=w,_=Object(b["a"])(S,i,s,!1,null,"5d5f8325",null);t["default"]=_.exports},4820:function(e,t,a){},"48ab":function(e,t,a){"use strict";var i=a("829a"),s=a.n(i);s.a},"49d5":function(e,t,a){"use strict";var i=a("21b5"),s=a.n(i);s.a},"4b24":function(e,t,a){},"4cc9":function(e,t,a){"use strict";var i=a("2cbf"),s=a.n(i);s.a},"4e42":function(e,t,a){"use strict";var i=a("d7d4"),s=a.n(i);s.a},"4e5e":function(e,t,a){},"4eff":function(e,t,a){"use strict";var i=a("b12d"),s=a.n(i);s.a},"4f7e":function(e,t,a){"use strict";var i=a("8cb8"),s=a.n(i);s.a},"4fc1":function(e,t,a){},5094:function(e,t,a){},"52b9":function(e,t,a){"use strict";var i=a("3ef9"),s=a.n(i);s.a},"52e6":function(e,t,a){"use strict";var i=a("0dba"),s=a.n(i);s.a},"539e":function(e,t,a){},"53c0":function(e,t,a){},5431:function(e,t,a){var i=a("e46b"),s=a("6d24");i(i.S+i.F*(Number.parseFloat!=s),"Number",{parseFloat:s})},"545b":function(e,t,a){},"545f":function(e,t,a){},5631:function(e,t,a){},5694:function(e,t,a){"use strict";var i=a("e787"),s=a.n(i);s.a},5809:function(e,t,a){},"59cb":function(e,t,a){},"59cf":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"明细结算",name:"tab1"}},[a("detailH",{ref:"detailed"})],1),a("el-tab-pane",{attrs:{label:"汇总查询",name:"tab2",lazy:!0}},[a("summaryH",{on:{goto:e.goto}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sendMailPayFeeDetail"},[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{attrs:{height:144},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收时间:")]),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"datetime",editable:!1,disabled:2===e.queryContent.signStatus||0===e.queryContent.signStatus},on:{change:function(t){return e.startDateChange(e.queryContent.signStartDate,!0)}},model:{value:e.queryContent.signStartDate,callback:function(t){e.$set(e.queryContent,"signStartDate",t)},expression:"queryContent.signStartDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime",disabled:2===e.queryContent.signStatus||0===e.queryContent.signStatus},model:{value:e.queryContent.signEndDate,callback:function(t){e.$set(e.queryContent,"signEndDate",t)},expression:"queryContent.signEndDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("费用类型:")]),a("el-select",{ref:"feeType",staticClass:"short-input",attrs:{placeholder:""},model:{value:e.queryContent.goodsPaymentType,callback:function(t){e.$set(e.queryContent,"goodsPaymentType",t)},expression:"queryContent.goodsPaymentType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("账单类型:")]),a("el-select",{ref:"billType",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.billType,callback:function(t){e.$set(e.queryContent,"billType",t)},expression:"queryContent.billType"}},e._l(e.billType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"90px","text-align":"right"}},[e._v("结算对象:")]),a("sc-users",{ref:"refSettlement",staticClass:"short-input",attrs:{type:"7",placeholder:"",param:e.settleParam},on:{change:e.settleChange},model:{value:e.queryContent.accountUserId,callback:function(t){e.$set(e.queryContent,"accountUserId",t)},expression:"queryContent.accountUserId"}})],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"timeSelect",staticClass:"time-select-input",model:{value:e.queryContent.timeType,callback:function(t){e.$set(e.queryContent,"timeType",t)},expression:"queryContent.timeType"}},[a("el-option",{key:0,attrs:{label:"收件时间",value:0}}),a("el-option",{key:1,attrs:{label:"录单时间",value:1}})],1)],1),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerC",attrs:{type:"datetime",editable:!1},on:{change:function(t){return e.startDateChange(e.queryContent.startDate,!1)}},model:{value:e.queryContent.startDate,callback:function(t){e.$set(e.queryContent,"startDate",t)},expression:"queryContent.startDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerD",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime"},model:{value:e.queryContent.endDate,callback:function(t){e.$set(e.queryContent,"endDate",t)},expression:"queryContent.endDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("客户名称:")]),a("sc-users",{ref:"refCustomer",staticClass:"short-input",attrs:{placeholder:"",type:"3"},model:{value:e.queryContent.customerId,callback:function(t){e.$set(e.queryContent,"customerId",t)},expression:"queryContent.customerId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("业务员:")]),a("sc-users",{ref:"refUser",staticClass:"short-input",attrs:{placeholder:"",type:"2"},model:{value:e.queryContent.userId,callback:function(t){e.$set(e.queryContent,"userId",t)},expression:"queryContent.userId"}})],1),a("li",[a("span",{staticClass:"label",staticStyle:{width:"90px","text-align":"right"}},[e._v("结算状态:")]),a("el-select",{ref:"settleSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.operateStatus,callback:function(t){e.$set(e.queryContent,"operateStatus",t)},expression:"queryContent.operateStatus"}},e._l(e.settlementStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收状态:")]),a("el-select",{ref:"signStatus",staticClass:"short-input w-80-h",attrs:{placeholder:" "},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label unique-label h-p-l-40"},[e._v("是否问题件:")]),a("el-select",{ref:"questionSelect",staticClass:"short-input w-80-h",attrs:{placeholder:" "},model:{value:e.queryContent.otherType,callback:function(t){e.$set(e.queryContent,"otherType",t)},expression:"queryContent.otherType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("是否退件:")]),a("el-select",{ref:"returnSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.returnType,callback:function(t){e.$set(e.queryContent,"returnType",t)},expression:"queryContent.returnType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("渠道来源:")]),a("el-select",{ref:"returnSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.source,callback:function(t){e.$set(e.queryContent,"source",t)},expression:"queryContent.source"}},e._l(e.sourceType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticStyle:{width:"90px","text-align":"right"}},[e._v("中心结算状态：")]),a("el-select",{staticClass:"short-input",model:{value:e.queryContent.ztStatus,callback:function(t){e.$set(e.queryContent,"ztStatus",t)},expression:"queryContent.ztStatus"}},e._l(e.centerSignStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("ul",{staticClass:"search-input-box h-test3"},[a("li",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("异常数据包含："),a("br"),e._v("①代收到付款都为0的；"),a("br"),e._v("②有中心结算时间，但是中心结算网点不是登陆网点"),a("br"),e._v("和登陆网点的下级网点的；")]),a("span",{staticClass:"special-label"},[e._v("是否异常:")])]),a("el-select",{ref:"querySelect",staticClass:"short-input w-80-h",attrs:{placeholder:" "},model:{value:e.queryContent.queryType,callback:function(t){e.$set(e.queryContent,"queryType",t)},expression:"queryContent.queryType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",{staticClass:"h-m-l-20"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("①现代收到付金额和上次金额不一致"),a("br"),e._v("②现结算对象与上次结算对象不一致；")]),a("el-checkbox",{staticStyle:{"margin-left":"20px","margin-right":"16px"},model:{value:e.queryContent.cancelSettlement,callback:function(t){e.$set(e.queryContent,"cancelSettlement",t)},expression:"queryContent.cancelSettlement"}},[e._v("需取消结算")])],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("中心尚未与网点结算的数据，此类数"),a("br"),e._v("据禁止与业务员及下级网点结算；")]),a("el-checkbox",{model:{value:e.queryContent.beSettled,callback:function(t){e.$set(e.queryContent,"beSettled",t)},expression:"queryContent.beSettled"}},[e._v("等待结算")])],1)],1)])]),a("div",{staticClass:"search-btn-box"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("div",[e.z_method.showBtn("btn_sendMailFeeOrPayFee_writeOn")?a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.batchUpdate}},[e._v("\n          加预付款\n        ")]):e._e(),e.z_method.showBtn("btn_sendMailFeeOrPayFee_writeOff")?a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.batchUpdate}},[e._v("\n          线下返款\n        ")]):e._e(),e.z_method.showBtn("btn_sendMailFeeOrPayFee_cancelWriteOff")?a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.batchUpdate}},[e._v("\n          取消加款\n        ")]):e._e(),e.z_method.showBtn("btn_sendMailFeeOrPayFee_edit")?a("el-button",{attrs:{type:"primary",disabled:0===e.currentRow.length},on:{click:e.openEdit}},[e._v("\n          编辑\n        ")]):e._e(),e.z_method.showBtn("btn_sendMailFeeOrPayFee_recalculate")?a("el-button",{attrs:{type:"primary",disabled:0===e.currentRow.length},on:{click:e.batchUpdate}},[e._v("\n          重新计算\n        ")]):e._e(),e.z_method.showBtn("btn_sendMailFeeOrPayFee_edit")?a("el-button",{attrs:{type:"primary",disabled:0===e.currentRow.length},on:{click:e.openRemark}},[e._v("\n          编辑备注\n        ")]):e._e()],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.showCell}},[e._v("显示列设置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.contentHeight-30+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sz-batch-process",{attrs:{title:e.batchTitle,height:500,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.batchRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate,isSucessMsg:e.isSucessMsg},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.titleDialog,"close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.editDialogVisible,width:1===e.currentRow.length?"400px":"600px"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[1===e.currentRow.length?a("div",{staticClass:"form-box form-box-h"},[a("div",{staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("运单号：")]),a("el-input",{staticClass:"form-input",attrs:{disabled:!0},model:{value:e.editForm.billCode,callback:function(t){e.$set(e.editForm,"billCode",t)},expression:"editForm.billCode"}})],1),a("div",{staticClass:"form-box-item"},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:!e.editForm.isNet,expression:"!editForm.isNet"}],on:{change:e.changeNZ},model:{value:e.editForm.checkedN,callback:function(t){e.$set(e.editForm,"checkedN",t)},expression:"editForm.checkedN"}},[e._v("需要转入下级账单")]),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.editForm.isNet,expression:"editForm.isNet"}],on:{change:e.changeNZ},model:{value:e.editForm.checkedZ,callback:function(t){e.$set(e.editForm,"checkedZ",t)},expression:"editForm.checkedZ"}},[e._v("需要转入自营账单")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editForm.ishowZN,expression:"!editForm.ishowZN"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("收件业务员：")]),a("sc-users",{ref:"clearU",staticClass:"form-input",attrs:{type:"2",placeholder:"","popper-class":"max-index"},model:{value:e.editForm.userId,callback:function(t){e.$set(e.editForm,"userId",t)},expression:"editForm.userId"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editForm.ishowZN,expression:"!editForm.ishowZN"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("客户：")]),a("sc-users",{ref:"clearC",staticClass:"form-input",attrs:{type:"3",placeholder:"","popper-class":"max-index"},model:{value:e.editForm.customerId,callback:function(t){e.$set(e.editForm,"customerId",t)},expression:"editForm.customerId"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editForm.ishowZN,expression:"editForm.ishowZN"}],staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("下级网点：")]),a("sc-site",{ref:"clearN",staticClass:"form-input",attrs:{param:{child:!0},"popper-class":"max-index"},model:{value:e.editForm.nestSiteId,callback:function(t){e.$set(e.editForm,"nestSiteId",t)},expression:"editForm.nestSiteId"}})],1)]):e._e(),e.currentRow.length>1?a("div",{staticClass:"edit-col-row-box"},[a("div",{staticClass:"edit-col-row form-box-h"},[a("el-radio-group",{model:{value:e.batchEditForm.transType,callback:function(t){e.$set(e.batchEditForm,"transType",t)},expression:"batchEditForm.transType"}},[a("el-radio",{staticStyle:{"padding-left":"24px"},attrs:{label:0},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(0)}}},[e._v("需要转入下级账单\n          ")]),a("el-radio",{staticStyle:{"padding-left":"134px"},attrs:{label:1},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(1)}}},[e._v("需要转入自营账单\n          ")])],1)],1),a("div",{staticClass:"edit-col-row",staticStyle:{color:"red"}},[1===e.batchEditForm.transType?a("i",{staticClass:"el-icon-warning"},[e._v("选择后下级账单会变更为自营账单，原自营账单不做变更；")]):0===e.batchEditForm.transType?a("i",{staticClass:"el-icon-warning"},[e._v("选择后自营账单会变更为下级账单，原下级账单不做变更；")]):a("i",{staticClass:"el-icon-warning"},[e._v("不选择转入类型变更仅对同类型账单进行转换勾选后对所有账单有效；")])]),a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("名称")]),a("div",{staticClass:"col-row-30"},[e._v("是否修改")]),a("div",{staticClass:"col-row-40"},[e._v("内容")])]),1!==e.batchEditForm.transType?a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("下级网点")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.siteCheckChange},model:{value:e.batchEditForm.isNestSiteIdEdit,callback:function(t){e.$set(e.batchEditForm,"isNestSiteIdEdit",t)},expression:"batchEditForm.isNestSiteIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-site",{ref:"clearN",attrs:{param:{child:!0},disabled:!e.batchEditForm.isNestSiteIdEdit,"popper-class":"max-index"},model:{value:e.batchEditForm.nestSiteId,callback:function(t){e.$set(e.batchEditForm,"nestSiteId",t)},expression:"batchEditForm.nestSiteId"}})],1)]):e._e(),0!==e.batchEditForm.transType?a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("收件业务员")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.userCheckChange},model:{value:e.batchEditForm.isUserIdEdit,callback:function(t){e.$set(e.batchEditForm,"isUserIdEdit",t)},expression:"batchEditForm.isUserIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"clearU",attrs:{type:"2","popper-class":"max-index",disabled:!e.batchEditForm.isUserIdEdit},model:{value:e.batchEditForm.userId,callback:function(t){e.$set(e.batchEditForm,"userId",t)},expression:"batchEditForm.userId"}})],1)]):e._e(),0!==e.batchEditForm.transType?a("div",{staticClass:"edit-col-row"},[a("div",{staticClass:"col-row-30"},[e._v("客户")]),a("div",{staticClass:"col-row-30"},[a("el-checkbox",{on:{change:e.customerCheckChange},model:{value:e.batchEditForm.isCustomerIdEdit,callback:function(t){e.$set(e.batchEditForm,"isCustomerIdEdit",t)},expression:"batchEditForm.isCustomerIdEdit"}})],1),a("div",{staticClass:"col-row-40"},[a("sc-users",{ref:"clearC",attrs:{type:"3","popper-class":"max-index",disabled:!e.batchEditForm.isCustomerIdEdit},model:{value:e.batchEditForm.customerId,callback:function(t){e.$set(e.batchEditForm,"customerId",t)},expression:"batchEditForm.customerId"}})],1)]):e._e()]):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editBatchUpdate}},[e._v("确 定")])],1)]),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑备注","close-on-click-modal":!1,"modal-append-to-body":!1,visible:e.remarkDialogVisible,width:"400px"},on:{"update:visible":function(t){e.remarkDialogVisible=t}}},[a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-box-item"},[a("span",{staticClass:"form-title"},[e._v("备注：")]),a("el-input",{staticClass:"form-input",attrs:{type:"textarea",rows:3,resize:"none",maxlength:"30",placeholder:"最多输入30个字!"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.remarkDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.remarkBatchUpdate}},[e._v("确 定")])],1)]),a("sc-cell-setting",{ref:"refTxCell",attrs:{menuName:"付发件到收到付",menuKey:"sendMailPayFeeDetail",spreadHeadData:e.tableHead.columns},on:{model:e.onColumns}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=(a("9a33"),a("163d"),a("ac0d")),c=a("391c"),u=a("6bf2"),d=a.n(u),h=a("f37e"),m=a("a3be"),p=a("4055");a("49a5");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={mixins:[r["b"]],watch:{"queryContent.signStatus":{handler:function(e,t){2!==e&&0!==e||(this.queryContent.signStartDate="",this.queryContent.signEndDate="",""!=this.queryContent.startDate&&""!=this.queryContent.endDate&&null!=this.queryContent.startDate&&null!=this.queryContent.endDate||(this.queryContent.startDate=this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.queryContent.endDate=this.moment().format("YYYY-MM-DD")+" 23:59:59"))},deep:!0}},activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{isSucessMsg:!0,height:342,signStatus:[{label:"全部",id:-1},{label:"已签收",id:1},{label:"未签收",id:0},{label:"第三方签收",id:2}],trueOrFalse:[{label:"全部",id:-1},{label:"是",id:1},{label:"否",id:0}],sourceType:[{label:"全部",id:""},{label:"淘宝COD",id:"TB_ONLINE"},{label:"快递管家COD",id:"KDGJ_COD"},{label:"快递管家普通COD",id:"KDGJ_PTCOD"},{label:"网点录单",id:"WDLD"},{label:"掌中通录单",id:"ZZT"},{label:"快递鸟",id:"KDN"},{label:"菜鸟线下",id:"WAY_ BILL_OFFLINE"},{label:"菜鸟",id:"WAY_BILL"},{label:"微信",id:"Wechat"},{label:"shenzhou",id:"shenzhou"}],centerSignStatusOptions:[{value:-2,label:"全部"},{value:-1,label:"无结算"},{value:0,label:"待结算"},{value:3,label:"待审核"},{value:1,label:"结算成功"},{value:2,label:"结算失败"}],settlementStatus:[{label:"全部",id:-1},{label:"未结算",id:0},{label:"已线上加款",id:2},{label:"已线下返款",id:1}],billType:[{label:"全部",id:-3},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"下级网点",id:99},{label:"无对象",id:-1}],feeType:[{label:"全部",id:-1},{label:"代收",id:0},{label:"到付",id:1}],settleParam:{types:""},tableData:[],tableHead:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,hlock:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"结算状态",hlock:!0,name:"operateStatus",size:100,lock:!0,value:function(e){return Object(h["v"])(Number(e.operateStatus))}},{displayName:"运单号",name:"billCode",size:150,isCode:!0,hlock:!0,lock:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"费用类型",name:"goodsPaymentType",isFrozen:!0,hlock:!0,lock:!0,value:function(e){return Object(h["o"])(Number(e.goodsPaymentType))}},{displayName:"收件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"录单时间",name:"enterDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"userName"},{displayName:"业务员工号",name:"userCode",isCode:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"账单类型",name:"type",value:function(e){return Object(h["c"])(Number(e.type))}},{displayName:"目的地省",name:"dispProvName"},{displayName:"应结算金额",name:"toAccountFee",size:100,showTotal:!0},{displayName:"已结算金额",name:"factGoods",size:100,showTotal:!0},{displayName:"代收/到付款",name:"goodsPaymentFee",size:100,showTotal:!0},{displayName:"手续费",name:"szServiceFee",size:100,showTotal:!0},{displayName:"手续费成本",name:"serviceCost",size:100,showTotal:!0},{displayName:"派件网点",name:"dispSiteName",size:100},{displayName:"派件时间",name:"dispDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(h["z"])(Number(e.signStatus))}},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收人",name:"signManName",isCode:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"结算人",name:"operateManName",isCode:!0},{displayName:"结算时间",name:"operateDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算状态",name:"ztStatus",value:function(e){return Object(h["F"])(Number(e.ztStatus))}},{displayName:"中心结算时间",name:"balanceDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算网点",name:"receiveSiteName",size:100},{displayName:"渠道来源",name:"source",size:100},{displayName:"是否问题件",name:"otherType",value:function(e){return Object(h["s"])(Number(e.otherType))}},{displayName:"是否退件",name:"returnType",value:function(e){return Object(h["s"])(Number(e.returnType))}},{displayName:"是否异常",name:"errorType",value:function(e){return Object(h["s"])(Number(e.errorType))}},{displayName:"上次加款对象",name:"lastAccountName",isCode:!0},{displayName:"上次加款金额",name:"lastAccountFee",size:100,showTotal:!0},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},tableHeadNew:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[]},billCode:"",queryContent:{queryType:0,timeType:0,billCodes:"",startDate:"",endDate:"",scanStartDate:"",scanEndDate:"",signStartDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),signEndDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),enterStartDate:"",enterEndDate:"",billType:-3,signStatus:-1,accountUserId:"",accountUserType:"",userId:"",operateStatus:-1,customerId:"",gtZroe:-1,otherType:-1,returnType:-1,goodsPaymentType:-1,cancelSettlement:!1,beSettled:!1,source:"",ztStatus:-2},optionsClone:{},exportUrl:m["xc"],exportObj:{fileName:"付发件代收到付-明细结算"},batchDialogVisible:!1,currentRow:[],batchRow:[],batchUrl:"",columns:[{displayName:"运单号",name:"billCode",size:100}],batchTitle:"",editDialogVisible:!1,remarkDialogVisible:!1,remark:"",titleDialog:"编辑",editForm:{billCode:"",userId:"",customerId:"",remark:""},batchEditForm:{isUserIdEdit:!1,isCustomerIdEdit:!1,userId:"",customerId:""}}},methods:{onColumns:function(e){this.tableHeadNew.columns=e},changeNZ:function(e){this.editForm.isNet?this.editForm.ishowZN=!e:this.editForm.ishowZN=e},detailed:function(e,t){var a=this;this.resetQueryContent(),this.queryContent.accountUserId="",12===t.col&&(this.queryContent.operateStatus=0),13===t.col&&(this.queryContent.otherType=1),this.queryContent.signStartDate=d()(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.queryContent.signEndDate=d()(e.signDate).format("YYYY-MM-DD")+" 23:59:59",this.queryContent.billType=e.billType,this.queryContent.accountUserType=e.billType,this.queryContent.goodsPaymentType=e.goodsPaymentType,this.queryContent.signStatus=1,99===e.billType?this.settleParam.types="99":this.settleParam.types="0,2,4",setTimeout((function(){a.queryContent.accountUserId=e.accountUserId,a.onSearch()}),0)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},close:function(e){this.batchDialogVisible=!1,this.batchRow=[],"noSearch"!==e&&(this.currentRow=[],this.query())},showCell:function(){this.$refs.refTxCell.open()},startDateChange:function(e,t){e&&(t?this.$refs.timePickerB.focus():this.$refs.timePickerD.focus())},resetQueryContent:function(){this.queryContent={queryType:0,timeType:0,billCodes:"",startDate:"",endDate:"",scanStartDate:"",scanEndDate:"",signStartDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),signEndDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),enterStartDate:"",enterEndDate:"",billType:-3,signStatus:-1,accountUserId:"",accountUserType:"",userId:"",operateStatus:-1,customerId:"",gtZroe:-1,otherType:-1,returnType:-1,goodsPaymentType:-1,cancelSettlement:!1,beSettled:!1,source:"",ztStatus:-2},this.billCode="",this.$refs.refSettlement.clear(),this.$refs.refCustomer.clear(),this.$refs.refUser.clear()},onSearch:function(){if(this.queryContent.billCodes="",Object(c["trim"])(this.billCode)){var e=Object(c["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");this.queryContent.billCodes=e.join(",")}else{if(!this.queryContent.signStartDate&&!this.queryContent.signEndDate&&!this.queryContent.startDate&&!this.queryContent.endDate)return void this.msg("签收时间、收件时间/录单时间不能同时为空");if(this.queryContent.signStartDate||this.queryContent.signEndDate){if(this.timeCheck(this.queryContent.signStartDate,this.queryContent.signEndDate,"签收时间"))return;this.queryContent.signStartDate=d()(this.queryContent.signStartDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.signEndDate=d()(this.queryContent.signEndDate).format("YYYY-MM-DD HH:mm:ss")}if(this.queryContent.startDate||this.queryContent.endDate)if(this.queryContent.timeType<1){if(this.timeCheck(this.queryContent.startDate,this.queryContent.endDate,"收件时间"))return;this.queryContent.scanStartDate=d()(this.queryContent.startDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.scanEndDate=d()(this.queryContent.endDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.enterStartDate="",this.queryContent.enterEndDate=""}else{if(this.timeCheck(this.queryContent.startDate,this.queryContent.endDate,"录单时间"))return;this.queryContent.enterStartDate=d()(this.queryContent.startDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.enterEndDate=d()(this.queryContent.endDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.scanStartDate="",this.queryContent.scanEndDate=""}else this.queryContent.startDate||this.queryContent.endDate||(this.queryContent.scanStartDate="",this.queryContent.scanEndDate="",this.queryContent.enterStartDate="",this.queryContent.enterEndDate="")}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(c["cloneDeep"])(e)),Object(m["wc"])(this.optionsClone).then((function(e){t.settleParam.types="",0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.settleParam.types="",t.pagination.total=0,t.tableData=[]}))},settleChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.refCustomer.autoBlur(),this.$refs.refUser.autoBlur(),this.$refs.billType.visible&&(this.$refs.billType.visible=!1),this.$refs.feeType.visible&&(this.$refs.feeType.visible=!1),this.$refs.timeSelect.visible&&(this.$refs.timeSelect.visible=!1),this.$refs.settleSelect.visible&&(this.$refs.settleSelect.visible=!1),this.$refs.signStatus.visible&&(this.$refs.signStatus.visible=!1),this.$refs.questionSelect.visible&&(this.$refs.questionSelect.visible=!1),this.$refs.returnSelect.visible&&(this.$refs.returnSelect.visible=!1),this.$refs.querySelect.visible&&(this.$refs.querySelect.visible=!1),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.timePickerC._data.pickerVisible=!1,this.$refs.timePickerD._data.pickerVisible=!1},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请选择完整的"+a+"时间段"),!0;if(d()(e).isAfter(t))return this.msg(a+"开始时间不能大于结束时间"),!0;var i=d()(t).subtract(31,"days"),s=d()(i).isAfter(d()(e));return!!s&&(this.msg(a+"相差不能大于31天"),!0)},heightChange:function(e){var t=this;this.height=e?342:200,this.$nextTick((function(){t.z_method.refreshSpread()}))},batchUpdate:function(e){if(0!==this.currentRow.length){if(this.batchTitle=e.target.innerText,1===this.currentRow.length){if(1===this.currentRow[0].errorType&&("加预付款"===this.batchTitle||"线下返款"===this.batchTitle))return void this.msg("当前数据为异常数据，不允许结算！");var t=this.currentRow[0].operateStatus;if(4===t){if("加预付款"===this.batchTitle||"线下返款"===this.batchTitle)return void this.msg("该运单中心未结算，不能结算！");if("编辑"===this.batchTitle||"批量编辑"===this.batchTitle)return void this.msg("该运单中心未结算，不能编辑！");if("取消加款"===this.batchTitle)return void this.msg("该运单中心未结算，不能取消加款！")}else if(0===t){if("取消加款"===this.batchTitle)return void this.msg("状态为未结算，不能取消加款！")}else if(5===t){if("加预付款"===this.batchTitle||"线下返款"===this.batchTitle)return void this.msg("该运单为已结算状态，不能重复结算！");if("编辑"===this.batchTitle||"批量编辑"===this.batchTitle)return void this.msg("该运单为已结算状态，请先取消结算再编辑！")}else if(1===t||2===t){if("加预付款"===this.batchTitle||"线下返款"===this.batchTitle)return void this.msg("该运单已结算，不能重复结算！");if("编辑"===this.batchTitle||"批量编辑"===this.batchTitle)return void this.msg("该运单为已结算，请先取消结算再编辑！")}if("加预付款"===this.batchTitle||"线下返款"===this.batchTitle||"取消加款"===this.batchTitle){if("淘宝COD"==this.currentRow[0].source)return void this.msg("淘宝COD来源的单子不可以进行结算或反结算");if("快递管家COD"==this.currentRow[0].source)return void this.msg("快递管家COD来源的单子不可以进行结算或反结算")}}"重新计算"===this.batchTitle?this.batchRow=this.currentRow.map((function(e){return{billCode:e.billCode}})):this.batchRow=this.currentRow.map((function(e){return{billCode:e.billCode,billTypeBatch:e.type,operateStatus:e.operateStatus,source:e.source,errorType:e.errorType}})),this.batchUpdateAjax()}else this.msg("请选择需要结算的数据！")},batchUpdateAjax:function(){var e=this,t="";"加预付款"===this.batchTitle?this.batchUrl="/bills/newGoodsPaymentSend/writeOnSend":"线下返款"===this.batchTitle?(this.batchUrl="/bills/newGoodsPaymentSend/writeOffSend",t="该运单是否确认线下返款？"):"取消加款"===this.batchTitle?(this.batchUrl="/bills/newGoodsPaymentSend/cancelWriteOffSend",t="是否取消预付款加款和取消返款状态？"):"编辑"===this.batchTitle||"批量编辑"===this.batchTitle?this.batchUrl="/bills/newGoodsPaymentSend/edit":"重新计算"===this.batchTitle?(this.batchUrl="/bills/newGoodsPaymentSend/recalculate",t="确定执行重新计算操作？"):"编辑备注"===this.batchTitle&&(this.batchUrl="/bills/newGoodsPaymentSend/editRemark"),t?this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then((function(){e.batchDialogVisible=!0})).catch((function(){})):this.batchDialogVisible=!0},dataValidate:function(e){var t=this;return new Promise((function(a,i){if(1!==e.errorType||"加预付款"!==t.batchTitle&&"线下返款"!==t.batchTitle){if(4===e.operateStatus){if("加预付款"===t.batchTitle||"线下返款"===t.batchTitle)return void i("该运单中心未结算，不能结算！");if("编辑"===t.batchTitle||"批量编辑"===t.batchTitle)return void i("该运单中心未结算，不能编辑！");if("取消加款"===t.batchTitle)return void i("该运单中心未结算，不能取消加款！")}else if(0===e.operateStatus){if("取消加款"===t.batchTitle)return void i("状态为未结算，不能取消加款！")}else if(5===e.operateStatus){if("加预付款"===t.batchTitle||"线下返款"===t.batchTitle)return void i("该运单为已结算状态，不能重复结算！");if("编辑"===t.batchTitle||"批量编辑"===t.batchTitle)return void i("该运单为已结算状态，请先取消结算再编辑！")}else if(1===e.operateStatus||2===e.operateStatus){if("加预付款"===t.batchTitle||"线下返款"===t.batchTitle)return void i("该运单已结算，不能重复结算！");if("编辑"===t.batchTitle||"批量编辑"===t.batchTitle)return void i("该运单为已结算，请先取消结算再编辑！")}"加预付款"!==t.batchTitle&&"线下返款"!==t.batchTitle&&"取消加款"!==t.batchTitle||"淘宝COD"!=e.source&&"快递管家COD"!=e.source?("编辑"===t.batchTitle||"批量编辑"===t.batchTitle?e.msg="寄件账单结算对象同步更改，请前往寄件账单核对！":e.msg="",a(e)):i(e.source+"来源的单子不可以进行结算或反结算！")}else i("当前数据为异常数据，不允许结算！")}))},openEdit:function(){var e=this;if(0!==this.currentRow.length){if(setTimeout((function(){e.$refs.clearU.clear(),e.$refs.clearC.clear(),e.$refs.clearN.clear()}),0),this.editForm={},1===this.currentRow.length){this.titleDialog="编辑";var t=this.currentRow[0].operateStatus;if(1===t||2===t)return void this.msg("该运单为已结算，请先取消结算再编辑！");if(4===t)return void this.msg("该运单中心未结算，不能编辑！");if(5===t)return void this.msg("该运单为已结算状态，请先取消结算再编辑！");setTimeout((function(){e.editForm={billCode:e.currentRow[0].billCode,remark:e.currentRow[0].remark,billTypeBatch:e.currentRow[0].type,checkedN:!1,checkedZ:!1,isNet:99===e.currentRow[0].type,ishowZN:99===e.currentRow[0].type},99===e.currentRow[0].type?e.editForm.nestSiteId=e.currentRow[0].accountUserId?e.currentRow[0].accountUserId:"":(e.editForm.userId=e.currentRow[0].scanUserId?e.currentRow[0].scanUserId:"",e.editForm.customerId=e.currentRow[0].customerId?e.currentRow[0].customerId:"")}),0)}else this.titleDialog="批量编辑",this.batchEditForm={isUserIdEdit:!1,isCustomerIdEdit:!1,isNestSiteIdEdit:!1,userId:"",customerId:"",nestSiteId:"",transType:""};this.editDialogVisible=!0}else this.msg("请选择需要结算的数据！")},clickitem:function(e){e===this.batchEditForm.transType?this.batchEditForm.transType="":this.batchEditForm.transType=e},editBatchUpdate:function(){if(1===this.currentRow.length){if(!this.editForm.nestSiteId&&(99===this.editForm.billTypeBatch&&!this.editForm.checkedZ||99!==this.editForm.billTypeBatch&&this.editForm.checkedN))return void this.msg("请选择下级网点！");this.batchTitle="编辑";var e={billCode:this.editForm.billCode};99===this.editForm.billTypeBatch?this.editForm.checkedZ?(e.transType=1,e.userId=this.editForm.userId?this.editForm.userId:0,e.customerId=this.editForm.customerId?this.editForm.customerId:0):e.nestSiteId=this.editForm.nestSiteId?this.editForm.nestSiteId:0:this.editForm.checkedN?(e.transType=0,e.nestSiteId=this.editForm.nestSiteId?this.editForm.nestSiteId:0):(e.userId=this.editForm.userId?this.editForm.userId:0,e.customerId=this.editForm.customerId?this.editForm.customerId:0),this.batchRow=[e]}else{if(!this.batchEditForm.isUserIdEdit&&!this.batchEditForm.isCustomerIdEdit&&!this.batchEditForm.isNestSiteIdEdit)return void(this.editDialogVisible=!1);if(0===this.batchEditForm.transType&&!this.batchEditForm.isNestSiteIdEdit)return void(this.editDialogVisible=!1);if(!this.batchEditForm.isUserIdEdit&&!this.batchEditForm.isCustomerIdEdit&&1===this.batchEditForm.transType)return void(this.editDialogVisible=!1);if(this.batchEditForm.isNestSiteIdEdit&&!this.batchEditForm.nestSiteId&&1!==this.batchEditForm.transType)return void this.msg("请选择下级网点！");this.batchTitle="批量编辑";var t={};""!==this.batchEditForm.transType&&(t.transType=this.batchEditForm.transType),this.batchEditForm.isUserIdEdit&&"0"!==this.batchEditForm.transType&&(t.userId=this.batchEditForm.userId?this.batchEditForm.userId:0),this.batchEditForm.isCustomerIdEdit&&"0"!==this.batchEditForm.transType&&(t.customerId=this.batchEditForm.customerId?this.batchEditForm.customerId:0),this.batchEditForm.isNestSiteIdEdit&&"1"!==this.batchEditForm.transType&&(t.nestSiteId=this.batchEditForm.nestSiteId?this.batchEditForm.nestSiteId:0),this.batchRow=this.currentRow.map((function(e){return f({},t,{billCode:e.billCode,billTypeBatch:e.type,source:e.source,operateStatus:e.operateStatus})}))}this.editDialogVisible=!1,this.batchUpdateAjax()},openRemark:function(){0!==this.currentRow.length?(1===this.currentRow.length?this.remark=this.currentRow[0].remark:this.remark="",this.remarkDialogVisible=!0):this.msg("请选择需要结算的数据！")},remarkBatchUpdate:function(){var e=this;""!==this.remark?p["billUtils"].regRemark(this.remark)?(1===this.currentRow.length?this.batchRow=this.currentRow.map((function(t){return{billCode:t.billCode,remark:e.remark,updateType:1}})):this.batchRow=this.currentRow.map((function(t){return{billCode:t.billCode,remark:e.remark,updateType:-1}})),this.batchTitle="编辑备注",this.remarkDialogVisible=!1,this.batchUpdateAjax()):this.msg("只能输入数字或字母或中文或常见符号!"):this.msg("请输入备注!")},userCheckChange:function(e){e?(this.batchEditForm.nestSiteId="",this.batchEditForm.isNestSiteIdEdit=!1):this.batchEditForm.userId=""},customerCheckChange:function(e){e?(this.batchEditForm.nestSiteId="",this.batchEditForm.isNestSiteIdEdit=!1):this.batchEditForm.customerId=""},siteCheckChange:function(e){e?(this.batchEditForm.userId="",this.batchEditForm.customerId="",this.batchEditForm.isUserIdEdit=!1,this.batchEditForm.isCustomerIdEdit=!1):this.batchEditForm.nestSiteId=""}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+90:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},v=y,g=(a("0a07"),a("69c7"),a("623f")),C=Object(g["a"])(v,n,l,!1,null,"1a9447e4",null),x=C.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("签收日期:")]),a("div",{staticClass:"datePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"date",editable:!1,clearable:!1},on:{change:e.startDateChange},model:{value:e.queryContent.signStartDate,callback:function(t){e.$set(e.queryContent,"signStartDate",t)},expression:"queryContent.signStartDate"}}),e._v("\n              至\n              "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,clearable:!1,type:"date"},model:{value:e.queryContent.signEndDate,callback:function(t){e.$set(e.queryContent,"signEndDate",t)},expression:"queryContent.signEndDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("费用类型:")]),a("el-select",{ref:"feeType",staticClass:"short-select",attrs:{placeholder:""},model:{value:e.queryContent.goodsPaymentType,callback:function(t){e.$set(e.queryContent,"goodsPaymentType",t)},expression:"queryContent.goodsPaymentType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("账单类型:")]),a("el-select",{ref:"billType",staticClass:"short-select",attrs:{placeholder:""},model:{value:e.queryContent.billType,callback:function(t){e.$set(e.queryContent,"billType",t)},expression:"queryContent.billType"}},e._l(e.billType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("结算对象:")]),a("sc-users",{ref:"refSettlement",staticClass:"short-select",attrs:{type:"7",placeholder:""},on:{change:e.settleChange},model:{value:e.queryContent.accountUserId,callback:function(t){e.$set(e.queryContent,"accountUserId",t)},expression:"queryContent.accountUserId"}})],1)]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},D=[],w={mixins:[r["b"]],activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){return{height:260,billType:[{label:"全部",id:-3},{label:"客户",id:0},{label:"业务员",id:4},{label:"承包区",id:2},{label:"无对象",id:-1},{label:"下级网点",id:99}],feeType:[{label:"全部",id:-1},{label:"代收",id:0},{label:"到付",id:1}],queryContent:{signStartDate:d()().subtract(1,"days").format("YYYY-MM-DD"),signEndDate:d()().subtract(1,"days").format("YYYY-MM-DD"),billType:-3,accountUserId:"",accountUserType:"",goodsPaymentType:-1},optionsClone:{},requestUrl:m["zc"],exportObj:{fileName:"付发件代收到付-汇总查询"},tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"accountUserName",size:120},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0,size:120},{displayName:"费用类型",name:"goodsPaymentType",value:function(e){return Object(h["o"])(e.goodsPaymentType)},size:120},{displayName:"账单类型",name:"billType",value:function(e){return Object(h["c"])(Number(e.billType))},size:120},{displayName:"代收/到付款",name:"goodsPaymentFee",showTotal:!0,size:120},{displayName:"手续费",name:"szServiceFee",showTotal:!0,size:120},{displayName:"应结算金额",name:"toAccountFee",showTotal:!0,size:120},{displayName:"已结算金额",name:"accountFee",showTotal:!0,size:120},{displayName:"未结算金额",name:"notAccountFee",showTotal:!0},{displayName:"应结算票数",name:"toAccountCount",showTotal:!0},{displayName:"已结算票数",name:"accountCount",size:120,showTotal:!0},{displayName:"未结算票数",name:"notAccountCount",size:120,showTotal:!0},{displayName:"问题件票数",name:"otherCount",size:120,showTotal:!0},{displayName:"退件数",name:"returnCount",size:120,showTotal:!0}]}}},methods:{dblclick:function(e,t,a){this.$emit("goto","tab1",t,a)},settleChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},startDateChange:function(e){e&&this.$refs.timePickerB.focus()},onSearch:function(){if(this.queryContent.signStartDate||this.queryContent.signDateEnd)if(this.queryContent.signStartDate)if(this.queryContent.signEndDate)if(d()(this.queryContent.signStartDate).isAfter(this.queryContent.signEndDate))this.msg("签收日期开始时间不能大于结束时间");else{var e=d()(this.queryContent.signEndDate).format("YYYY-MM-DD")+" 23:59:59",t=d()(e).subtract(16,"days"),a=d()(t).isAfter(d()(this.queryContent.signStartDate));a?this.msg("签收日期相差不能大于16天"):(this.queryContent.signStartDate=d()(this.queryContent.signStartDate).format("YYYY-MM-DD"),this.queryContent.signEndDate=d()(this.queryContent.signEndDate).format("YYYY-MM-DD"),this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent))}else this.msg("请选择完整的签收日期时间段");else this.msg("请选择完整的签收日期时间段");else this.msg("签收日期不能为空!")},query:function(e){var t=this;e&&(this.optionsClone=Object(c["cloneDeep"])(e)),Object(m["yc"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.billType.visible=!1,this.$refs.feeType.visible=!1},exportNew:function(){this.searchExport()},heightChange:function(e){var t=this;this.height=e?260:220,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-this.height+60:this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},S=w,_=(a("a413"),Object(g["a"])(S,k,D,!1,null,"6e9777f8",null)),N=_.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收时间:")]),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"datetime",editable:!1},on:{change:function(t){return e.startDateChange(e.queryContent.signStartDate,!0)}},model:{value:e.queryContent.signStartDate,callback:function(t){e.$set(e.queryContent,"signStartDate",t)},expression:"queryContent.signStartDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime"},model:{value:e.queryContent.signEndDate,callback:function(t){e.$set(e.queryContent,"signEndDate",t)},expression:"queryContent.signEndDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("费用类型:")]),a("el-select",{ref:"feeType",staticClass:"short-input",attrs:{placeholder:""},model:{value:e.queryContent.goodsPaymentType,callback:function(t){e.$set(e.queryContent,"goodsPaymentType",t)},expression:"queryContent.goodsPaymentType"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.label}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("账单类型:")]),a("el-select",{ref:"billType",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.billType,callback:function(t){e.$set(e.queryContent,"billType",t)},expression:"queryContent.billType"}},e._l(e.billType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("结算对象:")]),a("sc-users",{ref:"refSettlement",staticClass:"short-input",attrs:{type:"7",placeholder:""},on:{change:e.settleChange},model:{value:e.queryContent.accountUserId,callback:function(t){e.$set(e.queryContent,"accountUserId",t)},expression:"queryContent.accountUserId"}})],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"timeSelect",staticClass:"time-select-input",model:{value:e.queryContent.timeType,callback:function(t){e.$set(e.queryContent,"timeType",t)},expression:"queryContent.timeType"}},[a("el-option",{key:0,attrs:{label:"收件时间",value:0}}),a("el-option",{key:1,attrs:{label:"录单时间",value:1}})],1)],1),a("div",{staticClass:"dateTimePicker"},[a("el-date-picker",{ref:"timePickerC",attrs:{type:"datetime",editable:!1},on:{change:function(t){return e.startDateChange(e.queryContent.startDate,!1)}},model:{value:e.queryContent.startDate,callback:function(t){e.$set(e.queryContent,"startDate",t)},expression:"queryContent.startDate"}}),e._v("\n                至\n                "),a("el-date-picker",{ref:"timePickerD",attrs:{editable:!1,"default-time":"23:59:59",type:"datetime"},model:{value:e.queryContent.endDate,callback:function(t){e.$set(e.queryContent,"endDate",t)},expression:"queryContent.endDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("客户名称:")]),a("sc-users",{ref:"refCustomer",staticClass:"short-input",attrs:{placeholder:"",type:"3"},model:{value:e.queryContent.customerId,callback:function(t){e.$set(e.queryContent,"customerId",t)},expression:"queryContent.customerId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("业务员:")]),a("sc-users",{ref:"refUser",staticClass:"short-input",attrs:{placeholder:"",type:"2"},model:{value:e.queryContent.userId,callback:function(t){e.$set(e.queryContent,"userId",t)},expression:"queryContent.userId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("结算状态:")]),a("el-select",{ref:"settleSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.operateStatus,callback:function(t){e.$set(e.queryContent,"operateStatus",t)},expression:"queryContent.operateStatus"}},e._l(e.settlementStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"special-label"},[e._v("签收状态:")]),a("el-select",{ref:"signSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label unique-label"},[e._v("代收/到付款:")]),a("el-select",{ref:"moneySelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.gtZroe,callback:function(t){e.$set(e.queryContent,"gtZroe",t)},expression:"queryContent.gtZroe"}},e._l(e.moneyType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label most-special-label"},[e._v("是否问题件:")]),a("el-select",{ref:"questionSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.otherType,callback:function(t){e.$set(e.queryContent,"otherType",t)},expression:"queryContent.otherType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("是否退件:")]),a("el-select",{ref:"returnSelect",staticClass:"short-input",attrs:{placeholder:" "},model:{value:e.queryContent.returnType,callback:function(t){e.$set(e.queryContent,"returnType",t)},expression:"queryContent.returnType"}},e._l(e.trueOrFalse,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])]),a("div",{staticClass:"search-btn-box"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showCell}},[e._v("显示列设置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("cell-setting",{ref:"cellSetAction",attrs:{cellObj:e.tableHead.columns,spreadHeadData:e.tableHeadNew.columns,menuName:"sendMailPayFeeAbnormal"},on:{callBack:e.changeCell}})],1)},I=[],O=(a("ed63"),a("8cf2"),a("54d0"));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={mixins:[r["b"]],name:"abnormal",created:function(){var e=this,t={menu:"sendMailPayFeeAbnormal"};Object(m["Pc"])(t).then((function(t){0===t.code?t.data?e.changeCell(JSON.parse(t.data)):(e.tableHeadNew=Object(c["cloneDeep"])(z({},e.tableHead)),e.z_method.refreshSpread()):e.msg(t.message)})).catch((function(t){e.msg(t.message)}))},activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{height:342,billType:[{label:"全部",id:-3},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"下级网点",id:99},{label:"无对象",id:-1}],signStatus:[{label:"全部",id:-1},{label:"已签收",id:1},{label:"未签收",id:0}],trueOrFalse:[{label:"全部",id:-1},{label:"是",id:1},{label:"否",id:0}],feeType:[{label:"全部",id:-1},{label:"代收",id:0},{label:"到付",id:1}],moneyType:[{label:"全部",id:-1},{label:"=0",id:0},{label:">0",id:1}],settlementStatus:[{label:"全部",id:-1},{label:"未结算",id:0},{label:"已线上加款",id:2},{label:"已线下返款",id:1}],queryContent:{queryType:1,timeType:0,billCodes:"",startDate:"",endDate:"",scanStartDate:"",scanEndDate:"",signStartDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),signEndDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),enterStartDate:"",enterEndDate:"",billType:-3,signStatus:-1,accountUserId:"",accountUserType:"",userId:"",operateStatus:-1,customerId:"",gtZroe:-1,otherType:-1,returnType:-1,goodsPaymentType:-1},optionsClone:{},billCode:"",tableData:[],tableHead:{columns:[{displayName:"结算状态",name:"operateStatus",size:100,value:function(e){return Object(h["v"])(Number(e.operateStatus))}},{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"费用类型",name:"goodsPaymentType",value:function(e){return Object(h["o"])(Number(e.goodsPaymentType))}},{displayName:"收件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"录单时间",name:"enterDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"userName"},{displayName:"业务员工号",name:"userCode",isCode:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"账单类型",name:"type",value:function(e){return Object(h["c"])(Number(e.type))}},{displayName:"目的地省",name:"dispProvName"},{displayName:"应结算金额",name:"toAccountFee",size:100,showTotal:!0},{displayName:"已结算金额",name:"factGoods",size:100,showTotal:!0},{displayName:"代收/到付款",name:"goodsPaymentFee",size:100,showTotal:!0},{displayName:"手续费",name:"szServiceFee",size:100,showTotal:!0},{displayName:"手续费成本",name:"serviceCost",size:100,showTotal:!0},{displayName:"派件网点",name:"dispSiteName",size:100},{displayName:"派件时间",name:"dispDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(h["y"])(Number(e.signStatus))}},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收人",name:"signManName",isCode:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"结算人",name:"operateManName"},{displayName:"结算时间",name:"operateDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算时间",name:"balanceDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"中心结算网点",name:"receiveSiteName",size:100},{displayName:"渠道来源",name:"source",size:100},{displayName:"是否问题件",name:"otherType",value:function(e){return Object(h["s"])(Number(e.otherType))}},{displayName:"是否退件",name:"returnType",value:function(e){return Object(h["s"])(Number(e.returnType))}},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},tableHeadNew:{columns:[]},exportUrl:m["xc"],exportObj:{fileName:"付发件代收到付-异常数据"}}},methods:{onSearch:function(){if(this.queryContent.billCodes="",Object(c["trim"])(this.billCode)){var e=Object(c["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");this.queryContent.billCodes=e.join(",")}else{if(!this.queryContent.signStartDate&&!this.queryContent.signEndDate&&!this.queryContent.startDate&&!this.queryContent.endDate)return void this.msg("签收时间、收件时间/录单时间不能同时为空");if(this.queryContent.signStartDate||this.queryContent.signEndDate){if(this.timeCheck(this.queryContent.signStartDate,this.queryContent.signEndDate,"签收时间"))return;this.queryContent.signStartDate=d()(this.queryContent.signStartDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.signEndDate=d()(this.queryContent.signEndDate).format("YYYY-MM-DD HH:mm:ss")}if(this.queryContent.startDate||this.queryContent.endDate)if(this.queryContent.timeType<1){if(this.timeCheck(this.queryContent.startDate,this.queryContent.endDate,"收件时间"))return;this.queryContent.scanStartDate=d()(this.queryContent.startDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.scanEndDate=d()(this.queryContent.endDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.enterStartDate="",this.queryContent.enterEndDate=""}else{if(this.timeCheck(this.queryContent.startDate,this.queryContent.endDate,"录单时间"))return;this.queryContent.enterStartDate=d()(this.queryContent.startDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.enterEndDate=d()(this.queryContent.endDate).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.scanStartDate="",this.queryContent.scanEndDate=""}else this.queryContent.startDate||this.queryContent.endDate||(this.queryContent.scanStartDate="",this.queryContent.scanEndDate="",this.queryContent.enterStartDate="",this.queryContent.enterEndDate="")}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(c["cloneDeep"])(e)),Object(m["wc"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code?(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]):(t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},heightChange:function(e){var t=this;this.height=e?342:220,this.$nextTick((function(){t.z_method.refreshSpread()}))},resetQueryContent:function(){this.queryContent={queryType:1,timeType:0,billCodes:"",startDate:"",endDate:"",scanStartDate:"",scanEndDate:"",signStartDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00"),signEndDate:new Date(d()().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"),enterStartDate:"",enterEndDate:"",billType:-3,signStatus:-1,accountUserId:"",accountUserType:"",userId:"",operateStatus:-1,customerId:"",gtZroe:-1,otherType:-1,returnType:-1,goodsPaymentType:-1},this.billCode="",this.$refs.refSettlement.clear(),this.$refs.refCustomer.clear(),this.$refs.refUser.clear()},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.refCustomer.autoBlur(),this.$refs.refUser.autoBlur(),this.$refs.billType.visible&&(this.$refs.billType.visible=!1),this.$refs.timeSelect.visible&&(this.$refs.timeSelect.visible=!1),this.$refs.signSelect.visible&&(this.$refs.signSelect.visible=!1),this.$refs.questionSelect.visible&&(this.$refs.questionSelect.visible=!1),this.$refs.returnSelect.visible&&(this.$refs.returnSelect.visible=!1),this.$refs.moneySelect.visible&&(this.$refs.moneySelect.visible=!1),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.timePickerC._data.pickerVisible=!1,this.$refs.timePickerD._data.pickerVisible=!1},changeCell:function(e){var t=Object(c["cloneDeep"])(z({},this.tableHead)),a=Object(O["a"])(e);t=t.columns.filter((function(e){var t=a.map((function(e){return e.displayName}));return t.includes(e.displayName)})),this.tableHeadNew.columns=t,this.z_method.refreshSpread()},startDateChange:function(e,t){e&&(t?this.$refs.timePickerB.focus():this.$refs.timePickerD.focus())},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},showCell:function(){this.$refs.cellSetAction.open()},timeCheck:function(e,t,a){if(!e||!t)return this.msg("请选择完整的"+a+"时间段"),!0;if(d()(e).isAfter(t))return this.msg(a+"开始时间不能大于结束时间"),!0;var i=d()(t).subtract(31,"days"),s=d()(i).isAfter(d()(e));return!!s&&(this.msg(a+"相差不能大于31天"),!0)},settleChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-this.height:this.$store.getters.clientHeight-this.height+60}}},M=F,P=(a("2074"),Object(g["a"])(M,T,I,!1,null,"b164312a",null)),Y=P.exports,j={name:"sendMailFeeOrPayFee",components:{summaryH:N,detailH:x,abnormal:Y},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t,a)}}},$=j,H=Object(g["a"])($,i,s,!1,null,"22dda5b0",null);t["default"]=H.exports},"5bce":function(e,t,a){"use strict";var i=a("4820"),s=a.n(i);s.a},"5cbf":function(e,t,a){},"5cda":function(e,t,a){},"5f8f":function(e,t,a){},6051:function(e,t,a){"use strict";var i=a("a792"),s=a.n(i);s.a},"614b":function(e,t,a){"use strict";var i=a("6932"),s=a.n(i);s.a},6151:function(e,t,a){"use strict";var i=a("c252"),s=a.n(i);s.a},6298:function(e,t,a){"use strict";var i=a("ab79"),s=a.n(i);s.a},"62ac":function(e,t,a){"use strict";var i=a("129f"),s=a.n(i);s.a},6367:function(e,t,a){},6378:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总",name:"tab1"}},[a("summaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detailH",{ref:"detailed"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main detail-new"},[a("div",{staticClass:"twoTransferFeeNew"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search1",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"f-l"},[a("sc-bill-code",{ref:"oddNum",model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 166px)"}},[a("div",{staticClass:"h_36"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-time"},[e._v("签收时间：")]),a("sc-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:!1,limit:e.limit,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("账单类型：")]),a("el-select",{ref:"billType",staticClass:"w-i-85",model:{value:e.billType,callback:function(t){e.billType=t},expression:"billType"}},e._l(e.billTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("结算对象：")]),a("sc-users",{ref:"accountUserId",staticClass:"w-i-85",attrs:{type:"7",param:e.typesParams},on:{change:e.changeAccountType},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("客户：")]),a("sc-users",{ref:"refCustomerId",staticClass:"w-i-85",attrs:{type:"3"},model:{value:e.customerId,callback:function(t){e.customerId=t},expression:"customerId"}})],1)])]),a("div",{staticStyle:{display:"inline-block",width:"calc(100% - 153px)"}},[a("ul",[a("li",[a("el-select",{staticClass:"time-select",attrs:{clearable:e.selectClearable},model:{value:e.timeType,callback:function(t){e.timeType=t},expression:"timeType"}},[a("el-option",{key:1,attrs:{label:"收件时间",value:0}}),a("el-option",{key:2,attrs:{label:"到件时间",value:1}})],1),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("目的地省：")]),a("sc-province",{staticClass:"w-i-85",attrs:{res:"dispProvince"},model:{value:e.dispProvince,callback:function(t){e.dispProvince=t},expression:"dispProvince"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("业务员：")]),a("sc-users",{ref:"refRecManId",staticClass:"w-i-85",attrs:{type:"2"},model:{value:e.recManId,callback:function(t){e.recManId=t},expression:"recManId"}})],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"danger"},on:{click:e.reset}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 重置\n          ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1)]),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"justify-content":"flex-end","padding-right":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.isearchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[e.billCode.length<1?a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}}):e._e()],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},l=[],o=a("d9ba"),r=(a("9a33"),a("cc57"),a("163d"),a("ac0d")),c=a("391c"),u=a("a3be"),d=(a("f37e"),{mixins:[r["b"]],data:function(){var e=this;return{typesParams:{types:"0,2,4,99"},accountType:"",selectClearable:!1,dispProvince:"",params:{child:!0},billType:-2,billTypeList:[{name:"全部",value:-2},{name:"业务员",value:4},{name:"承包区",value:2},{name:"客户",value:0},{name:"无对象",value:-1},{name:"下级网点",value:99}],selectDateType2:1,ishow:!0,ishowHeight:0,ishowHeights:0,optionsClone:"",requestUrl:u["Wc"],exportUrl:"/bills/transferBill/export",exportObj:{fileName:"二级中转费结算-明细-"},billCode:"",dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],limit:31,dateValue2:[],areaId:"",recManId:"",customerId:"",accountUserId:"",subAccountUserId:"",tableData:[],timeType:0,tableHead:{columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"账单类型",name:"type",size:120,isCode:!0,value:function(t){var a=e.billTypeList.filter((function(e){return e.value===Number(t.type)}));return a.length>0?a[0].name:t.type}},{displayName:"收件时间",name:"recTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"到件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"recManName"},{displayName:"业务员编码",name:"recManCode",isCode:!0},{displayName:"结算对象",name:"settlementName",size:120},{displayName:"结算对象编码",name:"settlementCode",size:120},{displayName:"目的地省",name:"provinceName"},{displayName:"目的地市",name:"cityName"},{displayName:"结算重量",name:"accountWeight"},{displayName:"二级中转费",name:"twoLevelFee"},{displayName:"运单发放",name:"billProvideManName"},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收时间",name:"signTime",formatter:"yyyy-MM-dd hh:mm:ss",size:150}]}}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},methods:{isearchExport:function(){0!==this.tableData.length?this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},changeAccountType:function(e){this.accountType=e?e.type:""},reset:function(){this.accountType="",this.dispProvince="",this.billCode="",this.dateValue=[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.recManId="",this.customerId="",this.dateValue2=[],this.areaId="",this.accountUserId="",this.subAccountUserId="",this.billType=-2},detailed:function(e){this.reset(),this.dateValue=[this.moment(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.signDate).format("YYYY-MM-DD")+" 23:59:59"],this.timeType=0,this.billType=e.type,this.accountType=e.type,99==this.billType?this.typesParams={types:"99"}:this.typesParams={types:"0,2,4"},this.accountUserId=e.accountUserId||"",this.onSearch()},onSearch:function(){var e=this.billCode;if(e=","==e.substring(e.length-1)?e.substring(0,e.length-1):e,e.length>1){for(var t=e.split(","),a=0;a<t.length;a++)""!=t[a]&&null!=t[a]&&void 0!=Object(o["a"])(t[a])||(t.splice(a,1),a-=1);if(t.length>1e3)return void this.msg("查询单号不能超过1000个单号");e=t.join(",")}else{if(0===this.dateValue.length&&0===this.dateValue2.length&&this.msg("签收时间、收件时间不能同时为空"),0===this.dateValue.length||!this.dateValue[0]&&!this.dateValue[1])return void this.msg("签收时间不能为空");if(!this.dateValue[0]||!this.dateValue[1])return void this.msg("请输入完整的签收时间");if(this.dateValue[2]&&this.dateValue[2]<0)return void this.msg("签收的开始时间不能大于结束时间,请重新选择时间");if(this.dateValue[2]&&this.limit<=this.dateValue[2])return void this.msg("签收时间最多可查询"+this.limit+"天的数据,请重新选择时间");var i="";if(i=this.timeType?"到件":"收件",!this.dateValue2[0]===!!this.dateValue2[1])return void this.msg("请输入完整的".concat(i,"时间"));if(this.dateValue2[2]&&this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.dateValue2[2]&&this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var s={timeType:this.timeType,currentPage:this.pagination.currentPage,pageSize:this.pagination.pageSize,accountUserId:this.accountUserId,subAccountUserId:this.subAccountUserId,dispProvince:this.dispProvince,customerId:this.customerId,recManId:this.recManId,startSignDate:null==this.dateValue[0]?"":this.dateValue[0],endSignDate:null==this.dateValue[1]?"":this.dateValue[1],type:this.billType,accountType:this.accountType};3===this.dateValue2.length&&(s.startDate=null==this.dateValue2[0]?"":this.dateValue2[0],s.endDate=null==this.dateValue2[1]?"":this.dateValue2[1]),e.length>0&&(s.billCode=e),this.optionsClone=Object(c["cloneDeep"])(s),this.query(s)},query:function(e){var t=this;Object(u["Vc"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")),t.typesParams={types:"0,2,4,99"}})).catch((function(e){t.pagination.total=0,t.tableData=[],t.typesParams={types:"0,2,4,99"}}))}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-240:this.z_param.isNode?this.$store.getters.clientHeight-300:this.$store.getters.clientHeight-260}}}),h=d,m=(a("b3f5"),a("623f")),p=Object(m["a"])(h,n,l,!1,null,null,null),b=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main summary-new"},[a("div",{staticClass:"twoTransferFeeNew"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"right",margin:"6px 6px 0 0"}},[a("el-button",{staticStyle:{padding:"9px 15px !important"},attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("ul",[a("li",[a("label",[e._v("签收日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("账单类型：")]),a("el-select",{ref:"billType",model:{value:e.billType,callback:function(t){e.billType=t},expression:"billType"}},e._l(e.billTypes,(function(e){return a("el-option",{key:e.state,attrs:{label:e.name,value:e.state}})})),1)],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{attrs:{type:"7",param:{types:"0,2,4,99"}},on:{change:e.changeAccountType},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("扣款状态：")]),a("el-select",{ref:"billType",model:{value:e.billState,callback:function(t){e.billState=t},expression:"billState"}},e._l(e.chargeStatusOptions,(function(e){return a("el-option",{key:e.state,attrs:{label:e.name,value:e.state}})})),1)],1)])])]),a("div",{staticStyle:{"border-top":"10px solid #e9eef2",padding:"10px 0px 0px 15px"}},[a("ul",[a("li",[e.z_method.showBtn("btn_twoTransferFeeBillNew_hexiao")?a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("hexiao")}}},[e._v("\n            扣款\n          ")]):e._e()],1),a("li",[e.z_method.showBtn("btn_twoTransferFeeBillNew_underline")?a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("underline")}}},[e._v("\n            线下收款\n          ")]):e._e()],1),a("li",[e.z_method.showBtn("btn_twoTransferFeeBillNew_fanhexiao")?a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("fanhexiao")}}},[e._v("\n            取消扣款\n          ")]):e._e()],1),a("li",[e.z_method.showBtn("btn_twoTransferFeeBillNew_remark")?a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.edit}},[e._v("\n            编辑备注\n          ")]):e._e()],1),a("li",{staticClass:"m-r-15 last-child"},[a("el-button",{attrs:{type:"primary"},on:{click:e.exportNew}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n          ")])],1)])])],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sc-batch-process",{attrs:{title:e.title,dialogVisible:e.dialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:e.batchUrl,isQs:e.isQsm,types:"twoTransferFeeS"},on:{model:e.close}}),a("edit",{ref:"edit",attrs:{checkedRows:e.currRow}})],1)},y=[],v=(a("6d57"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"summer-remark",staticStyle:{"z-index":"2001",position:"relative"}},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑备注",visible:e.show,width:"250px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("备注：")]),a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字符！",rows:"6",maxlength:"30"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"编辑备注",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)}),g=[],C={props:{checkedRows:{type:Array,default:[]}},data:function(){return{show:!1,columns:[],batchUrl:"/bills/transferBill/saveRemark",batchData:[],dialogVisible:!1,billType:0,remark:""}},mounted:function(){},methods:{reset:function(){var e=Object(c["cloneDeep"])(this.checkedRows);1===e.length?this.remark=e[0].remark:this.remark=""},confirm:function(){var e=this;this.batchData=this.checkedRows,this.batchData=this.checkedRows.map((function(t){var a=Object.assign({},t,{remark:e.remark});return a})),this.dialogVisible=!0,this.show=!1},close:function(){this.$parent.onSearch(),this.dialogVisible=!1,this.remark=""}},watch:{}},x=C,k=(a("740a"),a("0465"),Object(m["a"])(x,v,g,!1,null,"0f2f4614",null)),D=k.exports,w={mixins:[r["b"]],components:{edit:D},data:function(){var e=this;return{isQsm:!1,accountType:"",exportUrl:"/bills/transferBill/sum",params:{child:!0},billState:-1,billStatus:[{name:"未结算",state:-1},{name:"结算未推送",state:0},{name:"结算待扣款",state:1},{name:"结算已扣款",state:2}],billType:-2,billTypes:[{name:"全部",state:-2},{name:"无对象",state:-1},{name:"客户",state:0},{name:"承包区",state:2},{name:"业务员",state:4},{name:"下级网点",state:99}],chargeStatusOptions:[{name:"全部",state:-1},{name:"未扣款",state:0},{name:"待扣款",state:1},{name:"已线上扣款",state:2},{name:"已线下收款",state:3}],offerlineState:[{name:"未处理",state:0},{name:"已线下收款",state:1}],requestMode:"post",title:"",dialogVisible:!1,batchUrl:"",optionsH:{},columns:[],currRow:[],ishow:!0,ishowHeight:0,ishowHeights:0,optionsClone:"",requestUrl:u["ad"],limit:16,exportObj:{fileName:"二级中转费结算-汇总-"},settlementId:"",subAccountUserId:"",tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],tableHead:{dblclick:this.dblclick,columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"settlementName",size:120,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:120,isCode:!0},{displayName:"账单类型",name:"type",size:120,value:function(t){var a=e.billTypes.filter((function(e){return e.state===Number(t.type)}));return a.length>0?a[0].name:t.type}},{displayName:"票数",name:"totalCount",size:120,isCode:!0},{displayName:"二级中转费",name:"twoLevelFee",size:120,formatter:"0.00"},{displayName:"扣款金额",name:"hexiaoFee",size:120,formatter:"0.00"},{displayName:"费用差额",name:"subFee",size:120,formatter:"0.00"},{displayName:"扣款状态",name:"hexiaoStatus",value:function(t){if(console.log("row"),console.log(t),1===t.hexiaoOffline)return"已线下收款";var a=e.billStatus.filter((function(e){return e.state==Number(t.hexiaoStatus)}));return a.length>0?(console.log(t.type),console.log("row.type"),""===t.type?"未扣款":99===t.type||"下级网点"==t.type?a[0].name:-1===t.hexiaoStatus?"未扣款":"已线上扣款"):t.hexiaoStatus}},{displayName:"扣款人",name:"hexiaoMan",isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"备注",name:"remark",size:120}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},methods:{exportNew:function(){this.tableData.length>0?this.pagination.total>this.pagination.pageSize?(console.log("第一个"),this.searchExport()):(this.checklistData=this.tableData,console.log("第二个"),this.checklistExport()):this.msg("没有数据无法导出!")},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=Object(c["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},changeAccountType:function(e){console.log(e),this.accountType=e?e.type:""},actionBut:function(e){var t=this;this.columns=[{displayName:"签收日期",name:"signDate",minWidth:"120"},{displayName:"结算对象",name:"settlementName",minWidth:"120"}],this.currRow.forEach((function(e){e.signDate=t.moment(e.signDate).format("YYYY-MM-DD")})),this.currRow=Object(c["cloneDeep"])(this.currRow),"hexiao"==e&&(this.isQsm=!0,this.batchUrl="/bills/transferBill/hexiao",this.title="扣款"),"fanhexiao"==e&&(this.isQsm=!0,this.batchUrl="/bills/transferBill/fanhexiao",this.title="取消扣款"),"underline"==e&&(this.isQsm=!0,this.batchUrl="/bills/transferBill/hexiaoUnderLine",this.title="线下收款"),this.dialogVisible=!0},close:function(e){this.isQsm=!1,this.dialogVisible=!1,this.title="",this.columns=[],this.batchUrl="","noSearch"!=e&&this.onSearch()},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={accountUserId:this.settlementId,subAccountUserId:this.subAccountUserId,hexiaoStatus:this.billState,type:this.billType,currentPage:this.pagination.currentPage,endSignDate:this.dateValue[1],pageSize:this.pagination.pageSize,startSignDate:this.dateValue[0],accountType:this.accountType};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["Zc"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},edit:function(){this.$refs.edit.reset(),this.$refs.edit.show=!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-170:this.z_param.isNode?this.$store.getters.clientHeight-250:this.$store.getters.clientHeight-190}}},S=w,_=(a("0aae"),Object(m["a"])(S,f,y,!1,null,null,null)),N=_.exports,T={name:"twoTransferFeeBillNew",components:{summaryH:N,detailH:b},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t)}}},I=T,O=(a("771c"),Object(m["a"])(I,i,s,!1,null,null,null));t["default"]=O.exports},6420:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab page-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"月汇总",name:"tab1"}},[a("mSummaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"日汇总",name:"tab2"}},[a("dSummaryH",{ref:"detailed"})],1)],1),e.isSwitchType?a("div",{staticClass:"page-error"},[e._v("\n    小贴士：4月份的中转费可能有少量偏差，未计算增值加收费，预计5月份会修复好；\n  ")]):e._e()],1)},s=[],n=a("bb74"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main lastNetRecPayBill"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("网点名称：")]),a("sz-site",{ref:"siteSet",attrs:{param:{child:!0},hasSubordinate:e.z_param.hasSubordinate},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content",staticStyle:{color:"black"}},[a("el-table",{attrs:{data:e.checklistData,height:e.contentHeight,"header-cell-style":e.tableHeaderColor,"show-summary":"","summary-method":e.getSummaries,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"lowerSiteName",width:"100",label:"网点名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"statDate",width:"100",label:"日期",formatter:e.formatterDay}}),a("el-table-column",{attrs:{"label-class-name":"blue",label:"上级网点应收费用"}},[a("el-table-column",{attrs:{label:"中转费(元)","render-header":function(t,a){return e.renderHeaderOne(t,a,"按到件时间统计")}}},[a("el-table-column",{attrs:{prop:"transferCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"transferRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("包仓费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按结算时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"baggageRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"baggageHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"paymentDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("续重派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"addDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"addDispWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"addDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"addDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("二级中转费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"twoLevelCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"twoLevelWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"twoLevelRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"twoLevelHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应收小计=中转费应收+包仓费应收+派代收到付应收+续重派费应收+二级中转费应收"),a("br"),e._v("已收小计=中转费已收+包仓费已收+派代收到付已收+续重派费已收+二级中转费已收")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应收",prop:"Subtotal1"}}),a("el-table-column",{attrs:{label:"已收",prop:"Subtotal2"}})],1)],1),a("el-table-column",{attrs:{label:"上级网点应付费用","label-class-name":"pink"}},[a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paifeiCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paifeiWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"paifeiRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paifeiHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("寄代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentSendCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentSendRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paymentSendHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应付小计=派费应付+寄代收到付应付"),a("br"),e._v("已付小计=派费已付+寄代收到付已付")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应付",prop:"Subtotal3"}}),a("el-table-column",{attrs:{label:"已付",prop:"Subtotal4"}})],1)],1)],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},o=[],r=(a("163d"),a("6d57"),a("391c")),c=a("a3be"),u=a("ac0d"),d={mixins:[u["b"]],data:function(){return{cha:this.z_param.isNode?270:210,btnDisabled:!1,optionsClone:"",requestUrl:c["Eb"],limit:7,exportObj:{fileName:"上级网点应收应付账单-日汇总-"},siteId:"",checklistData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],tableHead:{columns:[{displayName:"网点名称",name:"lowerSiteName",isCode:!0},{displayName:"日期",name:"statDate",formatter:"yyyy-MM-dd"},{displayName:"中转费票数",name:"transferCnt"},{displayName:"中转费重量",name:"transferWeight"},{displayName:"中转费应收",name:"transferRecFee"},{displayName:"中转费已收",name:"transferHexiaoFee"},{displayName:"包仓费应收",name:"baggageRecFee"},{displayName:"包仓费已收",name:"baggageHexiaoFee"},{displayName:"派代收到付票数",name:"paymentDispCnt"},{displayName:"派代收到付应收",name:"paymentDispRecFee"},{displayName:"派代收到付已收",name:"paymentDispHexiaoFee"},{displayName:"续重派费票数",name:"addDispCnt"},{displayName:"续重派费重量",name:"addDispWeight"},{displayName:"续重派费应收",name:"addDispRecFee"},{displayName:"续重派费已收",name:"addDispHexiaoFee"},{displayName:"二级中转费票数",name:"twoLevelCnt"},{displayName:"二级中转费重量",name:"twoLevelWeight"},{displayName:"二级中转费应收",name:"twoLevelRecFee"},{displayName:"二级中转费已收",name:"twoLevelHexiaoFee"},{displayName:"应收小计",name:"Subtotal1"},{displayName:"已收小计",name:"Subtotal2"},{displayName:"派费票数",name:"paifeiCnt"},{displayName:"派费重量",name:"paifeiWeight"},{displayName:"派费应付",name:"paifeiRecFee"},{displayName:"派费已付",name:"paifeiHexiaoFee"},{displayName:"寄代收到付票数",name:"paymentSendCnt"},{displayName:"寄代收到付应付",name:"paymentSendRecFee"},{displayName:"寄代收到付已付",name:"paymentSendHexiaoFee"},{displayName:"应付小计",name:"Subtotal3"},{displayName:"已付小计",name:"Subtotal4"}]}}},watch:{siteId:{handler:function(e,t){this.limit=""==e?7:31},deep:!0}},methods:{renderHeaderOne:function(e,t,a){var i=t.column;t.$index;return[i.label,e("el-tooltip",{props:{content:function(){return a}(),placement:"bottom"}},[e("span",{class:{"el-icon-question":!0}})])]},clickSearch:function(e){var t=this;this.$refs.siteSet.chooseId(e.lowerSiteName,e.lowerSiteId,(function(a,i){var s=e.statDate+"";s=s.slice(0,4)+"-"+s.slice(4),t.dateValue=[t.moment(t.moment(s).startOf("month").format("YYYY-MM-DD"))._i,t.moment(t.moment(s).endOf("month").format("YYYY-MM-DD"))._i],t.onSearch()}))},formatterDay:function(e,t){return this.moment(e.statDate).format("YYYY-MM-DD")},tableHeaderColor:function(e){e.row,e.column,e.rowIndex,e.columnIndex},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t)if(1!==t)if(2!==t){var s=a.map((function(t){return Number(t[e.property])}));s.every((function(e){return isNaN(e)}))?i[t]="0.00":(i[t]=s.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0).toFixed(2),i[t]%1!==0||3!=t&&9!=t&&12!=t&&16!=t&&22!=t&&26!=t||(i[t]=parseInt(i[t])),i[t]+="")}else i[t]="";else i[t]="";else i[t]="合计"})),i},onSearch:function(){if(this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择时间");else if(this.limit<=this.dateValue[2])this.siteId?this.msg("若指定下级网点，最多查询"+this.limit+"天！"):this.msg("未指定下级网点时，最多查询"+this.limit+"天！");else{var e={lowerSiteId:this.siteId,startDate:this.moment(this.dateValue[0]).format("YYYY-MM-DD"),endDate:this.moment(this.dateValue[1]).format("YYYY-MM-DD"),pageSize:5e3,currentPage:1};this.optionsClone=Object(r["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(c["Db"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.checklistData=t.assignment(e.data.list),t.pagination.total=e.data.totalRow,t.cha=t.z_param.isNode?248:180):(t.pagination.total=0,t.checklistData=[],t.msg("没有数据哟"),t.cha=t.z_param.isNode?270:210)})).catch((function(e){t.pagination.total=0,t.checklistData=[],t.cha=t.z_param.isNode?270:210}))},assignment2:function(e,t){var a=0;return e.forEach((function(e){t[e]&&(a+=t[e])})),a.toFixed(2)},assignment:function(e){var t=this,a=["transferRecFee","baggageRecFee","paymentDispRecFee","addDispRecFee","twoLevelRecFee"],i=["transferHexiaoFee","baggageHexiaoFee","paymentDispHexiaoFee","addDispHexiaoFee","twoLevelHexiaoFee"],s=["paifeiRecFee","paymentSendRecFee"],n=["paifeiHexiaoFee","paymentSendHexiaoFee"];return e.forEach((function(l,o){e[o].Subtotal1=t.assignment2(a,l),e[o].Subtotal2=t.assignment2(i,l),e[o].Subtotal3=t.assignment2(s,l),e[o].Subtotal4=t.assignment2(n,l)})),e}},computed:{contentHeight:function(){return this.$store.getters.clientHeight-this.cha}}},h=d,m=(a("e8c7"),a("623f")),p=Object(m["a"])(h,l,o,!1,null,null,null),b=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main lastNetRecPayBill"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthStart,callback:function(t){e.monthStart=t},expression:"monthStart"}}),a("label",{staticClass:"margin-l-r-8"},[e._v("至")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthEnd,callback:function(t){e.monthEnd=t},expression:"monthEnd"}})],1),a("li",[a("label",[e._v("网点名称：")]),a("sz-site",{attrs:{param:{child:!0},hasSubordinate:e.z_param.hasSubordinate},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content",staticStyle:{color:"black"}},[a("el-table",{attrs:{data:e.checklistData,height:e.contentHeight,"header-cell-style":e.tableHeaderColor,"show-summary":"","summary-method":e.getSummaries,border:""},on:{"row-dblclick":e.rowDblclick}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"lowerSiteName",width:"100",label:"网点名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"statDate",width:"100",label:"月份",formatter:e.formatterMonth}}),a("el-table-column",{attrs:{"label-class-name":"blue",label:"上级网点应收费用"}},[a("el-table-column",{attrs:{label:"中转费(元)","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计")}}},[a("el-table-column",{attrs:{prop:"transferCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"transferRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("包仓费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按结算时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"baggageRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"baggageHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"paymentDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("续重派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"addDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"addDispWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"addDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"addDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("二级中转费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"twoLevelCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"twoLevelWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"twoLevelRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"twoLevelHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应收小计=中转费应收+包仓费应收+派代收到付应收+续重派费应收+二级中转费应收"),a("br"),e._v("已收小计=中转费已收+包仓费已收+派代收到付已收+续重派费已收+二级中转费已收")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应收",prop:"Subtotal1"}}),a("el-table-column",{attrs:{label:"已收",prop:"Subtotal2"}})],1)],1),a("el-table-column",{attrs:{label:"上级网点应付费用","label-class-name":"pink"}},[a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paifeiCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paifeiWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"paifeiRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paifeiHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("寄代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentSendCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentSendRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paymentSendHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应付小计=派费应付+寄代收到付应付"),a("br"),e._v("已付小计=派费已付+寄代收到付已付")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应付",prop:"Subtotal3"}}),a("el-table-column",{attrs:{label:"已付",prop:"Subtotal4"}})],1)],1)],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},y=[],v={mixins:[u["b"]],data:function(){return{cha:this.z_param.isNode?270:210,btnDisabled:!1,optionsClone:"",requestUrl:c["Gb"],exportObj:{fileName:"上级网点应收应付账单-月汇总-"},siteId:"",checklistData:[],monthStart:this.moment().format("YYYY-MM")+"-01",monthEnd:this.moment().format("YYYY-MM")+"-01",tableHead:{columns:[{displayName:"网点名称",name:"lowerSiteName",isCode:!0},{displayName:"月份",name:"statDate",isCode:!0,value:function(e){if(e.statDate){var t=e.statDate+"";return t.slice(0,4)+"-"+t.slice(4)}return""}},{displayName:"中转费票数",name:"transferCnt"},{displayName:"中转费重量",name:"transferWeight"},{displayName:"中转费应收",name:"transferRecFee"},{displayName:"中转费已收",name:"transferHexiaoFee"},{displayName:"包仓费应收",name:"baggageRecFee"},{displayName:"包仓费已收",name:"baggageHexiaoFee"},{displayName:"派代收到付票数",name:"paymentDispCnt"},{displayName:"派代收到付应收",name:"paymentDispRecFee"},{displayName:"派代收到付已收",name:"paymentDispHexiaoFee"},{displayName:"续重派费票数",name:"addDispCnt"},{displayName:"续重派费重量",name:"addDispWeight"},{displayName:"续重派费应收",name:"addDispRecFee"},{displayName:"续重派费已收",name:"addDispHexiaoFee"},{displayName:"二级中转费票数",name:"twoLevelCnt"},{displayName:"二级中转费重量",name:"twoLevelWeight"},{displayName:"二级中转费应收",name:"twoLevelRecFee"},{displayName:"二级中转费已收",name:"twoLevelHexiaoFee"},{displayName:"应收小计",name:"Subtotal1"},{displayName:"已收小计",name:"Subtotal2"},{displayName:"派费票数",name:"paifeiCnt"},{displayName:"派费重量",name:"paifeiWeight"},{displayName:"派费应付",name:"paifeiRecFee"},{displayName:"派费已付",name:"paifeiHexiaoFee"},{displayName:"寄代收到付票数",name:"paymentSendCnt"},{displayName:"寄代收到付应付",name:"paymentSendRecFee"},{displayName:"寄代收到付已付",name:"paymentSendHexiaoFee"},{displayName:"应付小计",name:"Subtotal3"},{displayName:"已付小计",name:"Subtotal4"}]}}},methods:{renderHeaderOne:function(e,t,a){var i=t.column;t.$index;return[i.label,e("el-tooltip",{props:{content:function(){return a}(),placement:"bottom"}},[e("span",{class:{"el-icon-question":!0}})])]},formatterMonth:function(e,t){var a=e.statDate+"";return a.slice(0,4)+"-"+a.slice(4)},timeDifference:function(e,t){var a=e.getFullYear(),i=e.getMonth()+9;return i>=11?(a+=1,i-=11,e.setFullYear(a),e.setMonth(i-1)):(e.setFullYear(a),e.setMonth(i)),e.getTime()>=t.getTime()},tableHeaderColor:function(e){e.row,e.column,e.rowIndex,e.columnIndex},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t)if(1!==t)if(2!==t){var s=a.map((function(t){return Number(t[e.property])}));s.every((function(e){return isNaN(e)}))?i[t]="0.00":(i[t]=s.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0).toFixed(2),i[t]%1!==0||3!=t&&9!=t&&12!=t&&16!=t&&22!=t&&26!=t||(i[t]=parseInt(i[t])),i[t]+="")}else i[t]="";else i[t]="";else i[t]="合计"})),i},rowDblclick:function(e){this.$emit("goto","tab2",e)},onSearch:function(){var e=this.moment(this.monthEnd),t=this.moment(this.monthStart),a=e.diff(t,"months",!0);if(a>=0){if(this.siteId){if(a>2)return void this.msg("若指定下级网点，最大可查询3个月！")}else if(a>0)return void this.msg("未指定下级网点时，最多查询1个月！");var i={lowerSiteId:this.siteId,startDate:this.moment(this.monthStart).format("YYYY-MM")+"-01",endDate:this.moment(this.monthEnd).format("YYYY-MM")+"-01",pageSize:5e3,currentPage:1};this.optionsClone=Object(r["cloneDeep"])(i),this.query(i)}else this.msg("开始月份不能大于结束月份！")},query:function(e){var t=this;Object(c["Fb"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.checklistData=t.assignment(e.data.list),t.pagination.total=e.data.totalRow,t.cha=t.z_param.isNode?248:180):(t.pagination.total=0,t.checklistData=[],t.msg("没有数据哟"),t.cha=t.z_param.isNode?270:210)})).catch((function(e){t.pagination.total=0,t.checklistData=[],t.cha=t.z_param.isNode?270:210}))},assignment2:function(e,t){var a=0;return e.forEach((function(e){t[e]&&(a+=t[e])})),a.toFixed(2)},assignment:function(e){var t=this,a=["transferRecFee","baggageRecFee","paymentDispRecFee","addDispRecFee","twoLevelRecFee"],i=["transferHexiaoFee","baggageHexiaoFee","paymentDispHexiaoFee","addDispHexiaoFee","twoLevelHexiaoFee"],s=["paifeiRecFee","paymentSendRecFee"],n=["paifeiHexiaoFee","paymentSendHexiaoFee"];return e.forEach((function(l,o){e[o].Subtotal1=t.assignment2(a,l),e[o].Subtotal2=t.assignment2(i,l),e[o].Subtotal3=t.assignment2(s,l),e[o].Subtotal4=t.assignment2(n,l)})),e}},computed:{contentHeight:function(){return this.$store.getters.clientHeight-this.cha}}},g=v,C=(a("2abd"),Object(m["a"])(g,f,y,!1,null,null,null)),x=C.exports,k={name:"lastNetRecPayBill",mixins:[n["a"]],components:{dSummaryH:b,mSummaryH:x},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.$refs.detailed.clickSearch(t)}}},D=k,w=(a("c584"),Object(m["a"])(D,i,s,!1,null,null,null));t["default"]=w.exports},6599:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"月费用录入",name:"tab1"}},[a("monthlyFeeEntry",{ref:"monthlyFeeEntryRef"})],1),a("el-tab-pane",{attrs:{label:"日费用录入",name:"tab2"}},[a("dailyFeeEntry",{ref:"dailyFeeEntryRef"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main fixedFeeInput"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("费用所属日期：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择月",clearable:!1,editable:!1,"picker-options":e.pickerOptions},model:{value:e.dayTime,callback:function(t){e.dayTime=t},expression:"dayTime"}})],1),a("li",[a("el-button",{attrs:{type:"success",disabled:!e.isdisabled},on:{click:e.editAction}},[e._v("编辑")])],1),a("li",[a("el-button",{attrs:{type:"success",disabled:e.isdisabled},on:{click:e.isaveAction}},[e._v("保存")])],1),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportAction}},[e._v("导出")])],1)])]),a("div",{staticClass:"content",style:{height:e.contentHeight+"px"}},[a("div",{staticClass:"content-title"},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(this.moment(e.dayTime).format("MM月DD日"))+"固定费用维护录入（单位/元）\n      ")]),a("div",{staticClass:"content-con"},[a("ul",{style:{margin:e.contentmargin+"px 0px"}},[a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(0),a("div",[e._v("车辆维护")]),a("div",[e._v(e._s(e.vehicleFee))])]),a("div",{staticClass:"title-right l-h-80"},[a("div",[a("label",{staticClass:"label-left w-110"},[e._v("燃油费：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.fuelFee,callback:function(t){e.fuelFee=t},expression:"fuelFee"}})],1),a("div",[a("label",{staticClass:"label-left w-110"},[e._v("路桥费：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.luqiaoFee,callback:function(t){e.luqiaoFee=t},expression:"luqiaoFee"}})],1),a("div",[a("label",{staticClass:"label-left w-110"},[e._v("维修费：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.maintenanceFee,callback:function(t){e.maintenanceFee=t},expression:"maintenanceFee"}})],1)])])]),a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(1),a("div",[e._v("管理费用")]),a("div",[e._v(e._s(e.managementFee))])]),a("div",{staticClass:"title-right l-h-80"},[a("div",[a("label",{staticClass:"label-left"},[e._v("招待费：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.entertainment,callback:function(t){e.entertainment=t},expression:"entertainment"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("差旅费：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.travelFee,callback:function(t){e.travelFee=t},expression:"travelFee"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("报销：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.reimbursement,callback:function(t){e.reimbursement=t},expression:"reimbursement"}})],1)])])]),a("li",[a("div",{staticStyle:{"line-height":"100px"}},[a("div",[a("i",{staticClass:"iconfont icon-cz-zc blue",staticStyle:{"margin-left":"16px"}}),a("label",{staticClass:"label-left"},[e._v("其他支出：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.otherPay,callback:function(t){e.otherPay=t},expression:"otherPay"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("备注：")]),a("el-input",{staticStyle:{width:"236px"},attrs:{type:"textarea",rows:"4",disabled:e.isdisabled,maxlength:"50"},model:{value:e.otherPayRemark,callback:function(t){e.otherPayRemark=t},expression:"otherPayRemark"}})],1)])])]),a("ul",{style:{margin:e.contentmargin-10+"px 0px"}},[a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(2),a("div",[e._v("客服创收")]),a("div",[e._v(e._s(e.customerIncome))])]),a("div",{staticClass:"title-right l-h-80"},[a("div",[a("label",{staticClass:"label-left"},[e._v("仲裁收入：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.intercedeIncome,callback:function(t){e.intercedeIncome=t},expression:"intercedeIncome"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("罚款收入：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.fineIncome,callback:function(t){e.fineIncome=t},expression:"fineIncome"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("理赔收入：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.claimIncome,callback:function(t){e.claimIncome=t},expression:"claimIncome"}})],1)])])]),a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(3),a("div",[e._v("补贴返利")]),a("div",[e._v(e._s(e.subsidyRebate))])]),a("div",{staticClass:"title-right"},[a("div",[a("label",{staticClass:"label-left"},[e._v("每日补贴：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.allowance,callback:function(t){e.allowance=t},expression:"allowance"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("每日返利：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.rebate,callback:function(t){e.rebate=t},expression:"rebate"}})],1)])])]),a("li",[a("div",{staticStyle:{"line-height":"100px"}},[a("div",[a("i",{staticClass:"iconfont icon-income-o yellow",staticStyle:{"margin-left":"16px"}}),a("label",{staticClass:"label-left"},[e._v("其他收入：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.otherIncome,callback:function(t){e.otherIncome=t},expression:"otherIncome"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("备注：")]),a("el-input",{staticStyle:{width:"236px"},attrs:{type:"textarea",rows:"4",disabled:e.isdisabled,maxlength:"50"},model:{value:e.otherIncomeRemark,callback:function(t){e.otherIncomeRemark=t},expression:"otherIncomeRemark"}})],1)])])])])]),a("div",{staticClass:"bottomCon"},[a("div",[e._v("支出汇总："+e._s(e.paySum))]),a("div",[e._v("收入汇总："+e._s(e.incomeSum))]),a("div",[e._v("收支求和："+e._s(e.incomeSubpay))])]),a("el-dialog",{attrs:{title:"导出时间选择",visible:e.isDialogVisible,width:"320px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseEdit},on:{"update:visible":function(t){e.isDialogVisible=t}}},[a("span",[e._v("费用所属开始日期：")]),a("el-date-picker",{attrs:{type:"date",clearable:!1,editable:!1,"picker-options":e.pickerOptions},model:{value:e.monthTimeStart,callback:function(t){e.monthTimeStart=t},expression:"monthTimeStart"}}),a("br"),a("br"),a("span",[e._v("费用所属结束日期：")]),a("el-date-picker",{attrs:{type:"date",clearable:!1,editable:!1,"picker-options":e.pickerOptions},model:{value:e.monthTimeEnd,callback:function(t){e.monthTimeEnd=t},expression:"monthTimeEnd"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseEdit}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.isAction}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"",visible:e.isDialogVisibleSave,width:"320px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseEditSave},on:{"update:visible":function(t){e.isDialogVisibleSave=t}}},[a("div",{staticStyle:{"text-align":"center",height:"64px","line-height":"64px","font-size":"16px"}},[e._v("是否确定保存编辑内容？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseEditSave}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAction}},[e._v("确 定")])],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-cheliangguanli blue"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-guanliyuan yellow"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-unie737 blue"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-feiyong blue"})])}],o=(a("9a33"),a("f548"),a("6d57"),a("391c"),a("a3be")),r=a("ac0d"),c={mixins:[r["b"]],data:function(){return{exportObj:{fileName:"日费用录入-"},tableHead:{columns:[{displayName:"费用所属时间",name:"dates",isCode:!0},{displayName:"父费用项",name:"feeNames",isCode:!0},{displayName:"子费用项",name:"sonFeesNames",isCode:!0},{displayName:"类型",name:"types",isCode:!0},{displayName:"金额",name:"moneys"},{displayName:"备注",name:"remark",isConversionComma:!0},{displayName:"编辑人",name:"editName",isCode:!0},{displayName:"编辑人工号",name:"editCode",isCode:!0}]},dayTime:this.moment().subtract(1,"days").format("YYYY-MM-DD"),monthTimeStart:this.moment().subtract(1,"days").format("YYYY-MM-DD"),monthTimeEnd:this.moment().subtract(1,"days").format("YYYY-MM-DD"),vehicleFee:0,fuelFee:null,luqiaoFee:null,maintenanceFee:null,managementFee:0,entertainment:null,travelFee:null,reimbursement:null,otherPay:null,otherPayRemark:null,customerIncome:0,intercedeIncome:null,fineIncome:null,claimIncome:null,subsidyRebate:0,allowance:null,rebate:null,otherIncome:null,otherIncomeRemark:null,paySum:0,incomeSum:0,incomeSubpay:0,isdisabled:!0,isDialogVisible:!1,isDialogVisibleSave:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},methods:{isaveAction:function(){this.isDialogVisibleSave=!0},handleCloseEditSave:function(){this.isDialogVisibleSave=!1},handleCloseEdit:function(){this.isDialogVisible=!1,this.monthTimeStart=this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.monthTimeEnd=this.moment().subtract(1,"days").format("YYYY-MM-DD")},isAction:function(){var e=this,t=this.moment(this.monthTimeEnd),a=this.moment(this.monthTimeStart),i=t.diff(a,"days",!0);if(i>=0)if(i>30)this.msg("日期最大跨度为31天！");else{var s={start:this.moment(this.monthTimeStart).format("YYYY-MM-DD"),end:this.moment(this.monthTimeEnd).format("YYYY-MM-DD")},n=[];Object(o["h"])(s).then((function(t){if(0===t.code){var a=!1;for(var i in t.data){a=!0;break}a&&t.data.forEach((function(e,t){e.forEach((function(e,t){e.sonFees.forEach((function(t,a){var i={dates:e.date,feeNames:e.feeName,sonFeesNames:t.feeName,types:t.type,moneys:t.money,remark:t.remark,editName:e.editName,editCode:e.editCode};n.push(i)}))}))})),e.handleCloseEdit(),n.length>0?(e.checklistData=n,e.checklistExport()):e.msg("没有数据哟!")}else e.msg(t.message)})).catch((function(e){}))}else this.msg("开始日期不能大于结束日期！")},exportAction:function(){this.isDialogVisible=!0},saveAction:function(){var e=this,t={feeDate:this.moment(this.dayTime).format("YYYY-MM-DD"),vehicleFee:this.vehicleFee,fuelFee:this.fuelFee,luqiaoFee:this.luqiaoFee,maintenanceFee:this.maintenanceFee,managementFee:this.managementFee,entertainment:this.entertainment,travelFee:this.travelFee,reimbursement:this.reimbursement,otherPay:this.otherPay,otherPayRemark:this.otherPayRemark,customerIncome:this.customerIncome,intercedeIncome:this.intercedeIncome,fineIncome:this.fineIncome,claimIncome:this.claimIncome,subsidyRebate:this.subsidyRebate,allowance:this.allowance,rebate:this.rebate,otherIncome:this.otherIncome,otherIncomeRemark:this.otherIncomeRemark};this.isdisabled=!0,this.isDialogVisibleSave=!1,Object(o["i"])(t).then((function(a){0===a.code?e.msg("保存成功"):e.msg("保存失败"),e.dayTime=e.moment(t.feeDate).format("YYYY-MM-DD"),e.onSearch()})).catch((function(a){e.dayTime=e.moment(t.feeDate).format("YYYY-MM-DD"),e.onSearch()}))},editAction:function(){this.isdisabled=!1},assignment:function(e){this.vehicleFee=e.vehicleFee,this.fuelFee=e.fuelFee,this.luqiaoFee=e.luqiaoFee,this.maintenanceFee=e.maintenanceFee,this.managementFee=e.managementFee,this.entertainment=e.entertainment,this.travelFee=e.travelFee,this.reimbursement=e.reimbursement,this.otherPay=e.otherPay,this.otherPayRemark=e.otherPayRemark,this.customerIncome=e.customerIncome,this.intercedeIncome=e.intercedeIncome,this.fineIncome=e.fineIncome,this.claimIncome=e.claimIncome,this.subsidyRebate=e.subsidyRebate,this.allowance=e.allowance,this.rebate=e.rebate,this.otherIncome=e.otherIncome,this.otherIncomeRemark=e.otherIncomeRemark,this.paySum=e.paySum,this.incomeSum=e.incomeSum,this.incomeSubpay=e.incomeSubpay},clear:function(){this.vehicleFee=0,this.fuelFee=null,this.luqiaoFee=null,this.maintenanceFee=null,this.managementFee=0,this.entertainment=null,this.travelFee=null,this.reimbursement=null,this.otherPay=null,this.otherPayRemark=null,this.customerIncome=0,this.intercedeIncome=null,this.fineIncome=null,this.claimIncome=null,this.subsidyRebate=0,this.allowance=null,this.rebate=null,this.otherIncome=null,this.otherIncomeRemark=null,this.paySum=0,this.incomeSum=0,this.incomeSubpay=0},onSearch:function(){var e=this;this.clear(),this.isdisabled=!0;var t={feeDate:this.moment(this.dayTime).format("YYYY-MM-DD")};Object(o["g"])(t).then((function(t){if(0===t.code){for(var a in t.data)return void e.assignment(t.data);e.msg("没有数据哟")}else e.msg(t.message)})).catch((function(e){}))},proving:function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-220:this.$store.getters.clientHeight-160},contentmargin:function(){if(this.z_param.isNode){var e=(this.$store.getters.clientHeight-220)/2;return e>250?((this.$store.getters.clientHeight-220)/2-250)/2:10}var t=(this.$store.getters.clientHeight-160)/2;return t>250?((this.$store.getters.clientHeight-160)/2-250)/2:10}},watch:{dayTime:{handler:function(e,t){this.moment(e).format("YYYY-MM-DD")!=this.moment(t).format("YYYY-MM-DD")&&this.onSearch()}},fuelFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.fuelFee=this.proving(e):this.fuelFee=t):this.fuelFee=t;var i=this.fuelFee?this.fuelFee:0,s=this.luqiaoFee?this.luqiaoFee:0,n=this.maintenanceFee?this.maintenanceFee:0;this.vehicleFee=(i/1+s/1+n/1).toFixed(2)/1}},luqiaoFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.luqiaoFee=this.proving(e):this.luqiaoFee=t):this.luqiaoFee=t;var i=this.fuelFee?this.fuelFee:0,s=this.luqiaoFee?this.luqiaoFee:0,n=this.maintenanceFee?this.maintenanceFee:0;this.vehicleFee=(i/1+s/1+n/1).toFixed(2)/1}},maintenanceFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.maintenanceFee=this.proving(e):this.maintenanceFee=t):this.maintenanceFee=t;var i=this.fuelFee?this.fuelFee:0,s=this.luqiaoFee?this.luqiaoFee:0,n=this.maintenanceFee?this.maintenanceFee:0;this.vehicleFee=(i/1+s/1+n/1).toFixed(2)/1}},entertainment:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.entertainment=this.proving(e):this.entertainment=t):this.entertainment=t;var i=this.entertainment?this.entertainment:0,s=this.travelFee?this.travelFee:0,n=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1).toFixed(2)/1}},travelFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.travelFee=this.proving(e):this.travelFee=t):this.travelFee=t;var i=this.entertainment?this.entertainment:0,s=this.travelFee?this.travelFee:0,n=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1).toFixed(2)/1}},reimbursement:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.reimbursement=this.proving(e):this.reimbursement=t):this.reimbursement=t;var i=this.entertainment?this.entertainment:0,s=this.travelFee?this.travelFee:0,n=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1).toFixed(2)/1}},otherPay:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.otherPay=this.proving(e):this.otherPay=t):this.otherPay=t}},intercedeIncome:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.intercedeIncome=this.proving(e):this.intercedeIncome=t):this.intercedeIncome=t;var i=this.intercedeIncome?this.intercedeIncome:0,s=this.fineIncome?this.fineIncome:0,n=this.claimIncome?this.claimIncome:0;this.customerIncome=(i/1+s/1+n/1).toFixed(2)/1}},fineIncome:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.fineIncome=this.proving(e):this.fineIncome=t):this.fineIncome=t;var i=this.intercedeIncome?this.intercedeIncome:0,s=this.fineIncome?this.fineIncome:0,n=this.claimIncome?this.claimIncome:0;this.customerIncome=(i/1+s/1+n/1).toFixed(2)/1}},claimIncome:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.claimIncome=this.proving(e):this.claimIncome=t):this.claimIncome=t;var i=this.intercedeIncome?this.intercedeIncome:0,s=this.fineIncome?this.fineIncome:0,n=this.claimIncome?this.claimIncome:0;this.customerIncome=(i/1+s/1+n/1).toFixed(2)/1}},allowance:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.allowance=this.proving(e):this.allowance=t):this.allowance=t;var i=this.allowance?this.allowance:0,s=this.rebate?this.rebate:0;this.subsidyRebate=(i/1+s/1).toFixed(2)/1}},rebate:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.rebate=this.proving(e):this.rebate=t):this.rebate=t;var i=this.allowance?this.allowance:0,s=this.rebate?this.rebate:0;this.subsidyRebate=(i/1+s/1).toFixed(2)/1}},otherIncome:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.otherIncome=this.proving(e):this.otherIncome=t):this.otherIncome=t}},otherIncomeRemark:{handler:function(e,t){this.otherIncomeRemark&&(this.otherIncomeRemark=this.otherIncomeRemark.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""))}},otherPayRemark:{handler:function(e,t){this.otherPayRemark&&(this.otherPayRemark=this.otherPayRemark.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""))}}}},u=c,d=a("623f"),h=Object(d["a"])(u,n,l,!1,null,null,null),m=h.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main fixedFeeInput"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("费用所属月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1,"picker-options":e.pickerOptions},model:{value:e.monthTime,callback:function(t){e.monthTime=t},expression:"monthTime"}})],1),a("li",[a("el-button",{attrs:{type:"success",disabled:!e.isdisabled},on:{click:e.editAction}},[e._v("编辑")])],1),a("li",[a("el-button",{attrs:{type:"success",disabled:e.isdisabled},on:{click:e.isaveAction}},[e._v("保存")])],1),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportAction}},[e._v("导出")])],1)])]),a("div",{staticClass:"content",style:{height:e.contentHeight+"px"}},[a("div",{staticClass:"content-title"},[a("i",{staticClass:"el-icon-edit"}),e._v(e._s(e.moment(e.monthTime).month()+1)+"月固定费用维护录入（单位/元）\n      ")]),a("div",{staticClass:"content-con"},[a("ul",{style:{height:e.contentHeight-40+"px"}},[a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(0),a("div",[e._v("房租水电")]),a("div",[e._v(e._s(e.roomCharge))])]),a("div",{staticClass:"title-right"},[a("div",[a("label",{staticClass:"label-left"},[e._v("房屋场地租金：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.siteRent,callback:function(t){e.siteRent=t},expression:"siteRent"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("水电费：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.waterElectricityFee,callback:function(t){e.waterElectricityFee=t},expression:"waterElectricityFee"}})],1)])])]),a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(1),a("div",[e._v("人工成本")]),a("div",[e._v(e._s(e.laborCost))])]),a("div",{staticClass:"title-right l-h-80"},[a("div",[a("label",{staticClass:"label-left"},[e._v("工资薪酬：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.salary,callback:function(t){e.salary=t},expression:"salary"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("社会保险：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.assurance,callback:function(t){e.assurance=t},expression:"assurance"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("外包：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.outsource,callback:function(t){e.outsource=t},expression:"outsource"}})],1)])])]),a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(2),a("div",[e._v("车辆相关")]),a("div",[e._v(e._s(e.vehicleFee))])]),a("div",{staticClass:"title-right",staticStyle:{"line-height":"60px"}},[a("div",[a("label",{staticClass:"label-left w-110"},[e._v("车辆按揭/租赁：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.vehicleLeasing,callback:function(t){e.vehicleLeasing=t},expression:"vehicleLeasing"}})],1),a("div",[a("label",{staticClass:"label-left w-110"},[e._v("车辆保养：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.vehicleMaintenance,callback:function(t){e.vehicleMaintenance=t},expression:"vehicleMaintenance"}})],1),a("div",[a("label",{staticClass:"label-left w-110"},[e._v("车辆年审：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.vehicleReview,callback:function(t){e.vehicleReview=t},expression:"vehicleReview"}})],1),a("div",[a("label",{staticClass:"label-left w-110"},[e._v("车辆保险：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.vehicleAssurance,callback:function(t){e.vehicleAssurance=t},expression:"vehicleAssurance"}})],1)])])]),a("li",[a("div",{staticClass:"l-h-100",style:{width:e.realHeight+"px !important"}},[a("div",[a("i",{staticClass:"iconfont icon-cz-zc blue",staticStyle:{"margin-left":"16px"}}),a("label",{staticClass:"label-left"},[e._v("其他支出：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.otherPay,callback:function(t){e.otherPay=t},expression:"otherPay"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("备注：")]),a("el-input",{style:{width:e.realWidth+"px !important"},attrs:{type:"textarea",rows:"4",disabled:e.isdisabled,maxlength:"50"},model:{value:e.otherPayRemark,callback:function(t){e.otherPayRemark=t},expression:"otherPayRemark"}})],1)])]),a("li",[a("div",{staticStyle:{width:"450px"}},[a("div",{staticClass:"title-left"},[e._m(3),a("div",[e._v("管理费用")]),a("div",[e._v(e._s(e.managementFee))])]),a("div",{staticClass:"title-right l-h-60"},[a("div",[a("label",{staticClass:"label-left w-140"},[e._v("固定资产折旧：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.fixedDepreciation,callback:function(t){e.fixedDepreciation=t},expression:"fixedDepreciation"}})],1),a("div",[a("label",{staticClass:"label-left-80"},[e._v("办公耗材：")]),a("el-input",{staticClass:"w-90",attrs:{disabled:e.isdisabled},model:{value:e.officeConsume,callback:function(t){e.officeConsume=t},expression:"officeConsume"}}),a("label",{staticClass:"label-left-80"},[e._v("食堂经费：")]),a("el-input",{staticClass:"w-90",attrs:{disabled:e.isdisabled},model:{value:e.canteenFunds,callback:function(t){e.canteenFunds=t},expression:"canteenFunds"}})],1),a("div",[a("label",{staticClass:"label-left-80"},[e._v("通讯费：")]),a("el-input",{staticClass:"w-90",attrs:{disabled:e.isdisabled},model:{value:e.communicationFee,callback:function(t){e.communicationFee=t},expression:"communicationFee"}}),a("label",{staticClass:"label-left-80"},[e._v("物料费：")]),a("el-input",{staticClass:"w-90",attrs:{disabled:e.isdisabled},model:{value:e.materialFee,callback:function(t){e.materialFee=t},expression:"materialFee"}})],1),a("div",[a("label",{staticClass:"label-left-80"},[e._v("服务费：")]),a("el-input",{staticClass:"w-90",attrs:{disabled:e.isdisabled},model:{value:e.serviceFee,callback:function(t){e.serviceFee=t},expression:"serviceFee"}}),a("label",{staticClass:"label-left-80"},[e._v("报销：")]),a("el-input",{staticClass:"w-90",attrs:{disabled:e.isdisabled},model:{value:e.reimbursement,callback:function(t){e.reimbursement=t},expression:"reimbursement"}})],1)])])]),a("li",[a("div",{staticClass:"w-310"},[a("div",{staticClass:"title-left"},[e._m(4),a("div",[e._v("客服创收")]),a("div",[e._v(e._s(e.customerIncome))])]),a("div",{staticClass:"title-right l-h-250"},[a("div",[a("label",{staticClass:"label-left"},[e._v("营业外创收：")]),a("el-input",{staticClass:"w-100",attrs:{disabled:e.isdisabled},model:{value:e.outIncome,callback:function(t){e.outIncome=t},expression:"outIncome"}})],1)])])]),a("li",[a("div",[a("div",{staticClass:"title-left"},[e._m(5),a("div",[e._v("补贴返利")]),a("div",[e._v(e._s(e.subsidyRebate))])]),a("div",{staticClass:"title-right"},[a("div",[a("label",{staticClass:"label-left"},[e._v("每月补贴：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.allowance,callback:function(t){e.allowance=t},expression:"allowance"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("每月返利：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.rebate,callback:function(t){e.rebate=t},expression:"rebate"}})],1)])])]),a("li",[a("div",{staticStyle:{"line-height":"100px"}},[a("div",[a("i",{staticClass:"iconfont icon-income-o yellow",staticStyle:{"margin-left":"16px"}}),a("label",{staticClass:"label-left"},[e._v("其他收入：")]),a("el-input",{attrs:{disabled:e.isdisabled},model:{value:e.otherIncome,callback:function(t){e.otherIncome=t},expression:"otherIncome"}})],1),a("div",[a("label",{staticClass:"label-left"},[e._v("备注：")]),a("el-input",{staticStyle:{width:"236px"},attrs:{type:"textarea",rows:"4",disabled:e.isdisabled,maxlength:"50"},model:{value:e.otherIncomeRemark,callback:function(t){e.otherIncomeRemark=t},expression:"otherIncomeRemark"}})],1)])])])])]),a("div",{staticClass:"bottomCon"},[a("div",[e._v("支出汇总："+e._s(e.paySum))]),a("div",[e._v("收入汇总："+e._s(e.incomeSum))]),a("div",[e._v("收支求和："+e._s(e.incomeSubpay))])]),a("el-dialog",{attrs:{title:"导出时间选择",visible:e.isDialogVisible,width:"320px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseEdit},on:{"update:visible":function(t){e.isDialogVisible=t}}},[a("span",[e._v("费用所属开始月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1,"picker-options":e.pickerOptions},model:{value:e.monthTimeStart,callback:function(t){e.monthTimeStart=t},expression:"monthTimeStart"}}),a("br"),a("br"),a("span",[e._v("费用所属结束月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1,"picker-options":e.pickerOptions},model:{value:e.monthTimeEnd,callback:function(t){e.monthTimeEnd=t},expression:"monthTimeEnd"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseEdit}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.isAction}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"",visible:e.isDialogVisibleSave,width:"320px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.handleCloseEditSave},on:{"update:visible":function(t){e.isDialogVisibleSave=t}}},[a("div",{staticStyle:{"text-align":"center",height:"64px","line-height":"64px","font-size":"16px"}},[e._v("是否确定保存编辑内容？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseEditSave}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAction}},[e._v("确 定")])],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-icon-test yellow"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-rengong blue"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-cheliangguanli blue"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-guanliyuan yellow"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-unie737 blue"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"iconfont icon-feiyong blue"})])}],f=(a("f1ac9"),{mixins:[r["b"]],data:function(){return{exportObj:{fileName:"月费用录入-"},tableHead:{columns:[{displayName:"费用所属时间",name:"dates",isCode:!0},{displayName:"父费用项",name:"feeNames",isCode:!0},{displayName:"子费用项",name:"sonFeesNames",isCode:!0},{displayName:"类型",name:"types",isCode:!0},{displayName:"金额",name:"moneys"},{displayName:"备注",name:"remark",isConversionComma:!0},{displayName:"编辑人",name:"editName",isCode:!0},{displayName:"编辑人工号",name:"editCode",isCode:!0}]},monthTime:this.moment().subtract(1,"month").format("YYYY-MM"),monthTimeStart:this.moment().subtract(1,"month").format("YYYY-MM")+"-01",monthTimeEnd:this.moment().subtract(1,"month").format("YYYY-MM")+"-01",roomCharge:0,siteRent:null,waterElectricityFee:null,laborCost:0,salary:null,assurance:null,outsource:null,vehicleFee:0,vehicleLeasing:null,vehicleMaintenance:null,vehicleReview:null,vehicleAssurance:null,otherPay:null,otherPayRemark:null,managementFee:0,fixedDepreciation:null,officeConsume:null,canteenFunds:null,communicationFee:null,materialFee:null,serviceFee:null,reimbursement:null,customerIncome:0,outIncome:null,subsidyRebate:0,allowance:null,rebate:null,otherIncome:null,otherIncomeRemark:null,paySum:0,incomeSum:0,incomeSubpay:0,isdisabled:!0,isDialogVisible:!1,isDialogVisibleSave:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},methods:{isaveAction:function(){this.isDialogVisibleSave=!0},handleCloseEditSave:function(){this.isDialogVisibleSave=!1},handleCloseEdit:function(){this.isDialogVisible=!1,this.monthTimeStart=this.moment().subtract(1,"month").format("YYYY-MM")+"-01",this.monthTimeEnd=this.moment().subtract(1,"month").format("YYYY-MM")+"-01"},isAction:function(){var e=this,t=this.moment(this.monthTimeEnd),a=this.moment(this.monthTimeStart),i=t.diff(a,"months",!0);if(i>=0)if(i>11)this.msg("月份最大跨度为12个月！");else{var s={start:this.moment(this.monthTimeStart).format("YYYY-MM")+"-01",end:this.moment(this.monthTimeEnd).format("YYYY-MM")+"-01"},n=[];Object(o["k"])(s).then((function(t){if(0===t.code){var a=!1;for(var i in t.data){a=!0;break}a&&t.data.forEach((function(e,t){e.forEach((function(e,t){e.sonFees.forEach((function(t,a){var i={dates:e.date,feeNames:e.feeName,sonFeesNames:t.feeName,types:t.type,moneys:t.money,remark:t.remark,editName:e.editName,editCode:e.editCode};n.push(i)}))}))})),e.handleCloseEdit(),n.length>0?(e.checklistData=n,e.checklistExport()):e.msg("没有数据哟")}else e.msg(t.message)})).catch((function(e){}))}else this.msg("开始月份不能大于结束月份！")},exportAction:function(){this.isDialogVisible=!0},saveAction:function(){var e=this,t={feeDate:this.moment(this.monthTime).format("YYYY-MM")+"-01",roomCharge:this.roomCharge,siteRent:this.siteRent,waterElectricityFee:this.waterElectricityFee,laborCost:this.laborCost,salary:this.salary,assurance:this.assurance,outsource:this.outsource,vehicleFee:this.vehicleFee,vehicleLeasing:this.vehicleLeasing,vehicleMaintenance:this.vehicleMaintenance,vehicleReview:this.vehicleReview,vehicleAssurance:this.vehicleAssurance,otherPay:this.otherPay,otherPayRemark:this.otherPayRemark,managementFee:this.managementFee,fixedDepreciation:this.fixedDepreciation,officeConsume:this.officeConsume,canteenFunds:this.canteenFunds,communicationFee:this.communicationFee,materialFee:this.materialFee,serviceFee:this.serviceFee,reimbursement:this.reimbursement,customerIncome:this.customerIncome,outIncome:this.outIncome,subsidyRebate:this.subsidyRebate,allowance:this.allowance,rebate:this.rebate,otherIncome:this.otherIncome,otherIncomeRemark:this.otherIncomeRemark};this.isdisabled=!0,this.isDialogVisibleSave=!1,Object(o["l"])(t).then((function(a){0===a.code?e.msg("保存成功"):e.msg("保存失败"),e.monthTime=e.moment(t.feeDate).format("YYYY-MM")+"-01",e.onSearch()})).catch((function(a){e.monthTime=e.moment(t.feeDate).format("YYYY-MM")+"-01",e.onSearch()}))},editAction:function(){this.isdisabled=!1},assignment:function(e){this.roomCharge=e.roomCharge,this.siteRent=e.siteRent,this.waterElectricityFee=e.waterElectricityFee,this.laborCost=e.laborCost,this.salary=e.salary,this.assurance=e.assurance,this.outsource=e.outsource,this.vehicleFee=e.vehicleFee,this.vehicleLeasing=e.vehicleLeasing,this.vehicleMaintenance=e.vehicleMaintenance,this.vehicleReview=e.vehicleReview,this.vehicleAssurance=e.vehicleAssurance,this.otherPay=e.otherPay,this.otherPayRemark=e.otherPayRemark,this.managementFee=e.managementFee,this.fixedDepreciation=e.fixedDepreciation,this.officeConsume=e.officeConsume,this.canteenFunds=e.canteenFunds,this.communicationFee=e.communicationFee,this.materialFee=e.materialFee,this.serviceFee=e.serviceFee,this.reimbursement=e.reimbursement,this.customerIncome=e.customerIncome,this.outIncome=e.outIncome,this.subsidyRebate=e.subsidyRebate,this.allowance=e.allowance,this.rebate=e.rebate,this.otherIncome=e.otherIncome,this.otherIncomeRemark=e.otherIncomeRemark,this.paySum=e.paySum,this.incomeSum=e.incomeSum,this.incomeSubpay=e.incomeSubpay},clear:function(){this.roomCharge=0,this.siteRent=null,this.waterElectricityFee=null,this.laborCost=0,this.salary=null,this.assurance=null,this.outsource=null,this.vehicleFee=0,this.vehicleLeasing=null,this.vehicleMaintenance=null,this.vehicleReview=null,this.vehicleAssurance=null,this.otherPay=null,this.otherPayRemark=null,this.managementFee=0,this.fixedDepreciation=null,this.officeConsume=null,this.canteenFunds=null,this.communicationFee=null,this.materialFee=null,this.serviceFee=null,this.reimbursement=null,this.customerIncome=0,this.outIncome=null,this.subsidyRebate=0,this.allowance=null,this.rebate=null,this.otherIncome=null,this.otherIncomeRemark=null,this.paySum=0,this.incomeSum=0,this.incomeSubpay=0},onSearch:function(){var e=this;this.clear(),this.isdisabled=!0;var t={feeDate:this.moment(this.monthTime).format("YYYY-MM")+"-01"};Object(o["j"])(t).then((function(t){if(0===t.code){for(var a in t.data)return void e.assignment(t.data);e.msg("没有数据哟")}else e.msg(t.message)})).catch((function(e){}))},proving:function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-220:this.$store.getters.clientHeight-160},realHeight:function(){return this.z_param.isNode?350:320},realWidth:function(){return this.z_param.isNode?236:200}},watch:{monthTime:{handler:function(e,t){this.moment(e).format("YYYY-MM")!=this.moment(t).format("YYYY-MM")&&this.onSearch()}},siteRent:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.siteRent=this.proving(e):this.siteRent=t):this.siteRent=t;var i=this.siteRent?this.siteRent:0,s=this.waterElectricityFee?this.waterElectricityFee:0;this.roomCharge=(i/1+s/1).toFixed(2)/1}},waterElectricityFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.waterElectricityFee=this.proving(e):this.waterElectricityFee=t):this.waterElectricityFee=t;var i=this.siteRent?this.siteRent:0,s=this.waterElectricityFee?this.waterElectricityFee:0;this.roomCharge=(i/1+s/1).toFixed(2)/1}},salary:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.salary=this.proving(e):this.salary=t):this.salary=t;var i=this.salary?this.salary:0,s=this.assurance?this.assurance:0,n=this.outsource?this.outsource:0;this.laborCost=(i/1+s/1+n/1).toFixed(2)/1}},assurance:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.assurance=this.proving(e):this.assurance=t):this.assurance=t;var i=this.salary?this.salary:0,s=this.assurance?this.assurance:0,n=this.outsource?this.outsource:0;this.laborCost=(i/1+s/1+n/1).toFixed(2)/1}},outsource:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.outsource=this.proving(e):this.outsource=t):this.outsource=t;var i=this.salary?this.salary:0,s=this.assurance?this.assurance:0,n=this.outsource?this.outsource:0;this.laborCost=(i/1+s/1+n/1).toFixed(2)/1}},vehicleLeasing:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.vehicleLeasing=this.proving(e):this.vehicleLeasing=t):this.vehicleLeasing=t;var i=this.vehicleLeasing?this.vehicleLeasing:0,s=this.vehicleMaintenance?this.vehicleMaintenance:0,n=this.vehicleReview?this.vehicleReview:0,l=this.vehicleAssurance?this.vehicleAssurance:0;this.vehicleFee=(i/1+s/1+n/1+l/1).toFixed(2)/1}},vehicleMaintenance:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.vehicleMaintenance=this.proving(e):this.vehicleMaintenance=t):this.vehicleMaintenance=t;var i=this.vehicleLeasing?this.vehicleLeasing:0,s=this.vehicleMaintenance?this.vehicleMaintenance:0,n=this.vehicleReview?this.vehicleReview:0,l=this.vehicleAssurance?this.vehicleAssurance:0;this.vehicleFee=(i/1+s/1+n/1+l/1).toFixed(2)/1}},vehicleReview:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.vehicleReview=this.proving(e):this.vehicleReview=t):this.vehicleReview=t;var i=this.vehicleLeasing?this.vehicleLeasing:0,s=this.vehicleMaintenance?this.vehicleMaintenance:0,n=this.vehicleReview?this.vehicleReview:0,l=this.vehicleAssurance?this.vehicleAssurance:0;this.vehicleFee=(i/1+s/1+n/1+l/1).toFixed(2)/1}},vehicleAssurance:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.vehicleAssurance=this.proving(e):this.vehicleAssurance=t):this.vehicleAssurance=t;var i=this.vehicleLeasing?this.vehicleLeasing:0,s=this.vehicleMaintenance?this.vehicleMaintenance:0,n=this.vehicleReview?this.vehicleReview:0,l=this.vehicleAssurance?this.vehicleAssurance:0;this.vehicleFee=(i/1+s/1+n/1+l/1).toFixed(2)/1}},otherPay:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.otherPay=this.proving(e):this.otherPay=t):this.otherPay=t}},fixedDepreciation:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.fixedDepreciation=this.proving(e):this.fixedDepreciation=t):this.fixedDepreciation=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},officeConsume:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.officeConsume=this.proving(e):this.officeConsume=t):this.officeConsume=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},canteenFunds:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.canteenFunds=this.proving(e):this.canteenFunds=t):this.canteenFunds=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},communicationFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.communicationFee=this.proving(e):this.communicationFee=t):this.communicationFee=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},materialFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.materialFee=this.proving(e):this.materialFee=t):this.materialFee=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},serviceFee:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.serviceFee=this.proving(e):this.serviceFee=t):this.serviceFee=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},reimbursement:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.reimbursement=this.proving(e):this.reimbursement=t):this.reimbursement=t;var i=this.fixedDepreciation?this.fixedDepreciation:0,s=this.officeConsume?this.officeConsume:0,n=this.canteenFunds?this.canteenFunds:0,l=this.communicationFee?this.communicationFee:0,o=this.materialFee?this.materialFee:0,r=this.serviceFee?this.serviceFee:0,c=this.reimbursement?this.reimbursement:0;this.managementFee=(i/1+s/1+n/1+l/1+o/1+r/1+c/1).toFixed(2)/1}},outIncome:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.outIncome=this.proving(e):this.outIncome=t):this.outIncome=t;var i=this.outIncome?this.outIncome:0;this.customerIncome=(i/1).toFixed(2)/1}},allowance:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.allowance=this.proving(e):this.allowance=t):this.allowance=t;var i=this.allowance?this.allowance:0,s=this.rebate?this.rebate:0;this.subsidyRebate=(i/1+s/1).toFixed(2)/1}},rebate:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.rebate=this.proving(e):this.rebate=t):this.rebate=t;var i=this.allowance?this.allowance:0,s=this.rebate?this.rebate:0;this.subsidyRebate=(i/1+s/1).toFixed(2)/1}},otherIncome:{handler:function(e,t){var a=e+"";a.length<=11?(a=a.split("."),a[0].length<=8?this.otherIncome=this.proving(e):this.otherIncome=t):this.otherIncome=t}},otherIncomeRemark:{handler:function(e,t){this.otherIncomeRemark&&(this.otherIncomeRemark=this.otherIncomeRemark.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""))}},otherPayRemark:{handler:function(e,t){this.otherPayRemark&&(this.otherPayRemark=this.otherPayRemark.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,""))}}}}),y=f,v=Object(d["a"])(y,p,b,!1,null,null,null),g=v.exports,C={name:"fixedFeeInput",components:{monthlyFeeEntry:g,dailyFeeEntry:m},data:function(){return{activeName:"tab1"}},mounted:function(){this.$refs.monthlyFeeEntryRef.onSearch()},watch:{activeName:{handler:function(e,t){"tab1"==e?this.$refs.monthlyFeeEntryRef.onSearch():this.$refs.dailyFeeEntryRef.onSearch()}}}},x=C,k=(a("d7d3"),Object(d["a"])(x,i,s,!1,null,null,null));t["default"]=k.exports},6678:function(e,t,a){"use strict";var i=a("9687"),s=a.n(i);s.a},6793:function(e,t,a){"use strict";var i=a("73a7"),s=a.n(i);s.a},"67d4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab page-tab customerContractManage"},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"defaults"==e.tabShow,expression:"tabShow=='defaults'"}],attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"客户合同首页",name:"tab1"}},[a("customerContract",{ref:"customerContractRef",on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"我司信息维护",name:"tab2",lazy:""}},[a("maintainInfo")],1)],1),"contractInfo"==e.tabShow?a("contractInfo",{ref:"contractInfo",attrs:{contractObj:e.contractObj},on:{goto:e.goto}}):e._e(),"process"==e.tabShow?a("contract-process",{ref:"refProcess"}):e._e()],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"customerContract"},[a("div",{ref:"customerContractTopHeight",staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("ul",{staticClass:"clear-both sz-search-box",attrs:{slot:"collapse"},slot:"collapse"},[a("li",[a("label",[e._v("合同编号：")]),a("el-input",{staticClass:"w-120",attrs:{placeholder:"请输入"},model:{value:e.contractCode,callback:function(t){e.contractCode=t},expression:"contractCode"}})],1),a("li",[a("label",[e._v("主合同状态：")]),a("el-select",{model:{value:e.contractStatus,callback:function(t){e.contractStatus=t},expression:"contractStatus"}},e._l(e.contractList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.status,value:e.id}})})),1)],1),a("li",[a("label",[e._v("合同主体类型：")]),a("el-select",{model:{value:e.subjectType,callback:function(t){e.subjectType=t},expression:"subjectType"}},e._l(e.subjectTypeArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.status,value:e.id}})})),1)],1),a("li",[a("label",[e._v("合同类型：")]),a("el-select",{model:{value:e.contractType,callback:function(t){e.contractType=t},expression:"contractType"}},e._l(e.contractTypeArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.status,value:e.id}})})),1)],1),a("li",[a("label",[e._v("合同主体：")]),a("el-input",{staticClass:"w-120",attrs:{placeholder:"请输入"},model:{value:e.contractSubject,callback:function(t){e.contractSubject=t},expression:"contractSubject"}})],1),a("li",[a("label",[e._v("关联账号：")]),a("sc-users",{attrs:{type:"3","popper-class":"max-index",param:{types:"4"},placeholder:"请输入"},model:{value:e.customerId,callback:function(t){e.customerId=t},expression:"customerId"}})],1),a("li",[a("label",[e._v("客户状态：")]),a("el-select",{model:{value:e.customerStatus,callback:function(t){e.customerStatus=t},expression:"customerStatus"}},e._l(e.customerList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.status,value:e.id}})})),1)],1),a("li",{staticClass:"sz-search-btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchAct}},[e._v("查询")])],1)])])],1),a("div",{staticClass:"sz-search-btn"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("签订合同")]),a("span",{staticClass:"p-l-16"},[e._v("合同状态提示：审核中（"+e._s(e.numbers.checkingNum)+"），审核驳回（"+e._s(e.numbers.checkRejectNum)+"），审核通过（"+e._s(e.numbers.checkPassNum)+"），生效中（"+e._s(e.numbers.effectiveNum)+"），即将过期（"+e._s(e.numbers.closeToExpireNum)+"），已过期（"+e._s(e.numbers.overdueNum)+"）")])],1),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)])]),a("div",{staticStyle:{padding:"10px"}},[a("el-table",{attrs:{data:e.tableData,border:"","highlight-current-row":"",height:e.contentHeight+"px"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===Number(t.row.contractStatus)?a("div",[a("el-button",{staticClass:"p-0",attrs:{type:"text"},on:{click:function(a){return e.goto("process",t.row,t.$index)}}},[e._v("继续签订")]),a("el-button",{staticClass:"p-0",attrs:{type:"text"},on:{click:function(a){return e.closeRow(t.row)}}},[e._v("关闭")])],1):a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.goto("contractInfo",t.row,t.$index)}}},[e._v("详情")])],1)]}}])}),e._l(e.tableHead.columns,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.name,label:t.displayName,align:"center",width:t.size,formatter:e.formatter,"show-overflow-tooltip":""}})}))],2)],1),a("div",{staticStyle:{position:"absolute",right:"0",bottom:"-35px"}},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total,pageSizes:[100,200,500]},on:{fetchData:e.fetchData}})],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("el-dialog",{attrs:{title:"选择合同模板",visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"320px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"p-24"},[a("div",{staticClass:"p-b-16"},[e._v("\n            请勾选要签订的合同模板：\n        ")]),a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[e._v("快递服务")]),a("el-radio",{attrs:{label:2,disabled:""}},[e._v("快递服务 + 代收货款 （全平台）")]),a("el-radio",{attrs:{label:3,disabled:""}},[e._v("快递服务 + 代收货款 （快递管家COD服务）")]),a("el-radio",{attrs:{label:4,disabled:""}},[e._v("快递服务 + 尊享")]),a("el-radio",{attrs:{label:5,disabled:""}},[e._v("门店客户快递服务（淘宝大客户）")]),a("el-radio",{attrs:{label:6,disabled:""}},[e._v("导入客户合同模板")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleGoto}},[e._v("确 定")])],1)])],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=(a("163d"),a("ac0d")),c=a("a3be"),u=a("f37e");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={mixins:[r["b"]],name:"customerContract",data:function(){return{dialogVisible:!1,radio:1,exportObj:{fileName:"客户合同管理-"},collapseHeight:0,contractStatus:-1,contractList:[{id:-1,status:"全部"},{id:1,status:"未提交"},{id:3,status:"审核通过"},{id:6,status:"生效中"},{id:7,status:"即将过期"},{id:8,status:"已过期"}],subjectType:-1,subjectTypeArr:[{id:-1,status:"全部"},{id:1,status:"个体"},{id:2,status:"企业"}],contractType:1,contractTypeArr:[{id:1,status:"快递服务"}],customerStatus:1,customerList:[{id:1,status:"合作中"},{id:2,status:"合作终止"}],customerId:"",contractCode:"",contractSubject:"",tableData:[],tableHead:{columns:[{displayName:"合同编码",name:"contractCode",isCode:!0,size:"150"},{displayName:"合同主体",name:"contractSubject",isCode:!0,size:"200"},{displayName:"主合同状态",name:"contractStatus",isCode:!0,size:"120",value:function(e){return Object(u["e"])(Number(e.contractStatus))}},{displayName:"合同主体类型",name:"subjectType",isCode:!0,size:"120",value:function(e){return Object(u["A"])(Number(e.subjectType))}},{displayName:"合同类型",name:"contractType",isCode:!0,size:"120",value:function(e){return Object(u["f"])(Number(e.contractType))}},{displayName:"客户状态",name:"customerStatus",isCode:!0,size:"120",value:function(e){return Object(u["g"])(Number(e.customerStatus))}},{displayName:"关联账号数",name:"customerNum",size:"120",showTotal:!0},{displayName:"结款周期",name:"accountCycle",isCode:!0,size:"120",value:function(e){return Object(u["a"])(Number(e.accountCycle))}},{displayName:"合同起始日期",name:"effectiveDate",isCode:!0,size:"120",formatter:"yyyy-MM-dd"},{displayName:"合同终止日期",name:"terminateDate",isCode:!0,size:"120",formatter:"yyyy-MM-dd"},{displayName:"操作人",name:"editor",isCode:!0,size:"120"},{displayName:"操作时间",name:"gmtModified",isCode:!0,size:"150",formatter:"yyyy-MM-dd hh:mm:ss"}]},siteArr:["11112","736002","66302","02895","75030","59157","59197","76997","85151","451001","73402","53366","531006","531016","53100","31201","871103","54636","02569","77166","42712","595038","23379","574097","41613","24005","31168","60747","351009","031500","02293","510011","33544","02706","02061","58998","43196","73187","731144","37195","371004","760004","02369","02340","531020","53331"],numbers:{checkingNum:0,checkRejectNum:0,checkPassNum:0,effectiveNum:0,closeToExpireNum:0,overdueNum:0},topHeight:0}},methods:{openDialog:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},searchAct:function(){this.pagination.currentPage=1;var e={contractCode:this.contractCode,contractStatus:this.contractStatus,subjectType:this.subjectType,contractType:this.contractType,contractSubject:this.contractSubject,customerId:this.customerId?this.customerId:-1,customerStatus:this.customerStatus,pageSize:this.pagination.pageSize,currentPage:1};this.optionsClone=h({},e),this.query(e)},query:function(e){var t=this;this.optionsClone=h({},this.optionsClone,{},e),Object(c["jc"])(this.optionsClone).then((function(e){e.status&&(t.tableData=e.result.list,t.pagination.total=e.result.totalRow)})),Object(c["kc"])().then((function(e){e.status&&(t.numbers=h({},e.result))}))},handleGoto:function(){var e={templateType:this.radio,type:1};this.dialogVisible=!1,this.$emit("goto","process",e)},goto:function(e,t,a){var i={row:this.tableData[a]};"process"===e&&(i.type=2),this.$emit("goto",e,i)},closeRow:function(e){var t=this;Object(c["J"])({contractId:e.id}).then((function(e){e.status&&(t.msg("操作成功"),t.query())}))},formatter:function(e,t){var a=t.property,i=Number(e[a]);return"contractStatus"===a?Object(u["e"])(i):"effectiveDate"===a||"terminateDate"===a?e[a]?this.moment(e[a]).format("YYYY-MM-DD"):"":"gmtModified"===a?e[a]?this.moment(e[a]).format("YYYY-MM-DD HH:mm:ss"):"":"subjectType"===a?Object(u["A"])(i):"contractType"===a?Object(u["f"])(i):"customerStatus"===a?Object(u["g"])(i):"accountCycle"===a?Object(u["a"])(i):e[a]},exportNew:function(){if(this.tableData.length>0){if(this.pagination.total>5e4)return void this.msg("最大导出不能超过5万");this.requestUrl="/direct/contractIndex/queryMainContractQuery",this.searchExport()}else this.msg("没有数据无法导出!")}},computed:{contentHeight:function(){return this.$store.getters.clientHeight-180-this.topHeight+this.collapseHeight}},mounted:function(){var e=this;this.siteArr.indexOf(this.$store.getters.info.siteInfo.siteCode)>-1&&(this.contractList=[{id:-1,status:"全部"},{id:1,status:"未提交"},{id:2,status:"审核中"},{id:5,status:"已撤回"},{id:4,status:"审核驳回"},{id:3,status:"审核通过"},{id:6,status:"生效中"},{id:7,status:"即将过期"},{id:8,status:"已过期"}]),window.onresize=function(){e.topHeight=e.$refs.customerContractTopHeight.offsetHeight},this.$nextTick((function(){e.topHeight=e.$refs.customerContractTopHeight.offsetHeight}))}},p=m,b=(a("b03b"),a("623f")),f=Object(b["a"])(p,n,l,!1,null,null,null),y=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"maintainInfo"},[a("div",{staticClass:"top-flex"},[a("div",[a("label",{staticClass:"b-size"},[e._v("公司信息")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    签订合同时，会自动将本页所填信息带入合同中对应的"),a("br"),e._v("\n                    公司信息栏，无需每次手动输入相同的信息。本页信息"),a("br"),e._v("\n                    可以更改，签订合同时自动带入的信息也可以更改。\n                ")]),a("i",{staticClass:"el-icon-question"})])],1),a("div",[a("el-button",{attrs:{type:"primary"}},[e._v("编辑")]),a("el-button",[e._v("取消")]),a("el-button",{attrs:{type:"primary"}},[e._v("保存")])],1)]),e._m(0),a("div",{staticClass:"cont-input"},[a("ul",[a("li",[a("label",[e._v("公司全称")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("住所地")]),a("el-input",{staticClass:"w-600",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("法定代表人")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])]),a("div",{staticClass:"cont-input"},[a("ul",[a("li",[a("label",[e._v("账户名")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("开户行")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("账号")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])]),a("div",{staticClass:"cont-input b-0"},[a("ul",[a("li",[a("label",[e._v("联系人")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("联系电话")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("联系邮箱")]),a("el-input",{staticClass:"w-200",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),a("li",[a("label",[e._v("联系地址")]),a("el-input",{staticClass:"w-600",model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)])])])},g=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top-flex"},[a("div",[e._v("请仔细填写并检查本页的公司信息。")]),a("div",[e._v("\n            最后修改人：某某某 \n               \n            修改时间：2020-03-05 00:00:00\n        ")])])}],C={name:"maintainInfo",data:function(){return{input:""}}},x=C,k=(a("1191"),Object(b["a"])(x,v,g,!1,null,null,null)),D=k.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab page-tab contractInfo"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"客户合同列表",name:"tab1"}},[a("detail-list")],1),a("el-tab-pane",{attrs:{label:"客户合同信息",name:"tab2",lazy:""}},[a("detail-info")],1),a("el-tab-pane",{attrs:{label:"关联账号("+e.ralationNum.totalNum+")",name:"tab3",lazy:""}},[a("detail-relation",{ref:"detailRelation",on:{refreshNum:e.refreshNum}})],1)],1),a("div",{staticClass:"rightGo",on:{click:function(t){return e.goto("defaults")}}},[a("span",{staticClass:"backContractHome el-icon-arrow-left"}),a("span",[e._v("返回首页")])])],1)},S=[],_=(a("c0c3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"detailList"},[a("div",{staticClass:"topSearch"},[a("div",{staticClass:"tittle"},[e._v(" 合同列表 ")]),a("label",{staticClass:"w-r-65"},[e._v("状态：")]),a("el-select",{on:{change:e.query},model:{value:e.attachmentStatus,callback:function(t){e.attachmentStatus=t},expression:"attachmentStatus"}},e._l(e.attachmentStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"contractTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","row-class-name":e.objTableRowClassName}},[a("el-table-column",{attrs:{label:"序号",width:"100",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._l(e.tableHead.columns,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.name,label:t.displayName,align:"center",width:t.size,formatter:e.formatter,"show-overflow-tooltip":""}})})),a("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operateRow"},[1!=t.row.status&&4!=t.row.status&&5!=t.row.status?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.downContract(t.row)}}},[e._v("\n                                下载\n                            ")])]:e._e()],2)]}}])})],2)],1),a("process-dialog",{attrs:{dialogVisibles:e.opDialog,type:1,params:{id:""}},on:{dealDialog:function(t){e.opDialog=!e.opDialog}}}),a("process-dialog",{attrs:{dialogVisibles:e.opDialog2,type:2,params:{id:""}},on:{dealDialog:function(t){e.opDialog2=!e.opDialog2}}}),a("process-dialog",{attrs:{dialogVisibles:e.opDialog3,type:3,params:{id:""}},on:{dealDialog:function(t){e.opDialog3=!e.opDialog3}}})],1)}),N=[],T=a("6bf2"),I=a.n(T),O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"progressDialog"},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.title,"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.dialogVisibles,width:e.width,center:""},on:{open:e.openAreaDialog,"update:visible":function(t){e.dialogVisibles=t}}},[1==e.type?[a("div",{staticClass:"logicDetail"},e._l(e.logicArr,(function(t,i){return a("div",{staticClass:"block"},[a("div",{staticClass:"leftTime"},[a("span",{staticClass:"date"},[e._v(" "+e._s(t.dateTime)+"  ")])]),a("span",{staticClass:"tt"},[e._v(" "+e._s(t.statusDesc)+" ")]),a("span",{staticClass:"desc"},[e._v(" "+e._s(t.operator)+" ")]),a("div",{staticClass:"desc"},[e._v(" "+e._s(t.mark)+" ")])])})),0),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)]:e._e(),2==e.type?[a("div",{staticClass:"content"},[e._v("\n                在审核人员未开始审核前，可撤回已提交的合同或协议，撤回后下次可重新提交。\n            ")]),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("返 回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认撤回")])],1)]:e._e(),3==e.type?[a("div",{staticClass:"content"},[e._v("\n                关闭流程将会删除此条合同流程，合同中已填写和已上传的内容会被清除，请谨慎选择。\n            ")]),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("返 回")]),a("el-button",{attrs:{type:"danger"},on:{click:e.submit}},[e._v("确认关闭")])],1)]:e._e()],2)],1)},E=[],z={name:"processDialog",props:{dialogVisibles:{type:Boolean,default:!1},params:{type:Object,default:function(){}},type:{type:Number,default:1}},data:function(){return{logicArr:[{dateTime:"2020-01-05  10:00:00",statusDesc:"审核流程结束"},{dateTime:"2020-01-05  10:00:00",statusDesc:"总部法务部审核通过",operator:"审核人：XXX"},{dateTime:"2020-01-05  10:00:00",statusDesc:"总部营销团审核通过",operator:"审核人：XXX"},{dateTime:"2020-01-05  10:00:00",statusDesc:"重新提交合同申请",operator:"审核人：XXX"},{dateTime:"2020-01-05  10:00:00",statusDesc:"总部营销团审核驳回",operator:"审核人：XXX",mark:"批注：结款逾期赔偿比例过低，合理范围为0.2%~0.5%"},{dateTime:"2020-01-05  10:00:00",statusDesc:"省市总部审核通过",operator:"审核人：XXX"},{dateTime:"2020-01-05  10:00:00",statusDesc:"提交合同申请",operator:"审核人：XXX"}],title:"审核明细",width:"300px"}},methods:{openAreaDialog:function(){console.log("openAreaDialog..."),1==this.type?this.width="400px":2==this.type?this.title="撤回":3==this.type&&(this.title="关闭流程")},submit:function(){this.params.id;this.handleClose(),2==this.type||this.type},handleClose:function(){this.$emit("dealDialog")}}},F=z,M=(a("f653"),Object(b["a"])(F,O,E,!1,null,"7cf0852c",null)),P=M.exports,Y={name:"detailList",components:{processDialog:P},inject:["contractObj"],props:{},data:function(){var e=this;return{attachmentStatus:-1,attachmentStatusOptions:[{value:-1,label:"全部"},{value:2,label:"审核中"},{value:4,label:"审核驳回"},{value:5,label:"已撤回"},{value:6,label:"生效中"}],attachmentStatusOptions2:[{value:1,label:"未提交"},{value:2,label:"审核中"},{value:3,label:"审核通过"},{value:4,label:"审核驳回"},{value:5,label:"已撤回"},{value:6,label:"生效中"},{value:7,label:"即将过期"},{value:8,label:"已过期"}],tableData:[],tableHead:{columns:[{displayName:"类型",name:"attachmentTypeDesc",isCode:!0},{displayName:"名称",name:"attachmentName",isCode:!0},{displayName:"状态",name:"attachmentStatus",isCode:!0,value:function(t){return e.statusFormatter(Number(t.contractStatus))}},{displayName:"审核通过日期",name:"checkPassTime",isCode:!0,formatter:"yyyy-MM-dd"},{displayName:"合同失效日期",name:"terminateDate",isCode:!0,formatter:"yyyy-MM-dd"}]},opDialog:!1,opDialog2:!1,opDialog3:!1}},mounted:function(){var e=this;this.$nextTick((function(){e.$nextTick((function(){e.query()}))}))},methods:{query:function(){var e=this,t={contractId:this.contractObj.id,attachmentStatus:this.attachmentStatus};Object(c["gc"])(t).then((function(t){if(!t.status||!t.result||0!=t.result.length)return!t.status&&t.message?(e.$message.error(t.message),void(e.tableData=[])):void(e.tableData=t.result);e.tableData=[]})).catch((function(t){e.tableData=[],t.message?e.$message.error(t.message):e.$message.error("服务器异常，请联系管理员")}))},downContract:function(e){var t={remoteFileId:e.fileName};Object(c["fc"])(t).then((function(e){e.status&&window.open(e.result)}))},objTableRowClassName:function(e){e.row;var t=e.rowIndex;return 0==t?"rowBold":""},dateTimeFormatter:function(e){var t=e?I()(e).format("YYYY-MM-DD"):"-";return t.indexOf("1970-01-01")>-1?"":t},formatterFunc:function(e,t){var a=e.filter((function(e){return e.value===t}));return a.length>0?a[0].label:"-"},formatter:function(e,t){var a=t.property,i=Number(e[a]);return"attachmentStatus"===a?this.formatterFunc(this.attachmentStatusOptions2,i):"checkPassTime"===a||"terminateDate"===a?e[a]?this.dateTimeFormatter(e[a]):"-":e[a]}}},j=Y,$=(a("62ac"),Object(b["a"])(j,_,N,!1,null,"27ed06d9",null)),H=$.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"detailInfo"},[a("el-form",{staticClass:"demo-form-inline",attrs:{model:e.contractCommonInfo,"label-position":"left",disabled:""}},[a("div",{staticClass:"box box-border"},[a("h3",[e._v("主合同信息\n                "),a("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("距合同失效前31天起，可签订续签协议延长合同。")]),a("i",{staticClass:"el-icon-question"})])],1),a("div",{staticClass:"from-inline"},[a("el-form-item",{staticClass:"mb0",attrs:{label:"合同编号"}},[a("el-input",{model:{value:e.contractCommonInfo.code,callback:function(t){e.$set(e.contractCommonInfo,"code",t)},expression:"contractCommonInfo.code"}})],1),a("el-form-item",{staticClass:"mb0",attrs:{label:"合同生效日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.contractCommonInfo.startDate,callback:function(t){e.$set(e.contractCommonInfo,"startDate",t)},expression:"contractCommonInfo.startDate"}})],1),a("el-form-item",{staticClass:"mb0",attrs:{label:"合同失效日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.contractCommonInfo.endDate,callback:function(t){e.$set(e.contractCommonInfo,"endDate",t)},expression:"contractCommonInfo.endDate"}})],1)],1)]),a("div",{staticClass:"box box-border"},[a("h3",[e._v("客户信息\n                "),a("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[a("div",{staticStyle:{width:"300px"},attrs:{slot:"content"},slot:"content"},[e._v("客户联系人可通过补充变更协议更改；客户状态用于标记客户的合作状态，可随时更改，与合同状态无关；合同主体若需更改，请申请终止合同并重新签订新合同。")]),a("i",{staticClass:"el-icon-question"})])],1),a("div",{class:{inlineWrap:2==e.contractObj.subjectType}},[a("div",{staticClass:"from-inline"},[a("el-form-item",{attrs:{label:"合同主体"}},[a("el-input",{model:{value:e.companyCustomerInfo.name,callback:function(t){e.$set(e.companyCustomerInfo,"name",t)},expression:"companyCustomerInfo.name"}})],1),1==e.contractObj.subjectType?[a("el-form-item",{attrs:{label:"身份证号码"}},[a("el-input",{model:{value:e.companyCustomerInfo.idNumber,callback:function(t){e.$set(e.companyCustomerInfo,"idNumber",t)},expression:"companyCustomerInfo.idNumber"}})],1)]:e._e()],2),a("div",{staticClass:"from-inline"},[a("el-form-item",{attrs:{label:"客户类型"}},[a("el-select",{attrs:{"popper-append-to-body":""},model:{value:e.customerInfo.subjectType,callback:function(t){e.$set(e.customerInfo,"subjectType","string"===typeof t?t.trim():t)},expression:"customerInfo.subjectType"}},[a("el-option",{attrs:{label:"个体",value:1}}),a("el-option",{attrs:{label:"主体",value:2}})],1)],1),a("el-form-item",{attrs:{label:"客户状态"}},[a("el-select",{attrs:{"popper-append-to-body":""},model:{value:e.customerInfo.customerStatus,callback:function(t){e.$set(e.customerInfo,"customerStatus","string"===typeof t?t.trim():t)},expression:"customerInfo.customerStatus"}},[a("el-option",{attrs:{label:"合作中",value:1}}),a("el-option",{attrs:{label:"合作终止",value:2}})],1)],1),a("div",{staticClass:"changeCustomer",on:{click:e.changeCustomer}},[a("i",{staticClass:"el-icon-edit"}),e._v("  更改")])],1)]),a("el-form-item",{staticClass:"w100",attrs:{label:"住所地"}},[a("el-input",{model:{value:e.companyCustomerInfo.place,callback:function(t){e.$set(e.companyCustomerInfo,"place",t)},expression:"companyCustomerInfo.place"}})],1),2==e.contractObj.subjectType?[a("el-form-item",{attrs:{label:"法定代表人"}},[a("el-input",{model:{value:e.companyCustomerInfo.legalPerson,callback:function(t){e.$set(e.companyCustomerInfo,"legalPerson",t)},expression:"companyCustomerInfo.legalPerson"}})],1)]:e._e(),a("div",{staticClass:"from-inline"},[a("el-form-item",{attrs:{label:"联系人"}},[a("el-input",{model:{value:e.companyCustomerInfo.contacts,callback:function(t){e.$set(e.companyCustomerInfo,"contacts",t)},expression:"companyCustomerInfo.contacts"}})],1),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:e.companyCustomerInfo.telephone,callback:function(t){e.$set(e.companyCustomerInfo,"telephone",t)},expression:"companyCustomerInfo.telephone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱"}},[a("el-input",{model:{value:e.companyCustomerInfo.email,callback:function(t){e.$set(e.companyCustomerInfo,"email",t)},expression:"companyCustomerInfo.email"}})],1)],1),a("el-form-item",{staticClass:"w100",attrs:{label:"联系地址"}},[a("el-input",{model:{value:e.companyCustomerInfo.address,callback:function(t){e.$set(e.companyCustomerInfo,"address",t)},expression:"companyCustomerInfo.address"}})],1)],2),a("div",{staticClass:"box box-border"},[a("h3",[e._v("结款约定\n                "),a("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[a("div",{staticStyle:{width:"200px"},attrs:{slot:"content"},slot:"content"},[e._v("结款约定内容可通过补充变更协议更改。 暂时仅支持选择“月结”。")]),a("i",{staticClass:"el-icon-question"})])],1),a("el-form-item",{attrs:{label:"结款周期"}},[a("el-input",{model:{value:e.settlementInfo.cycle,callback:function(t){e.$set(e.settlementInfo,"cycle",t)},expression:"settlementInfo.cycle"}})],1),a("div",{staticClass:"from-inline smallRow"},[a("label",[e._v("乙方应在每月")]),a("el-input",{model:{value:e.settlementInfo.startDate,callback:function(t){e.$set(e.settlementInfo,"startDate",t)},expression:"settlementInfo.startDate"}}),a("label",[e._v("号前，将月度账单发送给甲方。甲应在每月")]),a("el-input",{model:{value:e.settlementInfo.checkBill,callback:function(t){e.$set(e.settlementInfo,"checkBill",t)},expression:"settlementInfo.checkBill"}}),a("label",[e._v("号前核对完账单并通知乙方开具发票；如有异议应在收到账单后")]),a("el-input",{model:{value:e.settlementInfo.feedBack,callback:function(t){e.$set(e.settlementInfo,"feedBack",t)},expression:"settlementInfo.feedBack"}}),a("label",[e._v("日内予以反馈。")])],1),a("div",{staticClass:"from-inline smallRow"},[a("label",[e._v("甲方应在收到发票后")]),a("el-input",{model:{value:e.settlementInfo.payBill,callback:function(t){e.$set(e.settlementInfo,"payBill",t)},expression:"settlementInfo.payBill"}}),a("label",[e._v("日内向乙方支付账单金额。")])],1),a("div",{staticClass:"from-inline smallRow"},[a("label",[e._v("未按约定付款，每逾期一日，甲方应向乙方支付逾期金额的")]),a("el-input",{model:{value:e.settlementInfo.falsify,callback:function(t){e.$set(e.settlementInfo,"falsify",t)},expression:"settlementInfo.falsify"}}),a("label",[e._v("%的违约金。")])],1)],1)]),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],staticClass:"changeCustomerDialog",attrs:{visible:e.dialogVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"300px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"el-dialog__title"},[e._v(" 客户状态 ")]),a("el-tooltip",{staticClass:"item m-l",attrs:{placement:"bottom"}},[a("div",{staticClass:"el-icon-question set-quote-question"}),a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    客户状态用于标记客户的合作状态，可随时更改，与合同状态无关。\n                ")])])],1),a("div",{staticClass:"radioWrap"},[a("el-radio-group",{model:{value:e.customerStatus,callback:function(t){e.customerStatus=t},expression:"customerStatus"}},[a("el-radio",{attrs:{label:1}},[e._v("合作中")]),a("el-radio",{attrs:{label:2}},[e._v("终止合作")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("返 回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitStatus}},[e._v("确 定")])],1)])],1)},R=[],q={name:"detailInfo",components:{},inject:["contractObj"],props:{},data:function(){return{contractCommonInfo:{},companyCustomerInfo:{},settlementInfo:{},customerInfo:{},dialogVisible:!1,customerStatus:1}},mounted:function(){this.init()},methods:{init:function(){this.queryContractInfoById(),this.queryMainContractInfoById()},queryContractInfoById:function(){var e=this;Object(c["hc"])({contractId:this.contractObj.id}).then((function(t){t.status&&t.result.mainContractInfo&&(t.result.mainContractInfo.contractCommonInfo?(e.contractCommonInfo=t.result.mainContractInfo.contractCommonInfo,e.contractCommonInfo.startDate=e.moment(e.contractCommonInfo.startDate).format("YYYY-MM-DD"),e.contractCommonInfo.endDate=e.moment(e.contractCommonInfo.endDate).format("YYYY-MM-DD")):e.contractCommonInfo={},e.companyCustomerInfo=t.result.mainContractInfo.companyCustomerInfo?t.result.mainContractInfo.companyCustomerInfo:{},e.settlementInfo=t.result.mainContractInfo.settlementInfo?t.result.mainContractInfo.settlementInfo:{})}))},queryMainContractInfoById:function(){var e=this;Object(c["ic"])({id:this.contractObj.id}).then((function(t){t.status&&(e.customerInfo=t.result)}))},changeCustomer:function(){this.customerStatus=this.customerInfo.customerStatus?this.customerInfo.customerStatus:1,this.dialogVisible=!0},submitStatus:function(){var e=this;Object(c["ed"])({id:this.contractObj.id,customerStatus:this.customerStatus,contractStatus:this.contractObj.contractStatus}).then((function(t){t.status&&e.queryMainContractInfoById()})),this.dialogVisible=!1}}},U=q,A=(a("0551"),Object(b["a"])(U,V,R,!1,null,"186c0d00",null)),B=A.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"detailRelation"},[a("div",{staticClass:"topSearch"},[a("div",{staticClass:"col"},[a("div",{staticClass:"tittle"},[a("span",[e._v("关联账号")]),a("el-tooltip",{staticClass:"item m-l",attrs:{placement:"bottom"}},[a("div",{staticClass:"el-icon-question set-quote-question"}),a("div",{staticStyle:{width:"350px"},attrs:{slot:"content"},slot:"content"},[e._v("\n                        请关联客户在神州的所有账号，并在神州报价系统检查这些账号的报价是否与合同报价协议一致，以确保能正确出账。若需更改账号类型或父子绑定关系，请去如意系统-客户配置。\n                    ")])])],1),a("label",{staticClass:"w-r-65"},[e._v("账号类型：")]),a("el-select",{on:{change:e.search},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},e._l(e.queryTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v(e._s(e.ralationNum.totalNum>0?"编辑":"新增"))])],1)]),a("div",{staticClass:"tips"},[e.ralationNum.totalNum>0?a("span",[e._v(" 已关联"+e._s(e.ralationNum.totalNum)+"个电子面单账号，其中"+e._s(e.ralationNum.parentCustomerNum)+"个是父客户（结算对象）。 ")]):e._e(),0==e.ralationNum.totalNum?a("span",{staticClass:"red"},[e._v(" 尚未关联客户在神州的账号 ")]):e._e()]),a("div",{staticClass:"contractTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",width:"100",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"customerName",label:"账号名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"customerCode",label:"账号编号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"type",label:"账号类型","show-overflow-tooltip":!0,formatter:function(t,a,i){return e.queryTypeFormatter(i)}}}),a("el-table-column",{attrs:{prop:"parentName",label:"父客户名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"parentCode",label:"父客户编码","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"enable",label:"账号状态","show-overflow-tooltip":!0,formatter:function(t,a,i){return e.enableFormatter(i)}}})],1)],1),a("edit-ralation",{ref:"refServiceSite",attrs:{axiosDataFUnction:e.querySiteCustomerNoChose,postObjectEditObject:e.addOrUpdateSiteCustomer,title:"新增报价对象"},on:{callBack:e.callBack}})],1)},L=[],G=a("391c"),Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"ralationDialog",attrs:{title:"kkk",visible:e.show,width:"900px","modal-append-to-body":!1,center:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"el-dialog__title",attrs:{slot:"title"},slot:"title"},[e._v("\n    关联账号\n    "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{staticClass:"el-icon-question set-quote-question"}),a("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.tips)},slot:"content"})])],1),a("div",{staticClass:"edit-service-site"},[a("div",{staticClass:"leftList list"},[a("div",{staticClass:"constituency"},[e._v("可选父客户账号")]),a("div",{staticClass:"edit-header"},[a("div",{staticStyle:{"margin-right":"5px"}},[e._v("\n          状态：\n          "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.disable,callback:function(t){e.disable=t},expression:"disable"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入要搜索的父客户账号",maxlength:"400",clearable:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onLeftSearch(t)}},model:{value:e.leftSearch,callback:function(t){e.leftSearch="string"===typeof t?t.trim():t},expression:"leftSearch"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.onLeftSearch},slot:"append"})],1)],1),a("el-table",{directives:[{name:"el-table-infinite-scroll",rawName:"v-el-table-infinite-scroll",value:e.leftLoad,expression:"leftLoad"}],ref:"refLeftTable",staticStyle:{width:"100%"},attrs:{data:e.leftDisplayData,"tooltip-effect":"dark",height:"300",border:""},on:{"row-click":e.leftRowClick,"selection-change":e.onLeftSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":!0,prop:"enable",formatter:e.disableFormatter,width:"70"}}),e._l(e.tableHead,(function(e){return a("el-table-column",{key:e.index,attrs:{"show-overflow-tooltip":!0,label:e.label,prop:e.value}})})),a("div",{attrs:{slot:"empty"},slot:"empty"},[e._v(" 无数据哦！ ")])],2)],1),a("div",{staticClass:"center"},[a("button",{staticClass:"el-button el-button--primary  el-transfer__button",class:{"is-disabled":0===e.selectRightData.length},attrs:{disabled:0===e.selectRightData.length,type:"button"},on:{click:e.onLeftCheck}},[a("span",[a("em",{staticClass:"el-icon-arrow-left"})])]),a("button",{staticClass:"el-button el-button--primary  el-transfer__button",class:{"is-disabled":0===e.selectLeftData.length},attrs:{disabled:0===e.selectLeftData.length,type:"button"},on:{click:e.onRightCheck}},[a("span",[a("em",{staticClass:"el-icon-arrow-right"})])])]),a("div",{staticClass:"rightList list"},[a("div",{staticClass:"constituency"},[e._v("已选父客户账号")]),a("div",{staticClass:"edit-header"},[e._v("\n        已选父客户账号个数："+e._s(e.rightDisplayData.length)+"\n      ")]),a("el-table",{ref:"refRightTable",staticStyle:{width:"100%"},attrs:{data:e.rightDisplayData,"tooltip-effect":"dark",height:"300",border:""},on:{"row-click":e.rightRowClick,"selection-change":e.onRightSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":!0,prop:"enable",formatter:e.disableFormatter,width:"70"}}),e._l(e.tableHead,(function(e){return a("el-table-column",{key:e.index,attrs:{"show-overflow-tooltip":!0,label:e.label,prop:e.value,width:e.width}})})),a("div",{attrs:{slot:"empty"},slot:"empty"},[e._v(" 无数据哦！ ")])],2)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)])},Q=[],J=(a("9a33"),a("f548"),a("54d0")),X=a("baf5"),K=a.n(X),ee="ElInfiniteScroll",te="[el-table-infinite-scroll]: ",ae=".el-table__body-wrapper",ie={inserted:function(e,t,a,i){var s=e.querySelector(ae);if(!s)throw"".concat(te,"找不到 ").concat(ae," 容器");s.style.overflowY="auto",setTimeout((function(){e.style.height||(s.style.height="400px",console.warn("".concat(te,"请尽量设置 el-table 的高度，可以设置为 auto/100%（自适应高度），未设置会取 400px 的默认值（不然会导致一直加载）"))),se(a,e,s),K.a.inserted(s,t,a,i),e[ee]=s[ee]}),0)},componentUpdated:function(e,t,a){se(a,e,e.querySelector(ae))},unbind:K.a.unbind};function se(e,t,a){var i,s=e.context;["disabled","delay","immediate"].forEach((function(e){e="infinite-scroll-"+e,i=t.getAttribute(e),null!==i&&a.setAttribute(e,s[i]||i)}));var n="infinite-scroll-distance";i=t.getAttribute(n),i=s[i]||i,a.setAttribute(n,i<1?1:i)}ie.install=function(e){e.directive("el-table-infinite-scroll",ie)};var ne=ie,le=a("d29c"),oe=a.n(le);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ue={name:"editRalation",inject:["contractObj"],props:{tips:{default:"请选出客户所有的父客户账号，父客户下的子客户将会自动带入。<br>\n若需更改账号类型或父子绑定关系，请去如意系统-客户配置。<br>\n若找不到父客户，则该父客户可能已与其他合同绑定。      "},tableHead:{type:Array,default:function(){var e=[{label:"账号编码",value:"customerCode",width:150},{label:"账号名称",value:"customerName"}];return e}},axiosDataFUnction:{type:Function,required:!0},postObjectEditObject:{type:Function,required:!0},params:{type:Object,default:function(){}}},directives:{"el-table-infinite-scroll":ne},data:function(){return{disable:0,leftSearch:"",searchObjClone:{disable:0,leftSearch:""},options:[{value:0,label:"启用"},{value:1,label:"禁用"}],show:!1,leftDisplayData:[],rightDisplayData:[],rightData:[],rightSearch:"",selectLeftData:[],selectRightData:[],id:"",selectedRightData:[],selectedLeftData:[],currentPage:1,totalPage:0}},mounted:function(){},methods:{getLeftData:function(){var e=this,t=this.searchObjClone.leftSearch,a=ce({pageSize:50,currentPage:this.currentPage,enable:this.disable,contractId:this.contractObj.id,queryType:-1},this.params);if(""!=t){var i=this.searchNameFilter(t);if(!i)return;a.nameOrCodes=i}console.log("参数: ",a),this.axiosDataFUnction(a).then((function(t){if(t.status){var a=t.result.list;e.selectedLeftData.length>0&&(a=e.removeSameSelectedData(a,e.selectedLeftData)),e.totalPage=t.result.totalPage,e.leftDisplayData=e.leftDisplayData.concat(a)}else e.$message({message:t.message})}))},leftLoad:oe.a.debounce((function(e){console.log("leftLoad..."),this.currentPage<this.totalPage?(++this.currentPage,this.getLeftData(),console.log("开始下拉了,页码：",this.currentPage)):console.log("加载完了")}),500),onLeftSearch:function(){if(this.searchObjClone={leftSearch:this.leftSearch,disable:this.disable},""!=this.leftSearch){var e=this.searchNameFilter(this.leftSearch);if(!e)return}this.leftDisplayData=this.searchLeftResult(this.selectedRightData,this.leftSearch),this.currentPage=1,this.getLeftData()},searchLeftResult:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=e.filter((function(e){return e.enable===a.disable})),""!=t){var s=this.searchNameFilter(t,i);if(!s)return;return e.filter((function(e){var a=e.customerName+e.customerCode;return 1===s.length?a.indexOf(t)>-1:s.indexOf(e.customerName)>-1||(s.indexOf(e.customerCode)>-1||void 0)}))}return e},onSearch:function(){this.rightDisplayData=this.searchResult(this.rightData,this.rightSearch,!0)},searchResult:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(""!=t){var i=this.searchNameFilter(t,a);if(!i)return;return e.filter((function(e){var a=e.customerName+e.customerCode;return 1===i.length?a.indexOf(t)>-1:i.indexOf(e.customerName)>-1||(i.indexOf(e.customerCode)>-1||void 0)}))}return e},onRightCheck:function(){this.rightSearch="";var e=Object(G["cloneDeep"])(this.selectLeftData),t=Object(G["cloneDeep"])(this.rightData);this.stagingDataOperation(e,"right"),e.push.apply(e,Object(J["a"])(t)),this.rightData=e,this.selectLeftData=[],this.leftDisplayData=this.dataConversion(this.leftDisplayData,e,"id"),this.rightDisplayData=Object(G["cloneDeep"])(this.rightData)},onLeftCheck:function(){var e,t=this;this.leftSearch="",this.searchObjClone.leftSearch="";var a=Object(G["cloneDeep"])(this.selectRightData),i=Object(G["cloneDeep"])(this.leftDisplayData);this.stagingDataOperation(a,"left"),this.rightData=this.dataConversion(this.rightData,a,"id"),console.log(a,"lll",this.searchObjClone.disable),a=a.filter((function(e){return e.enable===t.searchObjClone.disable})),(e=a).push.apply(e,Object(J["a"])(i)),this.selectRightData=[],this.leftDisplayData=Object(G["cloneDeep"])(a),this.rightDisplayData=Object(G["cloneDeep"])(this.rightData)},stagingDataOperation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left",a=[],i=[];e.map((function(e){e.selected?a.push(e):i.push(e)})),"left"==t?(this.selectedRightData=this.selectedRightData.concat(a),this.selectedLeftData=this.removeSameSelectedData(this.selectedLeftData,i)):(this.selectedLeftData=this.selectedLeftData.concat(i),this.selectedRightData=this.removeSameSelectedData(this.selectedRightData,a))},leftRowClick:function(e,t,a){this.$refs.refLeftTable.toggleRowSelection(e)},rightRowClick:function(e,t,a){this.$refs.refRightTable.toggleRowSelection(e)},onLeftSelectionChange:function(e){this.selectLeftData=Object(G["cloneDeep"])(e)},onRightSelectionChange:function(e){this.selectRightData=Object(G["cloneDeep"])(e)},dataConversion:function(e,t,a){for(var i=[],s=function(s){var n=e[s];t.some((function(e){return e[a]===n[a]}))||i.push(n)},n=0;n<e.length;n++)s(n);return i},removeSameSelectedData:function(e,t){return e.filter((function(e){return!t.some((function(t){return t.id==e.id}))}))},onCancel:function(){this.show=!1},onSubmit:function(){var e=this,t=[];this.selectedLeftData.map((function(e){var a=e.id;t.push(a)}));var a=[];this.selectedRightData.map((function(e){a.push(e.id)}));var i=ce({contractId:this.contractObj.id,addList:t,deleteList:a},this.params);this.postObjectEditObject(i).then((function(t){t.status&&(e.$message({message:"保存成功",type:"success"}),e.show=!1,e.$emit("callBack"))}))},onReset:function(){this.rightData=[],this.leftSearch="",this.rightSearch="",this.selectLeftData=[],this.selectRightData=[],this.rightDisplayData=[],this.leftDisplayData=[],this.selectedLeftData=[],this.selectedRightData=[],this.currentPage=1,this.totalRow=0,this.disable=0,this.searchObjClone={leftSearch:"",disable:0}},disableFormatter:function(e,t,a,i){return 1===a?"禁用":"启用"},validateRemark:function(e){var t=/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|["',，.。/、\]\[【】\\n\s！!?？——_<>%;‘’；)《（）》(&+=`“”·*#@@]){0,}$/,a=/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return!(""!==e&&!t.test(e)||a.test(e))},searchNameFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.validateRemark(e))return this.$message({message:"不允许输入特殊字符",type:"warning"}),!1;e=e.replace(/\，/g,",");var a=e.split(",");return a.length>10?(this.$message({message:"一次最多只能查询10个父客户账号",type:"warning"}),!1):(a=Object(G["uniq"])(a),t?a:a.join(","))}}},de=ue,he=(a("ec39"),Object(b["a"])(de,Z,Q,!1,null,"ea2edcf8",null)),me=he.exports;function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fe={name:"detailRelation",components:{editRalation:me},inject:["contractObj"],data:function(){return{querySiteCustomerNoChose:c["mc"],addOrUpdateSiteCustomer:c["u"],queryType:-1,queryTypeOptions:[{value:-1,label:"全部"},{value:1,label:"父客户"},{value:2,label:"子客户"}],enableOptions:[{value:0,label:"启用"},{value:1,label:"禁用"}],ralationNum:{totalNum:0,parentCustomerNum:0},tableData:[]}},mounted:function(){this.search()},methods:{search:function(){var e=this;console.log("detailRelation search..."),Object(c["lc"])({queryType:this.queryType,contractId:this.contractObj.id}).then((function(t){if(t.status&&t.result&&t.result.list&&0==t.result.list.length)e.tableData=[];else{if(!t.status&&t.message)return e.$message.error(t.message),void(e.tableData=[]);console.log("gff.."),e.tableData=t.result.list,e.refreshNum(t.result),e.$emit("refreshNum",t.result)}})).catch((function(t){e.tableData=[],t.message?e.$message.error(t.message):e.$message.error("服务器异常，请联系管理员")}))},refreshNum:function(e){this.ralationNum={totalNum:e.totalNum?e.totalNum:0,parentCustomerNum:e.parentCustomerNum?e.parentCustomerNum:0}},edit:function(){var e=this;this.$refs.refServiceSite.onReset(),this.$refs.refServiceSite.quoteId="17448",this.$refs.refServiceSite.getLeftData("17448"),this.$refs.refServiceSite.show=!0,Object(c["lc"])({queryType:"1",contractId:this.contractObj.id}).then((function(t){if(!(t.status&&t.result&&t.result.list&&0==t.result.list.length))if(t.status||!t.message){var a=[];t.result.list.map((function(e){a.push(be({},e,{selected:1}))})),e.$refs.refServiceSite.rightData=Object(G["cloneDeep"])(a),e.$refs.refServiceSite.rightDisplayData=Object(G["cloneDeep"])(a)}else e.$message.error(t.message)})).catch((function(t){t.message?e.$message.error(t.message):e.$message.error("服务器异常，请联系管理员")}))},callBack:function(){this.search()},queryTypeFormatter:function(e){return this.formatterFunc(this.queryTypeOptions,e)},enableFormatter:function(e){return this.formatterFunc(this.enableOptions,e)},formatterFunc:function(e,t){var a=e.filter((function(e){return e.value===t}));return a.length>0?a[0].label:"-"}}},ye=fe,ve=(a("8e4b"),Object(b["a"])(ye,W,L,!1,null,"49384173",null)),ge=ve.exports,Ce={name:"contractInfo",components:{detailList:H,detailInfo:B,detailRelation:ge},props:{contractObj:{type:Object,default:function(){}}},provide:function(){return{contractObj:this.contractObj}},data:function(){return{activeName:"tab1",ralationNum:{totalNum:0,parentCustomerNum:0}}},methods:{init:function(){this.search()},goto:function(e){this.$emit("goto",e)},onTabClick:function(){},search:function(){var e=this;Object(c["lc"])({queryType:-1,contractId:this.contractObj.id}).then((function(t){e.refreshNum(t.result)})).catch((function(t){t.message?e.msg(t.message):e.msg("服务器异常，请联系管理员")}))},refreshNum:function(e){this.ralationNum={totalNum:e.totalNum?e.totalNum:0,parentCustomerNum:e.parentCustomerNum?e.parentCustomerNum:0}}}},xe=Ce,ke=(a("a39a"),Object(b["a"])(xe,w,S,!1,null,"bb35a75a",null)),De=ke.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"process"},[a("div",{staticClass:"process-header"},[a("el-steps",{attrs:{active:e.processActive,space:150,"align-center":""}},[a("el-step",{attrs:{title:"主合同"}}),a("el-step",{attrs:{title:"价格协议",description:""}}),a("el-step",{attrs:{title:"安全协议",description:""}}),a("el-step",{attrs:{title:"其他附件",description:""}}),a("el-step",{attrs:{title:"提交申请",description:""}})],1),a("div",{staticClass:"btn"},[e.processActive>0?a("div",{staticClass:"pause",on:{click:function(t){return e.onPause(1)}}},[a("i",{staticClass:"el-icon-video-pause"}),e._v("暂停流程\n      ")]):e._e(),a("div",{staticClass:"close",on:{click:function(t){return e.onPause(0)}}},[a("i",{staticClass:"el-icon-error"}),e._v("关闭流程\n      ")])])],1),0===e.processActive?a("step1",{ref:"refStep1",attrs:{templateType:e.templateType,contractId:e.contractId,mainContractInfo:e.mainContractInfo},on:{change:e.onChange}}):e._e(),1===e.processActive?a("step2",{attrs:{templateType:e.templateType,contractId:e.contractId},on:{change:e.onChange}}):e._e(),2===e.processActive?a("step3",{attrs:{templateType:e.templateType,contractId:e.contractId},on:{change:e.onChange}}):e._e(),3===e.processActive?a("step4",{attrs:{templateType:e.templateType,contractId:e.contractId,contractType:e.contractType},on:{change:e.onChange}}):e._e(),4===e.processActive?a("step5",{attrs:{templateType:e.templateType,contractId:e.contractId,mainContractInfo:e.mainContractInfo},on:{change:e.onChange,model:e.onModel}}):e._e(),a("el-dialog",{attrs:{title:e.isClose?"暂停流程":"关闭流程",visible:e.centerDialogVisible,width:"30%",center:"","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{staticClass:"pop"},[e._v("\n      "+e._s(e.isClose?"暂停流程将会保存已完成的步骤所填写和上传的内容，暂停后下次可继续流程。":"关闭流程将不会保存已填写和已上传的所有内容，请谨慎选择。")+"\n    ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("返\n        "),a("i",[e._v("隐藏")]),e._v("回")]),e.isClose?a("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("确认暂停")]):a("el-button",{attrs:{type:"danger"},on:{click:e.onConfirm}},[e._v("确认关闭")])],1)])],1)},Se=[];a("419a");function _e(e,t,a,i,s,n,l){try{var o=e[n](l),r=o.value}catch(c){return void a(c)}o.done?t(r):Promise.resolve(r).then(i,s)}function Ne(e){return function(){var t=this,a=arguments;return new Promise((function(i,s){var n=e.apply(t,a);function l(e){_e(n,i,s,l,o,"next",e)}function o(e){_e(n,i,s,l,o,"throw",e)}l(void 0)}))}}var Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step1"},[a("div",{staticClass:"box title"},[e._m(0),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSave()}}},[e._v("保存并预览")])],1),a("div",{staticClass:"box"},[a("h3",[e._v("填写合同")]),a("el-form",{ref:"refContractCommonInfo",staticClass:"demo-form-inline",attrs:{model:e.contractCommonInfo,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition}},[a("el-form-item",{staticClass:"no-border",attrs:{label:"合同编号",prop:"code"}},[a("el-input",{attrs:{disabled:"",readonly:""},model:{value:e.contractCommonInfo.code,callback:function(t){e.$set(e.contractCommonInfo,"code",t)},expression:"contractCommonInfo.code"}})],1),a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"合同生效日期",prop:"startDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择","picker-options":e.startPickerOptions},model:{value:e.contractCommonInfo.startDate,callback:function(t){e.$set(e.contractCommonInfo,"startDate",t)},expression:"contractCommonInfo.startDate"}})],1),a("el-form-item",{attrs:{label:"合同失效日期",prop:"endDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择","picker-options":e.endPickerOptions},model:{value:e.contractCommonInfo.endDate,callback:function(t){e.$set(e.contractCommonInfo,"endDate",t)},expression:"contractCommonInfo.endDate"}})],1)],1)],1),a("div",{staticClass:"divider"}),a("h4",[e._v("甲方 - 客户信息")]),a("el-form",{ref:"refCompanyCustomerInfo",staticClass:"demo-form-inline",attrs:{model:e.companyCustomerInfo,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"甲方类型",prop:"type"}},[a("el-radio-group",{on:{change:e.onChangeLegalPerson},model:{value:e.companyCustomerInfo.type,callback:function(t){e.$set(e.companyCustomerInfo,"type",t)},expression:"companyCustomerInfo.type"}},[a("el-radio",{attrs:{label:2}},[e._v("企业客户")]),a("el-radio",{attrs:{label:1}},[e._v("个人客户")])],1)],1),a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"甲方",prop:"name"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.companyCustomerInfo.name,callback:function(t){e.$set(e.companyCustomerInfo,"name","string"===typeof t?t.trim():t)},expression:"companyCustomerInfo.name"}})],1),a("el-form-item",{class:{gray:2==e.companyCustomerInfo.type},attrs:{label:"甲方身份证号码",prop:"idNumber"}},[a("el-input",{attrs:{maxlength:"30",disabled:2==e.companyCustomerInfo.type},model:{value:e.companyCustomerInfo.idNumber,callback:function(t){e.$set(e.companyCustomerInfo,"idNumber",t)},expression:"companyCustomerInfo.idNumber"}})],1)],1),a("el-form-item",{staticClass:"w100",attrs:{label:"甲方住所地",prop:"place"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.companyCustomerInfo.place,callback:function(t){e.$set(e.companyCustomerInfo,"place","string"===typeof t?t.trim():t)},expression:"companyCustomerInfo.place"}})],1),a("el-form-item",{class:{gray:1==e.companyCustomerInfo.type},attrs:{label:"甲方法定代表人",prop:"legalPerson",rules:e.rules.aLegalPerson}},[a("el-input",{attrs:{disabled:1==e.companyCustomerInfo.type,maxlength:"20"},model:{value:e.companyCustomerInfo.legalPerson,callback:function(t){e.$set(e.companyCustomerInfo,"legalPerson","string"===typeof t?t.trim():t)},expression:"companyCustomerInfo.legalPerson"}})],1),a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"甲方联系人",prop:"contacts"}},[a("el-input",{attrs:{maxlength:"15"},model:{value:e.companyCustomerInfo.contacts,callback:function(t){e.$set(e.companyCustomerInfo,"contacts","string"===typeof t?t.trim():t)},expression:"companyCustomerInfo.contacts"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[a("el-input",{attrs:{maxlength:"20"},nativeOn:{keyup:function(t){return e.verificationNumber("companyCustomerInfo","telephone")}},model:{value:e.companyCustomerInfo.telephone,callback:function(t){e.$set(e.companyCustomerInfo,"telephone",t)},expression:"companyCustomerInfo.telephone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱",prop:"email"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:e.companyCustomerInfo.email,callback:function(t){e.$set(e.companyCustomerInfo,"email","string"===typeof t?t.trim():t)},expression:"companyCustomerInfo.email"}})],1)],1),a("el-form-item",{staticClass:"w100",attrs:{label:"甲方联系地址",prop:"address"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.companyCustomerInfo.address,callback:function(t){e.$set(e.companyCustomerInfo,"address","string"===typeof t?t.trim():t)},expression:"companyCustomerInfo.address"}})],1)],1),a("div",{staticClass:"divider"}),a("h4",[e._v("乙方 - 我司信息")]),a("el-form",{ref:"refOwnInfo",staticClass:"demo-form-inline",attrs:{model:e.ownInfo,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"乙方",prop:"name"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.ownInfo.name,callback:function(t){e.$set(e.ownInfo,"name","string"===typeof t?t.trim():t)},expression:"ownInfo.name"}})],1),a("el-form-item",{staticClass:"w100",attrs:{label:"乙方住所地",prop:"place"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.ownInfo.place,callback:function(t){e.$set(e.ownInfo,"place","string"===typeof t?t.trim():t)},expression:"ownInfo.place"}})],1),a("el-form-item",{attrs:{label:"乙方法定代表人",prop:"legalPerson"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.ownInfo.legalPerson,callback:function(t){e.$set(e.ownInfo,"legalPerson","string"===typeof t?t.trim():t)},expression:"ownInfo.legalPerson"}})],1),a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"乙方联系人",prop:"contacts"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.ownInfo.contacts,callback:function(t){e.$set(e.ownInfo,"contacts","string"===typeof t?t.trim():t)},expression:"ownInfo.contacts"}})],1),a("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[a("el-input",{attrs:{maxlength:"15"},nativeOn:{keyup:function(t){return e.verificationNumber("ownInfo","telephone")}},model:{value:e.ownInfo.telephone,callback:function(t){e.$set(e.ownInfo,"telephone",t)},expression:"ownInfo.telephone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱",prop:"email"}},[a("el-input",{attrs:{maxlength:"30"},model:{value:e.ownInfo.email,callback:function(t){e.$set(e.ownInfo,"email","string"===typeof t?t.trim():t)},expression:"ownInfo.email"}})],1)],1),a("el-form-item",{staticClass:"w100",attrs:{label:"乙方联系地址",prop:"address"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.ownInfo.address,callback:function(t){e.$set(e.ownInfo,"address","string"===typeof t?t.trim():t)},expression:"ownInfo.address"}})],1),a("h4",[e._v("乙方 - 我司账户信息")]),a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"乙方账户名",prop:"accountName"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.ownInfo.accountName,callback:function(t){e.$set(e.ownInfo,"accountName","string"===typeof t?t.trim():t)},expression:"ownInfo.accountName"}})],1),a("el-form-item",{attrs:{label:"开户行",prop:"openBank"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.ownInfo.openBank,callback:function(t){e.$set(e.ownInfo,"openBank","string"===typeof t?t.trim():t)},expression:"ownInfo.openBank"}})],1),a("el-form-item",{attrs:{label:"账号",prop:"accountNum"}},[a("el-input",{attrs:{maxlength:"30"},nativeOn:{keyup:function(t){return e.verificationNumber("ownInfo","accountNum")}},model:{value:e.ownInfo.accountNum,callback:function(t){e.$set(e.ownInfo,"accountNum","string"===typeof t?t.trim():t)},expression:"ownInfo.accountNum"}})],1)],1)],1),a("div",{staticClass:"divider"}),a("h4",[e._v("保证金")]),a("el-form",{ref:"refSettlementInfo",staticClass:"demo-form-inline",attrs:{model:e.settlementInfo,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"支付保证金",prop:"needBond"}},[a("el-radio-group",{on:{change:e.onChangeBond},model:{value:e.settlementInfo.needBond,callback:function(t){e.$set(e.settlementInfo,"needBond",t)},expression:"settlementInfo.needBond"}},[a("el-radio",{attrs:{label:!0}},[e._v("需要")]),a("el-radio",{attrs:{label:!1}},[e._v("不需要")])],1)],1),a("div",{class:{gray:!e.settlementInfo.needBond}},[e._v("在签订本合同后\n        "),a("el-form-item",{staticClass:"inline-input",attrs:{label:"","label-width":"0px",prop:"bondDate",rules:e.rules.date}},[a("el-input",{attrs:{disabled:!e.settlementInfo.needBond,maxlength:"2"},model:{value:e.settlementInfo.bondDate,callback:function(t){e.$set(e.settlementInfo,"bondDate","string"===typeof t?t.trim():t)},expression:"settlementInfo.bondDate"}})],1),e._v("日内，甲方应向乙方支付人民币\n        "),a("el-form-item",{staticClass:"inline-input w90",attrs:{label:"","label-width":"0px",prop:"bond"}},[a("el-input",{attrs:{maxlength:"11",disabled:!e.settlementInfo.needBond},model:{value:e.settlementInfo.bond,callback:function(t){e.$set(e.settlementInfo,"bond","string"===typeof t?t.trim():t)},expression:"settlementInfo.bond"}})],1),e._v("元。")],1),a("h4",[e._v("结款约定")]),a("el-form-item",{attrs:{label:"结款周期",prop:"cycle"}},[a("el-select",{attrs:{placeholder:"请选择结款周期","popper-append-to-body":""},model:{value:e.settlementInfo.cycle,callback:function(t){e.$set(e.settlementInfo,"cycle","string"===typeof t?t.trim():t)},expression:"settlementInfo.cycle"}},[a("el-option",{attrs:{label:"月结",value:1}}),a("el-option",{attrs:{label:"暂不支持其他结款周期",disabled:!0,value:"2"}})],1)],1),a("div",[e._v("乙方应在每月\n        "),a("el-form-item",{staticClass:"inline-input",attrs:{label:"","label-width":"0px",prop:"startDate"}},[a("el-input",{attrs:{maxlength:"3"},model:{value:e.settlementInfo.startDate,callback:function(t){e.$set(e.settlementInfo,"startDate","string"===typeof t?t.trim():t)},expression:"settlementInfo.startDate"}})],1),e._v("号前，将月度账单发送给甲方。甲应在每月\n        "),a("el-form-item",{staticClass:"inline-input",attrs:{label:"","label-width":"0px",prop:"checkBill"}},[a("el-input",{attrs:{maxlength:"3"},model:{value:e.settlementInfo.checkBill,callback:function(t){e.$set(e.settlementInfo,"checkBill","string"===typeof t?t.trim():t)},expression:"settlementInfo.checkBill"}})],1),e._v("号前核对完账单并通知乙方开具发票；如有异议应在收到账单后\n        "),a("el-form-item",{staticClass:"inline-input",attrs:{label:"","label-width":"0px",prop:"feedBack"}},[a("el-input",{attrs:{maxlength:"3"},model:{value:e.settlementInfo.feedBack,callback:function(t){e.$set(e.settlementInfo,"feedBack","string"===typeof t?t.trim():t)},expression:"settlementInfo.feedBack"}})],1),e._v("日内予以反馈。\n      ")],1),a("div",[e._v("\n        甲方应在收到发票后\n        "),a("el-form-item",{staticClass:"inline-input",attrs:{label:"","label-width":"0px",prop:"PayBill"}},[a("el-input",{attrs:{maxlength:"3"},model:{value:e.settlementInfo.PayBill,callback:function(t){e.$set(e.settlementInfo,"PayBill","string"===typeof t?t.trim():t)},expression:"settlementInfo.PayBill"}})],1),e._v("日内向乙方支付账单金额。\n      ")],1),a("h4",[e._v("违约责任")]),a("div",[e._v("\n        未按约定付款，每逾期一日，甲方应向乙方支付逾期金额的\n        "),a("el-form-item",{staticClass:"inline-input w90",attrs:{label:"","label-width":"0px",prop:"falsify"}},[a("el-input",{attrs:{maxlength:"6"},model:{value:e.settlementInfo.falsify,callback:function(t){e.$set(e.settlementInfo,"falsify","string"===typeof t?t.trim():t)},expression:"settlementInfo.falsify"}})],1),e._v("%的违约金。\n      ")],1)],1),a("div",{staticClass:"divider"}),a("h4",[e._v("签署栏")]),a("el-form",{ref:"refSignInfo",staticClass:"demo-form-inline",attrs:{model:e.signInfo,rules:e.rules,"label-width":e.labelWidth,"label-position":e.labelPosition}},[a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"甲方",prop:"firstParty"}},[a("el-input",{attrs:{disabled:!0,maxlength:"20"},model:{value:e.signInfo.firstParty,callback:function(t){e.$set(e.signInfo,"firstParty","string"===typeof t?t.trim():t)},expression:"signInfo.firstParty"}})],1),a("el-form-item",{attrs:{label:"甲方授权代表",prop:"firstAuthorized"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.signInfo.firstAuthorized,callback:function(t){e.$set(e.signInfo,"firstAuthorized","string"===typeof t?t.trim():t)},expression:"signInfo.firstAuthorized"}})],1),a("el-form-item",{attrs:{label:"签约日期",prop:"firstDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择"},model:{value:e.signInfo.firstDate,callback:function(t){e.$set(e.signInfo,"firstDate",t)},expression:"signInfo.firstDate"}})],1)],1),a("div",{staticClass:"form-inline"},[a("el-form-item",{attrs:{label:"乙方",prop:"secondParty"}},[a("el-input",{attrs:{disabled:!0,maxlength:"20"},model:{value:e.signInfo.secondParty,callback:function(t){e.$set(e.signInfo,"secondParty",t)},expression:"signInfo.secondParty"}})],1),a("el-form-item",{attrs:{label:"乙方授权代表",prop:"secondAuthorized"}},[a("el-input",{attrs:{maxlength:"20"},model:{value:e.signInfo.secondAuthorized,callback:function(t){e.$set(e.signInfo,"secondAuthorized","string"===typeof t?t.trim():t)},expression:"signInfo.secondAuthorized"}})],1),a("el-form-item",{attrs:{label:"签约日期",prop:"secondDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择"},model:{value:e.signInfo.secondDate,callback:function(t){e.$set(e.signInfo,"secondDate",t)},expression:"signInfo.secondDate"}})],1)],1)])],1),a("div",{staticClass:"box title"},[e._m(1),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSave()}}},[e._v("保存并预览")])],1),a("el-dialog",{attrs:{visible:e.centerDialogVisible,width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.centerDialogVisible=t},close:function(t){e.centerDialogVisible=!1}}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n      "+e._s(1==e.collision.exceptionStage?"合同冲突":"合同主体已存在")+"\n      "),1==e.collision.exceptionStage?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("•建议您在签订新合同前，去合同首页搜索该合同主体，确认已存在的合同的起始日期与终止日期。"),a("br"),e._v("•若您需要续签或变更合同条款，建议您返回后关闭当前流程，去要续签或变更的合同下发起补充协议。")]),a("i",{staticClass:"el-icon-question"})]):e._e()],1),a("div",{staticClass:"pop"},[a("p",[e._v("您填写的合同主体已存在"+e._s(e.collision.contractCount)+"份合同，"+e._s("{}"!=JSON.stringify(e.collision)?"当前无正在生效中的合同":"当前正在生效中的合同如下：")+" ")]),"{}"!=JSON.stringify(e.collision)?a("ul",[a("li",[e._v("合同编码："+e._s(e.collision.contractCode))]),a("li",[e._v("合同主体："+e._s(e.collision.contractSubject))]),a("li",[e._v("合同起始日期："+e._s(e._f("filterDate")(e.collision.effectiveDate)))]),a("li",[e._v("合同终止日期："+e._s(e._f("filterDate")(e.collision.terminateDate)))])]):e._e(),1==e.collision.exceptionStage?a("p",[a("span",[e._v("同一合同主体在同一时间仅允许存在一份合同。")]),e._v("请返回修改合同起始日期、终止日期，确保不与已存在的合同有时间上的冲突。")]):a("p",[e._v("若您需要续签或变更合同条款，建议您返回后关闭当前流程，去要续签或变更的合同下\n        "),a("em",[e._v("发起补充协议")]),e._v("。若您一定要继续签这份合同，请点击继续。")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==e.collision.exceptionStage?a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("返回修改")]):a("div",[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("继续")])],1)],1)])],1)},Ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("快递服务")]),a("p",[e._v("请在此页面填写合同内容，填写完成并确认无误后点击“保存并预览”。")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("请在此页面填写合同内容，填写完成并确认无误后点击“保存并预览”。")])])}];a("9e76"),a("2b45");function Oe(){setTimeout((function(){var e=document.getElementsByClassName("is-error");e[0].querySelector("input").scrollIntoView({block:"center",behavior:"smooth"})}),1)}var Ee=function(e){var t=/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},ze=function(e,t,a){var i=new Date(e),s=new Date(t),n=s.getTime()-i.getTime();return!(n<0)&&Math.floor(n/864e5)>=a},Fe=function(e){var t=/^1[3|4|5|6|7|8|9][0-9]\d{8}$|^0\d{2,3}-?\d{7,8}$/;return t.test(e)},Me=function(e){var t=/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_-]|["',，.。/、\]\[【】\\n\s！!?？——_<>%;‘’；)《（）》(&+=`“”·*#@@]){0,}$/,a=/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return!(""!==e&&!t.test(e)||a.test(e))},Pe=function(e){var t=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;return t.test(e)};function Ye(){return{validator:function(e,t,a){""==t||void 0==t||null==t?a(new Error("请输入联系电话")):Fe(t)||""==t?a():a(new Error("请输入正确的电话号码或者固话号码"))},trigger:"blur"}}var je=function(e,t,a){""==t?a(new Error("请输入")):Me(t)?a():a(new Error("不能输入特殊字符"))};function $e(){return{validator:function(e,t,a){""==t?a(new Error("请输入邮箱")):Ee(t)?a():a(new Error("请输入正确的邮箱"))},trigger:"blur"}}function He(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return[{required:t,message:"请输入",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 ".concat(e," 个字符"),trigger:"blur"},{validator:je,trigger:"blur"}]}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=3==e?/^\d{1,3}$/:/^\d{1,30}$/;return{validator:function(a,i,s){""==i?s(new Error("请输入")):t.test(i)?s():s(new Error("只能输入".concat(e,"位整数")))},trigger:"blur"}}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:31;return{validator:function(a,i,s){i<e||i>t?s(new Error("只能输入".concat(e,"到").concat(t,"的整数"))):s()},trigger:"blur"}}function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ae={name:"step1",props:["templateType","contractId","mainContractInfo"],data:function(){var e=this;return{centerDialogVisible:!1,contractCommonInfo:{code:"",startDate:"2019-12-12",endDate:"2019-12-13"},companyCustomerInfo:{type:1,name:"5656",address:"55665",legalPerson:"5665",contacts:"134",telephone:"13419647611",email:"555@qq.com",place:"565665",idNumber:""},ownInfo:{name:"455445",address:"4554",legalPerson:"54654",contacts:"4545",telephone:"13419647611",email:"1444@qq.com",accountName:"5656",openBank:"555",accountNum:"4455",place:"454554"},settlementInfo:{needBond:!0,cycle:1,bond:"5",bondDate:"14",startDate:5,checkBill:10,feedBack:5,PayBill:10,falsify:"6"},signInfo:{firstParty:"545",secondParty:"4554",firstAuthorized:"56",secondAuthorized:"456",firstDate:"",secondDate:""},rules:{startDate:[{required:!0,message:"请选择日期",trigger:"change"},{validator:function(t,a,i){var s=e.contractCommonInfo.endDate;console.log(s,a),ze(a,s,1)?i():i(new Error("开始日期不能大于或等于结束日期"))},trigger:"change"}],endDate:[{required:!0,message:"请选择日期",trigger:"change"},{validator:function(t,a,i){var s=e.contractCommonInfo.startDate;ze(s,a,1)?i():i(new Error("结束日期不能小于或等于开始日期"))},trigger:"change"}],type:[{required:!0,message:"请选择",trigger:"change"}],name:He(20),legalPerson:He(20),contacts:He(20),accountName:He(20),openBank:He(20),firstAuthorized:He(20),secondAuthorized:He(20),place:He(50),address:He(50),telephone:[Ye()],email:[$e()],idNumber:[{validator:function(t,a,i){var s=e.companyCustomerInfo.type;2==s?i():""==a?i(new Error("请输入身份证号")):Pe(a)?i():i(new Error("请输入正确的身份证号"))},trigger:"blur"}],feedBack:[Ve()],PayBill:[Ve()],region:[{required:!0,message:"请选择附件类型",trigger:"change"}],date:[Re()],checkBill:[Re()],accountNum:[Ve(30)],aLegalPerson:[{validator:function(t,a,i){var s=e.companyCustomerInfo.type;2==s?i():je(t,a,i)},trigger:"blur"}],bondDate:[{validator:function(t,a,i){var s=e.settlementInfo.type,n=/^\d{1,3}$/;s?""==a?i(new Error("请输入")):n.test(a)?i():i(new Error("只能输入3位整数")):i()},trigger:"blur"}]},labelWidth:"100px",labelPosition:"left",formArr:["refContractCommonInfo","refCompanyCustomerInfo","refOwnInfo","refSettlementInfo","refSignInfo"],startPickerOptions:{disabledDate:function(t){var a=e.contractCommonInfo.endDate;return t.getTime()>new Date(a).getTime()-864e5}},endPickerOptions:{disabledDate:function(t){var a=e.contractCommonInfo.startDate;return t.getTime()<new Date(a).getTime()}},collision:{exceptionStage:1,contractCount:0,mainContractInfo:{contractCode:"",idNumber:"",contractSubject:"",contractStatus:"",effectiveDate:"",terminateDate:""}},isEdit:!1}},mounted:function(){},methods:{fromValidate:function(e){var t=this;return new Promise((function(a,i){t.$refs[e].validate((function(e){e||Oe(),a(e)}))}))},onSave:function(){var e=Ne(regeneratorRuntime.mark((function e(t){var a,i,s,n,l,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=!0,i=0;case 2:if(!(i<this.formArr.length)){e.next=14;break}return s=this.formArr[i],e.next=6,this.fromValidate(s);case 6:if(n=e.sent,n){e.next=11;break}return console.log(n,"444"),a=!1,e.abrupt("break",14);case 11:i++,e.next=2;break;case 14:if(a){e.next=16;break}return e.abrupt("return");case 16:if(console.log(this.templateType,"444"),l={mainContractInfo:{contractCommonInfo:Ue({},this.contractCommonInfo,{templateType:this.templateType}),companyCustomerInfo:this.companyCustomerInfo,ownInfo:this.ownInfo,settlementInfo:this.settlementInfo,signInfo:this.signInfo},currentStage:1},delete l.mainContractInfo.contractCommonInfo.code,2==this.$parent.isEdit&&(l.contractId=this.contractId),t&&(l.pass=t),2!=this.$parent.isEdit){e.next=27;break}return e.next=24,Object(c["dd"])(l);case 24:e.t0=e.sent,e.next=30;break;case 27:return e.next=29,Object(c["t"])(l);case 29:e.t0=e.sent;case 30:if(o=e.t0,!o.status){e.next=39;break}if(r=o.result.exceptionStage,!r||1!=r&&2!=r){e.next=37;break}return this.collision=o.result,this.centerDialogVisible=!0,e.abrupt("return");case 37:this.$parent.contractId=o.result.id,this.$emit("change",1);case 39:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onConfirm:function(){this.onSave(!0)},verificationNumber:function(e,t){this[e][t]=this[e][t].match(/^\d*(\.?\d{0,2})/g)[0]||""},onChangeBond:function(e){e||(this.settlementInfo.bond="",this.settlementInfo.bondDate="")},onChangeLegalPerson:function(e){1===e?this.companyCustomerInfo.legalPerson="":this.companyCustomerInfo.idNumber=""},setFromData:function(e){var t=e.contractCommonInfo,a=e.companyCustomerInfo,i=e.ownInfo,s=e.settlementInfo,n=e.signInfo;this.contractCommonInfo=t,this.companyCustomerInfo=a,this.ownInfo=i,this.settlementInfo=s,this.signInfo=n}},watch:{mainContractInfo:{handler:function(e){"{}"!=JSON.stringify(e)&&this.setFromData(e)},immediate:!0},"companyCustomerInfo.name":{handler:function(e){this.signInfo.firstParty=e},deep:!0},"ownInfo.name":{handler:function(e){this.signInfo.secondParty=e},deep:!0}},filters:{filterDate:function(e){return I()(e).format("YYYY-MM-DD")}}},Be=Ae,We=(a("84ff"),Object(b["a"])(Be,Te,Ie,!1,null,"0467c5fb",null)),Le=We.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step1"},[a("div",{staticClass:"box title"},[e._m(0),0===e.tableData.length?a("upload",{attrs:{btnName:"上传价格表"},on:{change:e.onChange}}):a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("下一步")])],1),a("div",{staticClass:"box"},[a("h3",[e._v("价格表上传")]),a("p",[e._v("当前仅支持上传一份文件，如有多份价格表，请做在一个文件中。 支持上传word, excel, pdf。")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"attachmentTypeDesc",label:"类型",width:"180"}}),a("el-table-column",{attrs:{prop:"attachmentName",label:"名称",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"routeName",label:"上传文件","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"otter"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.onDownload(t.row.fileName)}}},[e._v("下载 ")]),a("upload",{ref:"refUpload",attrs:{btnName:"重新上传",type:"text"},on:{change:e.onChange}})],1)]}}])})],1)],1)])},Ze=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("快件寄递价格协议")]),a("p",[e._v("请上传与客户约定的价格表，确认无误后点击“下一步”。")])])}],Qe=(a("cc57"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,headers:e.headersUpload,name:"uploadfile",data:e.uploadParams,accept:e.accept,"show-file-list":!1,"file-list":e.fileList,multiple:e.multiple,limit:50,"on-success":e.handleAvatarSuccess,"auto-upload":e.autoUpload,"before-upload":e.beforeUpload,"with-credentials":!0,"on-change":e.onChange}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:e.type},domProps:{innerHTML:e._s(e.btnName)},slot:"trigger"})],1)}),Je=[],Xe=a("a2e5"),Ke=window.$$global.surroundings,et={name:"upload",props:{type:{type:String,default:"primary"},btnName:{type:String,default:"添加"},accept:{type:String,default:'.xlsx,.xls,.doc,.docx,.pdf"'},group:{type:String,default:"private"},multiple:{type:Boolean,default:!1},autoUpload:{type:Boolean,default:!0},maxSize:{type:Number,default:5},isLeaflet:{type:Boolean,default:!0}},data:function(){return{uploadParams:{},fileList:[]}},methods:{beforeUpload:function(){var e=Ne(regeneratorRuntime.mark((function e(t){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.name.substring(t.name.lastIndexOf(".")+1),i=t.size/1024/1024<this.maxSize,i){e.next=6;break}return this.$message.error("上传文件大小不能超过".concat(this.maxSize,"M")),reject(),e.abrupt("return",!1);case 6:return e.next=8,this.getSignature(a);case 8:if(s=e.sent,s){e.next=12;break}return reject(),e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSignature:function(){var e=Ne(regeneratorRuntime.mark((function e(){var t,a,i,s,n,l,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"jpg",e.next=3,Object(c["Jb"])();case 3:if(a=e.sent,a.status){e.next=6;break}return e.abrupt("return",!1);case 6:return i=a.result,s=i.timestamp,n=i.nonce,l=i.sign,this.uploadParams={group:this.group,appid:this.appId,ext:t,signature:l,nonce:n,timestamp:s},e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAvatarSuccess:function(e,t){this.$emit("change",e,t)},delFile:function(){var e=Ne(regeneratorRuntime.mark((function e(t){var a,i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSignature();case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return",!1);case 5:i=this.uploadParams.sign,s={appid:this.appId,remoteFileId:t,signature:i},n=this.fileBackUrl+"DeleteFile/",Object(Xe["d"])(n,s).then((function(e){e.status&&console.log(e,"444")}));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitUpload:function(){this.$refs.upload.submit()},onChange:function(e,t){this.$emit("input",e.name),this.isLeaflet&t.length>1&&(this.fileList=t.slice(-1))}},computed:{uploadUrl:function(){return Ke>2?"http://fs.test.ztosys.com/UploadFile":"https://fs.zto.com/UploadFile"},fileBackUrl:function(){return Ke>2?"http://fs.test.ztosys.com/":"https://fs.zto.com/"},appId:function(){return Ke>2?"FSTEST":"ztadxNaFnwWYmXC1JgQ7hZaQ"},headersUpload:function(){return{"x-debug":!0,"x-zop-ns":"shenzhou-bills"}}}},tt=et,at=(a("a3ef"),Object(b["a"])(tt,Qe,Je,!1,null,"3ca69332",null)),it=at.exports,st={name:"step2",components:{upload:it},props:["templateType","contractId"],data:function(){return{tableData:[]}},mounted:function(){2==this.$parent.isEdit&&this.getList()},methods:{indexMethod:function(e){return 2*e},onSave:function(){this.$emit("change",2)},onDownload:function(e){var t={remoteFileId:e};Object(c["fc"])(t).then((function(e){e.status&&window.open(e.result)}))},getList:function(){var e=this,t={contractId:this.contractId,attachmentType:2};Object(c["gc"])(t).then((function(t){t.status&&t.result&&(e.tableData=t.result)}))},onChange:function(e,t){var a=this,i=e.result.fileName,s=t.name;if(this.tableData.length>0){var n=this.tableData[0].id,l={fileName:i,routeName:s,id:n};Object(c["cd"])(l).then((function(e){e.status&&(a.$refs.refUpload.delFile(i),a.getList())}))}else{var o={attachmentType:2,attachmentName:"快件寄递价格协议",routeName:s,fileName:i,contractId:this.contractId};Object(c["s"])(o).then((function(e){e.status&&a.getList()}))}}}},nt=st,lt=(a("6298"),Object(b["a"])(nt,Ge,Ze,!1,null,"6e4a67f0",null)),ot=lt.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step1"},[a("div",{staticClass:"box title"},[e._m(0),a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("下一步")])],1),e._m(1)])},ct=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("快件寄递安全协议")]),a("p",[e._v("请阅读协议内容，确认无误后点击“下一步”。")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("h3",[e._v("预览协议内容")])])}],ut={name:"step3",props:["templateType","contractId"],data:function(){return{tableData:[]}},methods:{onSave:function(){this.$emit("change",3)}}},dt=ut,ht=(a("a2b4"),Object(b["a"])(dt,rt,ct,!1,null,"15f87a18",null)),mt=ht.exports,pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step1"},[a("div",{staticClass:"box title"},[e._m(0),a("el-button",{attrs:{disabled:e.nextDisabled,type:"primary"},on:{click:e.onSave}},[e._v("下一步")])],1),a("div",{staticClass:"box"},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary",disabled:e.nextDisabled},on:{click:e.onAdd}},[e._v("添\n      "),a("i",[e._v("一")]),e._v("加")]),a("h3",[e._v("其他附件列表")]),a("p",[e._v("当前每个附件仅支持上传一份文件，如有多份内容，请做在一个文件中。支持上传word, excel, pdf。")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"attachmentTypeDesc",label:"附件类型"}}),a("el-table-column",{attrs:{prop:"attachmentName",label:"附件名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"routeName",label:"上传文件","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:""!=t.row.fileName?"":"red-cell"},[e._v(e._s(t.row.routeName))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"btn-box"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=t.row.fileName,expression:"scope.row.fileName != ''"}],staticClass:"red",attrs:{size:"mini",type:"text"},on:{click:function(a){return e.onDel(t.row)}}},[e._v("删除")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=t.row.fileName,expression:"scope.row.fileName != ''"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.onDownload(t.row.fileName)}}},[e._v("下载 ")]),a("upload",{ref:"refUpload1",attrs:{btnName:""==t.row.fileName?"点击上传":"重新上传",type:"text",size:"mini"},on:{change:function(a,i){e.onChange(a,i,t.row)}}})],1)]}}])})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"340px",center:"","modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{staticClass:"pop"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"附件类型",prop:"attachmentChildType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.attachmentChildType,callback:function(t){e.$set(e.ruleForm,"attachmentChildType",t)},expression:"ruleForm.attachmentChildType"}},e._l(e.attachmentTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"附件名称",prop:"attachmentName"}},[a("el-input",{attrs:{placeholder:"请填写"},model:{value:e.ruleForm.attachmentName,callback:function(t){e.$set(e.ruleForm,"attachmentName",t)},expression:"ruleForm.attachmentName"}})],1),a("el-form-item",{attrs:{label:"上传文件",prop:"routeName"}},[a("el-input",{attrs:{disabled:"",placeholder:"尚未上传"},model:{value:e.ruleForm.routeName,callback:function(t){e.$set(e.ruleForm,"routeName",t)},expression:"ruleForm.routeName"}}),a("upload",{ref:"refUpload2",staticClass:"pop-upload",attrs:{btnName:""!=e.ruleForm.routeName?"重新上传":"点击上传",type:"text",autoUpload:!1},on:{change:e.onChange},model:{value:e.ruleForm.routeName,callback:function(t){e.$set(e.ruleForm,"routeName",t)},expression:"ruleForm.routeName"}}),a("p",[e._v("支持上传word, excel, pdf,最大5MB")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)])],1)},bt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("其他附件")]),a("p",[e._v("在此页面添加上传其他附件或补充协议，无其他附件请直接点击“下一步”。")])])}],ft={name:"step4",components:{upload:it},props:["templateType","contractId","contractType"],data:function(){return{tableData:[],centerDialogVisible:!1,ruleForm:{attachmentName:"",attachmentChildType:"",routeName:""},rules:{attachmentName:[{required:!0,message:"请输入附件名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],attachmentChildType:[{required:!0,message:"请选择附件类型",trigger:"change"}],routeName:[{required:!0,message:"请上传附件",trigger:"change"}]},attachmentTypeOptions:[{label:"其他附件",value:41},{label:"营业执照",value:42},{label:"身份证",value:43}]}},created:function(){this.getList()},methods:{indexMethod:function(e){return e+1},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$refs.refUpload2.submitUpload()}))},onSave:function(){this.$emit("change",4)},onDownload:function(e){var t={remoteFileId:e};Object(c["fc"])(t).then((function(e){e.status&&window.open(e.result)}))},getList:function(){var e=this,t={contractId:this.contractId,attachmentType:4};Object(c["gc"])(t).then((function(t){t.status&&t.result&&(e.tableData=t.result)}))},onDel:function(e){var t=this,a=e.id,i=e.fileName,s={id:a,contractId:this.contractId};Object(c["P"])(s).then((function(e){e.status&&(t.$refs.refUpload1.delFile(i),t.getList())}))},onChange:function(e,t,a){var i=this,s=e.result.fileName;if(a){var n=a.id,l={fileName:s,id:n,routeName:t.name};Object(c["cd"])(l).then((function(e){if(e.status){try{i.$refs.refUpload1.delFile(s)}catch(t){i.$refs.refUpload2.delFile(s)}i.getList()}}))}else{var o=this.ruleForm,r=o.attachmentName,u=o.attachmentChildType,d=o.routeName,h={attachmentType:4,attachmentName:r,fileName:s,attachmentChildType:u,routeName:d,contractId:this.contractId};Object(c["s"])(h).then((function(e){e.status&&(i.getList(),i.centerDialogVisible&&(i.centerDialogVisible=!1,i.$refs.ruleForm.resetFields()))}))}},onAdd:function(){if(this.tableData.length>100)return this.$message.warning("附件最多只能上传100个"),!1;this.centerDialogVisible=!0}},computed:{nextDisabled:function(){return!1}}},yt=ft,vt=(a("9857"),Object(b["a"])(yt,pt,bt,!1,null,"15042ad8",null)),gt=vt.exports,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step5"},[a("div",{staticClass:"box title"},[e._m(0),a("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("确认提交")])],1),a("div",{staticClass:"box"},[a("h3",[e._v("合同明细表")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"attachmentTypeDesc",label:"类型"}}),a("el-table-column",{attrs:{prop:"attachmentName",label:"名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.onReturn(t.row)}}},[e._v("返回确认 ")])]}}])})],1)],1),a("div",{staticClass:"box box-border"},[a("h3",[e._v("主合同信息")]),a("ul",[a("li",[a("span",[e._v("合同编号")]),a("div",[e._v(e._s(e.contractCommonInfo.code))])]),a("li",[a("span",[e._v("合同生效日期")]),a("div",[e._v(e._s(e._f("filterDate")(e.contractCommonInfo.startDate)))])]),a("li",[a("span",[e._v("合同生效日期")]),a("div",[e._v(e._s(e._f("filterDate")(e.contractCommonInfo.endDate)))])])])]),a("div",{staticClass:"box"},[a("h3",[e._v("甲方信息")]),a("ul",[a("li",{staticClass:"mb20"},[a("span",[e._v("合同主体")]),a("div",[e._v(e._s(e.companyCustomerInfo.name))])]),1==e.companyCustomerInfo.type?a("li",{staticClass:"mb20"},[a("span",[e._v("身份证号码")]),a("div",[e._v(e._s(e.companyCustomerInfo.idNumber))])]):e._e(),a("li",{staticClass:"mb20"},[a("span",[e._v("客户类型")]),a("div",[e._v(e._s(e._f("filterType")(e.companyCustomerInfo.type)))])]),a("li",{staticClass:"mb20 w100"},[a("span",[e._v("住所地")]),a("div",{staticClass:"w430"},[e._v(e._s(e.companyCustomerInfo.place))])]),2==e.companyCustomerInfo.type?a("li",{staticClass:"mb20 w100"},[a("span",[e._v("法定代表人")]),a("div",[e._v(e._s(e.companyCustomerInfo.legalPerson))])]):e._e(),a("li",{staticClass:"mb20 "},[a("span",[e._v("联系人")]),a("div",[e._v(e._s(e.companyCustomerInfo.telephone))])]),a("li",{staticClass:"mb20 "},[a("span",[e._v("联系电话")]),a("div",[e._v(e._s(e.companyCustomerInfo.contacts))])]),a("li",{staticClass:"mb20 "},[a("span",[e._v("联系邮箱")]),a("div",[e._v(e._s(e.companyCustomerInfo.email))])]),a("li",{staticClass:"mb20 w100"},[a("span",[e._v("联系地址")]),a("div",{staticClass:"w430"},[e._v(e._s(e.companyCustomerInfo.address))])])])])])},xt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("客户合同申请确认")]),a("p",[e._v("请认真检查，确认无误后提交。")])])}],kt={name:"step5",props:{mainContractInfo:{type:Object},templateType:{type:[String,Number],default:""},contractId:{type:[String,Number],default:""}},filters:{filterDate:function(e){return I()(e).format("YYYY-MM-DD")},filterType:function(e){return 2==e?"企业客户":"个人客户"}},data:function(){return{contractCommonInfo:{code:"",startDate:"",endDate:""},companyCustomerInfo:{type:1,name:"",address:"",legalPerson:"",contacts:"",telephone:"",email:"",place:"",idNumber:""},tableData:[]}},mounted:function(){this.getAnnexList()},methods:{onSave:function(){var e=this,t={contractStatus:2,id:this.contractId,currentStage:5};Object(c["ed"])(t).then((function(t){t.status&&(e.$message.success("提交成功"),setTimeout((function(){e.$emit("model",!0)}),2e3))}))},indexMethod:function(e){return e+1},onReturn:function(e){this.$parent.isEdit=2;var t=e.attachmentType;this.$parent.onChange(t-1)},getAnnexList:function(){var e=this,t={contractId:this.contractId};Object(c["gc"])(t).then((function(t){t.status&&(e.tableData=t.result)}))}},watch:{mainContractInfo:{handler:function(e){if(JSON.stringify(e)!={}){var t=e.contractCommonInfo,a=e.companyCustomerInfo;this.contractCommonInfo=t,this.companyCustomerInfo=a}},deep:!0,immediate:!0}}},Dt=kt,wt=(a("dee1"),Object(b["a"])(Dt,Ct,xt,!1,null,"01ce73f9",null)),St=wt.exports,_t={name:"process",components:{step1:Le,step2:ot,step3:mt,step4:gt,step5:St},data:function(){return{templateType:"",contractId:"",processActive:0,centerDialogVisible:!1,isClose:0,mainContractInfo:{},isEdit:1}},computed:{contractType:function(){var e=this.mainContractInfo.companyCustomerInfo;return e?e.type:""}},methods:{onChange:function(){var e=Ne(regeneratorRuntime.mark((function e(t){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>1)){e.next=8;break}return a={contractId:this.contractId,currentStage:t},e.next=4,Object(c["dd"])(a);case 4:if(i=e.sent,i.status){e.next=7;break}return e.abrupt("return");case 7:3==t&&JSON.stringify(this.mainContractInfo)=={}&&this.getData();case 8:this.processActive=t;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onPause:function(e){this.isClose=e,this.centerDialogVisible=!0},onConfirm:function(){if(2!=this.isEdit||1!=this.isClose){if(1!=this.isClose)return 1==this.isEdit&&0===this.isClose?(this.centerDialogVisible=!1,void(this.$parent.tabShow="defaults")):void this.onModel();this.close()}else this.close()},onModel:function(e){var t=this;if(this.$parent.process=!1,e)this.close();else{var a={contractId:this.contractId};Object(c["J"])(a).then((function(e){e.status&&(t.$message.success("关闭成功"),setTimeout((function(){t.centerDialogVisible=!1,t.close()}),500))}))}},close:function(e){this.$parent.tabShow="defaults",1===this.isEdit?this.$parent.$refs.customerContractRef.searchAct():this.$parent.$refs.customerContractRef.query(),this.centerDialogVisible=!1},getData:function(){var e=this,t={contractId:this.contractId};Object(c["hc"])(t).then((function(t){if(t.status){var a=t.result.mainContractInfo;e.mainContractInfo=a}}))},onOperating:function(e){var t=e.type,a=e.row;if(this.isEdit=t,1==t)this.processActive=0,this.templateType=e.templateType;else{var i=a.id,s=a.templateType,n=a.currentStage;this.contractId=i,this.templateType=s,this.processActive=n,this.getData()}}}},Nt=_t,Tt=(a("870e"),Object(b["a"])(Nt,we,Se,!1,null,"5aec227e",null)),It=Tt.exports,Ot={name:"customerContractManage",components:{customerContract:y,maintainInfo:D,contractInfo:De,contractProcess:It},data:function(){return{activeName:"tab1",tabShow:"defaults",contractObj:{}}},methods:{onTabClick:function(){},goto:function(e,t){var a=this;this.tabShow=e,"contractInfo"==e?(this.contractObj=Object(G["cloneDeep"])(t.row),this.$nextTick((function(){a.$refs.contractInfo.init()}))):"process"==e&&this.$nextTick((function(){a.$refs.refProcess.onOperating(t)}))}}},Et=Ot,zt=Object(b["a"])(Et,i,s,!1,null,null,null);t["default"]=zt.exports},6917:function(e,t,a){},6932:function(e,t,a){},"69c7":function(e,t,a){"use strict";var i=a("1c77"),s=a.n(i);s.a},"6acc":function(e,t,a){},"6c8c":function(e,t,a){"use strict";var i=a("8c8c"),s=a.n(i);s.a},"6d24":function(e,t,a){var i=a("e7ad").parseFloat,s=a("777a").trim;e.exports=1/i(a("9769")+"-0")!==-1/0?function(e){var t=s(String(e),3),a=i(t);return 0===a&&"-"==t.charAt(0)?-0:a}:i},"6f2a":function(e,t,a){"use strict";var i=a("278a"),s=a.n(i);s.a},7211:function(e,t,a){"use strict";var i=a("82bf"),s=a.n(i);s.a},"723c":function(e,t,a){},7355:function(e,t,a){"use strict";var i=a("723c"),s=a.n(i);s.a},"738c":function(e,t,a){"use strict";var i=a("3351"),s=a.n(i);s.a},"73a7":function(e,t,a){},"73b1":function(e,t,a){"use strict";var i=a("bfe1"),s=a.n(i);s.a},"73c6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendReceiveFeeDetail2"},[a("div",{staticClass:"sz-search"},[a("div",{staticClass:"leftCol"},[a("sc-bill-code",{ref:"billcodeRef",nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticClass:"rightMain"},[a("div",{staticStyle:{display:"inline-block"}},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("账单类型：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("li",[a("label",[e._v("网点：")]),a("sc-site",{model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1)])])]),a("div",{staticStyle:{display:"inline-block",clear:"left","margin-left":"20px"}},[a("el-button",{staticClass:"m-b-16",attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{staticClass:"m-b-16",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1)])},s=[],n=(a("5ab2"),a("6d57"),a("e10e"),a("9a33"),a("f548"),a("ac9f")),l=(a("163d"),a("ac0d")),o=a("a3be"),r=a("391c"),c=a("f37e");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={mixins:[l["b"]],name:"sendReceiveFee",components:{},data:function(){var e=this;return{billCode:"",billType:0,limit:31,optionsClone:"",timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],siteId:"",tableHeadNew:{rowStyle:function(e){if(4===Number(e.billStatus)||6===Number(e.billStatus))return{foreColor:"#ff0000"}},columns:[]},tableData:[],tableHead:{rowStyle:function(e){if(4===Number(e.billStatus)||6===Number(e.billStatus))return{foreColor:"#ff0000"}},columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,hlock:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"网点",name:"scanSiteName",size:100,hlock:!0},{displayName:"扣款状态",name:"billStatus",size:100,hlock:!0,value:function(e){return Object(c["m"])(Number(e.billStatus))}},{displayName:"包号",name:"bagCode",size:150,hlock:!0,isCode:!0},{displayName:"账单日期",name:"billTime",size:120,hlock:!0,isFrozen:!0,formatter:"yyyy-MM-dd"},{displayName:"扫描时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"首重时间",name:"firstWeightTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName",size:100,isCode:!0},{displayName:"客户编码",name:"customerCode",size:100,isCode:!0},{displayName:"业务员",name:"scanUserName",size:100,isCode:!0},{displayName:"业务员工号",name:"scanUserCode",size:100,isCode:!0},{displayName:"账单类型",name:"type",size:100,value:function(e){return Object(c["c"])(Number(e.type))}},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:100,isCode:!0},{displayName:"运输方式",name:"classType",size:100,value:function(e){return Object(c["C"])(Number(e.classType))}},{displayName:"产品类型",name:"productName",size:100},{displayName:"物品类型",name:"goodsType",size:100,value:function(e){return Object(c["q"])(Number(e.goodsType))}},{displayName:"目的地省",name:"dispProvName",size:100,isCode:!0},{displayName:"目的地市",name:"dispCityName",size:100,isCode:!0},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"网点重量",name:"recWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"中心重量",name:"centerWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"派件网点",name:"dispSiteName",size:100,isCode:!0},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收状态",name:"signStatus",size:100,value:function(e){return Object(c["x"])(Number(e.signStatus))}},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"面单费",name:"szBillFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"中转费/运费/均重费",name:"szCenterFee",size:150,showTotal:!0,formatter:"0.00"},{displayName:"操作费/附加费/加收费",name:"operAddFee",size:150,showTotal:!0,formatter:"0.00"},{displayName:"手工运费",name:"commonFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"业务员提成",name:"userRoyalty",size:100,showTotal:!0,formatter:"0.00"},{displayName:"是否均重",name:"avgStatus",size:100,value:function(e){return Object(c["s"])(Number(e.avgStatus))}},{displayName:"是否锁定",name:"lockStatus",size:100,value:function(e){return Object(c["s"])(Number(e.lockStatus))}},{displayName:"锁定/解锁时间",name:"lockTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"锁定/解锁人",name:"lockManName",size:100,isCode:!0},{displayName:"退件标识",name:"returnStatus",size:100,value:function(e){return Object(c["s"])(Number(e.returnStatus))}},{displayName:"问题件",name:"problemPiecesType",size:100,value:function(e){return Object(c["s"])(Number(e.problemPiecesType))}},{displayName:"面单类型",name:"billType",size:100,value:function(e){return Object(c["t"])(Number(e.billType))}},{displayName:"数据来源",name:"dataSource",size:100,value:function(e){return Object(c["h"])(Number(e.dataSource))}},{displayName:"运单发放",name:"billProvideManName",size:100,isCode:!0},{displayName:"运单发放网点",name:"billUseSiteName",size:100,isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"扣款人",name:"hexiaoMan",size:100,isCode:!0},{displayName:"首次扣款金额",name:"hexiaoFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"修改时间",name:"gmtModified",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"修改人",name:"editor",size:100,isCode:!0},{displayName:"订单来源",name:"orderSource",size:100,isCode:!0},{displayName:"订单编号",name:"orderCode",size:100,isCode:!0},{displayName:"交易号",name:"partnerTradeId",size:100,isCode:!0},{displayName:"订单重量",name:"parcelWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扫描员",name:"scanName",size:100,isCode:!0},{displayName:"扫描员工号",name:"scanCode",size:100,isCode:!0},{displayName:"总成本",name:"totalCost",size:100,showTotal:!0,formatter:"0.00",dblclick:function(t,a){e.showDig(a)}},{displayName:"订单信息",name:"consigneeInfo"},{displayName:"收件信息",name:"recInfo"},{displayName:"到件信息",name:"comeInfo"},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]}}},created:function(){this.tableHeadNew=Object(r["cloneDeep"])(d({},this.tableHead)),this.z_method.refreshSpread()},methods:{keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},onSearch:function(){this.currRow=[];var e="",t="收件";if(this.billCode){console.log("has billCode..");var a=Object(r["trim"])(this.billCode).split(/[\r\n]/);if(a.length>1e3)return void this.msg("最多支持1000个运单号查询");e=a.join(",")}else{var i=!1;if(3===this.timeValue.length){if(this.timeValue[2]<0)return void this.msg(t+"开始时间不能大于结束时间,请重新选择"+t+"时间");if(this.limit<=this.timeValue[2])return void this.msg(t+"时间最多可查询"+this.limit+"天");!0}else if(this.timeValue[0]&&this.timeValue[1]||(i=!0),i)return void this.msg("请填写完整的"+t+"时间")}this.pagination.currentPage=1;var s={billCode:"",siteId:this.siteId,start:null==this.timeValue[0]?"":this.timeValue[0],end:null==this.timeValue[1]?"":this.timeValue[1],pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};e&&(s.billCodes=e),this.optionsClone=Object(r["cloneDeep"])(s),this.query(s)},query:function(e){var t=this;Object(o["Ec"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},reset:function(){this.billCode="",this.siteId="",this.timeValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],this.$refs.billcodeRef.type=!0}},computed:{contentHeight:function(){return this.z_param.isNode,this.$store.getters.clientHeight-200}}},m=h,p=(a("01ad"),a("623f")),b=Object(p["a"])(m,i,s,!1,null,null,null);t["default"]=b.exports},"740a":function(e,t,a){"use strict";var i=a("e96f"),s=a.n(i);s.a},"75c0":function(e,t,a){"use strict";var i=a("e9d4"),s=a.n(i);s.a},"76fc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总",name:"tab1"}},[a("summaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detailH",{ref:"detailed"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main fengChaoBillsDetail"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left","margin-top":"5px"}},[a("sc-bill-code",{ref:"billcodeRef",nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",[a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("收件时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("结算对象：")]),a("sc-users",{attrs:{type:"7",param:{types:"0,2,4"}},on:{change:e.checkSettlementType},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("业务员：")]),a("sc-users",{attrs:{type:"2"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1)])]),a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("签收状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.signStatus,callback:function(t){e.signStatus=t},expression:"signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",{staticStyle:{"margin-left":"41px"}},[a("label",[e._v("账单类型：")]),a("el-select",{model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:-1}},[e._v("全部")]),a("el-radio",{attrs:{label:1}},[e._v("有面单费")]),a("el-radio",{attrs:{label:0}},[e._v("无面单费")])],1)],1)])]),a("div",{staticClass:"dh_content",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[e.z_method.showBtn("btn_fengChaoBills_edit")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            编辑\n          ")])],1):e._e(),e.z_method.showBtn("btn_fengChaoBills_recalculate")?a("li",[a("el-button",{attrs:{type:"success",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            重新计算\n          ")])],1):e._e()])]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.isearchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],staticClass:"editT",attrs:{title:e.editTitle,visible:e.editDialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"560px",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[e.ishowEdit&&e.editDialogVisible?a("div",{staticClass:"edit"},[a("ul",[a("li",[a("label",[e._v("客户：")]),e.ishowEdit&&e.editDialogVisible?a("sc-users",{attrs:{type:"3","popper-class":"max-index"},model:{value:e.customerIdEdit,callback:function(t){e.customerIdEdit=t},expression:"customerIdEdit"}}):e._e(),a("label",[e._v("业务员：")]),e.ishowEdit&&e.editDialogVisible?a("sc-users",{attrs:{type:"2","popper-class":"max-index"},model:{value:e.userIdEdit,callback:function(t){e.userIdEdit=t},expression:"userIdEdit"}}):e._e()],1),a("li",[a("label",{staticStyle:{"line-height":"72px"}},[e._v("备注：")]),e.ishowEdit&&e.editDialogVisible?a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字！",maxlength:"30","show-word-limit":"",resize:"none",rows:"4"},model:{value:e.remarkText,callback:function(t){e.remarkText="string"===typeof t?t.trim():t},expression:"remarkText"}}):e._e()],1)])]):e._e(),!e.ishowEdit&&e.editDialogVisible?a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"label name"},[e._v("名称")]),a("div",{staticClass:"label checkbox"},[e._v("是否修改")]),a("div",{staticClass:"label"},[e._v("内容")])]),a("li",[a("div",{staticClass:"label name"},[e._v("客户：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.iscustomerIdEdit,callback:function(t){e.iscustomerIdEdit=t},expression:"iscustomerIdEdit"}})],1),a("div",{staticClass:"label input"},[!e.ishowEdit&&e.editDialogVisible?a("sc-users",{attrs:{type:"3","popper-class":"max-index",disabled:!e.iscustomerIdEdit},model:{value:e.customerIdEdit,callback:function(t){e.customerIdEdit=t},expression:"customerIdEdit"}}):e._e()],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("业务员：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.isuserIdEdit,callback:function(t){e.isuserIdEdit=t},expression:"isuserIdEdit"}})],1),a("div",{staticClass:"label input"},[!e.ishowEdit&&e.editDialogVisible?a("sc-users",{attrs:{type:"2","popper-class":"max-index",disabled:!e.isuserIdEdit},model:{value:e.userIdEdit,callback:function(t){e.userIdEdit=t},expression:"userIdEdit"}}):e._e()],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("备注：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.ismarkEdit,callback:function(t){e.ismarkEdit=t},expression:"ismarkEdit"}})],1),a("div",{staticClass:"label input"},[!e.ishowEdit&&e.editDialogVisible?a("el-input",{attrs:{maxlength:"30",disabled:!e.ismarkEdit},model:{value:e.remarkText,callback:function(t){e.remarkText="string"===typeof t?t.trim():t},expression:"remarkText"}}):e._e()],1)])])])]):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checkBillPost}},[e._v("确 定")])],1)]),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate},on:{model:e.close}})],1)},l=[],o=(a("5ab2"),a("e10e"),a("ac9f")),r=(a("6d57"),a("9a33"),a("f548"),a("163d"),a("ac0d")),c=a("391c"),u=a("a3be"),d=a("f37e"),h=a("4055");a("49a5");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={mixins:[r["b"]],data:function(){var e=this;return{ishowHeights:0,ishowHeight:0,billCode:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],limit:31,accountUserId:"",userId:"",signStatus:-1,signStatusOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:-1,label:"无对象"},{value:0,label:"客户"},{value:4,label:"业务员"},{value:2,label:"承包区"}],radio:-1,exportObj:{fileName:"收丰巢面单费-明细"},exportUrl:"/bills/fengchaoBill/export",optionsClone:"",currRow:[],tableData:[],tableHead:{columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,hlock:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"运单号",name:"billCode",size:150,hlock:!0,isFrozen:!0,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:100,isCode:!0},{displayName:"账单类型",name:"type",size:100,value:function(e){return Object(d["c"])(Number(e.type))}},{displayName:"收件时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName",size:100,isCode:!0},{displayName:"客户编码",name:"customerCode",size:100,isCode:!0},{displayName:"揽件业务员",name:"scanUserName",size:100,isCode:!0},{displayName:"揽件业务员工号",name:"scanUserCode",size:100,isCode:!0},{displayName:"面单费",name:"szBillFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"运单发放",name:"billProvideManName",size:100,isCode:!0},{displayName:"运单发放网点",name:"billUseSiteName",size:100,isCode:!0},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(d["x"])(Number(e.signStatus))}},{displayName:"退件标识",name:"returnStatus",size:100,value:function(e){return Object(d["s"])(Number(e.returnStatus))}},{displayName:"问题件",name:"problemPiecesType",size:100,value:function(e){return Object(d["s"])(Number(e.problemPiecesType))}},{displayName:"修改人",name:"editor",size:100,isCode:!0},{displayName:"修改时间",name:"gmtModified",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},editDialogVisible:!1,editTitle:"",batchTitle:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"",ishowEdit:!1,isuserIdEdit:!1,iscustomerIdEdit:!1,ismarkEdit:!1,customerIdEdit:"",userIdEdit:"",remarkText:""}},methods:{checkSettlementType:function(e){},detailed:function(e){var t=this;this.reset(),this.radio=1,this.dateValue=[this.moment(e.scanTime).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.scanTime).format("YYYY-MM-DD")+" 23:59:59"],this.billsTypeStatus=e.type,setTimeout((function(){e.accountUserId&&(t.accountUserId=e.accountUserId),t.onSearch()}),0)},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},reset:function(){this.billCode="",this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.accountUserId="",this.userId="",this.signStatus=-1,this.billsTypeStatus=-2,this.radio=-1},onSearch:function(){this.currRow=[];var e="";if(this.billCode){if(!h["billUtils"].regRemark(this.billCode))return void this.msg("单号不能有特殊符号和表情");var t=Object(c["trim"])(this.billCode).split(/[,\r\n]/);if(t.length>1e3)return void this.msg("最多支持1000个运单号查询");e=t.join(",")}else{if(this.dateValue[2]<0)return void this.msg("开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var a={scanTimeBegin:null==this.dateValue[0]?"":this.dateValue[0],scanTimeEnd:null==this.dateValue[1]?"":this.dateValue[1],accountUserId:this.accountUserId,scanUserId:this.userId,signStatus:this.signStatus,hasSzBillFee:this.radio,type:this.billsTypeStatus,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};e&&(a.billCode=e),this.optionsClone=Object(c["cloneDeep"])(a),this.query(a)},query:function(e){var t=this;Object(u["R"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},handleClose:function(){this.editDialogVisible=!1},checkBill:function(e){var t=this;0!==this.currRow.length?(this.batchTitle=e.toElement.innerText,"编辑"==this.batchTitle?(this.ishowEdit=!1,this.isuserIdEdit=!1,this.ismarkEdit=!1,this.iscustomerIdEdit=!1,this.customerIdEdit="",this.userIdEdit="",this.remarkText="",this.editTitle=(this.currRow.length>1?"批量":"")+this.batchTitle,this.ishowEdit=!1,1===this.currRow.length&&(this.ishowEdit=!0,this.remarkText=this.currRow[0].remark,setTimeout((function(){t.customerIdEdit=t.currRow[0].customerId,t.userIdEdit=t.currRow[0].scanUserId}),0)),this.editDialogVisible=!0):this.checkBillPost()):this.msg("请选择需要结算的数据！")},checkBillPost:function(){var e=this;if("重新计算"==this.batchTitle)this.currRow.forEach((function(t){t.scanDate=e.moment(t.scanTime).format("YYYY-MM-DD")})),this.currRow=Object(c["cloneDeep"])(this.currRow),this.batchUrl="/bills/fengchaoBill/recalculate";else if("编辑"==this.batchTitle){var t={};(this.ismarkEdit||1===this.currRow.length)&&(t.remark=this.remarkText?this.remarkText:""),(this.iscustomerIdEdit||1===this.currRow.length)&&(t.customerId=this.customerIdEdit?this.customerIdEdit:0),(this.isuserIdEdit||1===this.currRow.length)&&(t.scanUserId=this.userIdEdit?this.userIdEdit:0),1===this.currRow.length&&(t.accountUserId=0),t.forcedUpdate=1===this.currRow.length,this.currRow=this.currRow.map((function(e){return p({},t,{billCode:e.billCode})})),this.currRow=Object(c["cloneDeep"])(this.currRow),this.editDialogVisible=!1,this.batchUrl="/bills/fengchaoBill/forcedUpdate"}this.batchDialogVisible=!0},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))},close:function(){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},remarkText:{handler:function(e,t){h["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-230:this.$store.getters.clientHeight-300}}},f=b,y=(a("fb06"),a("623f")),v=Object(y["a"])(f,n,l,!1,null,null,null),g=v.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main fengChaoBillsSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",[a("li",[a("label",[e._v("收件日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("账单类型：")]),a("el-select",{model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{attrs:{type:"7",param:{types:"0,2,4"}},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1),a("li",[a("label",[e._v("扣款状态：")]),a("el-select",{model:{value:e.hexiaoStatus,callback:function(t){e.hexiaoStatus=t},expression:"hexiaoStatus"}},e._l(e.hexiaoStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[e.z_method.showBtn("btn_fengChaoBills_writeOn")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            扣预付款\n          ")])],1):e._e(),e.z_method.showBtn("btn_fengChaoBills_writeOff")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            线下收款\n          ")])],1):e._e(),e.z_method.showBtn("btn_fengChaoBills_cancelWriteOff")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            取消扣款\n          ")])],1):e._e(),e.z_method.showBtn("btn_fengChaoBills_editRemark")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            编辑备注\n          ")])],1):e._e()])]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRowNew,batchUrl:e.batchUrl,"data-validate":e.dataValidate,isJson:e.isJson},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑备注",visible:e.editDialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"500px",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("div",{staticClass:"edit"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("备注：")]),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字！",maxlength:"30","show-word-limit":"",resize:"none",rows:"4"},model:{value:e.remarkText,callback:function(t){e.remarkText="string"===typeof t?t.trim():t},expression:"remarkText"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.isdisabledFn},on:{click:e.checkBillPost}},[e._v("确 定")])],1)])],1)},x=[],k=(a("cc57"),{mixins:[r["b"]],data:function(){var e=this;return{ishowHeights:0,ishowHeight:0,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],limit:16,billsTypeStatus:-2,billsTypeOptions:[{value:-2,label:"全部"},{value:0,label:"客户"},{value:4,label:"业务员"},{value:2,label:"承包区"}],accountUserId:"",hexiaoStatus:-1,hexiaoStatusOptions:[{value:-1,label:"全部"},{value:1,label:"未扣款"},{value:2,label:"已线上扣款"},{value:3,label:"已线下收款"}],requestUrl:u["T"],exportObj:{fileName:"收丰巢面单费-汇总"},tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"收件日期",name:"scanTime",size:120,formatter:"yyyy-MM-dd"},{displayName:"扣款状态",name:"settlementStatus",value:function(e){return Object(d["n"])(Number(e.settlementStatus))}},{displayName:"结算对象",name:"accountUserName",size:120,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:120,isCode:!0},{displayName:"账单类型",name:"type",size:120,isCode:!0,value:function(e){return Object(d["c"])(Number(e.type))}},{displayName:"票数",name:"totalCount",size:120,showTotal:!0},{displayName:"面单费",name:"szBillFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"扣款金额",name:"settlementAmount",size:120,showTotal:!0,formatter:"0.00"},{displayName:"费用差额",name:"subFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"扣款人",name:"settlementOperator",isCode:!0},{displayName:"扣款时间",name:"settlementDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},currRow:[],batchTitle:"",batchDialogVisible:!1,columns:[],currRowNew:[],batchUrl:"",isJson:"",editDialogVisible:!1,remarkText:""}},methods:{close:function(){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()},handleClose:function(){this.editDialogVisible=!1},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},checkBill:function(e){0!==this.currRow.length?(this.batchTitle=e.toElement.innerText,this.columns=[{displayName:"签收日期",name:"scanTime",minWidth:"120"},{displayName:"结算对象",name:"accountUserName",minWidth:"120"}],"编辑备注"==this.batchTitle?(this.remarkText="",1===this.currRow.length&&this.currRow[0].remark&&(this.remarkText=this.currRow[0].remark),this.editDialogVisible=!0):this.checkBillPost()):this.msg("请选择需要结算的数据！")},checkBillPost:function(){var e=this;this.currRowNew=Object(c["cloneDeep"])(this.currRow),this.currRowNew.forEach((function(t){var a=e.moment(t.scanTime).format("YYYY-MM-DD");t.scanTime=a,t.scanDate=a,t.settlementAmount=t.szBillFee})),this.isJson=!1,"扣预付款"==this.batchTitle?this.batchUrl="/bills/fengchaoBill/settlementOnLine":"线下收款"==this.batchTitle?this.batchUrl="/bills/fengchaoBill/settlementOffLine":"取消扣款"==this.batchTitle?this.batchUrl="/bills/fengchaoBill/cancelSettlement":"编辑备注"==this.batchTitle&&(this.currRowNew.forEach((function(t){t.remark=e.remarkText})),this.editDialogVisible=!1,this.batchUrl="/bills/fengchaoBill/saveRemark"),this.batchDialogVisible=!0},dblclick:function(e,t,a){this.$emit("goto","tab2",t,this.tableHead.columns[a.col].name)},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始日期不能大于结束日期,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={scanTimeBegin:null==this.dateValue[0]?"":this.dateValue[0],scanTimeEnd:null==this.dateValue[1]?"":this.dateValue[1],type:this.billsTypeStatus,accountUserId:this.accountUserId,settlementStatus:this.hexiaoStatus,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["S"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},accountUserId:{handler:function(e){this.limit=e?31:16},deep:!0},remarkText:{handler:function(e,t){h["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-160:this.$store.getters.clientHeight-240},isdisabledFn:function(){return!("编辑备注"==this.batchTitle&&this.remarkText.length>0)}}}),D=k,w=(a("1b9a"),Object(y["a"])(D,C,x,!1,null,null,null)),S=w.exports,_={name:"fengChaoBills",components:{summaryH:S,detailH:g},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t)}}},N=_,T=(a("0419"),Object(y["a"])(N,i,s,!1,null,null,null));t["default"]=T.exports},"771c":function(e,t,a){"use strict";var i=a("285a"),s=a.n(i);s.a},7813:function(e,t,a){},7875:function(e,t,a){},"7a24":function(e,t,a){"use strict";var i=a("9e9a"),s=a.n(i);s.a},"7aa8":function(e,t,a){},"7e13":function(e,t,a){"use strict";var i=a("0a5d"),s=a.n(i);s.a},"7e1e":function(e,t,a){},"7e39":function(e,t,a){"use strict";var i=a("1186"),s=a.n(i);s.a},8132:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"billPreprocessPage"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待入账单",name:"waitingForAccountEntry"}},[a("waitingForAccountEntry",{attrs:{switchOptions:e.switchOptions},on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"信息缺失",name:"missingFinanceInformation"}},[a("missingFinanceInformation",{attrs:{switchOptions:e.switchOptions},on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"信息异常",name:"abnormalFinanceInformation"}},[a("abnormalFinanceInformation",{attrs:{switchOptions:e.switchOptions},on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"待调整重量",name:"waitingForWeightAdjustment"}},[a("waitingForWeightAdjustment",{attrs:{switchOptions:e.switchOptions},on:{goto:e.goto}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"waiting-for-account-entry"},[a("div",{staticClass:"search-big-box"},[a("sc-expand-collapse",{on:{input:e.toggle}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{attrs:{onlyBill:!1,twoText:e.nameArr},on:{typeChange:e.getType},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"label"},[a("span",{staticClass:"label"},[e._v("订单日期：")])]),a("div",{staticClass:"dateTimePicker"},[a("sc-date-picker",{ref:"datePicker",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:31,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("客户：")]),a("sc-users",{ref:"customer",staticClass:"short-input",attrs:{type:"3",placeholder:""},on:{change:e.custChange},model:{value:e.queryContent.custId,callback:function(t){e.$set(e.queryContent,"custId",t)},expression:"queryContent.custId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("是否入账单：")]),a("div",{staticClass:"special-label"},[a("el-select",{ref:"isAddBill",model:{value:e.queryContent.isAddBill,callback:function(t){e.$set(e.queryContent,"isAddBill",t)},expression:"queryContent.isAddBill"}},e._l(e.isAddBills,(function(e){return a("el-option",{key:e.state,attrs:{label:e.name,value:e.state}})})),1)],1)])]),a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("收发动作：")]),a("el-select",{ref:"recSend",model:{value:e.queryContent.recSend,callback:function(t){e.$set(e.queryContent,"recSend",t)},expression:"queryContent.recSend"}},e._l(e.recSends,(function(e){return a("el-option",{key:e.state,attrs:{label:e.name,value:e.state}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("7天内是否有任何扫描：")]),a("el-select",{ref:"noAnyOpt",model:{value:e.queryContent.noAnyOpt,callback:function(t){e.$set(e.queryContent,"noAnyOpt",t)},expression:"queryContent.noAnyOpt"}},e._l(e.noAnyOpts,(function(e){return a("el-option",{key:e.state,attrs:{label:e.name,value:e.state}})})),1)],1)]),a("ul",[a("li",[a("span",{staticClass:"description"},[e._v("说明：订单下单48小时内，本网点/下级网点/上级网点无收件无发件扫描记录的结果")])])])]),a("div",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)])])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[e.z_method.showBtn("btn_waitingForAccountEntry_reviewBill")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.showReviewBill}},[e._v("审核入账单")]):e._e(),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("reviewBill",{ref:"reviewBill",attrs:{checkedRows:e.checkedRows}}),a("szSupplement",{ref:"supplementRef",attrs:{width:600,checkedRows:e.checkedRows,checkKey:e.checkKey,editTitle:e.batchTitle,isBills:!1,isLogs:!1},on:{callBack:e.supplementaction}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:e.batchUrl},on:{model:e.close}})],1)},l=[],o=(a("9a33"),a("cc57"),a("163d"),a("ac0d")),r=a("a3be"),c=a("6bf2"),u=a.n(c),d=a("391c"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"z-index":"2001",position:"relative"}},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"审核入账单",visible:e.show,width:"500px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("账单类别")]),a("el-select",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{key:0,attrs:{label:"自营账单",value:0}}),a("el-option",{key:99,attrs:{label:"下级账单",value:99}})],1)],1),a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("账单日期")]),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",clearable:e.clearable},model:{value:e.billDate,callback:function(t){e.billDate=t},expression:"billDate"}})],1),a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("结算重量")]),a("el-input",{attrs:{placeholder:"",type:"number"},model:{value:e.accountWeight,callback:function(t){e.accountWeight=t},expression:"accountWeight"}})],1),a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("运输方式")]),a("el-select",{model:{value:e.classType,callback:function(t){e.classType=t},expression:"classType"}},[a("el-option",{key:1,attrs:{label:"汽运",value:1}}),a("el-option",{key:2,attrs:{label:"航空",value:2}}),a("el-option",{key:3,attrs:{label:"早航班",value:3}}),a("el-option",{key:4,attrs:{label:"晚航班",value:4}}),a("el-option",{key:5,attrs:{label:"铁运",value:5}})],1)],1)]),a("li",[a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("下级网点")]),0===e.type?a("el-input",{attrs:{disabled:!0}}):e._e(),99===e.type?a("sc-site",{attrs:{param:e.params},model:{value:e.oneSiteId,callback:function(t){e.oneSiteId=t},expression:"oneSiteId"}}):e._e()],1),a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("业务员")]),0===e.type?a("sc-users",{attrs:{type:"2",param:{types:"2,4"}},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}):e._e(),99===e.type?a("el-input",{attrs:{disabled:!0}}):e._e()],1),a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("目的地市")]),a("sc-city",{on:{change:e.cityChange},model:{value:e.cityId,callback:function(t){e.cityId=t},expression:"cityId"}})],1),a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("物品类型")]),a("el-select",{model:{value:e.goodsType,callback:function(t){e.goodsType=t},expression:"goodsType"}},[a("el-option",{key:1,attrs:{label:"物品",value:1}}),a("el-option",{key:2,attrs:{label:"文件",value:2}})],1)],1)])]),a("ul",[a("li",[a("div",{staticClass:"nowrap-box"},[a("span",{staticClass:"label"},[e._v("备注")]),a("el-input",{attrs:{placeholder:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"审核入账单",dialogVisible:e.dialogVisible,tableData:e.tableRows,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)},m=[],p={props:{checkedRows:{type:Array,default:[]}},data:function(){return{clearable:!1,tableRows:[],columns:[{displayName:"运单号",name:"billCode"}],show:!1,batchUrl:"",dialogVisible:!1,type:0,accountWeight:"",classType:1,params:{child:!0},goodsType:1,billDate:u()(new Date).format("YYYY-MM-DD"),remark:"",userId:"",oneSiteId:"",cityId:"",provId:""}},mounted:function(){},methods:{cityChange:function(e){this.provId=e.parentId},confirm:function(){var e=this,t=this.validate();t&&("99"!=this.type||this.cityId?(this.tableRows=this.checkedRows.map((function(t,a){return t.type=e.type,t.accountWeight=e.accountWeight,t.classType=e.classType,""+e.type==="99"&&(t.oneSiteId=e.oneSiteId),t.goodsType=e.goodsType,t.billDate=e.billDate,t.userId=e.userId,t.cityId=e.cityId,t.provId=e.provId,t.remark=e.remark,t})),this.batchUrl="/bills/pretreatment/addBills",this.dialogVisible=!0,this.show=!1):this.msg("目的地市不能为空"))},validate:function(){return""+this.type!=="99"||this.oneSiteId?!!this.billDate&&(-1!==this.accountWeight.indexOf(".")&&this.accountWeight.split(".")[1].length>2?(this.msg("结算重量最多保留两位小数"),!1):""===this.accountWeight||!(this.accountWeight<=0||this.accountWeight>999)||(this.msg("结算重量需大于0小于999"),!1)):(this.msg("请选择下级网点"),!1)},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})},close:function(){this.reset(),this.$parent.onSearch(),this.dialogVisible=!1},reset:function(){this.type=0,this.accountWeight="",this.classType=1,this.goodsType=1,this.billDate=u()(new Date).format("YYYY-MM-DD"),this.remark="",this.userId="",this.oneSiteId="",this.cityId="",this.provId=""}},watch:{}},b=p,f=(a("2595"),a("623f")),y=Object(f["a"])(b,h,m,!1,null,"252c8035",null),v=y.exports,g=a("4055"),C=(a("b27f"),{name:"waitingorAccountEntry",mixins:[o["b"]],props:{switchOptions:{type:Object,default:{}}},components:{reviewBill:v},created:function(){},activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{checkKey:"billCode",batchTitle:"审核入帐单",batchDialogVisible:!1,currRow:[],columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"",code:"",billType:0,nameArr:["运单号","订单号"],height:355,toggleHeight:0,dateValue:[u()(new Date).subtract(2,"days").format("YYYY-MM-DD"),u()(new Date).subtract(2,"days").format("YYYY-MM-DD")],show:!0,billCode:"",isAddBills:[{name:"是",state:1},{name:"否",state:0},{name:"全部",state:-1}],recSends:[{name:"全部",state:-1},{name:"7天内无收发",state:1},{name:"非关系网点7天内有收发",state:2}],noAnyOpts:[{name:"是",state:0},{name:"否",state:1},{name:"全部",state:-1}],addBillType:[{name:"自营",value:0},{name:"网点",value:99},{name:"",value:-1}],queryContent:{orderCode:"",billCode:"",startDate:"",endDate:"",billState:0,recSend:1,custId:"",custName:"",noAnyOpt:0,isAddBill:0},checkedRows:[],tableData:[],tableHead:{columns:[{displayName:"选择",name:"check",cellType:new GC.Spread.Sheets.CellTypes.CheckBox,size:100,allCheck:!0,isHideFilter:!1,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"订单日期",name:"orderCreateDate",size:130,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"订单编号",name:"orderCode",size:130,isCode:!0},{displayName:"运单号",name:"billCode",dblclick:function(e){e&&g["billUtils"].openBills(e)},isCode:!0},{displayName:"交易号",name:"partnerTradeId",isCode:!0},{displayName:"客户名称",name:"custName"},{displayName:"收发动作",name:"recSendAction",value:function(t){var a=e.recSends.filter((function(e){return e.state===Number(t.recSendAction)}));return a.length>0?a[0].name:0===t.recSendAction?"非关系网点7天内有收发":t.recSendAction}},{displayName:"7天内是否有任何扫描",name:"noAnyOpt",size:160,value:function(t){var a=e.noAnyOpts.filter((function(e){return e.state===Number(t.noAnyOpt)}));return a.length>0?a[0].name:t.noAnyOpt}},{displayName:"是否入账单",name:"isAddBill",size:100,value:function(t){var a=e.isAddBills.filter((function(e){return e.state===Number(t.isAddBill)}));return a.length>0?a[0].name:"否"}},{displayName:"审核时间",name:"audiTime",formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"审核类型",name:"addBillType",value:function(t){var a=e.addBillType.filter((function(e){return e.value===Number(t.addBillType)}));return a.length>0?a[0].name:t.addBillType}},{displayName:"审核人",name:"auditor"},{displayName:"审核人编码",name:"auditorCode",isCode:!0}]},exportObj:{fileName:"代入账单"},optionsClone:{},exportUrl:"/bills/pretreatment/export",requestUrl:r["gd"]}},methods:{custChange:function(e){this.queryContent.custName=e?e.name:""},getType:function(e){this.billType=e?0:1},filterCurrRow:function(e,t){this.checkedRows=Object(d["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},checkboxAllClick:function(e){this.filterCurrRow([],e)},showReviewBill:function(){this.$refs.supplementRef.handleOpen()},close:function(e){this.batchDialogVisible=!1,this.onSearch()},supplementaction:function(e){this.currRow=Object(d["cloneDeep"])(e),this.batchDialogVisible=!0,this.batchUrl="/bills/pretreatment/addBills"},onSearch:function(){if(this.queryContent.billCode="",this.queryContent.orderCode="",this.code){var e=Object(d["trim"])(this.code).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("客官，一次不能查超过1000个单号哦");var t=e.join(",");0===this.billType?this.queryContent.billCode=t:this.queryContent.orderCode=t}else{var a=g["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],31,"","days");if(!a)return;this.queryContent.startDate=this.dateValue[0]+" 00:00:00",this.queryContent.endDate=this.dateValue[1]+" 23:59:59"}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(d["cloneDeep"])(e)),Object(r["fd"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]),t.checkedRows=[]})).catch((function(e){t.pagination.total=0,t.tableData=[],t.checkedRows=[]}))},exportNew:function(){if(this.tableData.length>0){if(this.queryContent.billCode||this.queryContent.orderCode)return this.checklistData=this.tableData,void this.checklistExport();this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}else this.msg("没有数据无法导出!")},onClickTable:function(){this.$refs.datePicker.$refs.start._data.pickerVisible=!1,this.$refs.datePicker.$refs.end._data.pickerVisible=!1,this.$refs.customer.$refs.refSzUserSelect.blur(),this.$refs.isAddBill.blur(),this.$refs.recSend.blur(),this.$refs.noAnyOpt.blur()},resetQueryContent:function(){this.billCode="",this.queryContent={orderCode:"",billCode:"",startDate:"",endDate:"",billState:0,recSend:0,custId:"",custName:"",noAnyOpt:-1,isAddBill:-1}},toggle:function(e){var t=this;this.toggleHeight=e>0?e:this.toggleHeight,this.height=e>0?this.height-this.toggleHeight:this.height+this.toggleHeight,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){if(this.z_param.isActiveH)return this.$store.getters.clientHeight-355+60;if(this.z_param.isNode)return this.$store.getters.clientHeight-this.height;var e=this.$store.getters.clientHeight-this.height+60;return window.innerHeight<698&&(e+=100),e}},watch:{switchOptions:{handler:function(e,t){var a=this;this.show||(this.show=!0,this.height=330,this.$nextTick((function(){a.z_method.refreshSpread()}))),this.pagination.pageSize=100,this.pagination.currentPage=1,this.resetQueryContent(),this.onSearch()},deep:!0}}}),x=C,k=(a("88d2"),a("32f2"),Object(f["a"])(x,n,l,!1,null,"d0c4412a",null)),D=k.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"waiting-for-weight-adjustment"},[a("div",{staticClass:"search-big-box"},[a("sc-expand-collapse",{on:{input:e.toggle}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{attrs:{onlyBill:!1,twoText:e.nameArr},on:{typeChange:e.getType},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"label"},[a("span",{staticClass:"label"},[e._v("中心到件日期：")])]),a("div",{staticClass:"dateTimePicker"},[a("sc-date-picker",{ref:"datePicker",attrs:{"value-format":"yyyy-MM-dd","range-separator":"至",limit:31,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)]),a("li",[a("label",{staticClass:"label"},[e._v("客户：")]),a("sc-users",{ref:"custId",staticClass:"short-input",attrs:{type:"3",placeholder:""},on:{change:e.custChange},model:{value:e.queryContent.custId,callback:function(t){e.$set(e.queryContent,"custId",t)},expression:"queryContent.custId"}})],1),a("li",[a("label",{staticClass:"label"},[e._v("业务员：")]),a("sc-users",{ref:"receiveManId",staticClass:"short-input",attrs:{type:"2",placeholder:""},on:{change:e.receiveManChange},model:{value:e.queryContent.receiveManId,callback:function(t){e.$set(e.queryContent,"receiveManId",t)},expression:"queryContent.receiveManId"}})],1)]),a("ul",{staticClass:"search-input-box"},[a("li",{staticClass:"weight-input"},[a("label",{staticClass:"w-r-92"},[e._v("最大重量差：")]),a("div",{staticClass:"weight"},[a("el-input",{staticClass:"input-40-40",model:{value:e.queryContent.startMaxWeight,callback:function(t){e.$set(e.queryContent,"startMaxWeight","string"===typeof t?t.trim():t)},expression:"queryContent.startMaxWeight"}},[a("template",{slot:"append"},[e._v("≤W≤")])],2),a("el-input",{staticClass:"input-40",model:{value:e.queryContent.endMaxWeight,callback:function(t){e.$set(e.queryContent,"endMaxWeight","string"===typeof t?t.trim():t)},expression:"queryContent.endMaxWeight"}})],1)]),a("li",{staticClass:"weight-input"},[a("label",{staticClass:"w-r-92"},[e._v("中心与本网点重量差：")]),a("div",{staticClass:"weight"},[a("el-input",{staticClass:"input-40-40",model:{value:e.queryContent.startCenterSiteWeight,callback:function(t){e.$set(e.queryContent,"startCenterSiteWeight","string"===typeof t?t.trim():t)},expression:"queryContent.startCenterSiteWeight"}},[a("template",{slot:"append"},[e._v("≤W≤")])],2),a("el-input",{staticClass:"input-40",model:{value:e.queryContent.endCenterSiteWeight,callback:function(t){e.$set(e.queryContent,"endCenterSiteWeight","string"===typeof t?t.trim():t)},expression:"queryContent.endCenterSiteWeight"}})],1)])]),a("ul",{staticClass:"search-input-box"},[a("li",{staticClass:"weight-input"},[a("label",{staticClass:"w-r-92"},[e._v("中心体积重与本网点重量差：")]),a("div",{staticClass:"weight"},[a("el-input",{staticClass:"input-40-40",model:{value:e.queryContent.startVolumeWeight,callback:function(t){e.$set(e.queryContent,"startVolumeWeight","string"===typeof t?t.trim():t)},expression:"queryContent.startVolumeWeight"}},[a("template",{slot:"append"},[e._v("≤W≤")])],2),a("el-input",{staticClass:"input-40",model:{value:e.queryContent.endVolumeWeight,callback:function(t){e.$set(e.queryContent,"endVolumeWeight","string"===typeof t?t.trim():t)},expression:"queryContent.endVolumeWeight"}})],1)]),a("li",{staticClass:"weight-input"},[a("label",{staticClass:"w-r-92"},[e._v("其他网点与本网点重量差：")]),a("div",{staticClass:"weight"},[a("el-input",{staticClass:"input-40-40",model:{value:e.queryContent.startOtherSiteWeight,callback:function(t){e.$set(e.queryContent,"startOtherSiteWeight","string"===typeof t?t.trim():t)},expression:"queryContent.startOtherSiteWeight"}},[a("template",{slot:"append"},[e._v("≤W≤")])],2),a("el-input",{staticClass:"input-40",model:{value:e.queryContent.endOtherSiteWeight,callback:function(t){e.$set(e.queryContent,"endOtherSiteWeight","string"===typeof t?t.trim():t)},expression:"queryContent.endOtherSiteWeight"}})],1)])]),a("ul",{staticClass:"description"},[a("li",[a("span",[a("span",[e._v("说明：")]),e._v("1、展示的结果为差异大于1kg的单号；2、中心最大重若小于且等于0.2kg时，系统自动显示0kg；\n                ")])]),a("li",[a("span",[a("span"),e._v("3、查询条件的中心到件时间若没有，则取的是中心第一个发件时间   4、已经扣款的数据，不在此展示\n                ")])])])]),a("div",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)])])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[e.z_method.showBtn("btn_waitingForWeightAdjustment_batchProcessing")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.showBatchProcessing}},[e._v("批带")]):e._e(),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("batchProcessing",{ref:"batchProcessing",attrs:{checkedRows:e.checkedRows}})],1)},S=[],_=(a("f548"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{"modal-append-to-body":!1,title:"批带",visible:e.show,width:"330px",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"nowrap-box"},[a("li",[a("el-radio",{attrs:{label:"0"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("最大重设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"1"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("中心最大重设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"2"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("中心体积重设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"3"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("其他网点最大重设置为结算重量")])],1)])])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showBatchProcess}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"批带",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)}),N=[],T={props:{checkedRows:{type:Array,default:[]}},data:function(){return{type:"0",columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"",batchData:[],dialogVisible:!1,checkList:[],input:"",billCode:"",show:!1}},mounted:function(){},methods:{close:function(){this.type="0",this.$parent.onSearch(),this.dialogVisible=!1},showBatchProcess:function(){var e=this;this.batchData=this.checkedRows.map((function(t,a){return t.type=e.type,t})),this.batchUrl="/bills/pretreatment/piDaiWeight",this.show=!1,this.dialogVisible=!0},onSubmit:function(){},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{}},I=T,O=(a("d67b"),Object(f["a"])(I,_,N,!1,null,"1bfecbfd",null)),E=O.exports,z={name:"waitingForWeightAdjustment",mixins:[o["b"]],props:{switchOptions:{type:Object,default:{}}},components:{batchProcessing:E},created:function(){},activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{checkedRows:[],height:370,nameArr:["单号","包号"],collapseHeight:0,dateValue:[u()(new Date).subtract(2,"days").format("YYYY-MM-DD"),u()(new Date).subtract(2,"days").format("YYYY-MM-DD")],input:"",radio:"",show:!0,billCode:"",queryContent:{startDate:"",endDate:"",siteId:"",billCode:"",custName:"",custId:"",custCode:"",receiveManId:"",targetCityId:"",startMaxWeight:"",endMaxWeight:"",startCenterSiteWeight:"",endCenterSiteWeight:"",startVolumeWeight:"",endVolumeWeight:"",startOtherSiteWeight:"",endOtherSiteWeight:"",contractedArea:"",staffId:"",customerId:"",billType:0},tableData:[],tableHead:{columns:[{displayName:"选择",name:"check",cellType:new GC.Spread.Sheets.CellTypes.CheckBox,allCheck:!0,isHideFilter:!1,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"账单日期",name:"billDate",formatter:"yyyy-MM-dd"},{displayName:"运单号",name:"billCode",isCode:!0,dblclick:function(e){e&&g["billUtils"].openBills(e)}},{displayName:"中心到件日期",name:"firCenterDate",formatter:"yyyy-MM-dd hh:mm:ss",size:140},{displayName:"收件日期",name:"receiveScanDay",formatter:"yyyy-MM-dd"},{displayName:"结算重量",name:"accountWeight",showTotal:!0,formatter:"0.00"},{displayName:"本网点最大重",name:"maxWeightThisSite",showTotal:!0,formatter:"0.00"},{displayName:"中心最大重",name:"maxWeightCenter",showTotal:!0,formatter:"0.00"},{displayName:"中心与本网点重量差",name:"centerSubThisSite",size:140,formatter:"0.00"},{displayName:"中心最大体积重",name:"maxVolumeWeightCenter",isCode:!0,size:120,formatter:"0.00"},{displayName:"中心体积重与本网点重量差",name:"volumeCenterSubThisSite",size:170,formatter:"0.00"},{displayName:"其他网点最大重",name:"maxWeightOtherSite",size:120,formatter:"0.00"},{displayName:"其他网点与本网点重量差",name:"otherSubThisSite",size:160,formatter:"0.00"},{displayName:"最大重量差",name:"maxWeightSub",formatter:"0.00"},{displayName:"目的地省",name:"targetProvince"},{displayName:"目的地市",name:"targetCity"},{displayName:"客户",name:"custName"},{displayName:"业务员",name:"receiveManName"},{displayName:"业务员编码",name:"receiveManCode",isCode:!0},{displayName:"网点扫描员",name:"receiveSiteScanManName"},{displayName:"网点扫描员编码",name:"receiveSiteScanManCode",isCode:!0,size:110}]},exportObj:{fileName:"待调整重量"},optionsClone:{},exportUrl:"/bills/pretreatment/exportWeight",requestUrl:r["id"]}},methods:{receiveManChange:function(e){this.queryContent.receiveManCode=e.code},custChange:function(e){this.queryContent.custName=e.name,this.queryContent.custCode=e.code},filterCurrRow:function(e,t){this.checkedRows=Object(d["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},checkboxAllClick:function(e){this.filterCurrRow([],e)},showBatchProcessing:function(){this.$refs.batchProcessing.show=!0},getType:function(e){this.queryContent.billType=e?0:1},validateWeight:function(e,t,a){return 0===(""+e).length&&0===(""+t).length||((""+e).length>0&&0===(""+t).length?(this.msg("".concat(a,"格式错误，请输入最大值")),!1):(""+t).length>0&&0===(""+e).length?(this.msg("".concat(a,"格式错误，请输入最小值")),!1):isNaN(+t)||isNaN(+e)?(this.msg("".concat(a,"格式错误，请输入合法的数字")),!1):+t<0||+t>999||+e<0||+e>999?(this.msg("".concat(a,"格式错误，请输入0到999的数字")),!1):-1!==(""+t).indexOf(".")&&(""+t).split(".")[1].length>2||-1!==(""+e).indexOf(".")&&(""+e).split(".")[1].length>2?(this.msg("".concat(a,"格式错误，最多保留2位小数")),!1):!(+t<+e)||(this.msg("".concat(a,"格式错误，最大值不能小于最小值")),!1))},onSearch:function(){if(this.queryContent.billCode="",this.queryContent.custId||(this.queryContent.custName="",this.queryContent.custCode=""),this.queryContent.receiveManId||(this.queryContent.receiveManCode=""),this.billCode){var e=Object(d["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");this.queryContent.billCode=e.join(",")}else{var t=this.validateWeight(this.queryContent.startMaxWeight,this.queryContent.endMaxWeight,"最大重量差");if(!t)return;this.validateWeight(this.queryContent.startCenterSiteWeight,this.queryContent.endCenterSiteWeight,"中心与本网点重量差");if(!t)return;this.validateWeight(this.queryContent.startVolumeWeight,this.queryContent.endVolumeWeight,"中心与本网点体积重差");if(!t)return;this.validateWeight(this.queryContent.startOtherSiteWeight,this.queryContent.endOtherSiteWeight,"其他网点与本网点重量差");if(!t)return;var a=g["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],31,"","days");if(!a)return;this.queryContent.startDate=this.dateValue[0]+" 00:00:00",this.queryContent.endDate=this.dateValue[1]+" 23:59:59"}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(d["cloneDeep"])(e)),Object(r["hd"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.tableData.map((function(e){e.remark&&(e.remark=e.remark.replace(/,/g,"，"))})),t.optionsClone.billCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]),t.checkedRows=[]})).catch((function(e){t.pagination.total=0,t.tableData=[],t.checkedRows=[]}))},exportNew:function(){if(this.tableData.length>0){if(this.queryContent.billCode)return this.checklistData=this.tableData,void this.checklistExport();this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}else this.msg("没有数据无法导出!")},onClickTable:function(){this.$refs.datePicker.$refs.start._data.pickerVisible=!1,this.$refs.datePicker.$refs.end._data.pickerVisible=!1,this.$refs.custId.$refs.refSzUserSelect.blur(),this.$refs.receiveManId.$refs.refSzUserSelect.blur()},resetQueryContent:function(){this.billType=0,this.billCode="",this.queryContent={startDate:u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),endDate:u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),contractedArea:"",staffId:"",customerId:"",billType:0,billCode:"",maxWeightDiffer:{min:0,max:0},centerWeightDiffer:{min:0,max:0},centerSizeDiffer:{min:0,max:0},otherSiteWeightDiffer:{min:0,max:0}}},toggle:function(e){var t=this;this.toggleHeight=e>0?e:this.toggleHeight,this.height=e>0?this.height-this.toggleHeight:this.height+this.toggleHeight,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){if(this.z_param.isActiveH)return this.$store.getters.clientHeight-355+30;if(this.z_param.isNode)return this.$store.getters.clientHeight-this.height;var e=this.$store.getters.clientHeight-this.height+60;return window.innerHeight<698&&(e+=100),e}},watch:{switchOptions:{handler:function(e,t){var a=this;this.show||(this.show=!0,this.height=370,this.$nextTick((function(){a.z_method.refreshSpread()}))),this.pagination.pageSize=100,this.pagination.currentPage=1,this.resetQueryContent(),this.queryContent.timeType=0,this.onSearch()},deep:!0}}},F=z,M=(a("83ef"),a("027d"),Object(f["a"])(F,w,S,!1,null,"f4b8b3ee",null)),P=M.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"abnormal-finance-information"},[a("div",{staticClass:"search-big-box"},[a("sc-expand-collapse",{on:{input:e.change}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{attrs:{onlyBill:!1,twoText:e.nameArr,resetType:e.resetType},on:{typeChange:e.getType},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"dateType",staticClass:"time-select-input",on:{change:e.dateTypeChange},model:{value:e.queryContent.dateType,callback:function(t){e.$set(e.queryContent,"dateType",t)},expression:"queryContent.dateType"}},e._l(e.dateTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("div",{staticClass:"dateTimePicker"},[a("sc-date-picker",{ref:"datePicker",attrs:{type:e.showTimePick,format:e.dataFormat,"value-format":e.dataFormat,"range-separator":"至",limit:31,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("账单类型：")]),a("div",{staticClass:"special-label"},[a("el-select",{ref:"type",model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])]),a("ul",{staticClass:"search-input-box"},[a("li",[a("label",{staticClass:"label"},[e._v("结算对象：")]),a("sc-users",{ref:"scanSiteId",staticClass:"short-input",attrs:{type:"7",placeholder:"",param:{types:"0,2,4,99"}},on:{change:e.changeAccountType},model:{value:e.queryContent.oneSiteId,callback:function(t){e.$set(e.queryContent,"oneSiteId",t)},expression:"queryContent.oneSiteId"}})],1),a("li",[a("label",{staticClass:"label"},[e._v("客户：")]),a("sc-users",{ref:"customerId",staticClass:"short-input",attrs:{type:"3",placeholder:""},model:{value:e.queryContent.customerId,callback:function(t){e.$set(e.queryContent,"customerId",t)},expression:"queryContent.customerId"}})],1),a("li",[a("label",{staticClass:"label"},[e._v("业务员：")]),a("sc-users",{ref:"scanUserId",staticClass:"short-input",attrs:{type:"2",placeholder:""},model:{value:e.queryContent.scanUserId,callback:function(t){e.$set(e.queryContent,"scanUserId",t)},expression:"queryContent.scanUserId"}})],1)]),a("ul",{staticClass:"ul-checkbox"},[a("li",[a("el-checkbox",{model:{value:e.centerThanSettle,callback:function(t){e.centerThanSettle=t},expression:"centerThanSettle"}},[e._v("中心重量大于结算重量")]),a("el-checkbox",{model:{value:e.recThanSettle,callback:function(t){e.recThanSettle=t},expression:"recThanSettle"}},[e._v("收件重量大于结算重量")]),a("el-checkbox",{model:{value:e.salesNotBillUser,callback:function(t){e.salesNotBillUser=t},expression:"salesNotBillUser"}},[e._v("业务员与运单发放不同")])],1),a("li",[a("el-checkbox",{model:{value:e.billUserNotEquals,callback:function(t){e.billUserNotEquals=t},expression:"billUserNotEquals"}},[e._v("运单发放网点不是本网点")]),a("el-checkbox",{model:{value:e.billUserNotSettle,callback:function(t){e.billUserNotSettle=t},expression:"billUserNotSettle"}},[e._v("运单发放网点非结算网点")])],1)])]),a("div",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")])],1)],1)])])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("div",{staticClass:"left-btn"},[e.z_method.showBtn("btn_abnormalFinanceInformation_batchProcessing")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.showBatchProcessing}},[e._v("批带")]):e._e(),e.z_method.showBtn("btn_abnormalFinanceInformation_editBill")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.showEditDialog}},[e._v("编辑")]):e._e(),e.z_method.showBtn("btn_abnormalFinanceInformation_recalculation")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.recalculate}},[e._v("重新计算")]):e._e()],1),a("div",{staticClass:"right-btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("edit",{ref:"edit",attrs:{checkedRows:e.checkedRows}}),a("batchProcessing",{ref:"batchProcessing",attrs:{checkedRows:e.checkedRows}}),a("sc-batch-process",{attrs:{title:"重新计算",dialogVisible:e.recalculation,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.recalculateColumns},on:{model:e.close}})],1)},j=[],$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit",staticStyle:{"z-index":"2001",position:"relative"}},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"label name"},[e._v("名称")]),a("div",{staticClass:"label"},[e._v("是否修改")]),a("div",{staticClass:"label"},[e._v("内容")])]),a("li",[a("div",{staticClass:"label name"},[e._v("账单日期")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.billDate.state,callback:function(t){e.$set(e.editParams.billDate,"state",t)},expression:"editParams.billDate.state"}})],1),a("div",{staticClass:"label input"},[a("el-date-picker",{attrs:{disabled:!e.editParams.billDate.state,type:"date",placeholder:""},model:{value:e.editParams.billDate.value,callback:function(t){e.$set(e.editParams.billDate,"value",t)},expression:"editParams.billDate.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("客户")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.customerId.state,callback:function(t){e.$set(e.editParams.customerId,"state",t)},expression:"editParams.customerId.state"}})],1),a("div",{staticClass:"label input"},[a("sc-users",{attrs:{disabled:!e.editParams.customerId.state,type:"3",placeholder:""},model:{value:e.editParams.customerId.value,callback:function(t){e.$set(e.editParams.customerId,"value",t)},expression:"editParams.customerId.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("业务员")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.scanUserId.state,callback:function(t){e.$set(e.editParams.scanUserId,"state",t)},expression:"editParams.scanUserId.state"}})],1),a("div",{staticClass:"label input"},[a("sc-users",{attrs:{disabled:!e.editParams.scanUserId.state,type:"2",placeholder:""},model:{value:e.editParams.scanUserId.value,callback:function(t){e.$set(e.editParams.scanUserId,"value",t)},expression:"editParams.scanUserId.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("下级网点")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.accountUserId.state,callback:function(t){e.$set(e.editParams.accountUserId,"state",t)},expression:"editParams.accountUserId.state"}})],1),a("div",{staticClass:"label input"},[e.editParams.accountUserId.state?e._e():a("el-input",{attrs:{disabled:!0,placeholder:"",params:e.params}}),e.editParams.accountUserId.state?a("sc-site",{attrs:{param:e.params},model:{value:e.editParams.accountUserId.value,callback:function(t){e.$set(e.editParams.accountUserId,"value",t)},expression:"editParams.accountUserId.value"}}):e._e()],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("结算重量")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.accountWeight.state,callback:function(t){e.$set(e.editParams.accountWeight,"state",t)},expression:"editParams.accountWeight.state"}})],1),a("div",{staticClass:"label input"},[a("el-input",{attrs:{disabled:!e.editParams.accountWeight.state,placeholder:""},model:{value:e.editParams.accountWeight.value,callback:function(t){e.$set(e.editParams.accountWeight,"value",t)},expression:"editParams.accountWeight.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("目的地市")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.dispCityId.state,callback:function(t){e.$set(e.editParams.dispCityId,"state",t)},expression:"editParams.dispCityId.state"}})],1),a("div",{staticClass:"label input"},[e.editParams.dispCityId.state?e._e():a("el-input",{attrs:{disabled:!0,placeholder:""}}),e.editParams.dispCityId.state?a("sc-city",{model:{value:e.editParams.dispCityId.value,callback:function(t){e.$set(e.editParams.dispCityId,"value",t)},expression:"editParams.dispCityId.value"}}):e._e()],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("运输方式")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.classType.state,callback:function(t){e.$set(e.editParams.classType,"state",t)},expression:"editParams.classType.state"}})],1),a("div",{staticClass:"label input"},[a("el-select",{attrs:{disabled:!e.editParams.classType.state},model:{value:e.editParams.classType.value,callback:function(t){e.$set(e.editParams.classType,"value",t)},expression:"editParams.classType.value"}},[a("el-option",{key:1,attrs:{label:"汽运",value:1}}),a("el-option",{key:2,attrs:{label:"航空",value:2}}),a("el-option",{key:3,attrs:{label:"早航班",value:3}}),a("el-option",{key:4,attrs:{label:"晚航班",value:4}}),a("el-option",{key:5,attrs:{label:"铁运",value:5}})],1)],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("物品类型")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.goodsType.state,callback:function(t){e.$set(e.editParams.goodsType,"state",t)},expression:"editParams.goodsType.state"}})],1),a("div",{staticClass:"label input"},[a("el-select",{attrs:{disabled:!e.editParams.goodsType.state},model:{value:e.editParams.goodsType.value,callback:function(t){e.$set(e.editParams.goodsType,"value",t)},expression:"editParams.goodsType.value"}},[a("el-option",{key:1,attrs:{label:"物品",value:1}}),a("el-option",{key:2,attrs:{label:"文件",value:2}})],1)],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("备注")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.remark.state,callback:function(t){e.$set(e.editParams.remark,"state",t)},expression:"editParams.remark.state"}})],1),a("div",{staticClass:"label input"},[a("el-input",{attrs:{disabled:!e.editParams.remark.state,placeholder:""},model:{value:e.editParams.remark.value,callback:function(t){e.$set(e.editParams.remark,"value",t)},expression:"editParams.remark.value"}})],1)])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.beginEdit}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"编辑",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)},H=[],V=(a("e10e"),a("6d57"),a("54d0")),R={props:{checkedRows:{type:Array,default:[]}},data:function(){return{params:{child:!0},checked:"",columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"",batchData:[],dialogVisible:!1,checkList:[],input:"",billCode:"",show:!1,editParams:{goodsType:{state:!1,value:""},remark:{state:!1,value:""},classType:{state:!1,value:""},dispCityId:{state:!1,value:""},accountWeight:{state:!1,value:""},accountUserId:{state:!1,value:""},scanUserId:{state:!1,value:""},customerId:{state:!1,value:""},billDate:{state:!1,value:""}}}},mounted:function(){},methods:{reset:function(){this.editParams={goodsType:{state:!1,value:""},remark:{state:!1,value:""},classType:{state:!1,value:""},dispCityId:{state:!1,value:""},accountWeight:{state:!1,value:""},accountUserId:{state:!1,value:""},scanUserId:{state:!1,value:""},customerId:{state:!1,value:""},billDate:{state:!1,value:""}}},close:function(){this.reset(),this.$parent.onSearch(),this.dialogVisible=!1},beginEdit:function(){var e=this;this.batchData=Object(V["a"])(this.checkedRows);var t=!1;Object.keys(this.editParams).forEach((function(a){e.editParams[a].state&&""!==e.editParams[a].value&&(t=!0,e.batchData.forEach((function(t){t[a]="billDate"==a?e.moment(e.editParams[a].value).format("YYYY-MM-DD"):e.editParams[a].value})))})),t?(this.batchData.forEach((function(t){e.batchData.length>0&&(t.forcedUpdate=!1),99!==t.type?t.accountUserId="":(t.customerId="",t.scanUserId="")})),this.batchUrl="/bills/new/sendaBills/forcedUpdate",this.show=!1,this.dialogVisible=!0):this.msg("请输入编辑内容！")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})},onSubmit:function(){}},watch:{}},q=R,U=(a("c569"),Object(f["a"])(q,$,H,!1,null,"64692a9e",null)),A=U.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"批带",visible:e.show,"modal-append-to-body":!1,width:"330px",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("el-radio",{attrs:{label:"1"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("中心重量设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"2"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("收件重量设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"3"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("运单发放业务员设置为揽件业务员")])],1),a("li",[a("el-radio",{attrs:{label:"4"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("运单发放客户更新客户名称")])],1),a("li",[a("el-radio",{attrs:{label:"5"},model:{value:e.batchType,callback:function(t){e.batchType=t},expression:"batchType"}},[e._v("运单发放网点设置为结算网点")])],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showBatchProcess}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"批带",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)},W=[],L={props:{checkedRows:{type:Array,default:[]}},data:function(){return{columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"",batchData:[],dialogVisible:!1,checkList:[],input:"",billCode:"",show:!1,batchType:"1"}},mounted:function(){},methods:{close:function(){this.batchType="1",this.$parent.onSearch(),this.dialogVisible=!1},showBatchProcess:function(){var e=this;this.batchData=this.checkedRows.map((function(t){return t.batchType=e.batchType,t})),this.batchUrl="/bills/new/sendaBills/batch",this.show=!1,this.dialogVisible=!0},onSubmit:function(){},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})}},watch:{}},G=L,Z=(a("6f2a"),Object(f["a"])(G,B,W,!1,null,"3c4bad9e",null)),Q=Z.exports,J={name:"detail",mixins:[o["b"]],props:{switchOptions:{type:Object,default:{}}},components:{edit:A,batchProcessing:Q},created:function(){},activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{resetType:0,recalculation:!1,recalculateColumns:[{displayName:"运单号",name:"billCode"}],showTimePick:"daterange",dataFormat:"yyyy-MM-dd",needTime:!1,checkedRows:[],height:345,params:{child:!0},nameArr:["单号","包号"],collapseHeight:0,dateValue:[u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),u()(new Date).subtract(0,"days").format("YYYY-MM-DD")],show:!0,dateTypeList:[{name:"账单日期",value:1,needTime:!1},{name:"收件时间",value:2,needTime:!0},{name:"首重日期",value:3,needTime:!1},{name:"下级到件时间",value:4,needTime:!0}],typeList:[{name:"全部",value:""},{name:"无对象",value:-1},{name:"客户",value:0},{name:"承包区",value:2},{name:"业务员",value:4},{name:"下级网点",value:99}],mianTypeList:[{value:0,name:"电子面单"},{value:1,name:"普通面单"}],dataSourceList:[{name:"收件",value:1},{name:"发件",value:2},{name:"补单号",value:3},{name:"订单转",value:4},{name:"账单转",value:5}],centerThanSettle:!1,recThanSettle:!1,salesNotBillUser:!1,sendNotBillUser:!1,billUserNotEquals:!1,billUserNotSettle:!1,queryContent:{billCode:"",bagCode:"",scanSiteId:"",dateType:1,startDate:"",endDate:"",type:"",customerId:"",scanUserId:"",oneSiteId:"",ifOwnSite:0,centerThanSettle:0,recThanSettle:0,salesNotBillUser:0,sendNotBillUser:0,billUserNotEquals:0,billUserNotSettle:0,timeType:0,billType:0,accountType:""},billType:0,batchData:[],batchUrl:"",billCode:"",tableData:[],tableHead:{columns:[{displayName:"选择",name:"check",cellType:new GC.Spread.Sheets.CellTypes.CheckBox,allCheck:!0,isHideFilter:!1,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"运单号",name:"billCode",isCode:!0,dblclick:function(e){e&&g["billUtils"].openBills(e)}},{displayName:"包号",name:"bagCode",isCode:!0},{displayName:"账单日期",name:"billDate",formatter:"yyyy-MM-dd"},{displayName:"收件扫描时间",name:"billTime",formatter:"yyyy-MM-dd hh:mm:ss",size:130},{displayName:"首重时间",name:"firstWeightTime",formatter:"yyyy-MM-dd hh:mm:ss",size:130},{displayName:"到件扫描时间",name:"scanTime",formatter:"yyyy-MM-dd hh:mm:ss",size:130},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"scanUserName"},{displayName:"业务员工号",name:"scanUserCode",size:110,isCode:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"账单类型",name:"type",value:function(t){var a=e.typeList.filter((function(e){return e.value===Number(t.type)}));return a.length>0?a[0].name:""}},{displayName:"目的地省",name:"dispProvName"},{displayName:"目的地市",name:"dispCityName"},{displayName:"结算重量",name:"accountWeight",formatter:"0.00"},{displayName:"网点重量",name:"recWeight",formatter:"0.00"},{displayName:"中心重量",name:"centerWeight",formatter:"0.00"},{displayName:"退件标识",name:"returnStatus",value:function(e){return e.returnStatus?"是":"否"}},{displayName:"问题件",name:"ifProblem",value:function(e){return e.ifProblem?"是":"否"}},{displayName:"面单类型",name:"billType",value:function(t){var a=e.mianTypeList.filter((function(e){return e.value===Number(t.billType)}));return a.length>0?a[0].name:t.billType}},{displayName:"运单发放",name:"billProvideManName"},{displayName:"运单发放网点",name:"billUseSiteName",size:120},{displayName:"修改人",name:"editor"},{displayName:"备注",name:"remark",isConversionComma:!0}]},exportObj:{fileName:"结算信息异常"},optionsClone:{},exportUrl:"/bills/new/sendaBills/exportSettleError",requestUrl:r["n"],isQs:!1}},methods:{dateTypeChange:function(){var e=this,t=this.dateTypeList.filter((function(t){return t.value==e.queryContent.dateType}))[0].needTime;if(this.needTime!==t){this.needTime=t,this.showTimePick=this.needTime?"datetime":"daterange",this.dataFormat=this.needTime?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd";var a=this.needTime?u()(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00":u()(new Date).subtract(0,"days").format("YYYY-MM-DD"),i=this.needTime?u()(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59":u()(new Date).subtract(0,"days").format("YYYY-MM-DD");this.dateValue=[a,i]}},filterCurrRow:function(e,t){this.checkedRows=Object(d["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},checkboxAllClick:function(e){this.filterCurrRow([],e)},showEditDialog:function(){this.$refs.edit.show=!0},showBatchProcessing:function(){this.$refs.batchProcessing.show=!0},close:function(){console.log("abnormalFinanceInformation"),this.onSearch(),this.recalculation=!1},recalculate:function(){this.batchData=this.checkedRows,this.batchUrl="/bills/new/sendaBills/recalculate",this.recalculation=!0},getType:function(e){this.billType=e?0:1},changeAccountType:function(e){this.queryContent.accountType=e?e.type:""},onSearch:function(){if(this.queryContent.billCode="",this.queryContent.bagCode="",this.billCode){var e=Object(d["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");0===this.billType?this.queryContent.billCode=e.join(","):this.queryContent.bagCode=e.join(",")}else{var t=g["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],31,"","days");if(!t)return;var a=Object(d["cloneDeep"])(this.dateValue);2==this.queryContent.dateType||4==this.queryContent.dateType?(this.queryContent.startDate=u()(a[0]).format("YYYY-MM-DD HH:mm:ss"),this.queryContent.endDate=u()(a[1]).format("YYYY-MM-DD HH:mm:ss")):(this.queryContent.startDate=u()(a[0]).format("YYYY-MM-DD")+" 00:00:00",this.queryContent.endDate=u()(a[1]).format("YYYY-MM-DD")+" 23:59:59"),this.queryContent.centerThanSettle=Number(this.centerThanSettle),this.queryContent.recThanSettle=Number(this.recThanSettle),this.queryContent.salesNotBillUser=Number(this.salesNotBillUser),this.queryContent.billUserNotEquals=Number(this.billUserNotEquals),this.queryContent.billUserNotSettle=Number(this.billUserNotSettle),(this.queryContent.oneSiteId||0===this.queryContent.oneSiteId)&&(this.queryContent.ifOwnSite=1)}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(d["cloneDeep"])(e),""===this.optionsClone.type&&delete this.optionsClone.type),Object(r["m"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(console.log(e),t.tableData=e.data.list,t.tableData.map((function(e){e.remark&&(e.remark=e.remark.replace(/,/g,"，"))})),t.pagination.total=e.data.totalRow,t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]),t.checkedRows=[]})).catch((function(e){t.pagination.total=0,t.tableData=[],t.checkedRows=[]}))},exportNew:function(){if(this.tableData.length>0){if(this.queryContent.billCode)return this.checklistData=this.tableData,void this.checklistExport();this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}else this.msg("没有数据无法导出!")},onClickTable:function(){this.$refs.datePicker.$refs.start._data.pickerVisible=!1,this.$refs.datePicker.$refs.end._data.pickerVisible=!1,this.$refs.scanUserId.$refs.refSzUserSelect.blur(),this.$refs.customerId.$refs.refSzUserSelect.blur(),this.$refs.dateType.blur(),this.$refs.type.blur()},resetQueryContent:function(){this.resetType++,this.billCode="",this.needTime=!1,this.showTimePick="daterange",this.dataFormat="yyyy-MM-dd",this.centerThanSettle=!1,this.recThanSettle=!1,this.salesNotBillUser=!1,this.sendNotBillUser=!1,this.billUserNotEquals=!1,this.billUserNotSettle=!1,this.queryContent={billCode:"",bagCode:"",scanSiteId:"",dateType:1,startDate:"",endDate:"",type:"",customerId:"",scanUserId:"",oneSiteId:"",ifOwnSite:0,centerThanSettle:0,recThanSettle:0,salesNotBillUser:0,sendNotBillUser:0,billUserNotEquals:0,billUserNotSettle:0,timeType:0,billType:0,accountType:""},this.dateValue=[u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),u()(new Date).subtract(0,"days").format("YYYY-MM-DD")]},change:function(e){var t=this;this.collapseHeight=e>0?e:this.collapseHeight,this.height=e>0?this.height-this.collapseHeight:this.height+this.collapseHeight,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){if(this.z_param.isActiveH)return this.$store.getters.clientHeight-355+60;if(this.z_param.isNode)return this.$store.getters.clientHeight-this.height;var e=this.$store.getters.clientHeight-this.height+60;return window.innerHeight<698&&(e+=100),e}},watch:{switchOptions:{handler:function(e,t){var a=this;this.show||(this.show=!0,this.height=345,this.$nextTick((function(){a.z_method.refreshSpread()}))),this.pagination.pageSize=100,this.pagination.currentPage=1,this.resetQueryContent(),this.queryContent.timeType=0,this.billType=0,this.onSearch()},deep:!0}}},X=J,K=(a("8f77"),a("7a24"),Object(f["a"])(X,Y,j,!1,null,"518d2b94",null)),ee=K.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"missing-finance-information"},[a("div",{staticClass:"search-big-box"},[a("sc-expand-collapse",{on:{input:e.toggle}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box"},[a("sc-bill-code",{attrs:{onlyBill:!1,twoText:e.nameArr,resetType:e.resetType},on:{typeChange:e.getType},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("div",{staticClass:"special-label"},[a("el-select",{ref:"dateType",staticClass:"time-select-input",on:{change:e.dateTypeChange},model:{value:e.queryContent.dateType,callback:function(t){e.$set(e.queryContent,"dateType",t)},expression:"queryContent.dateType"}},e._l(e.dateTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("div",{staticClass:"dateTimePicker"},[a("sc-date-picker",{ref:"datePicker",attrs:{type:e.showTimePick,format:e.dataFormat,"value-format":e.dataFormat,"range-separator":"至",limit:31,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("账单类型：")]),a("div",{staticClass:"special-label"},[a("el-select",{ref:"billType",model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},e._l(e.billTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])]),a("ul",{staticClass:"search-input-box"},[a("li",[a("label",{staticClass:"label"},[e._v("结算对象：")]),a("sc-users",{ref:"oneSiteId",staticClass:"short-input",attrs:{type:"7",param:{types:"0,2,4,99"}},on:{change:e.changeAccountType},model:{value:e.queryContent.oneSiteId,callback:function(t){e.$set(e.queryContent,"oneSiteId",t)},expression:"queryContent.oneSiteId"}})],1),a("li",[a("label",{staticClass:"label"},[e._v("客户：")]),a("sc-users",{ref:"customerId",staticClass:"short-input",attrs:{type:"3",placeholder:""},model:{value:e.queryContent.customerId,callback:function(t){e.$set(e.queryContent,"customerId",t)},expression:"queryContent.customerId"}})],1),a("li",[a("label",{staticClass:"label"},[e._v("业务员：")]),a("sc-users",{ref:"scanUserId",staticClass:"short-input",attrs:{type:"2",placeholder:""},model:{value:e.queryContent.scanUserId,callback:function(t){e.$set(e.queryContent,"scanUserId",t)},expression:"queryContent.scanUserId"}})],1)]),a("ul",[a("li",[a("el-checkbox",{attrs:{label:"无结算对象"},model:{value:e.noSettle,callback:function(t){e.noSettle=t},expression:"noSettle"}}),a("el-checkbox",{attrs:{label:"无结算重量"},model:{value:e.noWeight,callback:function(t){e.noWeight=t},expression:"noWeight"}}),a("el-checkbox",{attrs:{label:"无目的地"},model:{value:e.noDestination,callback:function(t){e.noDestination=t},expression:"noDestination"}}),a("el-checkbox",{attrs:{label:"无运单发放"},model:{value:e.noBillUser,callback:function(t){e.noBillUser=t},expression:"noBillUser"}})],1)])]),a("div",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-refresh"},on:{click:e.resetQueryContent}},[e._v("重置")])],1)],1)])])],1),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("div",{staticClass:"left-btn"},[e.z_method.showBtn("btn_missingFinanceInformation_editBill")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.showEditDialog}},[e._v("编辑")]):e._e(),e.z_method.showBtn("btn_missingFinanceInformation_synchronousBillIssue")?a("el-button",{attrs:{type:"primary",disabled:0===e.checkedRows.length},on:{click:e.showSynchronousBillIssue}},[e._v("同步运单发放")]):e._e()],1),a("div",{staticClass:"right-btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("edit",{ref:"edit",attrs:{checkedRows:e.checkedRows}}),a("synchronousBillIssue",{ref:"synchronousBillIssue",attrs:{continueFlag:!0,checkedRows:e.checkedRows}})],1)},ae=[],ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit",staticStyle:{"z-index":"2001",position:"relative"}},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"label name"},[e._v("名称")]),a("div",{staticClass:"label"},[e._v("是否修改")]),a("div",{staticClass:"label"},[e._v("内容")])]),a("li",[a("div",{staticClass:"label name"},[e._v("账单日期")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.billDate.state,callback:function(t){e.$set(e.editParams.billDate,"state",t)},expression:"editParams.billDate.state"}})],1),a("div",{staticClass:"label input"},[a("el-date-picker",{attrs:{disabled:!e.editParams.billDate.state,type:"date",placeholder:""},model:{value:e.editParams.billDate.value,callback:function(t){e.$set(e.editParams.billDate,"value",t)},expression:"editParams.billDate.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("客户")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.customerId.state,callback:function(t){e.$set(e.editParams.customerId,"state",t)},expression:"editParams.customerId.state"}})],1),a("div",{staticClass:"label input"},[a("sc-users",{attrs:{disabled:!e.editParams.customerId.state,type:"3",placeholder:""},model:{value:e.editParams.customerId.value,callback:function(t){e.$set(e.editParams.customerId,"value",t)},expression:"editParams.customerId.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("业务员")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.scanUserId.state,callback:function(t){e.$set(e.editParams.scanUserId,"state",t)},expression:"editParams.scanUserId.state"}})],1),a("div",{staticClass:"label input"},[a("sc-users",{attrs:{disabled:!e.editParams.scanUserId.state,type:"2",placeholder:""},model:{value:e.editParams.scanUserId.value,callback:function(t){e.$set(e.editParams.scanUserId,"value",t)},expression:"editParams.scanUserId.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("下级网点")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.accountUserId.state,callback:function(t){e.$set(e.editParams.accountUserId,"state",t)},expression:"editParams.accountUserId.state"}})],1),a("div",{staticClass:"label input"},[e.editParams.accountUserId.state?e._e():a("el-input",{attrs:{disabled:!0,placeholder:"",params:e.params}}),e.editParams.accountUserId.state?a("sc-site",{attrs:{param:e.params},model:{value:e.editParams.accountUserId.value,callback:function(t){e.$set(e.editParams.accountUserId,"value",t)},expression:"editParams.accountUserId.value"}}):e._e()],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("结算重量")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.accountWeight.state,callback:function(t){e.$set(e.editParams.accountWeight,"state",t)},expression:"editParams.accountWeight.state"}})],1),a("div",{staticClass:"label input"},[a("el-input",{attrs:{disabled:!e.editParams.accountWeight.state,placeholder:""},model:{value:e.editParams.accountWeight.value,callback:function(t){e.$set(e.editParams.accountWeight,"value",t)},expression:"editParams.accountWeight.value"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("目的地市")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.dispCityId.state,callback:function(t){e.$set(e.editParams.dispCityId,"state",t)},expression:"editParams.dispCityId.state"}})],1),a("div",{staticClass:"label input"},[e.editParams.dispCityId.state?e._e():a("el-input",{attrs:{disabled:!0,placeholder:""}}),e.editParams.dispCityId.state?a("sc-city",{model:{value:e.editParams.dispCityId.value,callback:function(t){e.$set(e.editParams.dispCityId,"value",t)},expression:"editParams.dispCityId.value"}}):e._e()],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("运输方式")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.classType.state,callback:function(t){e.$set(e.editParams.classType,"state",t)},expression:"editParams.classType.state"}})],1),a("div",{staticClass:"label input"},[a("el-select",{attrs:{disabled:!e.editParams.classType.state},model:{value:e.editParams.classType.value,callback:function(t){e.$set(e.editParams.classType,"value",t)},expression:"editParams.classType.value"}},[a("el-option",{key:1,attrs:{label:"汽运",value:1}}),a("el-option",{key:2,attrs:{label:"航空",value:2}}),a("el-option",{key:3,attrs:{label:"早航班",value:3}}),a("el-option",{key:4,attrs:{label:"晚航班",value:4}}),a("el-option",{key:5,attrs:{label:"铁运",value:5}})],1)],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("物品类型")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.goodsType.state,callback:function(t){e.$set(e.editParams.goodsType,"state",t)},expression:"editParams.goodsType.state"}})],1),a("div",{staticClass:"label input"},[a("el-select",{attrs:{disabled:!e.editParams.goodsType.state},model:{value:e.editParams.goodsType.value,callback:function(t){e.$set(e.editParams.goodsType,"value",t)},expression:"editParams.goodsType.value"}},[a("el-option",{key:1,attrs:{label:"物品",value:1}}),a("el-option",{key:2,attrs:{label:"文件",value:2}})],1)],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("备注")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.editParams.remark.state,callback:function(t){e.$set(e.editParams.remark,"state",t)},expression:"editParams.remark.state"}})],1),a("div",{staticClass:"label input"},[a("el-input",{attrs:{disabled:!e.editParams.remark.state,placeholder:""},model:{value:e.editParams.remark.value,callback:function(t){e.$set(e.editParams.remark,"value",t)},expression:"editParams.remark.value"}})],1)])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.beginEdit}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)]),a("sc-batch-process",{attrs:{title:"编辑",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}})],1)},se=[],ne={props:{checkedRows:{type:Array,default:[]}},data:function(){return{params:{child:!0},checked:"",columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"",batchData:[],dialogVisible:!1,checkList:[],input:"",billCode:"",show:!1,editParams:{goodsType:{state:!1,value:""},remark:{state:!1,value:""},classType:{state:!1,value:""},dispCityId:{state:!1,value:""},accountWeight:{state:!1,value:""},accountUserId:{state:!1,value:""},scanUserId:{state:!1,value:""},customerId:{state:!1,value:""},billDate:{state:!1,value:""}}}},mounted:function(){},methods:{reset:function(){this.editParams={goodsType:{state:!1,value:""},remark:{state:!1,value:""},classType:{state:!1,value:""},dispCityId:{state:!1,value:""},accountWeight:{state:!1,value:""},accountUserId:{state:!1,value:""},scanUserId:{state:!1,value:""},customerId:{state:!1,value:""},billDate:{state:!1,value:""}}},close:function(){this.reset(),this.$parent.onSearch(),this.dialogVisible=!1},beginEdit:function(){var e=this;this.batchData=Object(V["a"])(this.checkedRows);Object.keys(this.editParams).forEach((function(t){e.editParams[t].state&&""!==e.editParams[t].value&&(!0,e.batchData.forEach((function(a){a[t]="billDate"==t?e.moment(e.editParams[t].value).format("YYYY-MM-DD"):e.editParams[t].value})))})),this.batchData.forEach((function(t){e.batchData.length>0&&(t.forcedUpdate=!1),99!==t.type?t.accountUserId="":(t.customerId="",t.scanUserId="")})),console.log(this.editParams,"ddg "),this.batchUrl="/bills/new/sendaBills/forcedUpdate",this.show=!1,this.dialogVisible=!0},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})},onSubmit:function(){}},watch:{}},le=ne,oe=(a("026b"),Object(f["a"])(le,ie,se,!1,null,"334af32d",null)),re=oe.exports,ce=a("35dc"),ue={name:"detail",mixins:[o["b"]],props:{switchOptions:{type:Object,default:{}}},components:{edit:re,synchronousBillIssue:ce["a"]},created:function(){},activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},data:function(){var e=this;return{resetType:0,showTimePick:"daterange",dataFormat:"yyyy-MM-dd",needTime:!1,checkedRows:[],params:{child:!0},height:335,dateTypeList:[{name:"账单日期",value:1,needTime:!1},{name:"收件时间",value:2,needTime:!0},{name:"首重日期",value:3,needTime:!1},{name:"下级到件时间",value:4,needTime:!0}],billTypeList:[{name:"全部",value:""},{name:"无对象",value:-1},{name:"客户",value:0},{name:"承包区",value:2},{name:"业务员",value:4},{name:"下级网点",value:99}],mianTypeList:[{value:0,name:"电子面单"},{value:1,name:"普通面单"}],dataSource:[{name:"收件",value:1},{name:"发件",value:2},{name:"到件",value:3},{name:"账单转",value:4},{name:"补单号",value:5},{name:"订单转",value:6}],nameArr:["单号","包号"],collapseHeight:0,dateValue:[u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),u()(new Date).subtract(0,"days").format("YYYY-MM-DD")],show:!0,billType:0,noSettle:!1,noWeight:!1,noDestination:!1,noBillUser:!1,queryContent:{billCode:"",bagCode:"",scanSiteId:"",dateType:1,type:"",startDate:"",endDate:"",customerId:"",scanUserId:"",ifOwnSite:0,oneSiteId:null,noSettle:0,noWeight:0,noDestination:0,noBillUser:0,accountType:""},billCode:"",tableData:[],tableHead:{columns:[{displayName:"选择",name:"check",cellType:new GC.Spread.Sheets.CellTypes.CheckBox,allCheck:!0,isHideFilter:!1,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"运单号",name:"billCode",isCode:!0,dblclick:function(e){e&&g["billUtils"].openBills(e)}},{displayName:"包号",name:"bagCode",isCode:!0},{displayName:"账单日期",name:"billDate",formatter:"yyyy-MM-dd"},{displayName:"扫描时间",name:"billTime",formatter:"yyyy-MM-dd hh:mm:ss",size:130},{displayName:"首重时间",name:"firstWeightTime",formatter:"yyyy-MM-dd hh:mm:ss",size:130},{displayName:"客户名称",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"业务员",name:"scanUserName"},{displayName:"业务员编码",name:"scanUserCode",isCode:!0},{displayName:"结算对象",name:"accountUserName"},{displayName:"结算对象编码",name:"accountUserCode",isCode:!0},{displayName:"账单类型",name:"type",value:function(t){var a=e.billTypeList.filter((function(e){return e.value===Number(t.type)}));return a.length>0?a[0].name:""}},{displayName:"目的地省",name:"dispProvName"},{displayName:"目的地市",name:"dispCityName"},{displayName:"结算重量",name:"accountWeight",formatter:"0.00"},{displayName:"网点重量",name:"recWeight",formatter:"0.00"},{displayName:"中心重量",name:"centerWeight",formatter:"0.00"},{displayName:"面单类型",name:"billType",value:function(t){var a=e.mianTypeList.filter((function(e){return e.value===Number(t.billType)}));return a.length>0?a[0].name:t.billType}},{displayName:"运单发放",name:"billProvideManName"},{displayName:"运单发放网点",name:"billUseSiteName"},{displayName:"备注",name:"remark",isConversionComma:!0}]},exportObj:{fileName:"结算信息缺失"},optionsClone:{},exportUrl:"/bills/new/sendaBills/exportSettleMiss",requestUrl:r["Lb"],isQs:!1}},methods:{dateTypeChange:function(){var e=this,t=this.dateTypeList.filter((function(t){return t.value==e.queryContent.dateType}))[0].needTime;if(this.needTime!==t){this.needTime=t,this.showTimePick=this.needTime?"datetime":"daterange",this.dataFormat=this.needTime?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd";var a=this.needTime?u()(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00":u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),i=this.needTime?u()(new Date).subtract(0,"days").format("YYYY-MM-DD")+" 23:59:59":u()(new Date).subtract(0,"days").format("YYYY-MM-DD");this.dateValue=[a,i]}},filterCurrRow:function(e,t){this.checkedRows=Object(d["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},checkboxAllClick:function(e){this.filterCurrRow([],e)},showSynchronousBillIssue:function(){this.$refs.synchronousBillIssue.show=!0},showEditDialog:function(){this.$refs.edit.show=!0},getType:function(e){this.billType=e?0:1},changeAccountType:function(e){console.log(e),this.queryContent.accountType=e?e.type:""},onSearch:function(){if(this.queryContent.billCode="",this.queryContent.bagCode="",this.billCode){var e=Object(d["trim"])(this.billCode).split(/[,\r\n]/);if(e.length>1e3)return void this.msg("最多支持1000个运单号查询");0===this.billType?this.queryContent.billCode=e.join(","):this.queryContent.bagCode=e.join(",")}else{var t=g["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],31,"","days");if(!t)return;var a=Object(d["cloneDeep"])(this.dateValue);this.queryContent.startDate=u()(a[0]).format("YYYY-MM-DD")+" 00:00:00",this.queryContent.endDate=u()(a[1]).format("YYYY-MM-DD")+" 23:59:59",this.queryContent.noBillUser=Number(this.noBillUser),this.queryContent.noDestination=Number(this.noDestination),this.queryContent.noSettle=Number(this.noSettle),this.queryContent.noWeight=Number(this.noWeight)}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent)},query:function(e){var t=this;e&&(this.optionsClone=Object(d["cloneDeep"])(e),""===this.optionsClone.type&&delete this.optionsClone.type),Object(r["Kb"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(console.log(e),t.tableData=e.data.list,t.tableData.map((function(e){e.remark&&(e.remark=e.remark.replace(/,/g,"，"))})),t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[]),t.checkedRows=[]})).catch((function(e){t.pagination.total=0,t.tableData=[],t.checkedRows=[]}))},exportNew:function(){if(this.tableData.length>0){if(this.queryContent.billCode)return this.checklistData=this.tableData,void this.checklistExport();this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}else this.msg("没有数据无法导出!")},onClickTable:function(){this.$refs.datePicker.$refs.start._data.pickerVisible=!1,this.$refs.datePicker.$refs.end._data.pickerVisible=!1,this.$refs.customerId.$refs.refSzUserSelect.blur(),this.$refs.scanUserId.$refs.refSzUserSelect.blur(),this.$refs.dateType.blur(),this.$refs.billType.blur()},resetQueryContent:function(){this.resetType++,this.billCode="",this.billType=0,this.noSettle=!1,this.noWeight=!1,this.noDestination=!1,this.noBillUser=!1,this.showTimePick="daterange",this.dataFormat="yyyy-MM-dd",this.needTime=!1,this.dateValue=[u()(new Date).subtract(1,"days").format("YYYY-MM-DD"),u()(new Date).subtract(0,"days").format("YYYY-MM-DD")],this.queryContent={billCode:"",bagCode:"",scanSiteId:"",dateType:1,type:"",startDate:"",endDate:"",customerId:"",scanUserId:"",ifOwnSite:0,oneSiteId:null,noSettle:0,noWeight:0,noDestination:0,noBillUser:0,accountType:""}},toggle:function(e){var t=this;this.collapseHeight=e>0?e:this.collapseHeight,this.height=335,this.height=e>0?this.height-this.collapseHeight:this.height+this.collapseHeight,this.$nextTick((function(){t.z_method.refreshSpread()}))}},computed:{contentHeight:function(){if(this.z_param.isActiveH)return this.$store.getters.clientHeight-355+60;if(this.z_param.isNode)return this.$store.getters.clientHeight-this.height;var e=this.$store.getters.clientHeight-this.height+60;return window.innerHeight<698&&(e+=100),e}},watch:{switchOptions:{handler:function(e,t){var a=this;this.show||(this.show=!0,this.$nextTick((function(){a.z_method.refreshSpread()}))),this.pagination.pageSize=100,this.pagination.currentPage=1,this.resetQueryContent(),this.queryContent.dateType=0,this.onSearch()},deep:!0}}},de=ue,he=(a("4e42"),a("7e13"),Object(f["a"])(de,te,ae,!1,null,"534cc14e",null)),me=he.exports,pe={name:"billPreprocess",components:{waitingForAccountEntry:D,waitingForWeightAdjustment:P,abnormalFinanceInformation:ee,missingFinanceInformation:me},data:function(){return{activeName:"waitingForAccountEntry",switchOptions:{}}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){console.log(e,t),this.activeName=e,this.z_method.refreshSpread(),this.switchOptions=t}}},be=pe,fe=(a("6793"),Object(f["a"])(be,i,s,!1,null,"628a4f8a",null));t["default"]=fe.exports},"81a8":function(e,t,a){},"829a":function(e,t,a){},"82bf":function(e,t,a){},"836f":function(e,t,a){"use strict";var i=a("238a5"),s=a.n(i);s.a},"83ef":function(e,t,a){"use strict";var i=a("8523"),s=a.n(i);s.a},"84fd":function(e,t,a){"use strict";var i=a("2af4"),s=a.n(i);s.a},"84ff":function(e,t,a){"use strict";var i=a("539e"),s=a.n(i);s.a},8517:function(e,t,a){"use strict";var i=a("3fac"),s=a.n(i);s.a},8523:function(e,t,a){},8651:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"明细编辑",name:"tab1"}},[a("detailH",{ref:"detailed"})],1),a("el-tab-pane",{attrs:{label:"汇总结算",name:"tab2"}},[a("summaryH",{on:{goto:e.goto}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendPayFee"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left","margin-top":"5px"}},[a("sc-bill-code",{ref:"billcodeRef",attrs:{resetType:e.resetType},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCodes,callback:function(t){e.billCodes=t},expression:"billCodes"}})],1),a("div",{staticStyle:{display:"inline-block"}},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both row1"},[a("li",[a("label",{staticClass:"w-r-85"},[e._v("签收时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至",limit:e.limit,clearable:!0,editable:!0,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-60"},[e._v("账单类型：")]),a("el-select",{ref:"accountType",staticClass:"inputh-85",on:{change:function(t){e.accountTypeChange(t,["accountTypeDisable"])}},model:{value:e.queryContent.accountType,callback:function(t){e.$set(e.queryContent,"accountType",t)},expression:"queryContent.accountType"}},e._l(e.billsTypeStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85 w-rh-85"},[e._v("结算对象：")]),a("sc-users",{staticClass:"inputh-85",attrs:{type:"7",param:e.typeParam},on:{change:e.dispAccountChange},model:{value:e.queryContent.dispAccountId,callback:function(t){e.$set(e.queryContent,"dispAccountId",t)},expression:"queryContent.dispAccountId"}})],1),a("li",[a("label",{staticClass:"w-r-85 w-r-95"},[e._v("签收网点(下级)：")]),a("sc-users",{staticClass:"inputh-85",attrs:{type:"7",param:{types:"99"},disabled:e.subDisable.signSiteIdDisable},on:{change:function(t){e.signSiteIdChange(t,["signSiteIdDisable","accountTypeDisable"])}},model:{value:e.queryContent.signSiteId,callback:function(t){e.$set(e.queryContent,"signSiteId",t)},expression:"queryContent.signSiteId"}})],1)])]),a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both row2"},[a("li",[a("el-select",{staticClass:"input-80",attrs:{disabled:e.disable.typeDisable},on:{change:function(t){e.typeChange(t,["typeDisable","accountTypeDisable"])}},model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},[a("el-option",{key:0,attrs:{label:"派件时间",value:0}}),a("el-option",{key:1,attrs:{label:"发件时间",value:1}})],1),a("sc-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),a("li",[a("label",{staticClass:"w-r-60"},[e._v("派件业务员：")]),a("sc-users",{staticClass:"inputh-85",attrs:{type:"2",disabled:e.selfDisable.dispManIdDisable},on:{change:function(t){e.dispManIdChange(t,["dispManIdDisable","accountTypeDisable"])}},model:{value:e.queryContent.dispManId,callback:function(t){e.$set(e.queryContent,"dispManId",t)},expression:"queryContent.dispManId"}})],1),a("li",[a("label",{staticClass:"w-r-85 w-rh-85"},[e._v("签收业务员：")]),a("sc-users",{staticClass:"inputh-85",attrs:{type:"2",disabled:e.selfDisable.signManIdDisable},on:{change:function(t){e.signManIdChange(t,["signManIdDisable","accountTypeDisable"])}},model:{value:e.queryContent.signManId,callback:function(t){e.$set(e.queryContent,"signManId",t)},expression:"queryContent.signManId"}})],1),a("li",[a("label",{staticClass:"w-r-85 w-r-95"},[e._v("下级网点：")]),a("sc-site",{staticClass:"inputh-85",attrs:{param:{child:!0},disabled:e.subDisable.dispNextSiteIdDisable},on:{model:function(t){e.dispNextSiteIdChange(t,["dispNextSiteIdDisable","accountTypeDisable"])}},model:{value:e.queryContent.dispNextSiteId,callback:function(t){e.$set(e.queryContent,"dispNextSiteId",t)},expression:"queryContent.dispNextSiteId"}})],1)])]),a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both row3"},[a("li",[a("label",{staticClass:"w-r-85"},[e._v("产品类型：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.productType,callback:function(t){e.$set(e.queryContent,"productType",t)},expression:"queryContent.productType"}},e._l(e.productOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("面单类型：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.billType,callback:function(t){e.$set(e.queryContent,"billType",t)},expression:"queryContent.billType"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-102"},[e._v("中心派费：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.centreFeeType,callback:function(t){e.$set(e.queryContent,"centreFeeType",t)},expression:"queryContent.centreFeeType"}},e._l(e.centerDispatchFeeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("应付派费：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.dispFee,callback:function(t){e.$set(e.queryContent,"dispFee",t)},expression:"queryContent.dispFee"}},e._l(e.dispatchFeeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85 w-rh-85"},[e._v("签收状态：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.signStatus,callback:function(t){e.$set(e.queryContent,"signStatus",t)},expression:"queryContent.signStatus"}},e._l(e.signTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("签收网点：")]),a("el-select",{staticClass:"inputh-85",attrs:{disabled:e.selfDisable.signSiteTypeDisable},on:{change:function(t){e.signSiteTypeChange(t,["signSiteTypeDisable","accountTypeDisable"])}},model:{value:e.queryContent.signSiteType,callback:function(t){e.$set(e.queryContent,"signSiteType",t)},expression:"queryContent.signSiteType"}},e._l(e.signSiteOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])])]),a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both last-but-one-ul row4"},[a("li",[a("label",[e._v("增值类型：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.valueAddedType,callback:function(t){e.$set(e.queryContent,"valueAddedType",t)},expression:"queryContent.valueAddedType"}},e._l(e.valueAddedTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-78"},[e._v("是否共配：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.xnStatus,callback:function(t){e.$set(e.queryContent,"xnStatus",t)},expression:"queryContent.xnStatus"}},e._l(e.xnStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("退件：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.returnType,callback:function(t){e.$set(e.queryContent,"returnType",t)},expression:"queryContent.returnType"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",{staticClass:"mr20"},[a("label",{staticClass:"w-r-85"},[e._v("问题件：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.queryContent.probStamp,callback:function(t){e.$set(e.queryContent,"probStamp",t)},expression:"queryContent.probStamp"}},e._l(e.isProblemOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",{staticClass:"mr20"},[a("el-checkbox",{attrs:{label:"派件与签收业务员不一致",disabled:e.selfDisable.dispSignManTypeDisable},on:{change:function(t){e.dispSignManTypeChange(t,["dispSignManTypeDisable","accountTypeDisable"])}},model:{value:e.dispSignManType,callback:function(t){e.dispSignManType=t},expression:"dispSignManType"}})],1),a("li",[a("el-checkbox",{attrs:{label:"下级网点与签收网点不一致",disabled:e.subDisable.nextSiteSignSiteTypeDisable},on:{change:function(t){e.nextSiteSignSiteTypeChange(t,["nextSiteSignSiteTypeDisable","accountTypeDisable"])}},model:{value:e.nextSiteSignSiteType,callback:function(t){e.nextSiteSignSiteType=t},expression:"nextSiteSignSiteType"}})],1)])]),a("div",{staticClass:"send-pay-fee-btn"},[a("el-button",{staticClass:"m-b-16",attrs:{type:"danger"},on:{click:e.reset}},[a("i",{staticClass:"el-icon-refresh"}),e._v("重置\n        ")]),a("el-button",{staticClass:"m-b-16",attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v("查询\n        ")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[e.z_method.showBtn("btn_sendPayFee_edit")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.edit}},[e._v("\n            编辑\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendPayFee_updateDisFee")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.updateDispatchFee}},[e._v("\n              修改派费\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendPayFee_recalculation")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.showRecalculation}},[e._v("\n            重新计算\n          ")])],1):e._e(),a("li",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应付派费=派费报价费用-总部直链派费")]),a("i",{staticClass:"el-icon-question pointer m-l-8",staticStyle:{"margin-left":"10px","font-size":"16px"}})])],1)])]),a("div",{staticClass:"right-btn"},[a("el-button",{staticClass:"m-b-16",attrs:{type:"primary"},on:{click:e.showCell}},[e._v("\n        显示列设置\n      ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.isearchExport}},[a("i",{staticClass:"el-icon-download"}),e._v("导出\n      ")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-cell-setting",{ref:"refTxCell",attrs:{menuName:"付业务员承包区派费",menuKey:"sendPayFeeDetail",spreadHeadData:e.tableHead.columns},on:{model:e.onColumns}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sc-batch-process",{attrs:{title:"重新计算",dialogVisible:e.recalculation,tableData:e.currRow,batchUrl:e.batchUrl,columns:e.columns},on:{model:e.close}}),a("edit",{ref:"edit",attrs:{checkedRows:e.currRow}}),a("updateDispatchFee",{ref:"updateDispatchFee",attrs:{checkedRows:e.currRow}})],1)},l=[],o=(a("9a33"),a("f548"),a("6d57"),a("163d"),a("ac0d")),r=a("391c"),c=a("a3be"),u=a("f37e"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"send-pay-fee-edit",staticStyle:{"z-index":"2001",position:"relative"}},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[e.checkedRows.length<2&&e.show?a("ul",[a("li",[a("div",{staticClass:"label"},[a("div",{staticClass:"checkbox hidden"},[a("el-checkbox",{model:{value:e.editParams.dispAccountId.state,callback:function(t){e.$set(e.editParams.dispAccountId,"state",t)},expression:"editParams.dispAccountId.state"}})],1),a("div",{staticClass:"name"},[a("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("结算对象：")])]),a("div",{staticClass:"input isSelf"},[a("sc-users",{attrs:{type:"7",param:{types:"2,4,99"}},on:{change:e.getUserType},model:{value:e.editParams.dispAccountId.value,callback:function(t){e.$set(e.editParams.dispAccountId,"value",t)},expression:"editParams.dispAccountId.value"}})],1)]),a("li",[a("div",{staticClass:"label"},[a("div",{staticClass:"checkbox hidden"},[a("el-checkbox",{model:{value:e.editParams.remark.state,callback:function(t){e.$set(e.editParams.remark,"state",t)},expression:"editParams.remark.state"}})],1),a("div",{staticClass:"name"},[e._v("备注：")])]),a("div",{staticClass:"input remark"},[a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字符！",rows:"6",maxlength:"30"},model:{value:e.editParams.remark.value,callback:function(t){e.$set(e.editParams.remark,"value",t)},expression:"editParams.remark.value"}})],1)])]):e._e(),e.checkedRows.length>1&&e.show?a("ul",[a("li",[a("div",{staticClass:"label"},[a("div",{staticClass:"checkbox"},[a("el-checkbox",{model:{value:e.editParams.dispAccountId.state,callback:function(t){e.$set(e.editParams.dispAccountId,"state",t)},expression:"editParams.dispAccountId.state"}})],1),a("div",{staticClass:"name"},[e._v("结算对象：")])]),a("div",{staticClass:"input"},[a("sc-users",{attrs:{disabled:!e.editParams.dispAccountId.state,type:"7",param:{types:"2,4,99"}},on:{change:e.getUserType},model:{value:e.editParams.dispAccountId.value,callback:function(t){e.$set(e.editParams.dispAccountId,"value",t)},expression:"editParams.dispAccountId.value"}})],1)]),a("li",[a("div",{staticClass:"label"},[a("div",{staticClass:"checkbox"},[a("el-checkbox",{model:{value:e.editParams.remark.state,callback:function(t){e.$set(e.editParams.remark,"state",t)},expression:"editParams.remark.state"}})],1),a("div",{staticClass:"name"},[e._v("备注：")])]),a("div",{staticClass:"input remark"},[a("el-input",{attrs:{disabled:!e.editParams.remark.state,type:"textarea",placeholder:"最多输入30个字符！",rows:"6",maxlength:"30"},model:{value:e.editParams.remark.value,callback:function(t){e.$set(e.editParams.remark,"value",t)},expression:"editParams.remark.value"}})],1)])]):e._e()])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.beginEdit}},[e._v("确定")])],1)]),a("sc-batch-process",{attrs:{title:"编辑",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns,isQs:e.isQs},on:{model:e.close}})],1)},h=[],m=(a("e10e"),{props:{checkedRows:{type:Array,default:[]}},data:function(){return{isQs:!1,isSelf:!0,params:{child:!0},checked:"",columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"/bills/new/paiFeiBill/updateAccount",batchData:[],dialogVisible:!1,checkList:[],input:"",billCode:"",show:!1,editParams:{remark:{state:!1,value:""},dispAccountId:{state:!1,value:"",type:""}}}},beforeMount:function(){},methods:{getUserType:function(e){e&&(this.editParams.dispAccountId.type=e.type)},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.editParams={remark:{state:!1,value:""},dispAccountId:{state:!1,value:"",type:""}},1===e.length&&(e[0].remark&&(this.editParams.remark={state:!0,value:e[0].remark}),e[0].dispAccountId&&(this.editParams.dispAccountId={state:!0,value:e[0].dispAccountName}))},close:function(){this.reset(),this.$parent.onSearch(),this.dialogVisible=!1},beginEdit:function(){var e=this;if(this.batchData=Object(r["cloneDeep"])(this.checkedRows),1===this.batchData.length){if(null===this.editParams.dispAccountId.value)return this.msg("请输入结算对象哦！");if(this.batchData[0].dispAccountName===this.editParams.dispAccountId.value&&this.batchData[0].remark===this.editParams.remark.value)return void this.msg("请输入编辑内容哦！");this.batchData[0].dispAccountName!==this.editParams.dispAccountId.value&&(this.batchData[0].dispAccountId=this.editParams.dispAccountId.value,this.batchData[0].dispAccountType=this.editParams.dispAccountId.type),this.batchData[0].remark!==this.editParams.remark.value&&(this.batchData[0].remark=this.editParams.remark.value)}else{var t=!1;if(Object.keys(this.editParams).forEach((function(a){e.checkedRows.length<2?""!==e.editParams[a].value&&(t=!0,e.batchData.forEach((function(t){t[a]=e.editParams[a].value,console.log(e.editParams[a].type),void 0!==e.editParams[a].type&&(t.dispAccountType=e.editParams[a].type)}))):e.editParams[a].state&&""!==e.editParams[a].value&&(t=!0,e.batchData.forEach((function(t){t[a]=e.editParams[a].value,console.log(e.editParams[a].type),void 0!==e.editParams[a].type&&(t.dispAccountType=e.editParams[a].type)})))})),this.editParams.dispAccountId.state&&""===this.editParams.dispAccountId.value&&this.editParams.remark.state&&""===this.editParams.remark.value)return this.msg("请输入结算对象和备注哦！");if(this.editParams.dispAccountId.state&&""===this.editParams.dispAccountId.value||null===this.editParams.dispAccountId.value)return this.msg("请输入结算对象哦！");if(this.editParams.remark.state&&""===this.editParams.remark.value)return this.msg("请输入备注哦！");if(!t)return void this.msg("请输入编辑内容哦！")}this.batchUrl="/bills/new/paiFeiBill/updateAccount",this.show=!1,this.dialogVisible=!0},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})},onSubmit:function(){}},watch:{}}),p=m,b=(a("49d5"),a("3b53"),a("623f")),f=Object(b["a"])(p,d,h,!1,null,"174904d8",null),y=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"send-pay-fee-edit",staticStyle:{"z-index":"2001",position:"relative"}},[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"修改派费",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"label"},[a("div",{staticClass:"name"},[e._v("应付派费：")])]),a("div",{staticClass:"input"},[a("el-input",{attrs:{type:"number",max:"9999",min:"0",maxlength:"7"},model:{value:e.dispatchFee,callback:function(t){e.dispatchFee=t},expression:"dispatchFee"}})],1)])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.beginEdit}},[e._v("确定")])],1)]),a("sc-batch-process",{attrs:{title:"修改派费",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,columns:e.columns,isQs:e.isQs},on:{model:e.close}})],1)},g=[],C={props:{checkedRows:{type:Array,default:[]}},data:function(){return{isQs:!1,columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"/bills/new/paiFeiBill/updateDispFee",batchData:[],dialogVisible:!1,dispatchFee:"",billCode:"",show:!1,multiStatus:{dif:!0,value:""}}},beforeMount:function(){},methods:{reset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.batchData=[],this.dispatchFee="",1===e.length)this.dispatchFee=void 0==e[0].dispFee?"":e[0].dispFee;else if(e.length>1){this.batchData=Object(r["cloneDeep"])(this.checkedRows);var t="",a=!1;this.batchData.map((function(e,i){0==i?t=e.dispFee:t!=e.dispFee&&(a=!0)})),a&&(void 0!=t&&(this.dispatchFee=""),this.multiStatus={dif:!1,value:t})}else this.dispatchFee="",this.multiStatus={dif:!0,value:""}},close:function(){this.reset(),this.$parent.onSearch(),this.dialogVisible=!1},beginEdit:function(){var e=this;console.log(this.dispatchFee),""!==this.dispatchFee?-1!==(this.dispatchFee+"").indexOf(".")&&(this.dispatchFee+"").split(".")[1].length>2||+this.dispatchFee<0||+this.dispatchFee>9999?this.msg("保存失败，应付派费输入范围【0，9999】，且最多输入两位小数哦"):(this.batchData=Object(r["cloneDeep"])(this.checkedRows),this.multiStatus.dif||this.dispatchFee!==this.multiStatus.value?(this.batchData.map((function(t){t.dispFee=e.dispatchFee})),this.batchUrl="/bills/new/paiFeiBill/updateDispFee",this.show=!1,this.dialogVisible=!0):this.msg("金额不能与原来的全部一致")):this.msg("保存失败，应付派费输入范围【0，9999】，且最多输入两位小数哦")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:3e3})},onSubmit:function(){}},watch:{},computed:{btnDisabled:function(){return console.log(this.dispatchFee),""===this.dispatchFee}}},x=C,k=(a("0855"),a("ae64"),Object(b["a"])(x,v,g,!1,null,"78a2bbe2",null)),D=k.exports,w=a("6bf2"),S=a.n(w),_={mixins:[o["b"]],components:{edit:y,updateDispatchFee:D},data:function(){var e=this;return{updateDispatchFeeDisable:!0,disable:{accountTypeDisable:!1,typeDisable:!1},selfDisable:{signManIdDisable:!1,dispManIdDisable:!1,dispSignManTypeDisable:!1,signSiteTypeDisable:!1},subDisable:{dispNextSiteIdDisable:!1,nextSiteSignSiteTypeDisable:!1,signSiteIdDisable:!1},typeParam:{types:"2,4,99"},resetType:0,dispSignManType:!1,nextSiteSignSiteType:!1,queryContent:{billCodes:"",signDateStart:"",signDatEnd:"",type:0,scanDateStart:"",scanDateEnd:"",dispDateStart:"",dispDateEnd:"",accountType:-2,dispAccountId:"",siteId:"",dispManId:"",signManId:"",dispNextSiteId:"",valueAddedType:-1,centreFeeType:-1,xnStatus:-1,dispFee:-1,userDispatchFee:"",signStatus:-1,signSiteId:"",signSiteType:-1,productType:-1,billType:-1,returnType:-1,probStamp:-1,dispSignManType:0,nextSiteSignSiteType:0},batchTitle:"",recalculation:!1,columns:[{displayName:"运单号",name:"billCode"}],batchUrl:"/bills/new/paiFeiBill/recalculate",optionAdd:[{code:"",id:0,name:"为空"}],ishowHeights:0,ishowHeight:0,currRow:[],billCodes:"",limit:31,timeValue:[],dateValue:[S()(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",S()(new Date).subtract(0,"days").format("YYYY-MM-DD")+" 23:59:59"],billsTypeStatusOptions:[{value:-2,label:"全部"},{value:-1,label:"无对象"},{value:2,label:"承包区"},{value:4,label:"直营业务员"},{value:99,label:"下级网点"}],settleUserOptions:[{label:"直营业务员",value:0},{label:"承包区",value:1},{label:"下级网点",value:2}],centerDispatchFeeOptions:[{value:-1,label:"全部"},{value:0,label:"等于0或空"},{value:1,label:"大于0"},{value:2,label:"等于0.4"}],dispatchFeeOptions:[{value:-1,label:"全部"},{value:0,label:"等于0或空"},{value:1,label:"大于0"}],billsTypeOptions:[{value:-1,label:"全部"},{value:1,label:"星联面单"},{value:2,label:"时效面单"},{value:3,label:"普通面单"},{value:4,label:"电子面单"}],productOptions:[{label:"全部",value:-1},{label:"普通快件",value:1},{label:"星联件",value:2},{label:"星联冷链件",value:4},{label:"时效件",value:3}],valueAddedTypeOptions:[{value:-1,label:"全部"},{value:5,label:"优鲜送"},{value:6,label:"尊享件"},{value:22,label:"当日达"},{value:99,label:"其他"}],signSiteOptions:[{value:-1,label:"全部"},{value:1,label:"本网点"},{value:0,label:"非本网点"}],signTypeOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],isStatusOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],isProblemOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],xnStatusOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],tableData:[],tableHeadNew:{columns:[]},tableHead:{columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"运单号",name:"billCode",size:150,isCode:!0,hlock:!0,lock:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"派件业务员",name:"dispManName",size:100,hlock:!0,isCode:!0,lock:!0},{displayName:"派件业务员工号",name:"dispManCode",size:120,hlock:!0,isCode:!0,lock:!0},{displayName:"签收业务员",name:"signManName",size:100,hlock:!0,isCode:!0,lock:!0},{displayName:"签收业务员工号",name:"signMaCode",size:120,hlock:!0,isCode:!0,lock:!0},{displayName:"下级网点",name:"dispNextSiteName",size:100,hlock:!0,isCode:!0,lock:!0},{displayName:"下级网点编码",name:"dispNextSiteCode",size:100,hlock:!0,isCode:!0,lock:!0},{displayName:"结算对象",name:"dispAccountName",size:100,isCode:!0},{displayName:"账单类型",name:"dispAccountType",size:100,value:function(t){var a=e.billsTypeStatusOptions.filter((function(e){return e.value===t.dispAccountType}));return a.length>0?a[0].label:""}},{displayName:"面单类型",name:"billType",size:100,value:function(e){return Object(u["u"])(Number(e.billType))}},{displayName:"产品类型",name:"productName",size:100},{displayName:"增值类型",name:"valueAddedType",size:100,value:function(e){return Object(u["E"])(Number(e.valueAddedType))}},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"基础派费",name:"baseFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"产品派费",name:"productFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"增值派费",name:"valueAddedFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"特殊业务派费",name:"specialDispFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"总部直链派费",name:"headLinearFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"应付派费",name:"dispFee",size:100,formatter:"0.00",showTotal:!0},{displayName:"派件时间",name:"dispTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"发件时间",name:"scanDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收网点编码",name:"signSiteCode",size:100,isCode:!0},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:100,value:function(e){return Object(u["x"])(Number(e.signStatus))}},{displayName:"寄件网点",name:"sendSiteName",size:100,isCode:!0},{displayName:"中心派费",name:"centerDispFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"二级中转费",name:"twoLevelFee",size:150,showTotal:!0,formatter:"0.00"},{displayName:"乡镇二级中转费",name:"villTwoLevelFee",size:150,showTotal:!0,formatter:"0.00"},{displayName:"乡镇派费补贴",name:"villDispFeeSub",size:150,showTotal:!0,formatter:"0.00"},{displayName:"是否共配",name:"xnStatus",size:100,value:function(e){return e.xnStatus?"是":"否"}},{displayName:"是否退件",name:"returnType",size:100,value:function(e){return e.returnType?"是":"否"}},{displayName:"问题件标识",name:"probStamp",size:100,value:function(e){return e.probStamp?"是":"否"}},{displayName:"操作人",name:"auditMan",size:100},{displayName:"操作时间",name:"auditDate",formatter:"yyyy-MM-dd hh:mm:ss",size:100},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},exportObj:{fileName:"付业务员承包区派费"},optionsClone:"",exportUrl:"/bills/new/paiFeiBill/export"}},created:function(){},methods:{onColumns:function(e){this.tableHeadNew.columns=e},signSiteIdChange:function(e,t){e?this.updateSub(t):this.updateAll(t)},nextSiteSignSiteTypeChange:function(e,t){e?this.updateSub(t):this.updateAll(t)},dispSignManTypeChange:function(e,t){e?this.updateSelf(t):this.updateAll(t)},signSiteTypeChange:function(e,t){-1===e?this.updateAll(t):this.updateSelf(t)},dispNextSiteIdChange:function(e,t){e?this.updateSub(t):this.updateAll(t)},signManIdChange:function(e,t){e?this.updateSelf(t):this.updateAll(t)},dispManIdChange:function(e,t){e?this.updateSelf(t):this.updateAll(t)},typeChange:function(e,t){e?this.updateSub(t):this.updateSelf(t)},accountTypeChange:function(e,t){-2===e?this.updateAll(t):99===e?this.updateSub(t):this.updateSelf(t)},dispAccountChange:function(e){e?99===e.type?this.updateSub():this.updateSelf():this.updateAll()},updateAll:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.queryContent.accountType=-2,this.queryContent.dispAccountId="",this.queryContent.type=0,this.disable)this.disable[e]=!1;for(var t in this.selfDisable)this.selfDisable[t]=!1;for(var a in this.subDisable)this.subDisable[a]=!1;this.typeParam={types:"2,4,99"}},updateSub:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var t in this.queryContent.type=1,this.queryContent.signSiteType=-1,this.queryContent.dispManId="",this.queryContent.signManId="",this.dispSignManType=!1,this.disable){for(var a=0;a<e.length;a++){if(t===e[a]){this.disable[t]=!1;break}this.disable[t]=!0}0===e.length&&(this.disable[t]=!0)}for(var i in this.selfDisable)this.selfDisable[i]=!0;for(var s in this.subDisable)this.subDisable[s]=!1;this.typeParam={types:"99"}},updateSelf:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(var t in this.queryContent.type=0,this.queryContent.dispNextSiteId="",this.queryContent.signSiteId="",this.nextSiteSignSiteType=!1,this.disable){for(var a=0;a<e.length;a++){if(t===e[a]){this.disable[t]=!1;break}this.disable[t]=!0}0===e.length&&(this.disable[t]=!0)}for(var i in this.selfDisable)this.selfDisable[i]=!1;for(var s in this.subDisable)this.subDisable[s]=!0;this.typeParam={types:"2,4"}},close:function(){this.currRow=[],this.onSearch(),this.recalculation=!1},showRecalculation:function(){this.recalculation=!0},updateDispatchFee:function(){this.$refs.updateDispatchFee.reset(this.currRow),this.$refs.updateDispatchFee.show=!0},edit:function(){var e=this;this.isSelf=!1,this.isSub=!1,this.currRow.forEach((function(t){99===t.dispAccountType?e.isSub=!0:e.isSelf=!0})),this.$refs.edit.isSelf=this.isSelf,this.$refs.edit.reset(this.currRow),this.$refs.edit.show=!0},detailed:function(e,t){var a=this;this.reset(),this.dateValue=[S()(e.signDate).format("YYYY-MM-DD")+" 00:00:00",S()(e.signDate).format("YYYY-MM-DD")+" 23:59:59"],99===e.dispAccountType?this.typeParam={types:"99"}:this.typeParam={types:"2,4"},this.queryContent.dispAccountId=e.dispAccountId,this.queryContent.accountType=e.dispAccountType,setTimeout((function(){a.onSearch()}),0)},handleClose:function(){},reset:function(){this.updateAll(),this.resetType++,this.billCodes="",this.dispSignManType=!1,this.nextSiteSignSiteType=!1,this.timeValue=[],this.dateValue=[S()(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",S()(new Date).subtract(0,"days").format("YYYY-MM-DD")+" 23:59:59"],this.queryContent={signDateStart:"",signDatEnd:"",type:0,scanDateStart:"",scanDateEnd:"",dispDateStart:"",dispDateEnd:"",accountType:-2,dispAccountId:"",siteId:"",dispManId:"",signManId:"",dispNextSiteId:"",valueAddedType:-1,centreFeeType:-1,xnStatus:-1,dispFee:-1,userDispatchFee:"",signStatus:-1,signSiteId:"",signSiteType:-1,billType:-1,returnType:-1,probStamp:-1,dispSignManType:0,nextSiteSignSiteType:0,billCodes:"",productType:-1}},keyup:function(){this.billCodes=this.billCodes.replace(/,/g,"").replace(/，/g,"")},isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCodes||this.optionsClone.bagCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},showCell:function(){this.$refs.refTxCell.open()},onSearch:function(){this.queryContent.bagCode="",this.queryContent.billCodes="";var e="";if(this.billCodes){if(this.billCodes.length>=2e4)return void this.msg("输入的单号长度最多为20000字符");var t=Object(r["trim"])(this.billCodes).split(/[\r\n]/);if(t.length>1e3)return void this.msg("最多支持1000个运单号查询");e=t.join(","),this.queryContent.billCodes=e}else{if(!this.dateValue[2]&&!this.timeValue[2])return void this.msg("必须选择一个完整的时间");if(this.dateValue[2]<0)return void this.msg("签收开始时间不能大于结束时间");if(this.dateValue[2]>=this.limit)return void this.msg("签收时间最多可查询".concat(this.limit,"天"));var a=this.queryContent.type?"发件":"派件";if(this.timeValue[2]&&this.timeValue[2]<0)return void this.msg("".concat(a,"开始时间不能大于结束时间"));if(this.timeValue[2]&&this.timeValue[2]>=this.limit)return void this.msg("".concat(a,"时间最多可查询").concat(this.limit,"天"));if(!!this.timeValue[0]!==!!this.timeValue[1])return void this.msg("输入的".concat(a,"时间不完整"));this.queryContent.billCodes=null,this.queryContent.signDateStart=this.dateValue[0],this.queryContent.signDatEnd=this.dateValue[1],this.queryContent.dispSignManType=this.dispSignManType?1:0,this.queryContent.nextSiteSignSiteType=this.nextSiteSignSiteType?1:0,this.queryContent.type?(this.queryContent.dispDateStart="",this.queryContent.dispDateEnd="",this.queryContent.scanDateStart=this.timeValue[0],this.queryContent.scanDateEnd=this.timeValue[1]):(this.queryContent.dispDateStart=this.timeValue[0],this.queryContent.dispDateEnd=this.timeValue[1],this.queryContent.scanDateStart="",this.queryContent.scanDateEnd="")}this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.optionsClone=Object(r["cloneDeep"])(this.queryContent),this.currRow=[],this.query(this.queryContent)},query:function(e){var t=this;Object(c["Ac"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCodes||t.optionsClone.bagNos?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message)),t.typeParam={types:"2,4,99"}})).catch((function(e){t.pagination.total=0,t.tableData=[],t.typeParam={types:"2,4,99"}}))},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check})),this.updateDispatchFeeDisable=this.currRow.some((function(e){return 99===e.dispAccountType}))},proving:function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-300:this.z_param.isNode?this.$store.getters.clientHeight-400:this.$store.getters.clientHeight-340}}},N=_,T=(a("4472"),a("836f"),Object(b["a"])(N,n,l,!1,null,"796c443c",null)),I=T.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendReceiveFeeSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-62"},[e._v("签收日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("账单类型：")]),a("el-select",{staticClass:"inputh-80",model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},e._l(e.billsTypeStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("结算对象：")]),a("sc-users",{staticClass:"inputh-80",attrs:{type:"7",param:{types:"2,4,99"}},on:{change:e.onChange},model:{value:e.queryContent.dispAccountId,callback:function(t){e.$set(e.queryContent,"dispAccountId",t)},expression:"queryContent.dispAccountId"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("加款状态：")]),a("el-select",{staticClass:"inputh-80",model:{value:e.queryContent.deductStatus,callback:function(t){e.$set(e.queryContent,"deductStatus",t)},expression:"queryContent.deductStatus"}},e._l(e.paymentStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"buttonMove cake"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v("查询\n        ")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[e.z_method.showBtn("btn_sendPayFee_addFee")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.batchProcess("加预付款")}}},[e._v("\n            加预付款\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendPayFee_addFeeUnderline")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.batchProcess("线下返款")}}},[e._v("\n            线下返款\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendPayFee_cancelAddFee")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.batchProcess("取消加款")}}},[e._v("\n            取消加款\n          ")])],1):e._e()])]),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearchExport}},[a("i",{staticClass:"el-icon-download"}),e._v("导出\n      ")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sc-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRowClone,batchUrl:e.batchUrl},on:{model:e.close}})],1)},E=[],z={mixins:[o["b"]],data:function(){var e=this;return{dateValue:[this.moment(new Date).subtract(16,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],typeDisable:!1,type:-2,queryContent:{startDate:"",endDate:"",deductStatus:-1,dispAccountId:"",type:-2},paymentStatusOptions:[{value:-1,label:"全部"},{value:3,label:"未加款"},{value:2,label:"已线上加款"},{value:5,label:"已线下返款"}],billsTypeStatusOptions:[{value:-2,label:"全部"},{value:-1,label:"无对象"},{value:2,label:"承包区"},{value:4,label:"直营业务员"},{value:99,label:"下级网点"}],addStatusList:[{label:"未加款",value:0},{label:"已线上加款",value:1},{label:"已线下返款",value:2}],ishowHeights:0,ishowHeight:0,limit:31,currRow:[],currRowClone:[],tableData:[],tableHead:{rowStyle:function(e){return 4!==Number(e.billStatus)&&6!==Number(e.billStatus)||1!==Number(e.tagCancelHexiaoFee)?4===Number(e.billStatus)||6===Number(e.billStatus)||"已线上加款"===e.deductName||"已线下返款"===e.deductName?{foreColor:"green"}:void 0:{foreColor:"red"}},dblclick:this.dblclick,columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"dispAccountName",size:100,isCode:!0},{displayName:"结算对象编码",name:"dispAccountCode",size:100,isCode:!0},{displayName:"账单类型",name:"dispAccountType",size:100,value:function(t){var a=e.billsTypeStatusOptions.filter((function(e){return e.value===t.dispAccountType}));return a.length>0?a[0].label:"无对象"}},{displayName:"签收票数",name:"signNum",size:100},{displayName:"基础派费",name:"baseFee",size:100,formatter:"0.00"},{displayName:"产品派费",name:"productFee",size:100,formatter:"0.00"},{displayName:"增值派费",name:"valueAddedFee",size:100,formatter:"0.00"},{displayName:"特殊业务派费",name:"specialDispFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"总部直链派费",name:"headLinearFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"应付派费",name:"dispFee",size:100,formatter:"0.00"},{displayName:"加款金额",name:"dispFeeHexiao",size:100,value:function(e){return"未加款"==e.deductName?"":e.dispFeeHexiao}},{displayName:"差额",name:"subtractAmount",size:100},{displayName:"加款状态",name:"deductName",size:100},{displayName:"结算流水号",name:"waterNumber",size:120,isCode:!0,value:function(e){return"已线下返款"==e.deductName||"未加款"==e.deductName?"":e.waterNumber}},{displayName:"结算编号",name:"accountNumber",size:100,isCode:!0,value:function(e){return"已线下返款"==e.deductName||"未加款"==e.deductName?"":e.accountNumber}},{displayName:"加款人",name:"hexiaoMan",value:function(e){return"未加款"==e.deductName?"":e.hexiaoMan}},{displayName:"加款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss",value:function(t){return"未加款"==t.deductName?"":e.moment(t.hexiaoTime).format("YYYY-MM-DD HH:mm:ss")}},{displayName:"中心派费",name:"centerDispFee",size:100,formatter:"0.00"},{displayName:"二级中转费",name:"twoLevelFee",size:150,formatter:"0.00"},{displayName:"乡镇二级中转补贴",name:"villTwoLevelFee",size:150,formatter:"0.00"},{displayName:"乡镇派费补贴",name:"villDispFeeSub",size:150,formatter:"0.00"},{displayName:"备注",name:"remark",size:400,isConversionComma:!0,isCode:!0}]},exportObj:{fileName:"付业务员承包区派费-汇总"},optionsClone:"",requestUrl:c["Cc"],batchTitle:"",batchDialogVisible:!1,columns:[{displayName:"签收日期",name:"signDate"},{displayName:"结算对象",name:"dispAccountName"},{displayName:"应付派费",name:"dispFee"},{displayName:"签收票数",name:"signNum"}],batchUrl:"",exportUrl:"",requestMode:"get",userType:""}},methods:{batchProcess:function(e){var t=this;this.currRowClone=Object(r["cloneDeep"])(this.currRow),"加预付款"===e&&(this.currRowClone.forEach((function(e){e.blStatus=1,e.signDate=t.moment(e.signDate).format("YYYY-MM-DD")})),this.batchTitle="加预付款",this.batchUrl="/bills/tidbPaiFeiDayAccount/hexiao"),"线下返款"===e&&(this.currRowClone.forEach((function(e){e.blStatus=5,e.signDate=t.moment(e.signDate).format("YYYY-MM-DD")})),this.batchTitle="线下返款",this.batchUrl="/bills/tidbPaiFeiDayAccount/hexiao"),"取消加款"===e&&(this.currRowClone.forEach((function(e){e.blStatus=2,e.signDate=t.moment(e.signDate).format("YYYY-MM-DD")})),this.batchTitle="取消加款",this.batchUrl="/bills/tidbPaiFeiDayAccount/hexiao"),this.batchDialogVisible=!0},close:function(){this.currRow=[],this.onSearch(),this.batchDialogVisible=!1},dblclick:function(e,t,a){this.$emit("goto","tab1",t,this.tableHead.columns[a.col].displayName)},onChange:function(e){this.userType=e?e.type:""},onSearch:function(){this.dateValue[2]<0?this.msg("签收日期时间不能大于结束时间"):this.limit<=this.dateValue[2]?this.msg("最多可查询".concat(this.limit,"天的数据")):(this.queryContent.startDate=this.dateValue[0],this.queryContent.endDate=this.dateValue[1],this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.userType=this.userType,this.queryContent.currentPage=this.pagination.currentPage,this.currRow=[],this.optionsClone=Object(r["cloneDeep"])(this.queryContent),this.query(this.queryContent))},onSearchExport:function(){if(0!==this.tableData.length)if(this.pagination.total>this.pagination.pageSize){if(this.pagination.total>2e5)return void this.msg("最大只支持导出20万，请选择更精准的查询条件");this.searchExport()}else this.checklistData=this.tableData,this.checklistExport();else this.msg("没有数据无法导出")},ischeckrow:function(e){return e.forEach((function(t,a){t.remark&&(e[a].remark=t.remark.replace(/,/g,"-")),"未加款"===t.deductName&&(e[a].hexiaoTime="",e[a].hexiaoMan="",e[a].accountNumber="",e[a].waterNumber="",e[a].balance="",e[a].dispFeeHexiao="")})),e},query:function(e){var t=this;Object(c["Bc"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=t.ischeckrow(e.data.list),t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-170:this.z_param.isNode?this.$store.getters.clientHeight-240:this.$store.getters.clientHeight-190}}},F=z,M=(a("5bce"),Object(b["a"])(F,O,E,!1,null,null,null)),P=M.exports,Y={name:"sendPayFee",components:{summaryH:P,detailH:I},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t,a)}}},j=Y,$=Object(b["a"])(j,i,s,!1,null,"5c85a593",null);t["default"]=$.exports},"86ee":function(e,t,a){"use strict";var i=a("c0de"),s=a.n(i);s.a},8704:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"870e":function(e,t,a){"use strict";var i=a("3b4d"),s=a.n(i);s.a},"875d":function(e,t,a){},"88bd":function(e,t,a){},"88d2":function(e,t,a){"use strict";var i=a("ba23"),s=a.n(i);s.a},"8b09":function(e,t,a){},"8b86":function(e,t,a){"use strict";var i=a("ad05"),s=a.n(i);s.a},"8c8c":function(e,t,a){},"8cb8":function(e,t,a){},"8d23":function(e,t,a){"use strict";var i=a("f8e5"),s=a.n(i);s.a},"8d2e":function(e,t,a){"use strict";var i=a("b62a"),s=a.n(i);s.a},"8da8":function(e,t,a){},"8e4b":function(e,t,a){"use strict";var i=a("8da8"),s=a.n(i);s.a},"8ed7":function(e,t,a){"use strict";var i=a("1e56"),s=a.n(i);s.a},"8f77":function(e,t,a){"use strict";var i=a("9227"),s=a.n(i);s.a},"8f7e":function(e,t,a){},9227:function(e,t,a){},"94f7":function(e,t,a){},9532:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总",name:"tab1"}},[a("summaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detailH",{ref:"detailed"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main detail"},[a("div",{staticClass:"twoTransferFee"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search1",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"f-l"},[a("sz-odd-numbers",{ref:"oddNum",model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticClass:"dh_content"},[a("div",{staticClass:"h_36"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-72"},[e._v("签收时间：")]),a("sc-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("业务员：")]),a("sz-users",{ref:"refUserId",model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("结算对象：")]),a("sz-contractAreaOrCustomer",{ref:"refSettlement",model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1)])]),a("div",[a("ul",[a("li",[a("label",{staticClass:"w-r-72"},[e._v("收件时间：")]),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1),a("li",[a("label",{staticClass:"w-r-72"},[e._v("承包区：")]),a("sz-users",{ref:"refAreaId",attrs:{types:[2]},model:{value:e.areaId,callback:function(t){e.areaId=t},expression:"areaId"}})],1)])])]),a("div",{staticClass:"dh_content",staticStyle:{float:"right","margin-right":"20px","margin-top":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n        ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 重置\n          ")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"justify-content":"flex-end","padding-right":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.isearchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n    ")])],1)],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[e.billCode.length<1?a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}}):e._e()],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},l=[],o=a("d9ba"),r=(a("9a33"),a("ac0d")),c=a("391c"),u=a("a3be"),d=a("f37e"),h={mixins:[r["b"]],data:function(){var e=this;return{exportUrl:"",selectDateType2:1,ishow:!0,ishowHeight:0,ishowHeights:0,optionsClone:"",requestUrl:u["Xc"],exportObj:{fileName:"二级中转费结算-明细-"},billCode:"",dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],limit:31,dateValue2:[],areaId:"",accountUserId:"",userId:"",tableData:[],tableHead:{columns:[{displayName:"单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"收件时间",name:"scanDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"揽收业务员",name:"recManName",size:100,isCode:!0},{displayName:"业务员编号",name:"recManCode",size:100,isCode:!0},{displayName:"承包区名称",name:"areaName",size:100,isCode:!0},{displayName:"客户名称",name:"customerName",size:100,isCode:!0},{displayName:"结算对象",name:"settlementName",size:100,isCode:!0},{displayName:"目的地",name:"dispatch",size:120,isCode:!0},{displayName:"城市",name:"cityName",size:120,isCode:!0},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"二级中转费",name:"twoLevelFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"面单发放",name:"userProvCustomerName",size:100,isCode:!0},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"}]}}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},methods:{isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?his.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},reset:function(){this.billCode="",this.$refs.oddNum.clear(),this.dateValue=[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.userId="",this.dateValue2=[],this.areaId="",this.accountUserId="",this.tableData=[],this.pagination.currentPage=1,this.pagination.total=0,this.$refs.refUserId.clear(),this.$refs.refAreaId.clear(),this.$refs.refSettlement.clear()},detailed:function(e){var t=this;this.reset(),this.dateValue=[this.moment(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.signDate).format("YYYY-MM-DD")+" 23:59:59"],this.$refs.refSettlement.chooseOne(e.settlementName,e.accountUserId,(function(a,i){0===e.accountUserId&&(t.accountUserId=0),t.onSearch()}))},onSearch:function(){var e=this.billCode;if(e=","==e.substring(e.length-1)?e.substring(0,e.length-1):e,e.length<1)if(3===this.dateValue.length){if(this.dateValue[2]<0)return void this.msg("签收的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue[2])return void this.msg("签收时间最多可查询"+this.limit+"天的数据,请重新选择时间");if(0!=this.dateValue2.length){var t="";if(t=1===this.selectDateType2?"收件":"录单",3===this.dateValue2.length){if(this.dateValue2[2]<0)return void this.msg(t+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(t+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else if(2===this.dateValue2.length){if(null!=this.dateValue2[0]||null!=this.dateValue2[1])return void this.msg("请填写完整的"+t+"时间段")}else if(1===this.dateValue2.length&&null!=this.dateValue2[0])return void this.msg("请填写完整的"+t+"时间段")}}else if(2===this.dateValue.length){if(null!=this.dateValue[0]||null!=this.dateValue[1])return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、收件时间不能同时为空");var a="";if(a=1===this.selectDateType2?"收件":"录单",3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+a+"时间段"):void this.msg("签收时间、收件时间不能同时为空"):void this.msg("请填写完整的"+a+"时间段");if(this.dateValue2[2]<0)return void this.msg(a+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(a+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{if(0!==this.dateValue.length)return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、收件时间不能同时为空");var i="";if(i=1===this.selectDateType2?"收件":"录单",3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+i+"时间段"):void this.msg("签收时间、收件时间不能同时为空"):void this.msg("请填写完整的"+i+"时间段");if(this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{for(var s=e.split(","),n=0;n<s.length;n++)""!=s[n]&&null!=s[n]&&void 0!=Object(o["a"])(s[n])||(s.splice(n,1),n-=1);if(s.length>1e3)return void this.msg("查询单号不能超过1000个单号");e=s.join(",")}this.pagination.currentPage=1;var l={currentPage:this.pagination.currentPage,pageSize:this.pagination.pageSize,accountUserId:this.accountUserId,areaId:this.areaId,recManId:this.userId,startSignDate:null==this.dateValue[0]?"":this.dateValue[0],endSignDate:null==this.dateValue[1]?"":this.dateValue[1],type:-1};3===this.dateValue2.length&&(l.startDate=null==this.dateValue2[0]?"":this.dateValue2[0],l.endDate=null==this.dateValue2[1]?"":this.dateValue2[1]),e.length>0&&(l.billCode=e),this.optionsClone=Object(c["cloneDeep"])(l),this.query(l)},query:function(e){var t=this;Object(u["Uc"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-300:this.$store.getters.clientHeight-260}}},m=h,p=(a("0335"),a("623f")),b=Object(p["a"])(m,n,l,!1,null,null,null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"twoTransferFee"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"right",margin:"6px 6px 0 0"}},[a("el-button",{staticStyle:{padding:"9px 15px !important"},attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("ul",[a("li",[a("label",[e._v("签收日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{attrs:{type:"1"},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1)])])]),a("div",{staticStyle:{"border-top":"10px solid #e9eef2",padding:"10px 0px 0px 15px"}},[a("ul",[a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("hexiao")}}},[e._v("\n            扣款\n          ")])],1),a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("fanhexiao")}}},[e._v("\n            取消扣款\n          ")])],1),a("li",{staticClass:"m-r-20 last-child"},[a("el-button",{attrs:{type:"success"},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n          ")])],1)])])],1),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("batch-process",{attrs:{title:e.title,width:"500px",height:"500px",dialogVisible:e.dialogVisible,columns:e.columns,impDataNew:e.currRow,totalNum:e.totalNum,importUrl:e.importUrl,optionsH:e.optionsH,types:"twoTransferFeeS"},on:{model:e.close}})],1)},v=[],g=(a("6d57"),a("163d"),{mixins:[r["b"]],data:function(){var e=this;return{requestMode:"get",title:"",dialogVisible:!1,importUrl:"",optionsH:{},columns:[],currRow:[],totalNum:0,ishow:!0,ishowHeight:0,ishowHeights:0,optionsClone:"",requestUrl:u["bd"],limit:16,exportObj:{fileName:"二级中转费结算-汇总-"},settlementId:"",tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],tableHead:{dblclick:this.dblclick,columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"settlementName",size:120,isCode:!0},{displayName:"二级中转费",name:"twoLevelFee",showTotal:!0,size:120,formatter:"0.00"},{displayName:"扣款金额",name:"hexiaoFee",showTotal:!0,size:120,formatter:"0.00"},{displayName:"费用差额",name:"subFee",showTotal:!0,size:120,formatter:"0.00"},{displayName:"扣款状态",name:"hexiaoStatus",value:function(e){return Object(d["i"])(Number(e.hexiaoStatus))}},{displayName:"扣款人",name:"hexiaoMan",isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},methods:{checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=Object(c["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},actionBut:function(e){var t=this;this.columns=[{displayName:"签收日期",name:"signDate",minWidth:"120"},{displayName:"结算对象",name:"settlementName",minWidth:"120"}];var a="";"hexiao"==e?(a="确定执行扣款审核操作吗？",this.importUrl="/bills/transferFeeBill/hexiao",this.title="扣款"):"fanhexiao"==e&&(a="确定执行取消扣款审核操作吗？",this.importUrl="/bills/transferFeeBill/fanhexiao",this.title="取消扣款"),this.title="批量"+this.title+"处理结果",""!=a&&this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.checkBillPost()})).catch((function(){}))},checkBillPost:function(){var e=this;this.currRow.forEach((function(t){t.signDate=e.moment(t.signDate).format("YYYY-MM-DD")})),this.totalNum=this.currRow.length,this.dialogVisible=!0},close:function(e){this.dialogVisible=!1,this.title="",this.columns=[],this.totalNum=0,this.importUrl="","noSearch"!=e&&this.onSearch()},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={accountUserId:this.settlementId,currentPage:this.pagination.currentPage,endSignDate:this.dateValue[1],pageSize:this.pagination.pageSize,startSignDate:this.dateValue[0]};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["Yc"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-250:this.$store.getters.clientHeight-190}}}),C=g,x=Object(p["a"])(C,y,v,!1,null,null,null),k=x.exports,D={name:"twoTransferFeeBill",components:{summaryH:k,detailH:f},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t)}}},w=D,S=(a("3fc7"),Object(p["a"])(w,i,s,!1,null,null,null));t["default"]=S.exports},9568:function(e,t,a){},"95a1":function(e,t,a){},9687:function(e,t,a){},"96c8":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!==typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"970f":function(e,t,a){},"971f":function(e,t,a){"use strict";var i=a("f524"),s=a.n(i);s.a},"984e":function(e,t,a){"use strict";var i=a("2e16"),s=a.n(i);s.a},9857:function(e,t,a){"use strict";var i=a("b6b3"),s=a.n(i);s.a},"98e3":function(e,t,a){},9941:function(e,t,a){},"9a3f":function(e,t,a){"use strict";var i=a("8f7e"),s=a.n(i);s.a},"9acf":function(e,t,a){},"9b62":function(e,t,a){"use strict";var i=a("2912"),s=a.n(i);s.a},"9bba":function(e,t,a){},"9ce0":function(e,t,a){"use strict";var i=a("4e5e"),s=a.n(i);s.a},"9e46":function(e,t,a){},"9e9a":function(e,t,a){},"9f84":function(e,t,a){},a0ad:function(e,t,a){},a172:function(e,t,a){"use strict";var i=a("c5ec"),s=a.n(i);s.a},a21f:function(e,t,a){},a2b4:function(e,t,a){"use strict";var i=a("139b"),s=a.n(i);s.a},a38a:function(e,t,a){},a39a:function(e,t,a){"use strict";var i=a("b85b"),s=a.n(i);s.a},a3ef:function(e,t,a){"use strict";var i=a("9f84"),s=a.n(i);s.a},a402:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"明细"}},[a("detail")],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",limit:e.limit,clearable:!1,editable:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("下级网点名称：")]),a("sz-site",{attrs:{param:{child:!0}},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},l=[],o=a("ac0d"),r=a("f37e"),c=a("391c"),u=a("a3be"),d={mixins:[o["b"]],data:function(){return{requestUrl:u["Ib"],limit:31,exportObj:{fileName:"包仓费固定费账单"},tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],monthValue:new Date,multipleSelection:[],loading:"",siteId:"",tableHead:{dblclick:this.dbclick,columns:[{displayName:"下级网点名称",name:"name"},{displayName:"下级网点编号",name:"lowSiteCode",isCode:!0},{displayName:"日期",name:"settlementTime",formatter:"yyyy-MM-dd"},{displayName:"应扣金额",name:"shoulDeductFee",showTotal:!0},{displayName:"扣款模式",name:"mode",value:function(e){return Object(r["k"])(e.mode)}},{displayName:"扣款状态",name:"status",value:function(e){return Object(r["i"])(e.status)}},{displayName:"实扣金额",name:"deductionMoney",showTotal:!0,value:function(e){return 1==e.status||"已扣款"==e.status?e.shoulDeductFee:0}},{displayName:"包仓费",name:"baggageFee",showTotal:!0},{displayName:"航空包仓费",name:"aviationFee",showTotal:!0},{displayName:"其他固定费用",name:"otherFee",showTotal:!0},{displayName:"扣款人",name:"deductionName"},{displayName:"扣款时间",name:"gmtCreate",size:130,formatter:"yyyy-MM-dd hh:mm:ss"}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},methods:{onSearch:function(){if(this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择时间");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择时间");else if(""==this.siteId&&this.dateValue[2]>0)this.msg("请选择网点");else{var e={lowSiteId:this.siteId,startDate:this.dateValue[0],endDate:this.dateValue[1],pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.pagination.currentPage=1,this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(u["Hb"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){}))}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-250:this.$store.getters.clientHeight-190}}},h=d,m=a("623f"),p=Object(m["a"])(h,n,l,!1,null,null,null),b=p.exports,f={name:"subPackageBill",components:{detail:b},data:function(){return{}},methods:{}},y=f,v=Object(m["a"])(y,i,s,!1,null,"33d8afc7",null);t["default"]=v.exports},a413:function(e,t,a){"use strict";var i=a("9e46"),s=a.n(i);s.a},a5a9:function(e,t,a){},a684:function(e,t,a){},a716:function(e,t,a){},a792:function(e,t,a){},ab532:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总结算",name:"tab1"}},[a("summaryH",{attrs:{bilTypes:e.bilType},on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细查询",name:"tab2",lazy:""}},[a("detailH",{ref:"detailed",attrs:{bilTypes:e.bilType}})],1),a("el-tab-pane",{attrs:{lazy:"",label:"已扣款月汇总",name:"tab3"}},[a("debitedMonthlySummary",{attrs:{bilTypes:e.bilType}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main detail added-weight-feeNew"},[a("div",{staticClass:"addedWeightFee sz-search"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("ul",{staticClass:"clear-both sz-search-box",attrs:{slot:"collapse"},slot:"collapse"},[a("li",{staticClass:"detail-li1"},[a("sc-bill-code",{model:{value:e.billCode,callback:function(t){e.billCode="string"===typeof t?t.trim():t},expression:"billCode"}})],1),a("li",{staticClass:"detail-li2",staticStyle:{"flex-direction":"column","align-items":"flex-start","justify-content":"center"}},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:" "},[e._v("签收时间：")]),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("账单类型：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.billTypeStatus,callback:function(t){e.billTypeStatus=t},expression:"billTypeStatus"}},e._l(e.bilTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{attrs:{type:"7",param:e.settleParam},on:{change:e.settlementChange},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",{staticClass:" "},[e._v("客户：")]),a("sc-users",{attrs:{type:"3"},model:{value:e.customerId,callback:function(t){e.customerId=t},expression:"customerId"}})],1)]),a("ul",{staticClass:"clear-both"},[a("li",[a("label",[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dateType,callback:function(t){e.dateType=t},expression:"dateType"}},e._l(e.dateTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("sz-date-picker",{attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1),a("li",[a("label",{staticClass:" "},[e._v("目的地省：")]),a("sc-province",{model:{value:e.provinceId,callback:function(t){e.provinceId=t},expression:"provinceId"}})],1),a("li",[a("label",{staticClass:" "},[e._v("业务员：")]),a("sc-users",{attrs:{type:"2"},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1)])]),a("li",[a("el-button",{attrs:{type:"danger"},on:{click:e.onReset}},[a("i",{staticClass:"el-icon-refresh"}),e._v(" 重置 ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1)])])],1),a("div",{staticClass:"sz-search-btn",staticStyle:{"justify-content":"flex-end","padding-right":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExportDetail}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n    ")])],1),a("div",{style:{height:e.contentHeight+e.collapseHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticStyle:{position:"absolute",right:"0",bottom:"-20px"}},[e.billCode.length<1?a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}}):e._e()],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:"收有偿续重派费-明细-",exportUrl:"/bills/new/sendaBills/export",exportOption:e.optionsClone}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=(a("9a33"),a("ac0d")),c=a("391c"),u=a("a3be"),d=(a("f1ac9"),a("4055"));function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={mixins:[r["b"]],props:["bilTypes"],data:function(){var e=this;return{settleParam:{types:""},userId:"",customerId:"",provinceId:"",billTypeStatus:-2,billCode:"",settlementId:"",accountUserType:"",siteId:"",dateType:2,dateTypeOptions:[{label:"收件时间",id:2},{label:"到件时间",id:3}],collapseHeight:0,optionsClone:{},requestUrl:u["b"],exportObj:{fileName:"收有偿续重派费-明细-"},dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],limit:31,dateValue2:[],tableData:[],tableHead:{columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(e){e&&d["billUtils"].openBills(e)}},{displayName:"账单类型",name:"type",value:function(t){return d["billUtils"].dict(e.bilTypes,t.type,"id","label")}},{displayName:"扫描时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName",size:100,isCode:!0},{displayName:"客户编码",name:"customerCode",size:100,isCode:!0},{displayName:"业务员",name:"scanUserName",size:100,isCode:!0},{displayName:"业务员编号",name:"scanUserCode",size:100,isCode:!0},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:120,isCode:!0},{displayName:"目的地省",name:"dispProvName",size:120,isCode:!0},{displayName:"目的城市",name:"dispCityName",size:120,isCode:!0},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0},{displayName:"有偿派费",name:"dispFee",size:100,showTotal:!0},{displayName:"续重派费",name:"dispAddFee",size:100,showTotal:!0},{displayName:"有偿派费差额",name:"subFee",size:100,showTotal:!0},{displayName:"运单发放",name:"billUseSiteName",size:100,isCode:!0},{displayName:"运单发放网点",name:"billProvideManName",size:100,isCode:!0},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"}]}}},methods:{checkDate:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"签收时间",i=this.moment(t).diff(this.moment(e),"second");return i/=86400,i?i<0?(this.msg(a+"开始时间不能大于结束时间,请重新选择时间"),!1):!(this.limit<=i)||(this.msg(a+"最多可查询"+this.limit+"天的数据,请重新选择时间"),!1):(this.msg("请选择完整的"+a),!1)},onSearch:function(){this.pagination.currentPage=1;var e=this.pagination.pageSize,t={};if(this.billCode&&""!=this.billCode){var a=this.billCode.split(/[,\r\n]/);if(a.length>1e3)return void this.msg("最多支持1000个运单号查询");t={billCodes:a.join(","),querySource:1}}else{if(!this.dateValue[2]&&!this.dateValue2[2])return void this.msg("签收时间、收件时间/到件时间必须选择一个");if(this.dateValue[2]<0)return void this.msg("签收开始时间不能大于结束时间");if(this.dateValue[2]>=this.limit)return void this.msg("签收时间最多可查询".concat(this.limit,"天"));if(0!=this.dateValue2.length){var i=this.dateType?"收件时间":"到件时间";if(this.dateValue2[2]&&this.dateValue2[2]<0)return void this.msg("".concat(i,"开始时间不能大于结束时间"));if(this.dateValue2[2]&&this.dateValue2[2]>=this.limit)return void this.msg("".concat(i,"时间最多可查询").concat(this.limit,"天"));if(!!this.dateValue2[0]!==!!this.dateValue2[1])return void this.msg("输入的".concat(i,"时间不完整"));t=m({},t,{type:this.dateType,startDate:this.dateValue2[0],endDate:this.dateValue2[1]})}t.startDate||t.endDate||(t.type=""),t=m({},t,{pageSize:e,currentPage:1,startSignDate:this.dateValue[0],endSignDate:this.dateValue[1],billType:this.billTypeStatus,accountUserId:this.settlementId,accountUserType:this.accountUserType,lowSiteId:this.siteId,dispProvId:this.provinceId,salesmanId:this.userId,customerId:this.customerId,querySource:1})}-2==this.billTypeStatus&&delete t.billType,this.optionsClone=Object(c["cloneDeep"])(t),this.query(this.optionsClone)},query:function(e){var t=this;this.checklistData=[],Object(u["a"])(e).then((function(e){t.settleParam.types&&(t.settleParam.types=""),e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.checklistData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[],t.settleParam.types&&(t.settleParam.types="")}))},onReset:function(){this.billCode="",this.dateValue=[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],this.billTypeStatus=-2,this.settlementId="",this.accountUserType="",this.siteId="",this.dateType=2,this.dateValue2=[],this.provinceId="",this.customerId="",this.userId=""},settlementChange:function(e){this.accountUserType=null!==e?e.type:""},detailed:function(e){var t=this;this.onReset(),this.dateValue=[this.moment(e.signDate).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.signDate).format("YYYY-MM-DD")+" 23:59:59"],this.billTypeStatus=e.billType,this.accountUserType=e.billType,99==e.billType?this.settleParam.types="99":this.settleParam.types="0,2,4",setTimeout((function(){t.settlementId=e.accountUserId,t.onSearch()}),0)},searchExportDetail:function(){this.queryContent=m({},this.optionsClone),0!==this.checklistData.length?(!this.billCode||""==this.billCode)&&this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():this.checklistExport():this.msg("请先查询")}},computed:{contentHeight:function(){var e=this;setTimeout((function(){e.z_method.refreshSpread()}));var t=this.collapseHeight?110:0;return this.z_param.isActiveH?this.$store.getters.clientHeight-280-t+this.collapseHeight:this.$store.getters.clientHeight-350+this.collapseHeight-t}}},b=p,f=(a("614b"),a("84fd"),a("623f")),y=Object(f["a"])(b,n,l,!1,null,"6dade66f",null),v=y.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"addedWeightFee"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"right",margin:"6px 6px 0 0"}},[a("el-button",{staticStyle:{padding:"9px 15px !important"},attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("ul",[a("li",[a("label",[e._v("签收月份：")]),a("el-date-picker",{attrs:{type:"month",editable:!1,clearable:!1,placeholder:"选择月"},model:{value:e.monthValue,callback:function(t){e.monthValue=t},expression:"monthValue"}})],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{attrs:{type:"7"},on:{change:e.settlementChange},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",[e._v("账单类型：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.billTypeStatus,callback:function(t){e.billTypeStatus=t},expression:"billTypeStatus"}},e._l(e.bilTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])])]),a("div",{staticStyle:{"border-top":"5px solid #e9eef2",padding:"10px 0px 0px 15px"}},[a("ul",{staticStyle:{"justify-content":"flex-end"}},[a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n          ")])],1)])])],1),a("div",{style:{height:e.contentHeight+e.collapseHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticStyle:{position:"absolute",right:"0"}})],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},C=[],x=(a("f37e"),{mixins:[r["b"]],props:["bilTypes"],data:function(){var e=this;return{billTypeStatus:-2,totalNum:0,collapseHeight:0,optionsClone:"",requestUrl:u["f"],limit:31,exportObj:{fileName:"收有偿续重派费-已扣款月汇总-"},settlementId:"",siteId:"",settlementType:"",tableData:[],monthValue:new Date,tableHead:{columns:[{displayName:"签收月份",name:"signDate",size:120,isCode:!0,value:function(t){return t.signDate?e.moment(t.signDate).format("YYYY-MM"):""}},{displayName:"结算对象",name:"settlementName",size:120,isCode:!0},{displayName:"结算对象编码",name:"settlementCode",isCode:!0},{displayName:"账单类型",name:"billType",value:function(t){return d["billUtils"].dict(e.bilTypes,t.billType,"id","label")}},{displayName:"票数",name:"feeNum",showTotal:!0,size:120},{displayName:"结算重量",name:"accountWeight",showTotal:!0,size:120},{displayName:"有偿派费",name:"dispFee",showTotal:!0,size:120},{displayName:"续重派费",name:"addDispFee",showTotal:!0,size:120},{displayName:"有偿派费差额",name:"subFee",showTotal:!0,size:120},{displayName:"已扣款金额",name:"hexiaoFee",showTotal:!0,size:120}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},methods:{onSearch:function(){if(this.currRow=[],null!=this.settlementId&&""!=this.settlementId||null!=this.siteId&&""!=this.siteId){var e={signDate:this.moment(this.monthValue).startOf("month").format("YYYY-MM-DD"),settlementId:this.settlementId,settlementType:this.settlementType,billType:this.billTypeStatus,lowSettlementId:this.siteId,state:1};this.optionsClone=Object(c["cloneDeep"])(e),this.query(e)}else this.msg("请先选择一个结算对象")},query:function(e){var t=this;Object(u["e"])(e).then((function(e){e.data&&e.data.length>0?t.tableData=e.data:(t.tableData=[],t.msg(e.message?e.message:"没有数据哟！"))})).catch((function(e){t.tableData=[]}))},settlementChange:function(e){this.settlementType=null!==e?e.type:""},searchExport:function(){0!==this.tableData.length?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")}},computed:{contentHeight:function(){var e=this;setTimeout((function(){e.z_method.refreshSpread()}),0);var t=this.collapseHeight?50:0;return this.z_param.isNode?this.$store.getters.clientHeight-210+this.collapseHeight-t:this.$store.getters.clientHeight-190+this.collapseHeight-t}}}),k=x,D=Object(f["a"])(k,g,C,!1,null,null,null),w=D.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"addedWeightFee"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"right",margin:"6px 6px 0 0"}},[a("el-button",{staticStyle:{padding:"9px 15px !important"},attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n          ")])],1),a("ul",[a("li",[a("label",[e._v("签收日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{attrs:{type:"7"},on:{change:e.settlementChange},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",[e._v("账单类型：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.billTypeStatus,callback:function(t){e.billTypeStatus=t},expression:"billTypeStatus"}},e._l(e.bilTypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("label",[e._v("扣款状态：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.deductionStatus,callback:function(t){e.deductionStatus=t},expression:"deductionStatus"}},e._l(e.deductionStatusObj,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)])])]),a("div",{staticStyle:{"border-top":"5px solid #e9eef2",padding:"10px 0px 0px 15px"}},[a("ul",[e.z_method.showBtn("btn_addedWeightFeeNew_hexiaosub")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("hexiaosub")}}},[e._v("\n            扣派费差额\n          ")])],1):e._e(),e.z_method.showBtn("btn_addedWeightFeeNew_underlineSub")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("underlineSub")}}},[e._v("\n            线下收派费差\n          ")])],1):e._e(),e.z_method.showBtn("btn_addedWeightFeeNew_hexiao")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("hexiao")}}},[e._v("\n            扣续重派费\n          ")])],1):e._e(),e.z_method.showBtn("btn_addedWeightFeeNew_fanhexiao")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:function(t){return e.actionBut("fanhexiao")}}},[e._v("\n            取消扣款\n          ")])],1):e._e(),e.z_method.showBtn("btn_addedWeightFeeNew_editRemark")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.editRemark}},[e._v("\n            编辑备注\n          ")])],1):e._e(),a("li",[a("el-tooltip",{attrs:{effect:"dark",content:"派费差额=基础派费+续重派费-面单补贴！",placement:"bottom-start"}},[a("i",{staticClass:"el-icon-question"})])],1),a("li",{staticClass:"m-r-20 last-child"},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n          ")])],1)])])],1),a("div",{style:{height:e.contentHeight+e.collapseHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticStyle:{position:"absolute",right:"0"}},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sc-batch-process",{attrs:{title:e.title,height:500,dialogVisible:e.dialogVisible,columns:e.columns,tableData:e.batchTableData,totalNum:e.totalNum,batchUrl:e.importUrl,optionsH:e.optionsH,types:"addedWeightFeeS"},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"编辑备注",visible:e.centerDialogVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"400px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字！",maxlength:"30","show-word-limit":"",rows:3},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSaveRemark}},[e._v("确 定")])],1)],1)],1)},_=[],N={mixins:[r["b"],r["a"]],props:["bilTypes"],data:function(){var e=this;return{batchTableData:[],textarea:"",centerDialogVisible:!1,billTypeStatus:-2,deductionStatus:-1,deductionStatusObj:[{label:"全部",id:-1},{label:"未扣款",id:2},{label:"已线上扣款",id:1},{label:"已线下收款",id:4},{label:"待扣款",id:0}],title:"",dialogVisible:!1,importUrl:"",optionsH:{},columns:[],currRow:[],totalNum:0,isQs:!1,collapseHeight:0,optionsClone:"",requestUrl:u["d"],limit:31,settlementId:"",settlementType:"",siteId:"",tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(0,"days").format("YYYY-MM-DD")],tableHead:{dblclick:this.dblclick,columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"签收日期",name:"signDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"settlementName",size:120,isCode:!0},{displayName:"结算对象编码",name:"settlementCode",isCode:!0},{displayName:"账单类型",name:"billType",value:function(t){return d["billUtils"].dict(e.bilTypes,t.billType,"id","label")}},{displayName:"签收票数",name:"feeNum",showTotal:!0,size:120},{displayName:"有偿派费",name:"dispFee",showTotal:!0,size:120},{displayName:"续重派费",name:"addDispFee",showTotal:!0,size:120},{displayName:"有偿派费差额",name:"subFee",showTotal:!0,size:120},{displayName:"扣款金额",name:"hexiaoFee",showTotal:!0,size:120},{displayName:"扣款状态",name:"hexiaoStatus",value:function(e){return void 0===e.hexiaoStatus||2===e.hexiaoStatus?"未扣款":1===e.hexiaoStatus?"已线上扣款":4===e.hexiaoStatus?"已线下收款":0===e.hexiaoStatus||3===e.hexiaoStatus?"待扣款":void 0}},{displayName:"扣款人",name:"hexiaoMan",isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"备注",name:"remark",size:150,isConversionComma:!0}]}}},activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},methods:{checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=Object(c["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},actionBut:function(e){var t=this;if(0!==this.currRow.length){this.columns=[{displayName:"签收日期",name:"signDate",minWidth:"120"},{displayName:"结算对象",name:"settlementName",minWidth:"120"}];var a="/bills/new/addDispFee/",i=[{title:"扣续重派费",url:a+"hexiaoDispFee",type:1},{title:"线下收派费差",url:a+"offLineCollection",type:5},{title:"扣派费差额",url:a+"hexiaoSubFee",type:2},{title:"取消扣款",url:a+"fanhexiao",type:3},{title:"编辑备注",url:a+"updateRemark",type:4}],s="",n=0;switch(e){case"hexiaosub":s="确定执行扣派费差额审核操作吗？",this.importUrl=i[2].url,this.title=i[2].title,n=i[2].type;break;case"underlineSub":s="确定执行线下收派费差操作吗？",this.importUrl=i[1].url,this.title=i[1].title,n=i[1].type;break;case"hexiao":s="确定执行扣续重派费审核操作吗？",this.importUrl=i[0].url,this.title=i[0].title,n=i[0].type;break;case"fanhexiao":s="确定执行取消扣款操作吗？",this.importUrl=i[3].url,this.title=i[3].title,n=i[3].type;break;default:return this.importUrl=i[4].url,this.title="批量编辑备注处理结果",n=i[4].type,void this.checkBillPost(4)}this.title="批量"+this.title+"处理结果",""!=s&&this.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then((function(){t.checkBillPost(n)})).catch((function(){}))}else this.msg("请选择数据")},checkBillPost:function(e){var t=this;this.batchTableData=this.currRow.map((function(a){var i={signDate:t.moment(a.signDate).format("YYYY-MM-DD"),settlementId:a.accountUserId,billType:a.billType,type:e,settlementType:a.billType,remark:t.textarea,settlementName:a.settlementName};return console.log(i,"44"),i})),console.log(this.batchTableData,"4"),this.totalNum=this.currRow.length,this.dialogVisible=!0},close:function(e){this.dialogVisible=!1,this.title="",this.columns=[],this.totalNum=0,this.importUrl="","noSearch"!=e&&this.onSearch()},onSaveRemark:function(){""!=this.textarea&&d["billUtils"].regRemark(this.textarea)?(this.centerDialogVisible=!1,this.actionBut()):this.msg("请输入正确的备注")},dblclick:function(e,t,a){t.sTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 00:00:00",t.eTime=this.moment(t.scanDate).format("YYYY-MM-DD")+" 23:59:59",this.$emit("goto","tab2",t)},settlementChange:function(e){this.settlementType=null!==e?e.type:""},onSearch:function(){this.currRow=[];var e=d["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],this.limit,"签收日期","days");if(e){this.pagination.currentPage=1;var t={pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage,lowSettlementId:this.siteId,signDateStart:this.dateValue[0]+" 00:00:00",signDateEnd:this.dateValue[1]+" 23:59:59",settlementId:this.settlementId,settlementType:this.settlementType,billType:this.billTypeStatus,state:this.deductionStatus};-1==this.deductionStatus&&delete t.state,this.optionsClone=Object(c["cloneDeep"])(t),this.query(t)}},query:function(e){var t=this;Object(u["c"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},editRemark:function(){var e=this.currRow.length;0!==e?(this.textarea=1==e?this.currRow[0].remark:"",this.centerDialogVisible=!0):this.msg("请选择数据")},searchExport:function(){if(0!==this.tableData.length){var e={totalRow:this.pagination.total,checklistData:this.tableData,fileName:"收有偿续重派费-汇总结算-",url:this.requestUrl,paramIn:this.optionsClone,type:"page",methodType:"post"};this.exportBasicUtils(e)}else this.msg("请先查询有数据的")}},computed:{contentHeight:function(){var e=this;setTimeout((function(){e.z_method.refreshSpread()}),0);var t=this.collapseHeight?60:0;return this.z_param.isActiveH?this.$store.getters.clientHeight-210-t+this.collapseHeight:this.z_param.isNode?this.$store.getters.clientHeight-270+this.collapseHeight-t:this.$store.getters.clientHeight-190+this.collapseHeight-t}}},T=N,I=(a("1ac8"),Object(f["a"])(T,S,_,!1,null,"226feae4",null)),O=I.exports,E={name:"addedWeightFeeNew",components:{summaryH:O,detailH:v,debitedMonthlySummary:w},data:function(){return{activeName:"tab1",bilType:[{label:"全部",id:-2},{label:"业务员",id:4},{label:"承包区",id:2},{label:"客户",id:0},{label:"无对象",id:-1},{label:"下级网点",id:99}]}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){var a=this;this.activeName=e,this.z_method.refreshSpread(),this.$nextTick((function(){a.$refs.detailed.detailed(t)}))}}},z=E,F=(a("52b9"),Object(f["a"])(z,i,s,!1,null,null,null));t["default"]=F.exports},ab79:function(e,t,a){},ac8c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab self-payable page-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"月汇总",name:"tab1"}},[a("summaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"日汇总",name:"tab2"}},[a("detailH",{ref:"detailed",attrs:{params:e.switchOptions}})],1)],1),e.isSwitchType?a("div",{staticClass:"page-error"},[e._v("\n    小贴士：4月份的中转费可能有少量偏差，未计算增值加收费，预计5月份会修复好；\n  ")]):e._e()],1)},s=[],n=a("bb74"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("业务员/承包区：")]),a("sz-users",{ref:"refSettlement",attrs:{types:[2,4]},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",[e._v("类型：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content",staticStyle:{"padding-bottom":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.contentHeight,"show-summary":"",border:"","summary-method":e.getSummaries},on:{"row-dblclick":e.dblClick}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"userName",label:"业务员/承包区名称",width:"140"}}),a("el-table-column",{attrs:{prop:"userType",label:"类型",formatter:e.userTypeFormatter,width:"100"}}),a("el-table-column",{attrs:{prop:"statDate",label:"日期",width:"130",formatter:e.formatterDate}}),a("el-table-column",{attrs:{label:"应收业务员/承包区费用","label-class-name":"blue"}},[a("el-table-column",{attrs:{label:"中转费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按账单时间统计，对应菜单：寄件账单编辑")}}},[a("el-table-column",{attrs:{prop:"transferCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferWeight",label:"重量（kg）",width:"110"}}),a("el-table-column",{attrs:{prop:"transferRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"包仓费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：包仓费固定费账单")}}},[a("el-table-column",{attrs:{prop:"baggageRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"baggageHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"派代收到付（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：派件代收到付结算")}}},[a("el-table-column",{attrs:{prop:"paymentDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"paymentDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"续重派费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：有偿/续重派费结算")}}},[a("el-table-column",{attrs:{prop:"addDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"addDispWeight",label:"重量（kg）",width:"100"}}),a("el-table-column",{attrs:{prop:"addDispHexiaoFee",label:"已收",width:"100"}})],1),a("el-table-column",{attrs:{label:"二级中转费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：二级中转费结算")}}},[a("el-table-column",{attrs:{prop:"twoLevelCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"twoLevelWeight",label:"重量（kg）",width:"110"}}),a("el-table-column",{attrs:{prop:"twoLevelRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"twoLevelHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"退件费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：退件费/转账费/拦截费结算")}}},[a("el-table-column",{attrs:{prop:"returnCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"returnRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"returnHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"转账费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：退件费/转账费/拦截费结算")}}},[a("el-table-column",{attrs:{prop:"transferAccCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferAccRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferAccHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"拦截费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：退件费/转账费/拦截费结算")}}},[a("el-table-column",{attrs:{prop:"interceptCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"interceptRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"interceptHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"罚款（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算扣款时间统计，对应菜单：网点罚款登记扣款")}}},[a("el-table-column",{attrs:{prop:"controlCnt",label:"次数"}}),a("el-table-column",{attrs:{prop:"controlHexiaoFee",label:"已收",width:"100"}})],1),a("el-table-column",{attrs:{label:"小计（元）"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计（元）")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{staticStyle:{"line-height":"1.5"},attrs:{slot:"content"},slot:"content"},[e._v("应收小计=中转费应收+包仓费应收+派代收到付应收+二级中转费应收+退件费应收+转账费应收+拦截费应收"),a("br"),e._v("已收小计=中转费已收+包仓费已收+派代收到付已收+续重派费已收+二级中转费已收+退件费已收+转账费已收+拦截费已收+罚款已收")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"receivableSubtotal",label:"应收"}}),a("el-table-column",{attrs:{prop:"receivedSubtotal",label:"已收",width:"100"}})],1)],1),a("el-table-column",{attrs:{label:"应付业务员/承包区费用","label-class-name":"pink"}},[a("el-table-column",{attrs:{label:"派费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：派件账单编辑")}}},[a("el-table-column",{attrs:{prop:"paifeiCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paifeiWeight",label:"重量（kg）",width:"100"}}),a("el-table-column",{attrs:{prop:"paifeiRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paifeiHexiaoFee",label:"已付"}})],1),a("el-table-column",{attrs:{label:"寄代收到付（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：寄件代收到付结算")}}},[a("el-table-column",{attrs:{prop:"paymentSendCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentSendRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paymentSendHexiaoFee",label:"已付"}})],1),a("el-table-column",{attrs:{label:"小计（元）"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计（元）")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{staticStyle:{"line-height":"1.5"},attrs:{slot:"content"},slot:"content"},[e._v("应付-小计=派费应付+寄代收到付应付 "),a("br"),e._v(" 已付-小计=派费已付+寄代收到付已付")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"handleSubtotal",label:"应付"}}),a("el-table-column",{attrs:{prop:"paidSubtotal",label:"已付",width:"100"}})],1)],1)],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},o=[],r=(a("163d"),a("6d57"),a("391c")),c=a("a3be"),u=a("ac0d"),d=a("f37e"),h={mixins:[u["b"]],props:{params:{type:Object,default:{}}},data:function(){return{type:-1,options:[{value:-1,label:"全部"},{value:2,label:"承包区"},{value:4,label:"业务员"}],btnDisabled:!1,optionsClone:"",requestUrl:c["o"],limit:31,exportObj:{fileName:"业务员/承包区应收应付账单-日总"},settlementId:"",tableData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],tableHead:{columns:[{displayName:"业务员/承包区名称",name:"userName"},{displayName:"类型",name:"userType",value:function(e){return Object(d["D"])(e.userType)}},{displayName:"日期",name:"statDate",isCode:!0,formatter:"yyyy-MM-dd"},{displayName:"中转费票数",name:"transferCnt"},{displayName:"中转费重量",name:"transferWeight"},{displayName:"中转费应收",name:"transferRecFee"},{displayName:"中转费已收",name:"transferHexiaoFee"},{displayName:"包仓费应收",name:"baggageRecFee"},{displayName:"包仓费已收",name:"baggageHexiaoFee"},{displayName:"派代收到付票数",name:"paymentDispCnt"},{displayName:"派代收到付应收",name:"paymentDispRecFee"},{displayName:"派代收到付已收",name:"paymentDispHexiaoFee"},{displayName:"续重派费票数",name:"addDispCnt"},{displayName:"续重派费重量",name:"addDispWeight"},{displayName:"续重派费已收",name:"addDispHexiaoFee"},{displayName:"二级中转费票数",name:"twoLevelCnt"},{displayName:"二级中转费重量",name:"twoLevelWeight"},{displayName:"二级中转费应收",name:"twoLevelRecFee"},{displayName:"二级中转费已收",name:"twoLevelHexiaoFee"},{displayName:"退件费票数",name:"returnCnt"},{displayName:"退件费应收",name:"returnRecFee"},{displayName:"退件费已收",name:"returnHexiaoFee"},{displayName:"转账费票数",name:"transferAccCnt"},{displayName:"转账费应收",name:"transferAccRecFee"},{displayName:"转账费已收",name:"transferAccHexiaoFee"},{displayName:"拦截费票数",name:"interceptCnt"},{displayName:"拦截费应收",name:"interceptRecFee"},{displayName:"拦截费已收",name:"interceptHexiaoFee"},{displayName:"罚款次数",name:"controlCnt"},{displayName:"罚款已收",name:"controlHexiaoFee"},{displayName:"应收小计",name:"receivableSubtotal"},{displayName:"已收小计",name:"receivedSubtotal"},{displayName:"派费票数",name:"paifeiCnt"},{displayName:"派费重量",name:"paifeiWeight"},{displayName:"派费应付",name:"paifeiRecFee"},{displayName:"派费已付",name:"paifeiHexiaoFee"},{displayName:"寄代收到付票数",name:"paymentSendCnt"},{displayName:"寄代收到付应付",name:"paymentSendRecFee"},{displayName:"寄代收到付已付",name:"paymentSendHexiaoFee"},{displayName:"应付小计",name:"handleSubtotal"},{displayName:"已付小计",name:"paidSubtotal"}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},methods:{dblClick:function(e,t,a){},onSearch:function(){if(this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择时间");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择时间");else if(""==this.settlementId&&this.dateValue[2]>0)this.msg("未指定业务员/承包区时，最多查询一天！");else{var e={userType:this.type,accountUserId:this.settlementId,startDate:this.dateValue[0],endDate:this.dateValue[1],pageSize:5e3,currentPage:1};this.optionsClone=Object(r["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(c["q"])(e).then((function(e){e.data.list&&e.data.list.length>0||t.msg("没有数据哟"),t.conversionData(e.data.list)})).catch((function(e){t.tableData=[],t.checklistData=[]}))},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t){var s=a.map((function(t){return Number(t[e.property])}));s.every((function(e){return isNaN(e)}))?i[t]="0.00":i[t]=s.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0).toFixed(2)/1}else i[t]="合计"})),i[1]="",i[2]="",i[3]="",i},subtotalCalculation:function(e,t){var a=0;return e.forEach((function(e){t[e]&&(a+=t[e])})),a.toFixed(2)/1},conversionData:function(e){var t=this,a=["transferRecFee","baggageRecFee","paymentDispRecFee","twoLevelRecFee","returnRecFee","transferAccRecFee","interceptRecFee"],i=["transferHexiaoFee","baggageHexiaoFee","paymentDispHexiaoFee","addDispHexiaoFee","twoLevelHexiaoFee","returnHexiaoFee","transferAccHexiaoFee","interceptHexiaoFee","controlHexiaoFee"],s=["paifeiRecFee","paymentSendRecFee"],n=["paifeiHexiaoFee","paymentSendHexiaoFee"],l=Object(r["cloneDeep"])(e);e.forEach((function(e,o){l[o].receivableSubtotal=t.subtotalCalculation(a,e),l[o].receivedSubtotal=t.subtotalCalculation(i,e),l[o].handleSubtotal=t.subtotalCalculation(s,e),l[o].paidSubtotal=t.subtotalCalculation(n,e)})),this.tableData=l,this.checklistData=l},userTypeFormatter:function(e,t,a,i){return Object(d["D"])(a)},formatterDate:function(e,t,a,i){return this.moment(a).format("YYYY-MM-DD")},renderHeaderOne:function(e,t,a){var i=t.column;t.$index;return[i.label,e("el-tooltip",{props:{content:function(){return a}(),placement:"bottom"}},[e("span",{class:{"el-icon-question":!0}})])]},getSettlement:function(e){var t=this,a=new Promise((function(a,i){t.$refs.refSettlement.getSettlement(e),a()}));return a}},watch:{params:{handler:function(e,t){var a=this;if("{}"!=JSON.stringify(e)){var i=this.moment(e.statDate).startOf("month").format("YYYY-MM-DD"),s=this.moment(e.statDate).endOf("month").format("YYYY-MM-DD");this.type=e.userType;var n=this.getSettlement(e.userName);this.settlementId=e.accountUserId,n.then((function(){a.settlementId=e.accountUserId})),this.dateValue=[this.moment(i).format("YYYY-MM-DD"),this.moment(s).format("YYYY-MM-DD")],this.onSearch()}}}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-260:this.$store.getters.clientHeight-200}}},m=h,p=(a("8ed7"),a("623f")),b=Object(p["a"])(m,l,o,!1,null,null,null),f=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthStart,callback:function(t){e.monthStart=t},expression:"monthStart"}}),a("label",{staticClass:"margin-l-r-8"},[e._v("至")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthEnd,callback:function(t){e.monthEnd=t},expression:"monthEnd"}})],1),a("li",[a("label",[e._v("业务员/承包区：")]),a("sz-users",{attrs:{types:[2,4]},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",[e._v("类型：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content",staticStyle:{"padding-bottom":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:e.contentHeight,"show-summary":"",border:"","summary-method":e.getSummaries},on:{"row-dblclick":e.dblClick}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"userName",label:"业务员/承包区名称",width:"140"}}),a("el-table-column",{attrs:{prop:"userType",label:"类型",formatter:e.userTypeFormatter,width:"100"}}),a("el-table-column",{attrs:{prop:"statDate",label:"月份",width:"130",formatter:e.dateFormatter}}),a("el-table-column",{attrs:{label:"应收业务员/承包区费用","label-class-name":"blue"}},[a("el-table-column",{attrs:{label:"中转费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按账单时间统计，对应菜单：寄件账单编辑")}}},[a("el-table-column",{attrs:{prop:"transferCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferWeight",label:"重量（kg）",width:"110"}}),a("el-table-column",{attrs:{prop:"transferRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"包仓费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：包仓费固定费账单")}}},[a("el-table-column",{attrs:{prop:"baggageRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"baggageHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"派代收到付（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：派件代收到付结算")}}},[a("el-table-column",{attrs:{prop:"paymentDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"paymentDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"续重派费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：有偿/续重派费结算")}}},[a("el-table-column",{attrs:{prop:"addDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"addDispWeight",label:"重量（kg）",width:"100"}}),a("el-table-column",{attrs:{prop:"addDispHexiaoFee",label:"已收",width:"100"}})],1),a("el-table-column",{attrs:{label:"二级中转费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：二级中转费结算")}}},[a("el-table-column",{attrs:{prop:"twoLevelCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"twoLevelWeight",label:"重量（kg）",width:"110"}}),a("el-table-column",{attrs:{prop:"twoLevelRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"twoLevelHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"退件费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：退件费/转账费/拦截费结算")}}},[a("el-table-column",{attrs:{prop:"returnCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"returnRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"returnHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"转账费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：退件费/转账费/拦截费结算")}}},[a("el-table-column",{attrs:{prop:"transferAccCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferAccRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferAccHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"拦截费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算时间统计，对应菜单：退件费/转账费/拦截费结算")}}},[a("el-table-column",{attrs:{prop:"interceptCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"interceptRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"interceptHexiaoFee",label:"已收"}})],1),a("el-table-column",{attrs:{label:"罚款（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按结算扣款时间统计，对应菜单：网点罚款登记扣款")}}},[a("el-table-column",{attrs:{prop:"controlCnt",label:"次数"}}),a("el-table-column",{attrs:{prop:"controlHexiaoFee",label:"已收",width:"100"}})],1),a("el-table-column",{attrs:{label:"小计（元）"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计（元）")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{staticStyle:{"line-height":"1.5"},attrs:{slot:"content"},slot:"content"},[e._v("应收小计=中转费应收+包仓费应收+派代收到付应收+二级中转费应收+退件费应收+转账费应收+拦截费应收"),a("br"),e._v("已收小计=中转费已收+包仓费已收+派代收到付已收+续重派费已收+二级中转费已收+退件费已收+转账费已收+拦截费已收+罚款已收")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"receivableSubtotal",label:"应收"}}),a("el-table-column",{attrs:{prop:"receivedSubtotal",label:"已收",width:"100"}})],1)],1),a("el-table-column",{attrs:{label:"应付业务员/承包区费用","label-class-name":"pink"}},[a("el-table-column",{attrs:{label:"派费（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：派件账单编辑")}}},[a("el-table-column",{attrs:{prop:"paifeiCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paifeiWeight",label:"重量（kg）",width:"100"}}),a("el-table-column",{attrs:{prop:"paifeiRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paifeiHexiaoFee",label:"已付"}})],1),a("el-table-column",{attrs:{label:"寄代收到付（元）","render-header":function(t,a){return e.renderHeaderOne(t,a,"按签收时间统计，对应菜单：寄件代收到付结算")}}},[a("el-table-column",{attrs:{prop:"paymentSendCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentSendRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paymentSendHexiaoFee",label:"已付"}})],1),a("el-table-column",{attrs:{label:"小计（元）"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计（元）")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{staticStyle:{"line-height":"1.5"},attrs:{slot:"content"},slot:"content"},[e._v("应付-小计=派费应付+寄代收到付应付 "),a("br"),e._v(" 已付-小计=派费已付+寄代收到付已付")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"handleSubtotal",label:"应付"}}),a("el-table-column",{attrs:{prop:"paidSubtotal",label:"已付",width:"100"}})],1)],1)],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},v=[],g={mixins:[u["b"]],data:function(){var e=this;return{type:-1,options:[{value:-1,label:"全部"},{value:2,label:"承包区"},{value:4,label:"业务员"}],btnDisabled:!1,optionsClone:"",requestUrl:c["p"],limit:31,exportObj:{fileName:"业务员/承包区应收应付账单-月总"},settlementId:"",tableData:[],monthStart:this.moment().format("YYYY-MM")+"-01",monthEnd:this.moment().format("YYYY-MM")+"-01",tableHead:{columns:[{displayName:"业务员/承包区名称",name:"userName"},{displayName:"类型",name:"userType",value:function(e){return Object(d["D"])(e.userType)}},{displayName:"月份",name:"statDate",isCode:!0,value:function(t){return e.dateFormatter(t,"",t.statDate)}},{displayName:"中转费票数",name:"transferCnt"},{displayName:"中转费重量",name:"transferWeight"},{displayName:"中转费应收",name:"transferRecFee"},{displayName:"中转费已收",name:"transferHexiaoFee"},{displayName:"包仓费应收",name:"baggageRecFee"},{displayName:"包仓费已收",name:"baggageHexiaoFee"},{displayName:"派代收到付票数",name:"paymentDispCnt"},{displayName:"派代收到付应收",name:"paymentDispRecFee"},{displayName:"派代收到付已收",name:"paymentDispHexiaoFee"},{displayName:"续重派费票数",name:"addDispCnt"},{displayName:"续重派费重量",name:"addDispWeight"},{displayName:"续重派费已收",name:"addDispHexiaoFee"},{displayName:"二级中转费票数",name:"twoLevelCnt"},{displayName:"二级中转费重量",name:"twoLevelWeight"},{displayName:"二级中转费应收",name:"twoLevelRecFee"},{displayName:"二级中转费已收",name:"twoLevelHexiaoFee"},{displayName:"退件费票数",name:"returnCnt"},{displayName:"退件费应收",name:"returnRecFee"},{displayName:"退件费已收",name:"returnHexiaoFee"},{displayName:"转账费票数",name:"transferAccCnt"},{displayName:"转账费应收",name:"transferAccRecFee"},{displayName:"转账费已收",name:"transferAccHexiaoFee"},{displayName:"拦截费票数",name:"interceptCnt"},{displayName:"拦截费应收",name:"interceptRecFee"},{displayName:"拦截费已收",name:"interceptHexiaoFee"},{displayName:"罚款次数",name:"controlCnt"},{displayName:"罚款已收",name:"controlHexiaoFee"},{displayName:"应收小计",name:"receivableSubtotal"},{displayName:"已收小计",name:"receivedSubtotal"},{displayName:"派费票数",name:"paifeiCnt"},{displayName:"派费重量",name:"paifeiWeight"},{displayName:"派费应付",name:"paifeiRecFee"},{displayName:"派费已付",name:"paifeiHexiaoFee"},{displayName:"寄代收到付票数",name:"paymentSendCnt"},{displayName:"寄代收到付应付",name:"paymentSendRecFee"},{displayName:"寄代收到付已付",name:"paymentSendHexiaoFee"},{displayName:"应付小计",name:"handleSubtotal"},{displayName:"已付小计",name:"paidSubtotal"}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},methods:{dblClick:function(e,t,a){var i=this.dateFormatter("","",e.statDate);e.statDate=i,this.$emit("goto","tab2",e)},onSearch:function(){var e=this.moment(this.monthEnd),t=this.moment(this.monthStart),a=e.diff(t,"months");if(a>=0){if(this.settlementId){if(a>2)return void this.msg("最多查询3个月！")}else if(a>0)return void this.msg("未指定业务员/承包区时，最多查询一个月！");var i={userType:this.type,accountUserId:this.settlementId,startDate:this.moment(this.monthStart).format("YYYY-MM-DD"),endDate:this.moment(this.monthEnd).format("YYYY-MM-DD"),pageSize:5e3,currentPage:1};this.optionsClone=Object(r["cloneDeep"])(i),this.query(i)}else this.msg("开始月份不能大于结束月份！")},query:function(e){var t=this;Object(c["r"])(e).then((function(e){e.data.list&&e.data.list.length>0||t.msg("没有数据哟"),t.conversionData(e.data.list)})).catch((function(e){t.tableData=[],t.checklistData=[]}))},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t){var s=a.map((function(t){return Number(t[e.property])}));s.every((function(e){return isNaN(e)}))?i[t]="0.00":i[t]=s.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0).toFixed(2)/1}else i[t]="合计"})),i[1]="",i[2]="",i[3]="",i},userTypeFormatter:function(e,t,a,i){return Object(d["D"])(a)},renderHeaderOne:function(e,t,a){var i=t.column;t.$index;return[i.label,e("el-tooltip",{props:{content:function(){return a}(),placement:"bottom"}},[e("span",{class:{"el-icon-question":!0}})])]},dateFormatter:function(e,t,a,i){var s=String(a);return s.slice(0,4)+"-"+s.slice(-2)},subtotalCalculation:function(e,t){var a=0;return e.forEach((function(e){t[e]&&(a+=t[e])})),a.toFixed(2)/1},conversionData:function(e){var t=this,a=["transferRecFee","baggageRecFee","paymentDispRecFee","twoLevelRecFee","returnRecFee","transferAccRecFee","interceptRecFee"],i=["transferHexiaoFee","baggageHexiaoFee","paymentDispHexiaoFee","addDispHexiaoFee","twoLevelHexiaoFee","returnHexiaoFee","transferAccHexiaoFee","interceptHexiaoFee","controlHexiaoFee"],s=["paifeiRecFee","paymentSendRecFee"],n=["paifeiHexiaoFee","paymentSendHexiaoFee"],l=Object(r["cloneDeep"])(e);e.forEach((function(e,o){l[o].receivableSubtotal=t.subtotalCalculation(a,e),l[o].receivedSubtotal=t.subtotalCalculation(i,e),l[o].handleSubtotal=t.subtotalCalculation(s,e),l[o].paidSubtotal=t.subtotalCalculation(n,e)})),this.tableData=l,this.checklistData=l}},computed:{contentHeight:function(){return this.z_param.isNode?this.$store.getters.clientHeight-260:this.$store.getters.clientHeight-200}}},C=g,x=Object(p["a"])(C,y,v,!1,null,null,null),k=x.exports,D=(a("49a5"),{name:"selfAccountsPayable",mixins:[n["a"]],components:{summaryH:k,detailH:f},data:function(){return{activeName:"tab1",switchOptions:{}}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName="tab2",this.z_method.refreshSpread(),this.switchOptions=t,console.log(t,"adga ")}}}),w=D,S=(a("c64f"),Object(p["a"])(w,i,s,!1,null,null,null));t["default"]=S.exports},acc3:function(e,t,a){},ad05:function(e,t,a){},ae2d:function(e,t,a){"use strict";var i=a("b384"),s=a.n(i);s.a},ae64:function(e,t,a){"use strict";var i=a("53c0"),s=a.n(i);s.a},b02a:function(e,t,a){"use strict";var i=a("5809"),s=a.n(i);s.a},b03b:function(e,t,a){"use strict";var i=a("59cb"),s=a.n(i);s.a},b12d:function(e,t,a){},b27f:function(e,t,a){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new n(s.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new n(s.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},a("de8a"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,a("77e5"))},b384:function(e,t,a){},b3f5:function(e,t,a){"use strict";var i=a("875d"),s=a.n(i);s.a},b5c2:function(e,t,a){},b62a:function(e,t,a){},b6b3:function(e,t,a){},b73c:function(e,t,a){"use strict";var i=a("a38a"),s=a.n(i);s.a},b7ae:function(e,t,a){"use strict";var i=a("5cda"),s=a.n(i);s.a},b856:function(e,t,a){},b85b:function(e,t,a){},b98e:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab page-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"月汇总",name:"tab1"}},[a("mSummaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"日汇总",name:"tab2"}},[a("dSummaryH",{ref:"parm"})],1)],1),e.isSwitchType?a("div",{staticClass:"page-error"},[e._v("\n    小贴士：4月份的中转费可能有少量偏差，未计算增值加收费，预计5月份会修复好；\n  ")]):e._e()],1)},s=[],n=a("bb74"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main subNetRecPayBill"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("下级网点：")]),a("sz-site",{ref:"siteSet",attrs:{param:{child:!0}},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content",staticStyle:{color:"black"}},[a("el-table",{attrs:{data:e.checklistData,height:e.contentHeight,"header-cell-style":e.tableHeaderColor,"show-summary":"","summary-method":e.getSummaries,border:""},on:{"cell-dblclick":e.cellDblclick}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"lowerSiteName",width:"100",label:"下级网点名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"statDate",width:"100",label:"日期",formatter:e.formatterDay}}),a("el-table-column",{attrs:{"label-class-name":"blue",label:"应收下级网点费用"}},[a("el-table-column",{attrs:{label:"中转费(元)","render-header":function(t,a){return e.renderHeaderOne(t,a,"按到件时间统计")}}},[a("el-table-column",{attrs:{prop:"transferCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"transferRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("包仓费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按结算时间统计，对应菜单：下级包仓费固定费账单",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"baggageRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"baggageHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点派件代收到付查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"paymentDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("续重派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点续重派费查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"addDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"addDispWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"addDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"addDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("二级中转费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点二级中转费查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"twoLevelCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"twoLevelWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"twoLevelRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"twoLevelHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应收小计=中转费应收+包仓费应收+派代收到付应收+续重派费应收+二级中转费应收"),a("br"),e._v("已收小计=中转费已收+包仓费已收+派代收到付已收+续重派费已收+二级中转费已收")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应收",prop:"Subtotal1"}}),a("el-table-column",{attrs:{label:"已收",prop:"Subtotal2"}})],1)],1),a("el-table-column",{attrs:{label:"应付下级网点费用","label-class-name":"pink"}},[a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点派件结算",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paifeiCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paifeiWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"paifeiRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paifeiHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("寄代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点寄件代收/到付查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentSendCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentSendRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paymentSendHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应付小计=派费应付+寄代收到付应付"),a("br"),e._v("已付小计=派费已付+寄代收到付已付")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应付",prop:"Subtotal3"}}),a("el-table-column",{attrs:{label:"已付",prop:"Subtotal4"}})],1)],1)],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},o=[],r=(a("163d"),a("6d57"),a("391c")),c=a("a3be"),u=a("ac0d"),d={mixins:[u["b"]],data:function(){return{cha:this.z_param.isNode?270:210,btnDisabled:!1,optionsClone:"",requestUrl:c["Mc"],limit:7,exportObj:{fileName:"下级网点应收应付账单-日汇总-"},siteId:"",checklistData:[],dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],tableHead:{columns:[{displayName:"下级网点名称",name:"lowerSiteName",isCode:!0},{displayName:"日期",name:"statDate",formatter:"yyyy-MM-dd"},{displayName:"中转费票数",name:"transferCnt"},{displayName:"中转费重量",name:"transferWeight"},{displayName:"中转费应收",name:"transferRecFee"},{displayName:"中转费已收",name:"transferHexiaoFee"},{displayName:"包仓费应收",name:"baggageRecFee"},{displayName:"包仓费已收",name:"baggageHexiaoFee"},{displayName:"派代收到付票数",name:"paymentDispCnt"},{displayName:"派代收到付应收",name:"paymentDispRecFee"},{displayName:"派代收到付已收",name:"paymentDispHexiaoFee"},{displayName:"续重派费票数",name:"addDispCnt"},{displayName:"续重派费重量",name:"addDispWeight"},{displayName:"续重派费应收",name:"addDispRecFee"},{displayName:"续重派费已收",name:"addDispHexiaoFee"},{displayName:"二级中转费票数",name:"twoLevelCnt"},{displayName:"二级中转费重量",name:"twoLevelWeight"},{displayName:"二级中转费应收",name:"twoLevelRecFee"},{displayName:"二级中转费已收",name:"twoLevelHexiaoFee"},{displayName:"应收小计",name:"Subtotal1"},{displayName:"已收小计",name:"Subtotal2"},{displayName:"派费票数",name:"paifeiCnt"},{displayName:"派费重量",name:"paifeiWeight"},{displayName:"派费应付",name:"paifeiRecFee"},{displayName:"派费已付",name:"paifeiHexiaoFee"},{displayName:"寄代收到付票数",name:"paymentSendCnt"},{displayName:"寄代收到付应付",name:"paymentSendRecFee"},{displayName:"寄代收到付已付",name:"paymentSendHexiaoFee"},{displayName:"应付小计",name:"Subtotal3"},{displayName:"已付小计",name:"Subtotal4"}]}}},watch:{siteId:{handler:function(e,t){this.limit=""==e?7:31},deep:!0}},methods:{renderHeaderOne:function(e,t,a){var i=t.column;t.$index;return[i.label,e("el-tooltip",{props:{content:function(){return a}(),placement:"bottom"}},[e("span",{class:{"el-icon-question":!0}})])]},cellDblclick:function(e,t,a,i){},clickSearch:function(e){var t=this;this.$refs.siteSet.chooseId(e.lowerSiteName,e.lowerSiteId,(function(a,i){var s=e.statDate+"";s=s.slice(0,4)+"-"+s.slice(4),t.dateValue=[t.moment(t.moment(s).startOf("month").format("YYYY-MM-DD"))._i,t.moment(t.moment(s).endOf("month").format("YYYY-MM-DD"))._i],t.onSearch()}))},formatterDay:function(e,t){return this.moment(e.statDate).format("YYYY-MM-DD")},tableHeaderColor:function(e){e.row,e.column,e.rowIndex,e.columnIndex},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t)if(1!==t)if(2!==t){var s=a.map((function(t){return Number(t[e.property])}));s.every((function(e){return isNaN(e)}))?i[t]="0.00":(i[t]=s.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0).toFixed(2),i[t]%1!==0||3!=t&&9!=t&&12!=t&&16!=t&&22!=t&&26!=t||(i[t]=parseInt(i[t])),i[t]+="")}else i[t]="";else i[t]="";else i[t]="合计"})),i},onSearch:function(){if(this.dateValue[2]<0)this.msg("开始时间不能大于结束时间,请重新选择时间");else if(this.limit<=this.dateValue[2])this.siteId?this.msg("若指定下级网点，最多查询"+this.limit+"天！"):this.msg("未指定下级网点时，最多查询"+this.limit+"天！");else{var e={lowerSiteId:this.siteId,startDate:this.moment(this.dateValue[0]).format("YYYY-MM-DD"),endDate:this.moment(this.dateValue[1]).format("YYYY-MM-DD"),pageSize:5e3,currentPage:1};this.optionsClone=Object(r["cloneDeep"])(e),this.query(this.optionsClone)}},query:function(e){var t=this;Object(c["Lc"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.checklistData=t.assignment(e.data.list),t.pagination.total=e.data.totalRow,t.cha=t.z_param.isNode?248:180):(t.pagination.total=0,t.checklistData=[],t.msg("没有数据哟"),t.cha=t.z_param.isNode?270:210)})).catch((function(e){t.pagination.total=0,t.checklistData=[],t.cha=t.z_param.isNode?270:210}))},assignment2:function(e,t){var a=0;return e.forEach((function(e){t[e]&&(a+=t[e])})),a.toFixed(2)},assignment:function(e){var t=this,a=["transferRecFee","baggageRecFee","paymentDispRecFee","addDispRecFee","twoLevelRecFee"],i=["transferHexiaoFee","baggageHexiaoFee","paymentDispHexiaoFee","addDispHexiaoFee","twoLevelHexiaoFee"],s=["paifeiRecFee","paymentSendRecFee"],n=["paifeiHexiaoFee","paymentSendHexiaoFee"];return e.forEach((function(l,o){e[o].Subtotal1=t.assignment2(a,l),e[o].Subtotal2=t.assignment2(i,l),e[o].Subtotal3=t.assignment2(s,l),e[o].Subtotal4=t.assignment2(n,l)})),e}},computed:{contentHeight:function(){return this.$store.getters.clientHeight-this.cha}}},h=d,m=(a("d6be"),a("623f")),p=Object(m["a"])(h,l,o,!1,null,null,null),b=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main subNetRecPayBill"},[a("div",{staticClass:"sz-search"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",[e._v("月份：")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthStart,callback:function(t){e.monthStart=t},expression:"monthStart"}}),a("label",{staticClass:"margin-l-r-8"},[e._v("至")]),a("el-date-picker",{attrs:{type:"month",placeholder:"选择月",clearable:!1,editable:!1},model:{value:e.monthEnd,callback:function(t){e.monthEnd=t},expression:"monthEnd"}})],1),a("li",[a("label",[e._v("下级网点：")]),a("sz-site",{attrs:{param:{child:!0}},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1)])]),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"sz-btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n      ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checklistExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n      ")])],1)]),a("div",{staticClass:"sz-content"},[a("el-table",{attrs:{data:e.checklistData,height:e.contentHeight,"header-cell-style":e.tableHeaderColor,"show-summary":"","summary-method":e.getSummaries,border:""},on:{"row-dblclick":e.rowDblclick}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{prop:"lowerSiteName",width:"100",label:"下级网点名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"statDate",width:"100",label:"月份",formatter:e.formatterMonth}}),a("el-table-column",{attrs:{"label-class-name":"blue",label:"应收下级网点费用"}},[a("el-table-column",{attrs:{label:"中转费(元)","render-header":function(t,a){return e.renderHeaderOne(t,a,"按到件时间统计，对应菜单：下级网点中转费+附加费结算")}}},[a("el-table-column",{attrs:{prop:"transferCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"transferWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"transferRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"transferHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("包仓费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按结算时间统计，对应菜单：下级包仓费固定费账单",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"baggageRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"baggageHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点派件代收到付查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"paymentDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("续重派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点续重派费查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"addDispCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"addDispWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"addDispRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"addDispHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("二级中转费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点二级中转费查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"twoLevelCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"twoLevelWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"twoLevelRecFee",label:"应收"}}),a("el-table-column",{attrs:{prop:"twoLevelHexiaoFee",label:"已收"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应收小计=中转费应收+包仓费应收+派代收到付应收+续重派费应收+二级中转费应收"),a("br"),e._v("已收小计=中转费已收+包仓费已收+派代收到付已收+续重派费已收+二级中转费已收")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应收",prop:"Subtotal1"}}),a("el-table-column",{attrs:{label:"已收",prop:"Subtotal2"}})],1)],1),a("el-table-column",{attrs:{label:"应付下级网点费用","label-class-name":"pink"}},[a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("派费(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点派件结算",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paifeiCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paifeiWeight",label:"重量(kg)"}}),a("el-table-column",{attrs:{prop:"paifeiRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paifeiHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("寄代收到付(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"按签收时间统计，对应菜单：下级网点寄件代收/到付查询",placement:"bottom"}},[a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{prop:"paymentSendCnt",label:"票数"}}),a("el-table-column",{attrs:{prop:"paymentSendRecFee",label:"应付"}}),a("el-table-column",{attrs:{prop:"paymentSendHexiaoFee",label:"已付"}})],1),a("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",[e._v("小计(元)")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("应付小计=派费应付+寄代收到付应付"),a("br"),e._v("已付小计=派费已付+寄代收到付已付")]),a("i",{staticClass:"el-icon-question pointer m-l-8"})])]}}])},[a("el-table-column",{attrs:{label:"应付",prop:"Subtotal3"}}),a("el-table-column",{attrs:{label:"已付",prop:"Subtotal4"}})],1)],1)],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},y=[],v={mixins:[u["b"]],data:function(){return{cha:this.z_param.isNode?270:210,btnDisabled:!1,optionsClone:"",requestUrl:c["Oc"],exportObj:{fileName:"下级网点应收应付账单-月汇总-"},siteId:"",checklistData:[],monthStart:this.moment().format("YYYY-MM")+"-01",monthEnd:this.moment().format("YYYY-MM")+"-01",tableHead:{columns:[{displayName:"下级网点名称",name:"lowerSiteName",isCode:!0},{displayName:"月份",name:"statDate",isCode:!0,value:function(e){if(e.statDate){var t=e.statDate+"";return t.slice(0,4)+"-"+t.slice(4)}return""}},{displayName:"中转费票数",name:"transferCnt"},{displayName:"中转费重量",name:"transferWeight"},{displayName:"中转费应收",name:"transferRecFee"},{displayName:"中转费已收",name:"transferHexiaoFee"},{displayName:"包仓费应收",name:"baggageRecFee"},{displayName:"包仓费已收",name:"baggageHexiaoFee"},{displayName:"派代收到付票数",name:"paymentDispCnt"},{displayName:"派代收到付应收",name:"paymentDispRecFee"},{displayName:"派代收到付已收",name:"paymentDispHexiaoFee"},{displayName:"续重派费票数",name:"addDispCnt"},{displayName:"续重派费重量",name:"addDispWeight"},{displayName:"续重派费应收",name:"addDispRecFee"},{displayName:"续重派费已收",name:"addDispHexiaoFee"},{displayName:"二级中转费票数",name:"twoLevelCnt"},{displayName:"二级中转费重量",name:"twoLevelWeight"},{displayName:"二级中转费应收",name:"twoLevelRecFee"},{displayName:"二级中转费已收",name:"twoLevelHexiaoFee"},{displayName:"应收小计",name:"Subtotal1"},{displayName:"已收小计",name:"Subtotal2"},{displayName:"派费票数",name:"paifeiCnt"},{displayName:"派费重量",name:"paifeiWeight"},{displayName:"派费应付",name:"paifeiRecFee"},{displayName:"派费已付",name:"paifeiHexiaoFee"},{displayName:"寄代收到付票数",name:"paymentSendCnt"},{displayName:"寄代收到付应付",name:"paymentSendRecFee"},{displayName:"寄代收到付已付",name:"paymentSendHexiaoFee"},{displayName:"应付小计",name:"Subtotal3"},{displayName:"已付小计",name:"Subtotal4"}]}}},methods:{renderHeaderOne:function(e,t,a){var i=t.column;t.$index;return[i.label,e("el-tooltip",{props:{content:function(){return a}(),placement:"bottom"}},[e("span",{class:{"el-icon-question":!0}})])]},assignment2:function(e,t){var a=0;return e.forEach((function(e){t[e]&&(a+=t[e])})),a.toFixed(2)},assignment:function(e){var t=this,a=["transferRecFee","baggageRecFee","paymentDispRecFee","addDispRecFee","twoLevelRecFee"],i=["transferHexiaoFee","baggageHexiaoFee","paymentDispHexiaoFee","addDispHexiaoFee","twoLevelHexiaoFee"],s=["paifeiRecFee","paymentSendRecFee"],n=["paifeiHexiaoFee","paymentSendHexiaoFee"];return e.forEach((function(l,o){e[o].Subtotal1=t.assignment2(a,l),e[o].Subtotal2=t.assignment2(i,l),e[o].Subtotal3=t.assignment2(s,l),e[o].Subtotal4=t.assignment2(n,l)})),e},formatterMonth:function(e,t){var a=e.statDate+"";return a.slice(0,4)+"-"+a.slice(4)},timeDifference:function(e,t){var a=e.getFullYear(),i=e.getMonth()+9;return i>=11?(a+=1,i-=11,e.setFullYear(a),e.setMonth(i-1)):(e.setFullYear(a),e.setMonth(i)),e.getTime()>=t.getTime()},tableHeaderColor:function(e){e.row,e.column,e.rowIndex,e.columnIndex},getSummaries:function(e){var t=e.columns,a=e.data,i=[];return t.forEach((function(e,t){if(0!==t)if(1!==t)if(2!==t){var s=a.map((function(t){return Number(t[e.property])}));s.every((function(e){return isNaN(e)}))?i[t]="0.00":(i[t]=s.reduce((function(e,t){var a=Number(t);return isNaN(a)?e:e+t}),0).toFixed(2),i[t]%1!==0||3!=t&&9!=t&&12!=t&&16!=t&&22!=t&&26!=t||(i[t]=parseInt(i[t])),i[t]+="")}else i[t]="";else i[t]="";else i[t]="合计"})),i},rowDblclick:function(e){this.$emit("goto","tab2",e)},onSearch:function(){var e=this.moment(this.monthEnd),t=this.moment(this.monthStart),a=e.diff(t,"months",!0);if(a>=0){if(this.siteId){if(a>2)return void this.msg("若指定下级网点，最大可查询3个月！")}else if(a>0)return void this.msg("未指定下级网点时，最多查询1个月！");var i={lowerSiteId:this.siteId,startDate:this.moment(this.monthStart).format("YYYY-MM")+"-01",endDate:this.moment(this.monthEnd).format("YYYY-MM")+"-01",pageSize:5e3,currentPage:1};this.optionsClone=Object(r["cloneDeep"])(i),this.query(i)}else this.msg("开始月份不能大于结束月份！")},query:function(e){var t=this;Object(c["Nc"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.checklistData=t.assignment(e.data.list),t.pagination.total=e.data.totalRow,t.cha=t.z_param.isNode?248:180):(t.pagination.total=0,t.checklistData=[],t.msg("没有数据哟"),t.cha=t.z_param.isNode?270:210)})).catch((function(e){t.cha=t.z_param.isNode?270:210,t.pagination.total=0,t.checklistData=[]}))}},computed:{contentHeight:function(){return this.$store.getters.clientHeight-this.cha}}},g=v,C=(a("73b1"),Object(m["a"])(g,f,y,!1,null,null,null)),x=C.exports,k={name:"subNetRecPayBill",mixins:[n["a"]],components:{dSummaryH:b,mSummaryH:x},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.$refs.parm.clickSearch(t)}}},D=k,w=(a("6678"),Object(m["a"])(D,i,s,!1,null,null,null));t["default"]=w.exports},b991:function(e,t,a){},b997:function(e,t,a){"use strict";var i=a("81a8"),s=a.n(i);s.a},ba23:function(e,t,a){},baf5:function(e,t,a){e.exports=function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=133)}({133:function(e,t,a){"use strict";a.r(t);var i=a(17),s=a.n(i),n=a(20),l=a(2),o=function(e,t){if(e===window&&(e=document.documentElement),1!==e.nodeType)return[];var a=window.getComputedStyle(e,null);return t?a[t]:a},r=function(e){return Object.keys(e||{}).map((function(t){return[t,e[t]]}))},c=function(e,t){return e===window||e===document?document.documentElement[t]:e[t]},u=function(e){return c(e,"offsetHeight")},d=function(e){return c(e,"clientHeight")},h="ElInfiniteScroll",m={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},p=function(e,t){return Object(n["isHtmlElement"])(e)?r(m).reduce((function(a,i){var s=i[0],l=i[1],o=l.type,r=l.default,c=e.getAttribute("infinite-scroll-"+s);switch(c=Object(n["isUndefined"])(t[c])?c:t[c],o){case Number:c=Number(c),c=Number.isNaN(c)?r:c;break;case Boolean:c=Object(n["isDefined"])(c)?"false"!==c&&Boolean(c):r;break;default:c=o(c)}return a[s]=c,a}),{}):{}},b=function(e){return e.getBoundingClientRect().top},f=function(e){var t=this[h],a=t.el,i=t.vm,s=t.container,l=t.observer,r=p(a,i),c=r.distance,m=r.disabled;if(!m){var f=s.getBoundingClientRect();if(f.width||f.height){var y=!1;if(s===a){var v=s.scrollTop+d(s);y=s.scrollHeight-v<=c}else{var g=u(a)+b(a)-b(s),C=u(s),x=Number.parseFloat(o(s,"borderBottomWidth"));y=g-C+x<=c}y&&Object(n["isFunction"])(e)?e.call(i):l&&(l.disconnect(),this[h].observer=null)}}},y={name:"InfiniteScroll",inserted:function(e,t,a){var i=t.value,n=a.context,o=Object(l["getScrollContainer"])(e,!0),r=p(e,n),c=r.delay,u=r.immediate,d=s()(c,f.bind(e,i));if(e[h]={el:e,vm:n,container:o,onScroll:d},o&&(o.addEventListener("scroll",d),u)){var m=e[h].observer=new MutationObserver(d);m.observe(o,{childList:!0,subtree:!0}),d()}},unbind:function(e){var t=e[h],a=t.container,i=t.onScroll;a&&a.removeEventListener("scroll",i)},install:function(e){e.directive(y.name,y)}};t["default"]=y},17:function(e,t){e.exports=a("ca47")},2:function(e,t){e.exports=a("5f78")},20:function(e,t){e.exports=a("667a")}})},bb74:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("a3be"),s={data:function(){return{isSwitchType:!1}},mounted:function(){this.checkSwitchType()},methods:{checkSwitchType:function(){var e=this;Object(i["nc"])({}).then((function(t){if(t.status){var a=t.result.filter((function(e){return 1==e.switchType&&1==e.switchStatus}));a.length>0?e.isSwitchType=!0:e.isSwitchType=!1}}))}}}},bfe1:function(e,t,a){},bfe2:function(e,t,a){},c00d:function(e,t,a){"use strict";var i=a("0364"),s=a.n(i);s.a},c0c3:function(e,t,a){"use strict";var i=a("69b3"),s=a("8704"),n=a("7108");a("0aed")("search",1,(function(e,t,a,l){return[function(a){var i=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,i):new RegExp(a)[t](String(i))},function(e){var t=l(a,e,this);if(t.done)return t.value;var o=i(e),r=String(this),c=o.lastIndex;s(c,0)||(o.lastIndex=0);var u=n(o,r);return s(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},c0de:function(e,t,a){},c252:function(e,t,a){},c55e:function(e,t,a){},c569:function(e,t,a){"use strict";var i=a("7813"),s=a.n(i);s.a},c584:function(e,t,a){"use strict";var i=a("545b"),s=a.n(i);s.a},c5ec:function(e,t,a){},c64f:function(e,t,a){"use strict";var i=a("c55e"),s=a.n(i);s.a},c6fe:function(e,t,a){"use strict";var i=a("0997"),s=a.n(i);s.a},c8e6:function(e,t,a){},c97b:function(e,t,a){e.exports=a.p+"img/jinggao.83d352f3.png"},ca64:function(e,t,a){"use strict";var i=a("152f"),s=a.n(i);s.a},cbdd:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":function(t){return e.onTabClick(e.activeName)}},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"运费汇总",name:"运费汇总"}},[a("freight-summary",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"运费审核明细",name:"运费审核明细"}},[a("freight-detail",{ref:"overview",on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"理赔服务导入",name:"理赔服务导入"}},[a("settlement-claims",{ref:"detailed"})],1)],1)]],2)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendReceiveFeeDetail"},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{display:"inline-block",width:"calc(100% )"}},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-65"},[e._v("账单日期：")]),a("sz-date-picker",{ref:"timepick",staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.params.startDate,callback:function(t){e.$set(e.params,"startDate",t)},expression:"params.startDate"}})],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("结算客户：")]),a("sc-users",{staticClass:"input-h-85",attrs:{type:"3"},model:{value:e.params.userId,callback:function(t){e.$set(e.params,"userId",t)},expression:"params.userId"}})],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("审核状态：")]),a("el-select",{model:{value:e.params.audited,callback:function(t){e.$set(e.params,"audited",t)},expression:"params.audited"}},e._l(e.audits,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticClass:"m-b-16",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.examine}},[e._v("审核")])],1),a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.deleted}},[e._v("删除")])],1)])]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.tableH+"px"}},[a("spread",{staticStyle:{padding:"10px 0 0"},attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"sz-pagination-box"},[a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.params.currentPage,"page-sizes":[100,200,500,1e3,5e3],"page-size":e.params.pageSize,total:e.params.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,"data-validate":e.dataValidate,tableData:e.currentRowClone,batchUrl:e.batchUrl},on:{model:e.close}}),a("verification",{attrs:{isError:!0,titles:"你是否确认重新计算该均重任务？",titleCon:"注意：新计算出的均重费用会覆盖掉原均重费用；",dialogVisibles:e.dialogVisible},on:{callBack:e.callBack}}),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},l=[],o=a("391c"),r=a("a3be"),c=a("6bf2"),u=a.n(c),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"verification"},[a("el-dialog",{attrs:{"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.dialogVisibles,width:"400px"},on:{"update:visible":function(t){e.dialogVisibles=t}}},[a("div",{staticClass:"dialog-body"},[a("div",{staticClass:"dialog-title"},[e.isError?a("i",{staticClass:"el-icon-error"}):a("i",{staticClass:"el-icon-warning"}),a("div",[e._v(e._s(e.titles))])]),a("div",{staticClass:"dialog-con"},[e._v(e._s(e.titleCon))]),a("div",{staticClass:"dialog-inp"},[a("p",[a("span",{staticClass:"c-r"},[e._v("*")]),e._v("输入确认码")]),a("el-input",{ref:"inputref",attrs:{maxlength:"3",placeholder:"请输入"},model:{value:e.varInput,callback:function(t){e.varInput="string"===typeof t?t.trim():t},expression:"varInput"}}),a("div",{staticClass:"veri"},[e._v(e._s(e.randomNum))])],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:0==e.varInput.length},on:{click:e.handleAct}},[e._v("确 定")])],1)])],1)},h=[],m=(a("163d"),{name:"verification",props:{dialogVisibles:{type:Boolean,default:!1},titles:{type:[Number,String],default:"是否确认删除该报价组？"},titleCon:{type:[Number,String],default:"注意待删除的报价组还存在客户哦"},isError:{type:Boolean,default:!0}},data:function(){return{randomNum:111,varInput:""}},watch:{dialogVisibles:function(e,t){var a=this;this.randomNumA(),this.$nextTick((function(){a.$refs.inputref.focus()}))}},methods:{msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:2e3})},handleAct:function(){if(this.$refs.inputref.focus(),""!=this.varInput)return this.varInput!==this.randomNum?(this.varInput="",this.msg("确认码有误!"),void this.randomNumA()):(this.varInput="",void this.$emit("callBack",!0));this.msg("请输入确认码!")},handleClose:function(e){this.varInput="",this.$emit("callBack",!1)},randomNumA:function(){this.randomNum=Math.floor(899*Math.random()+100)+""}}}),p=m,b=(a("0bc8"),a("623f")),f=Object(b["a"])(p,d,h,!1,null,null,null),y=f.exports,v=a("ac0d"),g={mixins:[v["a"],v["b"]],data:function(){var e=this;return{batchUrl:"",batchTitle:"审核",batchDialogVisible:!1,dialogVisible:!1,params:{startDate:[this.moment().subtract(15,"days").format("YYYY-MM-DD 00:00:00"),this.moment().format("YYYY-MM-DD 00:00:00")],userId:"",audited:-1,total:0,pageSize:100,currentPage:1},audits:[{value:-1,label:"全部"},{value:0,label:"未审核"},{value:1,label:"已审核"}],multipleSelection:[],tableData:[],columns:[{displayName:"账单日期",name:"billDate"},{displayName:"结算客户",name:"customerName"}],currentRow:[],currentRowClone:[],tableH:300,tableHead:{columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:50,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"审核状态",name:"checkStatus",value:function(e){return 0===e.checkStatus?"未审核":1===e.checkStatus?"已审核":2===e.checkStatus?"待重新审核":""}},{displayName:"账单日期",name:"billDate",width:100,formatter:"yyyy-MM-dd"},{displayName:"结算客户",name:"customerName",width:100},{displayName:"客户编码",name:"customerCode",isCode:!0,width:110},{displayName:"审核票数",name:"totalTicket",showTotal:!0},{displayName:"审核运费",name:"totalFee",showTotal:!0,formatter:"0.00"},{displayName:"费用差额",name:"subTotalFee",showTotal:!0,formatter:"0.00"},{displayName:"账单票数",name:"sendTicketCount",showTotal:!0},{displayName:"运费合计",name:"toAccountFee",width:100,showTotal:!0,formatter:"0.00"},{displayName:"重量",name:"sendWeightSum",showTotal:!0,formatter:"0.00"},{displayName:"运费",name:"customerStmFee",showTotal:!0,formatter:"0.00"},{displayName:"附加费",name:"customerAddFee",showTotal:!0,formatter:"0.00"},{displayName:"增值加收费",name:"valueAddedFee",width:120,showTotal:!0,formatter:"0.00"},{displayName:"运费为0票数",name:"totalZeroCount",width:100,showTotal:!0},{displayName:"审核时间",name:"checkDate",width:100,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"审核人",name:"checker",width:130},{displayName:"客户反馈状态",name:"affirmStatus",width:130,value:function(e){return 0===e.checkStatus?"未确认":1===e.checkStatus?"已确认":""}}]},exportObj:{visible:!1,sum:1,current:0,fileName:"均重计算",excelData:[]}}},methods:{query:function(){this.params.currentPage=1,this.params.pageSize=100,this.onQuery()},onQuery:function(){var e=this;if(this.params.startDate){var t=(new Date(this.params.startDate[1])-new Date(this.params.startDate[0]))/1e3/60/60/24;if(t<0)return this.$message({message:"起始日期不能大于结束日期",type:"warning"});if(t>15)return this.$message({message:"最多可查询16天的数据,请重新选择开始日期",showClose:!1,type:"warning"})}var a=this.params,i=a.userId,s=a.audited,n=a.pageSize,l=a.currentPage,o={startSignDate:u()(this.params.startDate[0]).format("YYYY-MM-DD"),endSignDate:u()(this.params.startDate[1]).format("YYYY-MM-DD"),userId:""!==i?i:void 0,audited:""!==s?s:void 0,pageSize:n,currentPage:l};console.log(o),Object(r["jb"])(o).then((function(t){if(console.log(t),!1===t.status||0===t.result.list.length)return e.tableData=[],e.params.total=0,e.params.currentPage=1,e.params.pageSize=100,e.$message({message:"查询结果无数据",type:"warning"});var a=t.result;e.tableData=a.list,e.params.total=a.totalRow})).catch((function(t){e.tableData=[],e.params.total=0,e.params.currentPage=1,e.params.pageSize=100}))},callBack:function(e){e&&(this.batchDialogVisible=!0,this.batchUrl="/bills/custBill/delete",this.currentRowClone=Object(o["cloneDeep"])(this.currentRow),this.currentRowClone.map((function(e){e.billDate=u()(e.billDate).format("YYYY-MM-DD")}))),this.dialogVisible=!1},examine:function(){this.batchDialogVisible=!0,this.batchUrl="/bills/custBill/audit",this.currentRowClone=Object(o["cloneDeep"])(this.currentRow),this.currentRowClone.map((function(e){e.billDate=u()(e.billDate).format("YYYY-MM-DD")}))},deleted:function(){this.dialogVisible=!0},dataValidate:function(e){return new Promise((function(t,a){t({id:e.id,siteId:e.siteId,checkerId:e.checkerId,checker:e.checker})}))},exportExcel:function(){if(0===this.params.total)return this.$message({message:"没有数据无法导出",type:"warning"});var e={totalRow:this.params.total,checklistData:this.tableData,url:"/avg/claTaskIndex/queryClaTasks",paramIn:this.optionsClone,fileName:"均重计算",type:"page",methodType:"post"};this.exportBasicUtils(e)},getTableData:function(e,t){return isNaN(t)||(this.multipleSelection=[e]),void 0===e.payable||null===e.payable?this.$emit("getStatus",!0):this.$emit("getStatus",!1,e)},dbClick:function(e,t,a){return null===e.payable||void 0===e.payable?this.$emit("getStatus",!0):(console.log(e.calculStatus,e.countStatus),1===e.calculStatus&&1===e.countStatus||(this.multipleSelection=[e]),this.$emit("goto",e),this.$emit("getStatus",!1,e))},handleSizeChange:function(e){this.params.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.params.currentPage=e,this.onQuery()},close:function(){this.batchDialogVisible=!1},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},closeDialog:function(e){this.exportObj.visible=e,this.exportObj.current=1},onresize:function(){this.tableH=document.body.clientHeight-245,this.z_method.refreshSpread()}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()})),window.addEventListener("resize",this.onresize)},created:function(){this.tableH=document.body.clientHeight-245},destroyed:function(){window.removeEventListener("resize",this.onresize)},components:{verification:y}},C=g,x=(a("7355"),a("2ba7"),Object(b["a"])(C,n,l,!1,null,"45cd1ba6",null)),k=x.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"handListProcess-page"},[a("sc-expand-collapse",{on:{change:e.heightChange}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"search-box handListProcess-box"},[a("bill-code",{nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.params.billCodes,callback:function(t){e.$set(e.params,"billCodes",t)},expression:"params.billCodes"}}),a("div",{staticClass:"ul-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("el-select",{staticClass:"input-80",on:{change:e.changeType},model:{value:e.params.dateType,callback:function(t){e.$set(e.params,"dateType",t)},expression:"params.dateType"}},[a("el-option",{key:1,attrs:{label:"账单日期",value:1}}),a("el-option",{key:2,attrs:{label:"扫描时间",value:2}})],1),1==e.params.dateType?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.params.dateValue,callback:function(t){e.$set(e.params,"dateValue",t)},expression:"params.dateValue"}}):e._e(),1!=e.params.dateType?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.params.timeValue,callback:function(t){e.$set(e.params,"timeValue",t)},expression:"params.timeValue"}}):e._e()],1),a("li",[a("span",{staticClass:"label"},[e._v("结算客户：")]),a("sc-users",{staticClass:"short-input",attrs:{type:"7",param:e.settleParam,optionAdd:e.optionAdd},on:{change:e.settlementChange},model:{value:e.params.accountUserId,callback:function(t){e.$set(e.params,"accountUserId",t)},expression:"params.accountUserId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("结算重量：")]),a("el-input",{staticClass:"input-40-40",model:{value:e.params.weightS,callback:function(t){e.$set(e.params,"weightS","string"===typeof t?t.trim():t)},expression:"params.weightS"}},[a("template",{slot:"append"},[e._v("≤W≤")])],2),a("el-input",{staticClass:"input-40",model:{value:e.params.weightE,callback:function(t){e.$set(e.params,"weightE","string"===typeof t?t.trim():t)},expression:"params.weightE"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("班次类型：")]),a("sc-select-multiple",{ref:"topSearchTransport",staticClass:"short-input",attrs:{params:{dictionaryType:"transportType"}},model:{value:e.params.transport,callback:function(t){e.$set(e.params,"transport",t)},expression:"params.transport"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("物品类型：")]),a("sc-select-multiple",{ref:"topSearchGoods",staticClass:"short-input",attrs:{params:{dictionaryType:"goodsType"}},model:{value:e.params.goodsType,callback:function(t){e.$set(e.params,"goodsType",t)},expression:"params.goodsType"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("目的省：")]),a("sc-province",{staticClass:"short-input",attrs:{res:"dispProvince"},model:{value:e.params.provinceId,callback:function(t){e.$set(e.params,"provinceId",t)},expression:"params.provinceId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("目的城市:")]),a("sc-city",{staticClass:"short-input",attrs:{optionAdd:e.optionAdd2},model:{value:e.params.cityId,callback:function(t){e.$set(e.params,"cityId",t)},expression:"params.cityId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("增值类型：")]),a("sc-select-multiple",{ref:"topSearchValueAdded",staticClass:"short-input",attrs:{params:{dictionaryType:"valueAddedType"}},model:{value:e.params.valueAddedType,callback:function(t){e.$set(e.params,"valueAddedType",t)},expression:"params.valueAddedType"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("面单类型：")]),a("el-select",{staticClass:"short-input",model:{value:e.params.billTypes,callback:function(t){e.$set(e.params,"billTypes",t)},expression:"params.billTypes"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("产品类型：")]),a("el-select",{staticClass:"short-input",model:{value:e.params.productType,callback:function(t){e.$set(e.params,"productType",t)},expression:"params.productType"}},e._l(e.productOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("签收状态：")]),a("el-select",{staticClass:"short-input",model:{value:e.params.signType,callback:function(t){e.$set(e.params,"signType",t)},expression:"params.signType"}},e._l(e.signTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("退件：")]),a("el-select",{staticClass:"short-input",model:{value:e.params.isBack,callback:function(t){e.$set(e.params,"isBack",t)},expression:"params.isBack"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("问题件：")]),a("el-select",{staticClass:"short-input",model:{value:e.params.isProblem,callback:function(t){e.$set(e.params,"isProblem",t)},expression:"params.isProblem"}},e._l(e.isProblemOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("应收费用：")]),a("el-select",{staticClass:"short-input",model:{value:e.params.feeType,callback:function(t){e.$set(e.params,"feeType",t)},expression:"params.feeType"}},e._l(e.votesIsZeroOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticStyle:{position:"absolute",bottom:"0",right:"10px"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])],1)])]),a("div",{staticClass:"content-box "},[a("div",{staticClass:"btn-box"},[a("div"),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1)]),a("div",{style:{height:e.tableH+"px"}},[a("Spread",{attrs:{"ng-data":e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.batchRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate},on:{model:e.close}})],1)},w=[],S=(a("f548"),a("f37e"),a("4055"),{mixins:[v["b"]],data:function(){var e=this;return{params:{billCodes:"",dateType:1,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],accountUserId:"",transport:[],goodsType:[],provinceId:"",cityId:"",valueAddedType:[],billTypes:-1,productType:-1,signType:-1,isBack:-1,isProblem:-1,feeType:-1,weightS:"",weightE:""},settleParam:{types:""},optionAdd2:[{children:[{fullName:"为空",id:0}]}],optionAdd:[{code:"",id:0,name:"为空"}],billsTypeOptions:[{value:-1,label:"全部"},{value:0,label:"电子面单"},{value:1,label:"普通面单"},{value:2,label:"星联面单"},{value:3,label:"时效面单"}],productOptions:[{label:"全部",value:-1},{label:"普通快件",value:1},{label:"星联件",value:2},{label:"星联冷链件",value:4},{label:"时效件",value:3}],signTypeOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],isStatusOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],isProblemOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:2,label:"否"}],votesIsZeroOptions:[{value:-1,label:"全部"},{value:0,label:"＝0"},{value:1,label:"＞0"}],tableH:300,limit:31,tableHead:{columns:[{displayName:"单号",name:"billCode",size:150,isCode:!0,isFrozen:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"账单日期",name:"billTime",size:150,formatter:"yyyy-MM-dd"},{displayName:"扫描时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"扫描客户",name:"11"},{displayName:"结算客户",name:"22"},{displayName:"结算客户编码",name:"33",isCode:!0,width:120},{displayName:"揽收业务员",name:"4",width:100},{displayName:"结算重量",name:"accountWeight"},{displayName:"班次类型",name:"classTypeName"},{displayName:"物品类型",name:"goodsTypeName"},{displayName:"目的省",name:"dispProvName"},{displayName:"目的城市",name:"dispCityName"},{displayName:"增值类型",name:"valueAddedTypeName"},{displayName:"产品类型",name:"productName"},{displayName:"面单类型",name:"billType"},{displayName:"应收费用",name:"toAccountFee"},{displayName:"运费",name:"avgWeightFee"},{displayName:"附加费",name:"operAddFee"},{displayName:"增值加收费",name:"valueAddedFee",width:100},{displayName:"运单发放客户",name:"21",width:100},{displayName:"签收状态",name:"signStatus"},{displayName:"签收时间",name:"signTime",formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"退件",name:"24",formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"问题件",name:"problemPiecesType",formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"订单编号",name:"orderSource"},{displayName:"交易号",name:"partnerTradeId"}]},optionsClone:{},tableData:[],currentRow:[],batchRow:[],batchTitle:"",batchUrl:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode"}],exportObj:{fileName:"发件手工单处理"},exportUrl:"/bills/new/sendaBillsHandwork/export"}},methods:{changeType:function(e){1===e?this.queryContent.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")]:this.queryContent.timeValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]},settlementChange:function(e){this.queryContent.accountUserType=null!==e?e.type:""},keyup:function(){this.queryContent.billCodes=this.queryContent.billCodes.replace(/,/g,"").replace(/，/g,"")},startDateChangeA:function(e){e&&this.$refs.timePickerB.focus()},startDateChangeB:function(e){e&&this.$refs.timePickerD.focus()},onSearch:function(){},exportNew:function(){if(this.optionsClone.billCodes)this.tableData.length>0?(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出!");else{if(this.pagination.total>8e5)return void this.msg("最大导出不能超过80万");this.pagination.total>this.pagination.pageSize?this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport())}},close:function(e){},dataValidate:function(e){return new Promise((function(t,a){t(e)}))},reset:function(){},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},heightChange:function(e){var t=this;this.tableH=e?document.body.clientHeight-335:document.body.clientHeight-335+document.querySelectorAll(".search-box")[0].offsetHeight,this.$nextTick((function(){t.z_method.refreshSpread()}))},onresize:function(){this.tableH=document.body.clientHeight-335,this.z_method.refreshSpread()}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()})),window.addEventListener("resize",this.onresize)},created:function(){this.queryContentClone=Object.assign({},this.queryContent),this.tableH=document.body.clientHeight-335},activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))}}),_=S,N=(a("26cb"),a("d091"),Object(b["a"])(_,D,w,!1,null,"d3148e3c",null)),T=N.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendReceiveFeeDetail"},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{display:"inline-block",width:"calc(100% )"}},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-65"},[e._v("账单日期：")]),a("sz-date-picker",{ref:"timepick",staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.params.startDate,callback:function(t){e.$set(e.params,"startDate",t)},expression:"params.startDate"}})],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("结算客户：")]),a("sc-users",{staticClass:"input-h-85",attrs:{type:"3"},model:{value:e.params.userId,callback:function(t){e.$set(e.params,"userId",t)},expression:"params.userId"}})],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("审核状态：")]),a("el-select",{model:{value:e.params.audited,callback:function(t){e.$set(e.params,"audited",t)},expression:"params.audited"}},e._l(e.audits,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("费用类型：")]),a("el-select",{model:{value:e.params.costType,callback:function(t){e.$set(e.params,"costType",t)},expression:"params.costType"}},e._l(e.costTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-button",{staticClass:"m-b-16",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.query}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.examine}},[e._v("审核")])],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currentRow.length},on:{click:e.examine}},[e._v("新增")])],1),a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currentRow.length},on:{click:e.examine}},[e._v("修改")])],1),a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currentRow.length},on:{click:e.deleted}},[e._v("删除")])],1),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.examine}},[e._v("下载摸板")])],1),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.examine}},[e._v("导入")])],1)])]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportExcel}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.tableH+"px"}},[a("spread",{staticStyle:{padding:"10px 0 0"},attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"sz-pagination-box"},[a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.params.currentPage,"page-sizes":[100,200,500,1e3,5e3],"page-size":e.params.pageSize,total:e.params.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,"data-validate":e.dataValidate,tableData:e.currentRowClone,batchUrl:e.batchUrl},on:{model:e.close}}),a("verification",{attrs:{isError:!0,titles:"你是否确认重新计算该均重任务？",titleCon:"注意：新计算出的均重费用会覆盖掉原均重费用；",dialogVisibles:e.dialogVisible},on:{callBack:e.callBack}}),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},O=[],E={mixins:[v["a"],v["b"]],data:function(){var e=this;return{batchUrl:"",batchTitle:"审核",batchDialogVisible:!1,dialogVisible:!1,params:{startDate:[this.moment().subtract(15,"days").format("YYYY-MM-DD 00:00:00"),this.moment().format("YYYY-MM-DD 00:00:00")],userId:"",audited:-1,costType:-1,total:0,pageSize:100,currentPage:1},audits:[{value:-1,label:"全部"},{value:0,label:"未审核"},{value:1,label:"已审核"}],costTypes:[{value:-1,label:"全部"},{value:0,label:"赔付类"},{value:1,label:"加收类"}],multipleSelection:[],tableData:[],columns:[{displayName:"账单日期",name:"billDate"},{displayName:"结算客户",name:"customerName"}],currentRow:[],currentRowClone:[],tableH:300,tableHead:{columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:50,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"审核状态",name:"checkStatus",value:function(e){return 0===e.checkStatus?"未审核":1===e.checkStatus?"已审核":2===e.checkStatus?"待重新审核":""}},{displayName:"结算日期",name:"billDate",width:100,formatter:"yyyy-MM-dd"},{displayName:"结算客户",name:"customerName",width:100},{displayName:"客户编码",name:"customerCode",isCode:!0,width:110},{displayName:"费用类型",name:"totalTicket"},{displayName:"费用子类",name:"totalFee"},{displayName:"费用",name:"subTotalFee",showTotal:!0,formatter:"0.00"},{displayName:"备注",name:"sendTicketCount"},{displayName:"操作时间",name:"checkDate",width:100,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"操作人",name:"checker",width:130}]},exportObj:{visible:!1,sum:1,current:0,fileName:"均重计算",excelData:[]}}},methods:{query:function(){this.params.currentPage=1,this.params.pageSize=100,this.onQuery()},onQuery:function(){var e=this;if(this.params.startDate){var t=(new Date(this.params.startDate[1])-new Date(this.params.startDate[0]))/1e3/60/60/24;if(t<0)return this.$message({message:"起始日期不能大于结束日期",type:"warning"});if(t>15)return this.$message({message:"最多可查询16天的数据,请重新选择开始日期",showClose:!1,type:"warning"})}var a=this.params,i=a.userId,s=a.audited,n=a.pageSize,l=a.currentPage,o={startSignDate:u()(this.params.startDate[0]).format("YYYY-MM-DD"),endSignDate:u()(this.params.startDate[1]).format("YYYY-MM-DD"),userId:""!==i?i:void 0,audited:""!==s?s:void 0,pageSize:n,currentPage:l};console.log(o),Object(r["jb"])(o).then((function(t){if(console.log(t),!1===t.status||0===t.result.list.length)return e.tableData=[],e.params.total=0,e.params.currentPage=1,e.params.pageSize=100,e.$message({message:"查询结果无数据",type:"warning"});var a=t.result;e.tableData=a.list,e.params.total=a.totalRow})).catch((function(t){e.tableData=[],e.params.total=0,e.params.currentPage=1,e.params.pageSize=100}))},callBack:function(e){e&&(this.batchDialogVisible=!0,this.batchUrl="/bills/custBill/delete",this.currentRowClone=Object(o["cloneDeep"])(this.currentRow),this.currentRowClone.map((function(e){e.billDate=u()(e.billDate).format("YYYY-MM-DD")}))),this.dialogVisible=!1},examine:function(){this.batchDialogVisible=!0,this.batchUrl="/bills/custBill/audit",this.currentRowClone=Object(o["cloneDeep"])(this.currentRow),this.currentRowClone.map((function(e){e.billDate=u()(e.billDate).format("YYYY-MM-DD")}))},deleted:function(){this.dialogVisible=!0},dataValidate:function(e){return new Promise((function(t,a){t({id:e.id,siteId:e.siteId,checkerId:e.checkerId,checker:e.checker})}))},exportExcel:function(){if(0===this.params.total)return this.$message({message:"没有数据无法导出",type:"warning"});var e={totalRow:this.params.total,checklistData:this.tableData,url:"/avg/claTaskIndex/queryClaTasks",paramIn:this.optionsClone,fileName:"均重计算",type:"page",methodType:"post"};this.exportBasicUtils(e)},getTableData:function(e,t){return isNaN(t)||(this.multipleSelection=[e]),void 0===e.payable||null===e.payable?this.$emit("getStatus",!0):this.$emit("getStatus",!1,e)},dbClick:function(e,t,a){return null===e.payable||void 0===e.payable?this.$emit("getStatus",!0):(console.log(e.calculStatus,e.countStatus),1===e.calculStatus&&1===e.countStatus||(this.multipleSelection=[e]),this.$emit("goto",e),this.$emit("getStatus",!1,e))},handleSizeChange:function(e){this.params.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.params.currentPage=e,this.onQuery()},close:function(){this.batchDialogVisible=!1},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currentRow=this.tableData.filter((function(e){return!0===e.check}))},closeDialog:function(e){this.exportObj.visible=e,this.exportObj.current=1},onresize:function(){this.tableH=document.body.clientHeight-245,this.z_method.refreshSpread()}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()})),window.addEventListener("resize",this.onresize)},created:function(){this.tableH=document.body.clientHeight-245},destroyed:function(){window.removeEventListener("resize",this.onresize)},components:{verification:y}},z=E,F=(a("738c"),a("971f"),Object(b["a"])(z,I,O,!1,null,"b1150edc",null)),M=F.exports,P={name:"customerBillCheckNew",data:function(){return{activeName:"运费审核明细"}},created:function(){},methods:{goto:function(e){this.activeName="运费审核明细"},onTabClick:function(e){this.z_method.refreshSpread()}},computed:{openAvgWeight:function(){return this.z_param.avgStatus}},components:{freightSummary:k,freightDetail:T,settlementClaims:M}},Y=P,j=(a("1849"),Object(b["a"])(Y,i,s,!1,null,"1e4ec729",null));t["default"]=j.exports},ccb1:function(e,t,a){},ccc6:function(e,t,a){"use strict";var i=a("cf64"),s=a.n(i);s.a},cf64:function(e,t,a){},d091:function(e,t,a){"use strict";var i=a("95a1"),s=a.n(i);s.a},d11c:function(e,t,a){"use strict";var i=a("7e1e"),s=a.n(i);s.a},d1dc:function(e,t,a){},d276:function(e,t,a){},d29c:function(e,t,a){(function(e,i){var s;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var n,l="4.17.11",o=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",m=1,p=2,b=4,f=1,y=2,v=1,g=2,C=4,x=8,k=16,D=32,w=64,S=128,_=256,N=512,T=30,I="...",O=800,E=16,z=1,F=2,M=3,P=1/0,Y=9007199254740991,j=17976931348623157e292,$=NaN,H=4294967295,V=H-1,R=H>>>1,q=[["ary",S],["bind",v],["bindKey",g],["curry",x],["curryRight",k],["flip",N],["partial",D],["partialRight",w],["rearg",_]],U="[object Arguments]",A="[object Array]",B="[object AsyncFunction]",W="[object Boolean]",L="[object Date]",G="[object DOMException]",Z="[object Error]",Q="[object Function]",J="[object GeneratorFunction]",X="[object Map]",K="[object Number]",ee="[object Null]",te="[object Object]",ae="[object Promise]",ie="[object Proxy]",se="[object RegExp]",ne="[object Set]",le="[object String]",oe="[object Symbol]",re="[object Undefined]",ce="[object WeakMap]",ue="[object WeakSet]",de="[object ArrayBuffer]",he="[object DataView]",me="[object Float32Array]",pe="[object Float64Array]",be="[object Int8Array]",fe="[object Int16Array]",ye="[object Int32Array]",ve="[object Uint8Array]",ge="[object Uint8ClampedArray]",Ce="[object Uint16Array]",xe="[object Uint32Array]",ke=/\b__p \+= '';/g,De=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Se=/&(?:amp|lt|gt|quot|#39);/g,_e=/[&<>"']/g,Ne=RegExp(Se.source),Te=RegExp(_e.source),Ie=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fe=/^\w*$/,Me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pe=/[\\^$.*+?()[\]{}|]/g,Ye=RegExp(Pe.source),je=/^\s+|\s+$/g,$e=/^\s+/,He=/\s+$/,Ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Re=/\{\n\/\* \[wrapped with (.+)\] \*/,qe=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ae=/\\(\\)?/g,Be=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,Le=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Ze=/^\[object .+?Constructor\]$/,Qe=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,et=/['\n\r\u2028\u2029\\]/g,tt="\\ud800-\\udfff",at="\\u0300-\\u036f",it="\\ufe20-\\ufe2f",st="\\u20d0-\\u20ff",nt=at+it+st,lt="\\u2700-\\u27bf",ot="a-z\\xdf-\\xf6\\xf8-\\xff",rt="\\xac\\xb1\\xd7\\xf7",ct="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ut="\\u2000-\\u206f",dt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ht="A-Z\\xc0-\\xd6\\xd8-\\xde",mt="\\ufe0e\\ufe0f",pt=rt+ct+ut+dt,bt="['’]",ft="["+tt+"]",yt="["+pt+"]",vt="["+nt+"]",gt="\\d+",Ct="["+lt+"]",xt="["+ot+"]",kt="[^"+tt+pt+gt+lt+ot+ht+"]",Dt="\\ud83c[\\udffb-\\udfff]",wt="(?:"+vt+"|"+Dt+")",St="[^"+tt+"]",_t="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="["+ht+"]",It="\\u200d",Ot="(?:"+xt+"|"+kt+")",Et="(?:"+Tt+"|"+kt+")",zt="(?:"+bt+"(?:d|ll|m|re|s|t|ve))?",Ft="(?:"+bt+"(?:D|LL|M|RE|S|T|VE))?",Mt=wt+"?",Pt="["+mt+"]?",Yt="(?:"+It+"(?:"+[St,_t,Nt].join("|")+")"+Pt+Mt+")*",jt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$t="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ht=Pt+Mt+Yt,Vt="(?:"+[Ct,_t,Nt].join("|")+")"+Ht,Rt="(?:"+[St+vt+"?",vt,_t,Nt,ft].join("|")+")",qt=RegExp(bt,"g"),Ut=RegExp(vt,"g"),At=RegExp(Dt+"(?="+Dt+")|"+Rt+Ht,"g"),Bt=RegExp([Tt+"?"+xt+"+"+zt+"(?="+[yt,Tt,"$"].join("|")+")",Et+"+"+Ft+"(?="+[yt,Tt+Ot,"$"].join("|")+")",Tt+"?"+Ot+"+"+zt,Tt+"+"+Ft,$t,jt,gt,Vt].join("|"),"g"),Wt=RegExp("["+It+tt+nt+mt+"]"),Lt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zt=-1,Qt={};Qt[me]=Qt[pe]=Qt[be]=Qt[fe]=Qt[ye]=Qt[ve]=Qt[ge]=Qt[Ce]=Qt[xe]=!0,Qt[U]=Qt[A]=Qt[de]=Qt[W]=Qt[he]=Qt[L]=Qt[Z]=Qt[Q]=Qt[X]=Qt[K]=Qt[te]=Qt[se]=Qt[ne]=Qt[le]=Qt[ce]=!1;var Jt={};Jt[U]=Jt[A]=Jt[de]=Jt[he]=Jt[W]=Jt[L]=Jt[me]=Jt[pe]=Jt[be]=Jt[fe]=Jt[ye]=Jt[X]=Jt[K]=Jt[te]=Jt[se]=Jt[ne]=Jt[le]=Jt[oe]=Jt[ve]=Jt[ge]=Jt[Ce]=Jt[xe]=!0,Jt[Z]=Jt[Q]=Jt[ce]=!1;var Xt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ea={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ta={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aa=parseFloat,ia=parseInt,sa="object"==typeof e&&e&&e.Object===Object&&e,na="object"==typeof self&&self&&self.Object===Object&&self,la=sa||na||Function("return this")(),oa=t&&!t.nodeType&&t,ra=oa&&"object"==typeof i&&i&&!i.nodeType&&i,ca=ra&&ra.exports===oa,ua=ca&&sa.process,da=function(){try{var e=ra&&ra.require&&ra.require("util").types;return e||ua&&ua.binding&&ua.binding("util")}catch(t){}}(),ha=da&&da.isArrayBuffer,ma=da&&da.isDate,pa=da&&da.isMap,ba=da&&da.isRegExp,fa=da&&da.isSet,ya=da&&da.isTypedArray;function va(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function ga(e,t,a,i){var s=-1,n=null==e?0:e.length;while(++s<n){var l=e[s];t(i,l,a(l),e)}return i}function Ca(e,t){var a=-1,i=null==e?0:e.length;while(++a<i)if(!1===t(e[a],a,e))break;return e}function xa(e,t){var a=null==e?0:e.length;while(a--)if(!1===t(e[a],a,e))break;return e}function ka(e,t){var a=-1,i=null==e?0:e.length;while(++a<i)if(!t(e[a],a,e))return!1;return!0}function Da(e,t){var a=-1,i=null==e?0:e.length,s=0,n=[];while(++a<i){var l=e[a];t(l,a,e)&&(n[s++]=l)}return n}function wa(e,t){var a=null==e?0:e.length;return!!a&&Ya(e,t,0)>-1}function Sa(e,t,a){var i=-1,s=null==e?0:e.length;while(++i<s)if(a(t,e[i]))return!0;return!1}function _a(e,t){var a=-1,i=null==e?0:e.length,s=Array(i);while(++a<i)s[a]=t(e[a],a,e);return s}function Na(e,t){var a=-1,i=t.length,s=e.length;while(++a<i)e[s+a]=t[a];return e}function Ta(e,t,a,i){var s=-1,n=null==e?0:e.length;i&&n&&(a=e[++s]);while(++s<n)a=t(a,e[s],s,e);return a}function Ia(e,t,a,i){var s=null==e?0:e.length;i&&s&&(a=e[--s]);while(s--)a=t(a,e[s],s,e);return a}function Oa(e,t){var a=-1,i=null==e?0:e.length;while(++a<i)if(t(e[a],a,e))return!0;return!1}var Ea=Va("length");function za(e){return e.split("")}function Fa(e){return e.match(Ue)||[]}function Ma(e,t,a){var i;return a(e,(function(e,a,s){if(t(e,a,s))return i=a,!1})),i}function Pa(e,t,a,i){var s=e.length,n=a+(i?1:-1);while(i?n--:++n<s)if(t(e[n],n,e))return n;return-1}function Ya(e,t,a){return t===t?di(e,t,a):Pa(e,$a,a)}function ja(e,t,a,i){var s=a-1,n=e.length;while(++s<n)if(i(e[s],t))return s;return-1}function $a(e){return e!==e}function Ha(e,t){var a=null==e?0:e.length;return a?Aa(e,t)/a:$}function Va(e){return function(t){return null==t?n:t[e]}}function Ra(e){return function(t){return null==e?n:e[t]}}function qa(e,t,a,i,s){return s(e,(function(e,s,n){a=i?(i=!1,e):t(a,e,s,n)})),a}function Ua(e,t){var a=e.length;e.sort(t);while(a--)e[a]=e[a].value;return e}function Aa(e,t){var a,i=-1,s=e.length;while(++i<s){var l=t(e[i]);l!==n&&(a=a===n?l:a+l)}return a}function Ba(e,t){var a=-1,i=Array(e);while(++a<e)i[a]=t(a);return i}function Wa(e,t){return _a(t,(function(t){return[t,e[t]]}))}function La(e){return function(t){return e(t)}}function Ga(e,t){return _a(t,(function(t){return e[t]}))}function Za(e,t){return e.has(t)}function Qa(e,t){var a=-1,i=e.length;while(++a<i&&Ya(t,e[a],0)>-1);return a}function Ja(e,t){var a=e.length;while(a--&&Ya(t,e[a],0)>-1);return a}function Xa(e,t){var a=e.length,i=0;while(a--)e[a]===t&&++i;return i}var Ka=Ra(Xt),ei=Ra(Kt);function ti(e){return"\\"+ta[e]}function ai(e,t){return null==e?n:e[t]}function ii(e){return Wt.test(e)}function si(e){return Lt.test(e)}function ni(e){var t,a=[];while(!(t=e.next()).done)a.push(t.value);return a}function li(e){var t=-1,a=Array(e.size);return e.forEach((function(e,i){a[++t]=[i,e]})),a}function oi(e,t){return function(a){return e(t(a))}}function ri(e,t){var a=-1,i=e.length,s=0,n=[];while(++a<i){var l=e[a];l!==t&&l!==h||(e[a]=h,n[s++]=a)}return n}function ci(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e})),a}function ui(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=[e,e]})),a}function di(e,t,a){var i=a-1,s=e.length;while(++i<s)if(e[i]===t)return i;return-1}function hi(e,t,a){var i=a+1;while(i--)if(e[i]===t)return i;return i}function mi(e){return ii(e)?fi(e):Ea(e)}function pi(e){return ii(e)?yi(e):za(e)}var bi=Ra(ea);function fi(e){var t=At.lastIndex=0;while(At.test(e))++t;return t}function yi(e){return e.match(At)||[]}function vi(e){return e.match(Bt)||[]}var gi=function e(t){t=null==t?la:Ci.defaults(la.Object(),t,Ci.pick(la,Gt));var a=t.Array,i=t.Date,s=t.Error,Ue=t.Function,tt=t.Math,at=t.Object,it=t.RegExp,st=t.String,nt=t.TypeError,lt=a.prototype,ot=Ue.prototype,rt=at.prototype,ct=t["__core-js_shared__"],ut=ot.toString,dt=rt.hasOwnProperty,ht=0,mt=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pt=rt.toString,bt=ut.call(at),ft=la._,yt=it("^"+ut.call(dt).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=ca?t.Buffer:n,gt=t.Symbol,Ct=t.Uint8Array,xt=vt?vt.allocUnsafe:n,kt=oi(at.getPrototypeOf,at),Dt=at.create,wt=rt.propertyIsEnumerable,St=lt.splice,_t=gt?gt.isConcatSpreadable:n,Nt=gt?gt.iterator:n,Tt=gt?gt.toStringTag:n,It=function(){try{var e=Al(at,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ot=t.clearTimeout!==la.clearTimeout&&t.clearTimeout,Et=i&&i.now!==la.Date.now&&i.now,zt=t.setTimeout!==la.setTimeout&&t.setTimeout,Ft=tt.ceil,Mt=tt.floor,Pt=at.getOwnPropertySymbols,Yt=vt?vt.isBuffer:n,jt=t.isFinite,$t=lt.join,Ht=oi(at.keys,at),Vt=tt.max,Rt=tt.min,At=i.now,Bt=t.parseInt,Wt=tt.random,Lt=lt.reverse,Xt=Al(t,"DataView"),Kt=Al(t,"Map"),ea=Al(t,"Promise"),ta=Al(t,"Set"),sa=Al(t,"WeakMap"),na=Al(at,"create"),oa=sa&&new sa,ra={},ua=Oo(Xt),da=Oo(Kt),Ea=Oo(ea),za=Oo(ta),Ra=Oo(sa),di=gt?gt.prototype:n,fi=di?di.valueOf:n,yi=di?di.toString:n;function gi(e){if(Du(e)&&!lu(e)&&!(e instanceof wi)){if(e instanceof Di)return e;if(dt.call(e,"__wrapped__"))return zo(e)}return new Di(e)}var xi=function(){function e(){}return function(t){if(!ku(t))return{};if(Dt)return Dt(t);e.prototype=t;var a=new e;return e.prototype=n,a}}();function ki(){}function Di(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function wi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function Si(){var e=new wi(this.__wrapped__);return e.__actions__=tl(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=tl(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=tl(this.__views__),e}function _i(){if(this.__filtered__){var e=new wi(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ni(){var e=this.__wrapped__.value(),t=this.__dir__,a=lu(e),i=t<0,s=a?e.length:0,n=Zl(0,s,this.__views__),l=n.start,o=n.end,r=o-l,c=i?o:l-1,u=this.__iteratees__,d=u.length,h=0,m=Rt(r,this.__takeCount__);if(!a||!i&&s==r&&m==r)return Yn(e,this.__actions__);var p=[];e:while(r--&&h<m){c+=t;var b=-1,f=e[c];while(++b<d){var y=u[b],v=y.iteratee,g=y.type,C=v(f);if(g==F)f=C;else if(!C){if(g==z)continue e;break e}}p[h++]=f}return p}function Ti(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var i=e[t];this.set(i[0],i[1])}}function Ii(){this.__data__=na?na(null):{},this.size=0}function Oi(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Ei(e){var t=this.__data__;if(na){var a=t[e];return a===u?n:a}return dt.call(t,e)?t[e]:n}function zi(e){var t=this.__data__;return na?t[e]!==n:dt.call(t,e)}function Fi(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=na&&t===n?u:t,this}function Mi(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var i=e[t];this.set(i[0],i[1])}}function Pi(){this.__data__=[],this.size=0}function Yi(e){var t=this.__data__,a=os(t,e);if(a<0)return!1;var i=t.length-1;return a==i?t.pop():St.call(t,a,1),--this.size,!0}function ji(e){var t=this.__data__,a=os(t,e);return a<0?n:t[a][1]}function $i(e){return os(this.__data__,e)>-1}function Hi(e,t){var a=this.__data__,i=os(a,e);return i<0?(++this.size,a.push([e,t])):a[i][1]=t,this}function Vi(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var i=e[t];this.set(i[0],i[1])}}function Ri(){this.size=0,this.__data__={hash:new Ti,map:new(Kt||Mi),string:new Ti}}function qi(e){var t=ql(this,e)["delete"](e);return this.size-=t?1:0,t}function Ui(e){return ql(this,e).get(e)}function Ai(e){return ql(this,e).has(e)}function Bi(e,t){var a=ql(this,e),i=a.size;return a.set(e,t),this.size+=a.size==i?0:1,this}function Wi(e){var t=-1,a=null==e?0:e.length;this.__data__=new Vi;while(++t<a)this.add(e[t])}function Li(e){return this.__data__.set(e,u),this}function Gi(e){return this.__data__.has(e)}function Zi(e){var t=this.__data__=new Mi(e);this.size=t.size}function Qi(){this.__data__=new Mi,this.size=0}function Ji(e){var t=this.__data__,a=t["delete"](e);return this.size=t.size,a}function Xi(e){return this.__data__.get(e)}function Ki(e){return this.__data__.has(e)}function es(e,t){var a=this.__data__;if(a instanceof Mi){var i=a.__data__;if(!Kt||i.length<o-1)return i.push([e,t]),this.size=++a.size,this;a=this.__data__=new Vi(i)}return a.set(e,t),this.size=a.size,this}function ts(e,t){var a=lu(e),i=!a&&nu(e),s=!a&&!i&&du(e),n=!a&&!i&&!s&&$u(e),l=a||i||s||n,o=l?Ba(e.length,st):[],r=o.length;for(var c in e)!t&&!dt.call(e,c)||l&&("length"==c||s&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||io(c,r))||o.push(c);return o}function as(e){var t=e.length;return t?e[bn(0,t-1)]:n}function is(e,t){return No(tl(e),ms(t,0,e.length))}function ss(e){return No(tl(e))}function ns(e,t,a){(a===n||au(e[t],a))&&(a!==n||t in e)||ds(e,t,a)}function ls(e,t,a){var i=e[t];dt.call(e,t)&&au(i,a)&&(a!==n||t in e)||ds(e,t,a)}function os(e,t){var a=e.length;while(a--)if(au(e[a][0],t))return a;return-1}function rs(e,t,a,i){return gs(e,(function(e,s,n){t(i,e,a(e),n)})),i}function cs(e,t){return e&&al(t,Cd(t),e)}function us(e,t){return e&&al(t,xd(t),e)}function ds(e,t,a){"__proto__"==t&&It?It(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function hs(e,t){var i=-1,s=t.length,l=a(s),o=null==e;while(++i<s)l[i]=o?n:pd(e,t[i]);return l}function ms(e,t,a){return e===e&&(a!==n&&(e=e<=a?e:a),t!==n&&(e=e>=t?e:t)),e}function ps(e,t,a,i,s,l){var o,r=t&m,c=t&p,u=t&b;if(a&&(o=s?a(e,i,s,l):a(e)),o!==n)return o;if(!ku(e))return e;var d=lu(e);if(d){if(o=Xl(e),!r)return tl(e,o)}else{var h=Gl(e),f=h==Q||h==J;if(du(e))return Bn(e,r);if(h==te||h==U||f&&!s){if(o=c||f?{}:Kl(e),!r)return c?sl(e,us(o,e)):il(e,cs(o,e))}else{if(!Jt[h])return s?e:{};o=eo(e,h,r)}}l||(l=new Zi);var y=l.get(e);if(y)return y;if(l.set(e,o),Pu(e))return e.forEach((function(i){o.add(ps(i,t,a,i,e,l))})),o;if(wu(e))return e.forEach((function(i,s){o.set(s,ps(i,t,a,s,e,l))})),o;var v=u?c?jl:Yl:c?xd:Cd,g=d?n:v(e);return Ca(g||e,(function(i,s){g&&(s=i,i=e[s]),ls(o,s,ps(i,t,a,s,e,l))})),o}function bs(e){var t=Cd(e);return function(a){return fs(a,e,t)}}function fs(e,t,a){var i=a.length;if(null==e)return!i;e=at(e);while(i--){var s=a[i],l=t[s],o=e[s];if(o===n&&!(s in e)||!l(o))return!1}return!0}function ys(e,t,a){if("function"!=typeof e)throw new nt(c);return Do((function(){e.apply(n,a)}),t)}function vs(e,t,a,i){var s=-1,n=wa,l=!0,r=e.length,c=[],u=t.length;if(!r)return c;a&&(t=_a(t,La(a))),i?(n=Sa,l=!1):t.length>=o&&(n=Za,l=!1,t=new Wi(t));e:while(++s<r){var d=e[s],h=null==a?d:a(d);if(d=i||0!==d?d:0,l&&h===h){var m=u;while(m--)if(t[m]===h)continue e;c.push(d)}else n(t,h,i)||c.push(d)}return c}gi.templateSettings={escape:Ie,evaluate:Oe,interpolate:Ee,variable:"",imports:{_:gi}},gi.prototype=ki.prototype,gi.prototype.constructor=gi,Di.prototype=xi(ki.prototype),Di.prototype.constructor=Di,wi.prototype=xi(ki.prototype),wi.prototype.constructor=wi,Ti.prototype.clear=Ii,Ti.prototype["delete"]=Oi,Ti.prototype.get=Ei,Ti.prototype.has=zi,Ti.prototype.set=Fi,Mi.prototype.clear=Pi,Mi.prototype["delete"]=Yi,Mi.prototype.get=ji,Mi.prototype.has=$i,Mi.prototype.set=Hi,Vi.prototype.clear=Ri,Vi.prototype["delete"]=qi,Vi.prototype.get=Ui,Vi.prototype.has=Ai,Vi.prototype.set=Bi,Wi.prototype.add=Wi.prototype.push=Li,Wi.prototype.has=Gi,Zi.prototype.clear=Qi,Zi.prototype["delete"]=Ji,Zi.prototype.get=Xi,Zi.prototype.has=Ki,Zi.prototype.set=es;var gs=ol(Ts),Cs=ol(Is,!0);function xs(e,t){var a=!0;return gs(e,(function(e,i,s){return a=!!t(e,i,s),a})),a}function ks(e,t,a){var i=-1,s=e.length;while(++i<s){var l=e[i],o=t(l);if(null!=o&&(r===n?o===o&&!ju(o):a(o,r)))var r=o,c=l}return c}function Ds(e,t,a,i){var s=e.length;a=Wu(a),a<0&&(a=-a>s?0:s+a),i=i===n||i>s?s:Wu(i),i<0&&(i+=s),i=a>i?0:Lu(i);while(a<i)e[a++]=t;return e}function ws(e,t){var a=[];return gs(e,(function(e,i,s){t(e,i,s)&&a.push(e)})),a}function Ss(e,t,a,i,s){var n=-1,l=e.length;a||(a=ao),s||(s=[]);while(++n<l){var o=e[n];t>0&&a(o)?t>1?Ss(o,t-1,a,i,s):Na(s,o):i||(s[s.length]=o)}return s}var _s=rl(),Ns=rl(!0);function Ts(e,t){return e&&_s(e,t,Cd)}function Is(e,t){return e&&Ns(e,t,Cd)}function Os(e,t){return Da(t,(function(t){return gu(e[t])}))}function Es(e,t){t=Rn(t,e);var a=0,i=t.length;while(null!=e&&a<i)e=e[Io(t[a++])];return a&&a==i?e:n}function zs(e,t,a){var i=t(e);return lu(e)?i:Na(i,a(e))}function Fs(e){return null==e?e===n?re:ee:Tt&&Tt in at(e)?Bl(e):yo(e)}function Ms(e,t){return e>t}function Ps(e,t){return null!=e&&dt.call(e,t)}function Ys(e,t){return null!=e&&t in at(e)}function js(e,t,a){return e>=Rt(t,a)&&e<Vt(t,a)}function $s(e,t,i){var s=i?Sa:wa,l=e[0].length,o=e.length,r=o,c=a(o),u=1/0,d=[];while(r--){var h=e[r];r&&t&&(h=_a(h,La(t))),u=Rt(h.length,u),c[r]=!i&&(t||l>=120&&h.length>=120)?new Wi(r&&h):n}h=e[0];var m=-1,p=c[0];e:while(++m<l&&d.length<u){var b=h[m],f=t?t(b):b;if(b=i||0!==b?b:0,!(p?Za(p,f):s(d,f,i))){r=o;while(--r){var y=c[r];if(!(y?Za(y,f):s(e[r],f,i)))continue e}p&&p.push(f),d.push(b)}}return d}function Hs(e,t,a,i){return Ts(e,(function(e,s,n){t(i,a(e),s,n)})),i}function Vs(e,t,a){t=Rn(t,e),e=go(e,t);var i=null==e?e:e[Io(ir(t))];return null==i?n:va(i,e,a)}function Rs(e){return Du(e)&&Fs(e)==U}function qs(e){return Du(e)&&Fs(e)==de}function Us(e){return Du(e)&&Fs(e)==L}function As(e,t,a,i,s){return e===t||(null==e||null==t||!Du(e)&&!Du(t)?e!==e&&t!==t:Bs(e,t,a,i,As,s))}function Bs(e,t,a,i,s,n){var l=lu(e),o=lu(t),r=l?A:Gl(e),c=o?A:Gl(t);r=r==U?te:r,c=c==U?te:c;var u=r==te,d=c==te,h=r==c;if(h&&du(e)){if(!du(t))return!1;l=!0,u=!1}if(h&&!u)return n||(n=new Zi),l||$u(e)?zl(e,t,a,i,s,n):Fl(e,t,r,a,i,s,n);if(!(a&f)){var m=u&&dt.call(e,"__wrapped__"),p=d&&dt.call(t,"__wrapped__");if(m||p){var b=m?e.value():e,y=p?t.value():t;return n||(n=new Zi),s(b,y,a,i,n)}}return!!h&&(n||(n=new Zi),Ml(e,t,a,i,s,n))}function Ws(e){return Du(e)&&Gl(e)==X}function Ls(e,t,a,i){var s=a.length,l=s,o=!i;if(null==e)return!l;e=at(e);while(s--){var r=a[s];if(o&&r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}while(++s<l){r=a[s];var c=r[0],u=e[c],d=r[1];if(o&&r[2]){if(u===n&&!(c in e))return!1}else{var h=new Zi;if(i)var m=i(u,d,c,e,t,h);if(!(m===n?As(d,u,f|y,i,h):m))return!1}}return!0}function Gs(e){if(!ku(e)||ro(e))return!1;var t=gu(e)?yt:Ze;return t.test(Oo(e))}function Zs(e){return Du(e)&&Fs(e)==se}function Qs(e){return Du(e)&&Gl(e)==ne}function Js(e){return Du(e)&&xu(e.length)&&!!Qt[Fs(e)]}function Xs(e){return"function"==typeof e?e:null==e?Th:"object"==typeof e?lu(e)?nn(e[0],e[1]):sn(e):Rh(e)}function Ks(e){if(!uo(e))return Ht(e);var t=[];for(var a in at(e))dt.call(e,a)&&"constructor"!=a&&t.push(a);return t}function en(e){if(!ku(e))return fo(e);var t=uo(e),a=[];for(var i in e)("constructor"!=i||!t&&dt.call(e,i))&&a.push(i);return a}function tn(e,t){return e<t}function an(e,t){var i=-1,s=ru(e)?a(e.length):[];return gs(e,(function(e,a,n){s[++i]=t(e,a,n)})),s}function sn(e){var t=Ul(e);return 1==t.length&&t[0][2]?mo(t[0][0],t[0][1]):function(a){return a===e||Ls(a,e,t)}}function nn(e,t){return no(e)&&ho(t)?mo(Io(e),t):function(a){var i=pd(a,e);return i===n&&i===t?fd(a,e):As(t,i,f|y)}}function ln(e,t,a,i,s){e!==t&&_s(t,(function(l,o){if(ku(l))s||(s=new Zi),on(e,t,o,a,ln,i,s);else{var r=i?i(xo(e,o),l,o+"",e,t,s):n;r===n&&(r=l),ns(e,o,r)}}),xd)}function on(e,t,a,i,s,l,o){var r=xo(e,a),c=xo(t,a),u=o.get(c);if(u)ns(e,a,u);else{var d=l?l(r,c,a+"",e,t,o):n,h=d===n;if(h){var m=lu(c),p=!m&&du(c),b=!m&&!p&&$u(c);d=c,m||p||b?lu(r)?d=r:cu(r)?d=tl(r):p?(h=!1,d=Bn(c,!0)):b?(h=!1,d=Qn(c,!0)):d=[]:zu(c)||nu(c)?(d=r,nu(r)?d=Zu(r):ku(r)&&!gu(r)||(d=Kl(c))):h=!1}h&&(o.set(c,d),s(d,c,i,l,o),o["delete"](c)),ns(e,a,d)}}function rn(e,t){var a=e.length;if(a)return t+=t<0?a:0,io(t,a)?e[t]:n}function cn(e,t,a){var i=-1;t=_a(t.length?t:[Th],La(Rl()));var s=an(e,(function(e,a,s){var n=_a(t,(function(t){return t(e)}));return{criteria:n,index:++i,value:e}}));return Ua(s,(function(e,t){return Xn(e,t,a)}))}function un(e,t){return dn(e,t,(function(t,a){return fd(e,a)}))}function dn(e,t,a){var i=-1,s=t.length,n={};while(++i<s){var l=t[i],o=Es(e,l);a(o,l)&&xn(n,Rn(l,e),o)}return n}function hn(e){return function(t){return Es(t,e)}}function mn(e,t,a,i){var s=i?ja:Ya,n=-1,l=t.length,o=e;e===t&&(t=tl(t)),a&&(o=_a(e,La(a)));while(++n<l){var r=0,c=t[n],u=a?a(c):c;while((r=s(o,u,r,i))>-1)o!==e&&St.call(o,r,1),St.call(e,r,1)}return e}function pn(e,t){var a=e?t.length:0,i=a-1;while(a--){var s=t[a];if(a==i||s!==n){var n=s;io(s)?St.call(e,s,1):Fn(e,s)}}return e}function bn(e,t){return e+Mt(Wt()*(t-e+1))}function fn(e,t,i,s){var n=-1,l=Vt(Ft((t-e)/(i||1)),0),o=a(l);while(l--)o[s?l:++n]=e,e+=i;return o}function yn(e,t){var a="";if(!e||t<1||t>Y)return a;do{t%2&&(a+=e),t=Mt(t/2),t&&(e+=e)}while(t);return a}function vn(e,t){return wo(vo(e,t,Th),e+"")}function gn(e){return as(Hd(e))}function Cn(e,t){var a=Hd(e);return No(a,ms(t,0,a.length))}function xn(e,t,a,i){if(!ku(e))return e;t=Rn(t,e);var s=-1,l=t.length,o=l-1,r=e;while(null!=r&&++s<l){var c=Io(t[s]),u=a;if(s!=o){var d=r[c];u=i?i(d,c,r):n,u===n&&(u=ku(d)?d:io(t[s+1])?[]:{})}ls(r,c,u),r=r[c]}return e}var kn=oa?function(e,t){return oa.set(e,t),e}:Th,Dn=It?function(e,t){return It(e,"toString",{configurable:!0,enumerable:!1,value:wh(t),writable:!0})}:Th;function wn(e){return No(Hd(e))}function Sn(e,t,i){var s=-1,n=e.length;t<0&&(t=-t>n?0:n+t),i=i>n?n:i,i<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;var l=a(n);while(++s<n)l[s]=e[s+t];return l}function _n(e,t){var a;return gs(e,(function(e,i,s){return a=t(e,i,s),!a})),!!a}function Nn(e,t,a){var i=0,s=null==e?i:e.length;if("number"==typeof t&&t===t&&s<=R){while(i<s){var n=i+s>>>1,l=e[n];null!==l&&!ju(l)&&(a?l<=t:l<t)?i=n+1:s=n}return s}return Tn(e,t,Th,a)}function Tn(e,t,a,i){t=a(t);var s=0,l=null==e?0:e.length,o=t!==t,r=null===t,c=ju(t),u=t===n;while(s<l){var d=Mt((s+l)/2),h=a(e[d]),m=h!==n,p=null===h,b=h===h,f=ju(h);if(o)var y=i||b;else y=u?b&&(i||m):r?b&&m&&(i||!p):c?b&&m&&!p&&(i||!f):!p&&!f&&(i?h<=t:h<t);y?s=d+1:l=d}return Rt(l,V)}function In(e,t){var a=-1,i=e.length,s=0,n=[];while(++a<i){var l=e[a],o=t?t(l):l;if(!a||!au(o,r)){var r=o;n[s++]=0===l?0:l}}return n}function On(e){return"number"==typeof e?e:ju(e)?$:+e}function En(e){if("string"==typeof e)return e;if(lu(e))return _a(e,En)+"";if(ju(e))return yi?yi.call(e):"";var t=e+"";return"0"==t&&1/e==-P?"-0":t}function zn(e,t,a){var i=-1,s=wa,n=e.length,l=!0,r=[],c=r;if(a)l=!1,s=Sa;else if(n>=o){var u=t?null:_l(e);if(u)return ci(u);l=!1,s=Za,c=new Wi}else c=t?[]:r;e:while(++i<n){var d=e[i],h=t?t(d):d;if(d=a||0!==d?d:0,l&&h===h){var m=c.length;while(m--)if(c[m]===h)continue e;t&&c.push(h),r.push(d)}else s(c,h,a)||(c!==r&&c.push(h),r.push(d))}return r}function Fn(e,t){return t=Rn(t,e),e=go(e,t),null==e||delete e[Io(ir(t))]}function Mn(e,t,a,i){return xn(e,t,a(Es(e,t)),i)}function Pn(e,t,a,i){var s=e.length,n=i?s:-1;while((i?n--:++n<s)&&t(e[n],n,e));return a?Sn(e,i?0:n,i?n+1:s):Sn(e,i?n+1:0,i?s:n)}function Yn(e,t){var a=e;return a instanceof wi&&(a=a.value()),Ta(t,(function(e,t){return t.func.apply(t.thisArg,Na([e],t.args))}),a)}function jn(e,t,i){var s=e.length;if(s<2)return s?zn(e[0]):[];var n=-1,l=a(s);while(++n<s){var o=e[n],r=-1;while(++r<s)r!=n&&(l[n]=vs(l[n]||o,e[r],t,i))}return zn(Ss(l,1),t,i)}function $n(e,t,a){var i=-1,s=e.length,l=t.length,o={};while(++i<s){var r=i<l?t[i]:n;a(o,e[i],r)}return o}function Hn(e){return cu(e)?e:[]}function Vn(e){return"function"==typeof e?e:Th}function Rn(e,t){return lu(e)?e:no(e,t)?[e]:To(Ju(e))}var qn=vn;function Un(e,t,a){var i=e.length;return a=a===n?i:a,!t&&a>=i?e:Sn(e,t,a)}var An=Ot||function(e){return la.clearTimeout(e)};function Bn(e,t){if(t)return e.slice();var a=e.length,i=xt?xt(a):new e.constructor(a);return e.copy(i),i}function Wn(e){var t=new e.constructor(e.byteLength);return new Ct(t).set(new Ct(e)),t}function Ln(e,t){var a=t?Wn(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Gn(e){var t=new e.constructor(e.source,We.exec(e));return t.lastIndex=e.lastIndex,t}function Zn(e){return fi?at(fi.call(e)):{}}function Qn(e,t){var a=t?Wn(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function Jn(e,t){if(e!==t){var a=e!==n,i=null===e,s=e===e,l=ju(e),o=t!==n,r=null===t,c=t===t,u=ju(t);if(!r&&!u&&!l&&e>t||l&&o&&c&&!r&&!u||i&&o&&c||!a&&c||!s)return 1;if(!i&&!l&&!u&&e<t||u&&a&&s&&!i&&!l||r&&a&&s||!o&&s||!c)return-1}return 0}function Xn(e,t,a){var i=-1,s=e.criteria,n=t.criteria,l=s.length,o=a.length;while(++i<l){var r=Jn(s[i],n[i]);if(r){if(i>=o)return r;var c=a[i];return r*("desc"==c?-1:1)}}return e.index-t.index}function Kn(e,t,i,s){var n=-1,l=e.length,o=i.length,r=-1,c=t.length,u=Vt(l-o,0),d=a(c+u),h=!s;while(++r<c)d[r]=t[r];while(++n<o)(h||n<l)&&(d[i[n]]=e[n]);while(u--)d[r++]=e[n++];return d}function el(e,t,i,s){var n=-1,l=e.length,o=-1,r=i.length,c=-1,u=t.length,d=Vt(l-r,0),h=a(d+u),m=!s;while(++n<d)h[n]=e[n];var p=n;while(++c<u)h[p+c]=t[c];while(++o<r)(m||n<l)&&(h[p+i[o]]=e[n++]);return h}function tl(e,t){var i=-1,s=e.length;t||(t=a(s));while(++i<s)t[i]=e[i];return t}function al(e,t,a,i){var s=!a;a||(a={});var l=-1,o=t.length;while(++l<o){var r=t[l],c=i?i(a[r],e[r],r,a,e):n;c===n&&(c=e[r]),s?ds(a,r,c):ls(a,r,c)}return a}function il(e,t){return al(e,Wl(e),t)}function sl(e,t){return al(e,Ll(e),t)}function nl(e,t){return function(a,i){var s=lu(a)?ga:rs,n=t?t():{};return s(a,e,Rl(i,2),n)}}function ll(e){return vn((function(t,a){var i=-1,s=a.length,l=s>1?a[s-1]:n,o=s>2?a[2]:n;l=e.length>3&&"function"==typeof l?(s--,l):n,o&&so(a[0],a[1],o)&&(l=s<3?n:l,s=1),t=at(t);while(++i<s){var r=a[i];r&&e(t,r,i,l)}return t}))}function ol(e,t){return function(a,i){if(null==a)return a;if(!ru(a))return e(a,i);var s=a.length,n=t?s:-1,l=at(a);while(t?n--:++n<s)if(!1===i(l[n],n,l))break;return a}}function rl(e){return function(t,a,i){var s=-1,n=at(t),l=i(t),o=l.length;while(o--){var r=l[e?o:++s];if(!1===a(n[r],r,n))break}return t}}function cl(e,t,a){var i=t&v,s=hl(e);function n(){var t=this&&this!==la&&this instanceof n?s:e;return t.apply(i?a:this,arguments)}return n}function ul(e){return function(t){t=Ju(t);var a=ii(t)?pi(t):n,i=a?a[0]:t.charAt(0),s=a?Un(a,1).join(""):t.slice(1);return i[e]()+s}}function dl(e){return function(t){return Ta(gh(Wd(t).replace(qt,"")),e,"")}}function hl(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=xi(e.prototype),i=e.apply(a,t);return ku(i)?i:a}}function ml(e,t,i){var s=hl(e);function l(){var o=arguments.length,r=a(o),c=o,u=Vl(l);while(c--)r[c]=arguments[c];var d=o<3&&r[0]!==u&&r[o-1]!==u?[]:ri(r,u);if(o-=d.length,o<i)return wl(e,t,fl,l.placeholder,n,r,d,n,n,i-o);var h=this&&this!==la&&this instanceof l?s:e;return va(h,this,r)}return l}function pl(e){return function(t,a,i){var s=at(t);if(!ru(t)){var l=Rl(a,3);t=Cd(t),a=function(e){return l(s[e],e,s)}}var o=e(t,a,i);return o>-1?s[l?t[o]:o]:n}}function bl(e){return Pl((function(t){var a=t.length,i=a,s=Di.prototype.thru;e&&t.reverse();while(i--){var l=t[i];if("function"!=typeof l)throw new nt(c);if(s&&!o&&"wrapper"==Hl(l))var o=new Di([],!0)}i=o?i:a;while(++i<a){l=t[i];var r=Hl(l),u="wrapper"==r?$l(l):n;o=u&&oo(u[0])&&u[1]==(S|x|D|_)&&!u[4].length&&1==u[9]?o[Hl(u[0])].apply(o,u[3]):1==l.length&&oo(l)?o[r]():o.thru(l)}return function(){var e=arguments,i=e[0];if(o&&1==e.length&&lu(i))return o.plant(i).value();var s=0,n=a?t[s].apply(this,e):i;while(++s<a)n=t[s].call(this,n);return n}}))}function fl(e,t,i,s,l,o,r,c,u,d){var h=t&S,m=t&v,p=t&g,b=t&(x|k),f=t&N,y=p?n:hl(e);function C(){var n=arguments.length,v=a(n),g=n;while(g--)v[g]=arguments[g];if(b)var x=Vl(C),k=Xa(v,x);if(s&&(v=Kn(v,s,l,b)),o&&(v=el(v,o,r,b)),n-=k,b&&n<d){var D=ri(v,x);return wl(e,t,fl,C.placeholder,i,v,D,c,u,d-n)}var w=m?i:this,S=p?w[e]:e;return n=v.length,c?v=Co(v,c):f&&n>1&&v.reverse(),h&&u<n&&(v.length=u),this&&this!==la&&this instanceof C&&(S=y||hl(S)),S.apply(w,v)}return C}function yl(e,t){return function(a,i){return Hs(a,e,t(i),{})}}function vl(e,t){return function(a,i){var s;if(a===n&&i===n)return t;if(a!==n&&(s=a),i!==n){if(s===n)return i;"string"==typeof a||"string"==typeof i?(a=En(a),i=En(i)):(a=On(a),i=On(i)),s=e(a,i)}return s}}function gl(e){return Pl((function(t){return t=_a(t,La(Rl())),vn((function(a){var i=this;return e(t,(function(e){return va(e,i,a)}))}))}))}function Cl(e,t){t=t===n?" ":En(t);var a=t.length;if(a<2)return a?yn(t,e):t;var i=yn(t,Ft(e/mi(t)));return ii(t)?Un(pi(i),0,e).join(""):i.slice(0,e)}function xl(e,t,i,s){var n=t&v,l=hl(e);function o(){var t=-1,r=arguments.length,c=-1,u=s.length,d=a(u+r),h=this&&this!==la&&this instanceof o?l:e;while(++c<u)d[c]=s[c];while(r--)d[c++]=arguments[++t];return va(h,n?i:this,d)}return o}function kl(e){return function(t,a,i){return i&&"number"!=typeof i&&so(t,a,i)&&(a=i=n),t=Bu(t),a===n?(a=t,t=0):a=Bu(a),i=i===n?t<a?1:-1:Bu(i),fn(t,a,i,e)}}function Dl(e){return function(t,a){return"string"==typeof t&&"string"==typeof a||(t=Gu(t),a=Gu(a)),e(t,a)}}function wl(e,t,a,i,s,l,o,r,c,u){var d=t&x,h=d?o:n,m=d?n:o,p=d?l:n,b=d?n:l;t|=d?D:w,t&=~(d?w:D),t&C||(t&=~(v|g));var f=[e,t,s,p,h,b,m,r,c,u],y=a.apply(n,f);return oo(e)&&ko(y,f),y.placeholder=i,So(y,e,t)}function Sl(e){var t=tt[e];return function(e,a){if(e=Gu(e),a=null==a?0:Rt(Wu(a),292),a){var i=(Ju(e)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+a));return i=(Ju(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-a))}return t(e)}}var _l=ta&&1/ci(new ta([,-0]))[1]==P?function(e){return new ta(e)}:Yh;function Nl(e){return function(t){var a=Gl(t);return a==X?li(t):a==ne?ui(t):Wa(t,e(t))}}function Tl(e,t,a,i,s,l,o,r){var u=t&g;if(!u&&"function"!=typeof e)throw new nt(c);var d=i?i.length:0;if(d||(t&=~(D|w),i=s=n),o=o===n?o:Vt(Wu(o),0),r=r===n?r:Wu(r),d-=s?s.length:0,t&w){var h=i,m=s;i=s=n}var p=u?n:$l(e),b=[e,t,a,i,s,h,m,l,o,r];if(p&&bo(b,p),e=b[0],t=b[1],a=b[2],i=b[3],s=b[4],r=b[9]=b[9]===n?u?0:e.length:Vt(b[9]-d,0),!r&&t&(x|k)&&(t&=~(x|k)),t&&t!=v)f=t==x||t==k?ml(e,t,r):t!=D&&t!=(v|D)||s.length?fl.apply(n,b):xl(e,t,a,i);else var f=cl(e,t,a);var y=p?kn:ko;return So(y(f,b),e,t)}function Il(e,t,a,i){return e===n||au(e,rt[a])&&!dt.call(i,a)?t:e}function Ol(e,t,a,i,s,l){return ku(e)&&ku(t)&&(l.set(t,e),ln(e,t,n,Ol,l),l["delete"](t)),e}function El(e){return zu(e)?n:e}function zl(e,t,a,i,s,l){var o=a&f,r=e.length,c=t.length;if(r!=c&&!(o&&c>r))return!1;var u=l.get(e);if(u&&l.get(t))return u==t;var d=-1,h=!0,m=a&y?new Wi:n;l.set(e,t),l.set(t,e);while(++d<r){var p=e[d],b=t[d];if(i)var v=o?i(b,p,d,t,e,l):i(p,b,d,e,t,l);if(v!==n){if(v)continue;h=!1;break}if(m){if(!Oa(t,(function(e,t){if(!Za(m,t)&&(p===e||s(p,e,a,i,l)))return m.push(t)}))){h=!1;break}}else if(p!==b&&!s(p,b,a,i,l)){h=!1;break}}return l["delete"](e),l["delete"](t),h}function Fl(e,t,a,i,s,n,l){switch(a){case he:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case de:return!(e.byteLength!=t.byteLength||!n(new Ct(e),new Ct(t)));case W:case L:case K:return au(+e,+t);case Z:return e.name==t.name&&e.message==t.message;case se:case le:return e==t+"";case X:var o=li;case ne:var r=i&f;if(o||(o=ci),e.size!=t.size&&!r)return!1;var c=l.get(e);if(c)return c==t;i|=y,l.set(e,t);var u=zl(o(e),o(t),i,s,n,l);return l["delete"](e),u;case oe:if(fi)return fi.call(e)==fi.call(t)}return!1}function Ml(e,t,a,i,s,l){var o=a&f,r=Yl(e),c=r.length,u=Yl(t),d=u.length;if(c!=d&&!o)return!1;var h=c;while(h--){var m=r[h];if(!(o?m in t:dt.call(t,m)))return!1}var p=l.get(e);if(p&&l.get(t))return p==t;var b=!0;l.set(e,t),l.set(t,e);var y=o;while(++h<c){m=r[h];var v=e[m],g=t[m];if(i)var C=o?i(g,v,m,t,e,l):i(v,g,m,e,t,l);if(!(C===n?v===g||s(v,g,a,i,l):C)){b=!1;break}y||(y="constructor"==m)}if(b&&!y){var x=e.constructor,k=t.constructor;x!=k&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof k&&k instanceof k)&&(b=!1)}return l["delete"](e),l["delete"](t),b}function Pl(e){return wo(vo(e,n,Wo),e+"")}function Yl(e){return zs(e,Cd,Wl)}function jl(e){return zs(e,xd,Ll)}var $l=oa?function(e){return oa.get(e)}:Yh;function Hl(e){var t=e.name+"",a=ra[t],i=dt.call(ra,t)?a.length:0;while(i--){var s=a[i],n=s.func;if(null==n||n==e)return s.name}return t}function Vl(e){var t=dt.call(gi,"placeholder")?gi:e;return t.placeholder}function Rl(){var e=gi.iteratee||Ih;return e=e===Ih?Xs:e,arguments.length?e(arguments[0],arguments[1]):e}function ql(e,t){var a=e.__data__;return lo(t)?a["string"==typeof t?"string":"hash"]:a.map}function Ul(e){var t=Cd(e),a=t.length;while(a--){var i=t[a],s=e[i];t[a]=[i,s,ho(s)]}return t}function Al(e,t){var a=ai(e,t);return Gs(a)?a:n}function Bl(e){var t=dt.call(e,Tt),a=e[Tt];try{e[Tt]=n;var i=!0}catch(l){}var s=pt.call(e);return i&&(t?e[Tt]=a:delete e[Tt]),s}var Wl=Pt?function(e){return null==e?[]:(e=at(e),Da(Pt(e),(function(t){return wt.call(e,t)})))}:Bh,Ll=Pt?function(e){var t=[];while(e)Na(t,Wl(e)),e=kt(e);return t}:Bh,Gl=Fs;function Zl(e,t,a){var i=-1,s=a.length;while(++i<s){var n=a[i],l=n.size;switch(n.type){case"drop":e+=l;break;case"dropRight":t-=l;break;case"take":t=Rt(t,e+l);break;case"takeRight":e=Vt(e,t-l);break}}return{start:e,end:t}}function Ql(e){var t=e.match(Re);return t?t[1].split(qe):[]}function Jl(e,t,a){t=Rn(t,e);var i=-1,s=t.length,n=!1;while(++i<s){var l=Io(t[i]);if(!(n=null!=e&&a(e,l)))break;e=e[l]}return n||++i!=s?n:(s=null==e?0:e.length,!!s&&xu(s)&&io(l,s)&&(lu(e)||nu(e)))}function Xl(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&dt.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Kl(e){return"function"!=typeof e.constructor||uo(e)?{}:xi(kt(e))}function eo(e,t,a){var i=e.constructor;switch(t){case de:return Wn(e);case W:case L:return new i(+e);case he:return Ln(e,a);case me:case pe:case be:case fe:case ye:case ve:case ge:case Ce:case xe:return Qn(e,a);case X:return new i;case K:case le:return new i(e);case se:return Gn(e);case ne:return new i;case oe:return Zn(e)}}function to(e,t){var a=t.length;if(!a)return e;var i=a-1;return t[i]=(a>1?"& ":"")+t[i],t=t.join(a>2?", ":" "),e.replace(Ve,"{\n/* [wrapped with "+t+"] */\n")}function ao(e){return lu(e)||nu(e)||!!(_t&&e&&e[_t])}function io(e,t){var a=typeof e;return t=null==t?Y:t,!!t&&("number"==a||"symbol"!=a&&Je.test(e))&&e>-1&&e%1==0&&e<t}function so(e,t,a){if(!ku(a))return!1;var i=typeof t;return!!("number"==i?ru(a)&&io(t,a.length):"string"==i&&t in a)&&au(a[t],e)}function no(e,t){if(lu(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!ju(e))||(Fe.test(e)||!ze.test(e)||null!=t&&e in at(t))}function lo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function oo(e){var t=Hl(e),a=gi[t];if("function"!=typeof a||!(t in wi.prototype))return!1;if(e===a)return!0;var i=$l(a);return!!i&&e===i[0]}function ro(e){return!!mt&&mt in e}(Xt&&Gl(new Xt(new ArrayBuffer(1)))!=he||Kt&&Gl(new Kt)!=X||ea&&Gl(ea.resolve())!=ae||ta&&Gl(new ta)!=ne||sa&&Gl(new sa)!=ce)&&(Gl=function(e){var t=Fs(e),a=t==te?e.constructor:n,i=a?Oo(a):"";if(i)switch(i){case ua:return he;case da:return X;case Ea:return ae;case za:return ne;case Ra:return ce}return t});var co=ct?gu:Wh;function uo(e){var t=e&&e.constructor,a="function"==typeof t&&t.prototype||rt;return e===a}function ho(e){return e===e&&!ku(e)}function mo(e,t){return function(a){return null!=a&&(a[e]===t&&(t!==n||e in at(a)))}}function po(e){var t=$c(e,(function(e){return a.size===d&&a.clear(),e})),a=t.cache;return t}function bo(e,t){var a=e[1],i=t[1],s=a|i,n=s<(v|g|S),l=i==S&&a==x||i==S&&a==_&&e[7].length<=t[8]||i==(S|_)&&t[7].length<=t[8]&&a==x;if(!n&&!l)return e;i&v&&(e[2]=t[2],s|=a&v?0:C);var o=t[3];if(o){var r=e[3];e[3]=r?Kn(r,o,t[4]):o,e[4]=r?ri(e[3],h):t[4]}return o=t[5],o&&(r=e[5],e[5]=r?el(r,o,t[6]):o,e[6]=r?ri(e[5],h):t[6]),o=t[7],o&&(e[7]=o),i&S&&(e[8]=null==e[8]?t[8]:Rt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function fo(e){var t=[];if(null!=e)for(var a in at(e))t.push(a);return t}function yo(e){return pt.call(e)}function vo(e,t,i){return t=Vt(t===n?e.length-1:t,0),function(){var s=arguments,n=-1,l=Vt(s.length-t,0),o=a(l);while(++n<l)o[n]=s[t+n];n=-1;var r=a(t+1);while(++n<t)r[n]=s[n];return r[t]=i(o),va(e,this,r)}}function go(e,t){return t.length<2?e:Es(e,Sn(t,0,-1))}function Co(e,t){var a=e.length,i=Rt(t.length,a),s=tl(e);while(i--){var l=t[i];e[i]=io(l,a)?s[l]:n}return e}function xo(e,t){if("__proto__"!=t)return e[t]}var ko=_o(kn),Do=zt||function(e,t){return la.setTimeout(e,t)},wo=_o(Dn);function So(e,t,a){var i=t+"";return wo(e,to(i,Eo(Ql(i),a)))}function _o(e){var t=0,a=0;return function(){var i=At(),s=E-(i-a);if(a=i,s>0){if(++t>=O)return arguments[0]}else t=0;return e.apply(n,arguments)}}function No(e,t){var a=-1,i=e.length,s=i-1;t=t===n?i:t;while(++a<t){var l=bn(a,s),o=e[l];e[l]=e[a],e[a]=o}return e.length=t,e}var To=po((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Me,(function(e,a,i,s){t.push(i?s.replace(Ae,"$1"):a||e)})),t}));function Io(e){if("string"==typeof e||ju(e))return e;var t=e+"";return"0"==t&&1/e==-P?"-0":t}function Oo(e){if(null!=e){try{return ut.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Eo(e,t){return Ca(q,(function(a){var i="_."+a[0];t&a[1]&&!wa(e,i)&&e.push(i)})),e.sort()}function zo(e){if(e instanceof wi)return e.clone();var t=new Di(e.__wrapped__,e.__chain__);return t.__actions__=tl(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Fo(e,t,i){t=(i?so(e,t,i):t===n)?1:Vt(Wu(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];var l=0,o=0,r=a(Ft(s/t));while(l<s)r[o++]=Sn(e,l,l+=t);return r}function Mo(e){var t=-1,a=null==e?0:e.length,i=0,s=[];while(++t<a){var n=e[t];n&&(s[i++]=n)}return s}function Po(){var e=arguments.length;if(!e)return[];var t=a(e-1),i=arguments[0],s=e;while(s--)t[s-1]=arguments[s];return Na(lu(i)?tl(i):[i],Ss(t,1))}var Yo=vn((function(e,t){return cu(e)?vs(e,Ss(t,1,cu,!0)):[]})),jo=vn((function(e,t){var a=ir(t);return cu(a)&&(a=n),cu(e)?vs(e,Ss(t,1,cu,!0),Rl(a,2)):[]})),$o=vn((function(e,t){var a=ir(t);return cu(a)&&(a=n),cu(e)?vs(e,Ss(t,1,cu,!0),n,a):[]}));function Ho(e,t,a){var i=null==e?0:e.length;return i?(t=a||t===n?1:Wu(t),Sn(e,t<0?0:t,i)):[]}function Vo(e,t,a){var i=null==e?0:e.length;return i?(t=a||t===n?1:Wu(t),t=i-t,Sn(e,0,t<0?0:t)):[]}function Ro(e,t){return e&&e.length?Pn(e,Rl(t,3),!0,!0):[]}function qo(e,t){return e&&e.length?Pn(e,Rl(t,3),!0):[]}function Uo(e,t,a,i){var s=null==e?0:e.length;return s?(a&&"number"!=typeof a&&so(e,t,a)&&(a=0,i=s),Ds(e,t,a,i)):[]}function Ao(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var s=null==a?0:Wu(a);return s<0&&(s=Vt(i+s,0)),Pa(e,Rl(t,3),s)}function Bo(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return a!==n&&(s=Wu(a),s=a<0?Vt(i+s,0):Rt(s,i-1)),Pa(e,Rl(t,3),s,!0)}function Wo(e){var t=null==e?0:e.length;return t?Ss(e,1):[]}function Lo(e){var t=null==e?0:e.length;return t?Ss(e,P):[]}function Go(e,t){var a=null==e?0:e.length;return a?(t=t===n?1:Wu(t),Ss(e,t)):[]}function Zo(e){var t=-1,a=null==e?0:e.length,i={};while(++t<a){var s=e[t];i[s[0]]=s[1]}return i}function Qo(e){return e&&e.length?e[0]:n}function Jo(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var s=null==a?0:Wu(a);return s<0&&(s=Vt(i+s,0)),Ya(e,t,s)}function Xo(e){var t=null==e?0:e.length;return t?Sn(e,0,-1):[]}var Ko=vn((function(e){var t=_a(e,Hn);return t.length&&t[0]===e[0]?$s(t):[]})),er=vn((function(e){var t=ir(e),a=_a(e,Hn);return t===ir(a)?t=n:a.pop(),a.length&&a[0]===e[0]?$s(a,Rl(t,2)):[]})),tr=vn((function(e){var t=ir(e),a=_a(e,Hn);return t="function"==typeof t?t:n,t&&a.pop(),a.length&&a[0]===e[0]?$s(a,n,t):[]}));function ar(e,t){return null==e?"":$t.call(e,t)}function ir(e){var t=null==e?0:e.length;return t?e[t-1]:n}function sr(e,t,a){var i=null==e?0:e.length;if(!i)return-1;var s=i;return a!==n&&(s=Wu(a),s=s<0?Vt(i+s,0):Rt(s,i-1)),t===t?hi(e,t,s):Pa(e,$a,s,!0)}function nr(e,t){return e&&e.length?rn(e,Wu(t)):n}var lr=vn(or);function or(e,t){return e&&e.length&&t&&t.length?mn(e,t):e}function rr(e,t,a){return e&&e.length&&t&&t.length?mn(e,t,Rl(a,2)):e}function cr(e,t,a){return e&&e.length&&t&&t.length?mn(e,t,n,a):e}var ur=Pl((function(e,t){var a=null==e?0:e.length,i=hs(e,t);return pn(e,_a(t,(function(e){return io(e,a)?+e:e})).sort(Jn)),i}));function dr(e,t){var a=[];if(!e||!e.length)return a;var i=-1,s=[],n=e.length;t=Rl(t,3);while(++i<n){var l=e[i];t(l,i,e)&&(a.push(l),s.push(i))}return pn(e,s),a}function hr(e){return null==e?e:Lt.call(e)}function mr(e,t,a){var i=null==e?0:e.length;return i?(a&&"number"!=typeof a&&so(e,t,a)?(t=0,a=i):(t=null==t?0:Wu(t),a=a===n?i:Wu(a)),Sn(e,t,a)):[]}function pr(e,t){return Nn(e,t)}function br(e,t,a){return Tn(e,t,Rl(a,2))}function fr(e,t){var a=null==e?0:e.length;if(a){var i=Nn(e,t);if(i<a&&au(e[i],t))return i}return-1}function yr(e,t){return Nn(e,t,!0)}function vr(e,t,a){return Tn(e,t,Rl(a,2),!0)}function gr(e,t){var a=null==e?0:e.length;if(a){var i=Nn(e,t,!0)-1;if(au(e[i],t))return i}return-1}function Cr(e){return e&&e.length?In(e):[]}function xr(e,t){return e&&e.length?In(e,Rl(t,2)):[]}function kr(e){var t=null==e?0:e.length;return t?Sn(e,1,t):[]}function Dr(e,t,a){return e&&e.length?(t=a||t===n?1:Wu(t),Sn(e,0,t<0?0:t)):[]}function wr(e,t,a){var i=null==e?0:e.length;return i?(t=a||t===n?1:Wu(t),t=i-t,Sn(e,t<0?0:t,i)):[]}function Sr(e,t){return e&&e.length?Pn(e,Rl(t,3),!1,!0):[]}function _r(e,t){return e&&e.length?Pn(e,Rl(t,3)):[]}var Nr=vn((function(e){return zn(Ss(e,1,cu,!0))})),Tr=vn((function(e){var t=ir(e);return cu(t)&&(t=n),zn(Ss(e,1,cu,!0),Rl(t,2))})),Ir=vn((function(e){var t=ir(e);return t="function"==typeof t?t:n,zn(Ss(e,1,cu,!0),n,t)}));function Or(e){return e&&e.length?zn(e):[]}function Er(e,t){return e&&e.length?zn(e,Rl(t,2)):[]}function zr(e,t){return t="function"==typeof t?t:n,e&&e.length?zn(e,n,t):[]}function Fr(e){if(!e||!e.length)return[];var t=0;return e=Da(e,(function(e){if(cu(e))return t=Vt(e.length,t),!0})),Ba(t,(function(t){return _a(e,Va(t))}))}function Mr(e,t){if(!e||!e.length)return[];var a=Fr(e);return null==t?a:_a(a,(function(e){return va(t,n,e)}))}var Pr=vn((function(e,t){return cu(e)?vs(e,t):[]})),Yr=vn((function(e){return jn(Da(e,cu))})),jr=vn((function(e){var t=ir(e);return cu(t)&&(t=n),jn(Da(e,cu),Rl(t,2))})),$r=vn((function(e){var t=ir(e);return t="function"==typeof t?t:n,jn(Da(e,cu),n,t)})),Hr=vn(Fr);function Vr(e,t){return $n(e||[],t||[],ls)}function Rr(e,t){return $n(e||[],t||[],xn)}var qr=vn((function(e){var t=e.length,a=t>1?e[t-1]:n;return a="function"==typeof a?(e.pop(),a):n,Mr(e,a)}));function Ur(e){var t=gi(e);return t.__chain__=!0,t}function Ar(e,t){return t(e),e}function Br(e,t){return t(e)}var Wr=Pl((function(e){var t=e.length,a=t?e[0]:0,i=this.__wrapped__,s=function(t){return hs(t,e)};return!(t>1||this.__actions__.length)&&i instanceof wi&&io(a)?(i=i.slice(a,+a+(t?1:0)),i.__actions__.push({func:Br,args:[s],thisArg:n}),new Di(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(s)}));function Lr(){return Ur(this)}function Gr(){return new Di(this.value(),this.__chain__)}function Zr(){this.__values__===n&&(this.__values__=Au(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function Qr(){return this}function Jr(e){var t,a=this;while(a instanceof ki){var i=zo(a);i.__index__=0,i.__values__=n,t?s.__wrapped__=i:t=i;var s=i;a=a.__wrapped__}return s.__wrapped__=e,t}function Xr(){var e=this.__wrapped__;if(e instanceof wi){var t=e;return this.__actions__.length&&(t=new wi(this)),t=t.reverse(),t.__actions__.push({func:Br,args:[hr],thisArg:n}),new Di(t,this.__chain__)}return this.thru(hr)}function Kr(){return Yn(this.__wrapped__,this.__actions__)}var ec=nl((function(e,t,a){dt.call(e,a)?++e[a]:ds(e,a,1)}));function tc(e,t,a){var i=lu(e)?ka:xs;return a&&so(e,t,a)&&(t=n),i(e,Rl(t,3))}function ac(e,t){var a=lu(e)?Da:ws;return a(e,Rl(t,3))}var ic=pl(Ao),sc=pl(Bo);function nc(e,t){return Ss(pc(e,t),1)}function lc(e,t){return Ss(pc(e,t),P)}function oc(e,t,a){return a=a===n?1:Wu(a),Ss(pc(e,t),a)}function rc(e,t){var a=lu(e)?Ca:gs;return a(e,Rl(t,3))}function cc(e,t){var a=lu(e)?xa:Cs;return a(e,Rl(t,3))}var uc=nl((function(e,t,a){dt.call(e,a)?e[a].push(t):ds(e,a,[t])}));function dc(e,t,a,i){e=ru(e)?e:Hd(e),a=a&&!i?Wu(a):0;var s=e.length;return a<0&&(a=Vt(s+a,0)),Yu(e)?a<=s&&e.indexOf(t,a)>-1:!!s&&Ya(e,t,a)>-1}var hc=vn((function(e,t,i){var s=-1,n="function"==typeof t,l=ru(e)?a(e.length):[];return gs(e,(function(e){l[++s]=n?va(t,e,i):Vs(e,t,i)})),l})),mc=nl((function(e,t,a){ds(e,a,t)}));function pc(e,t){var a=lu(e)?_a:an;return a(e,Rl(t,3))}function bc(e,t,a,i){return null==e?[]:(lu(t)||(t=null==t?[]:[t]),a=i?n:a,lu(a)||(a=null==a?[]:[a]),cn(e,t,a))}var fc=nl((function(e,t,a){e[a?0:1].push(t)}),(function(){return[[],[]]}));function yc(e,t,a){var i=lu(e)?Ta:qa,s=arguments.length<3;return i(e,Rl(t,4),a,s,gs)}function vc(e,t,a){var i=lu(e)?Ia:qa,s=arguments.length<3;return i(e,Rl(t,4),a,s,Cs)}function gc(e,t){var a=lu(e)?Da:ws;return a(e,Hc(Rl(t,3)))}function Cc(e){var t=lu(e)?as:gn;return t(e)}function xc(e,t,a){t=(a?so(e,t,a):t===n)?1:Wu(t);var i=lu(e)?is:Cn;return i(e,t)}function kc(e){var t=lu(e)?ss:wn;return t(e)}function Dc(e){if(null==e)return 0;if(ru(e))return Yu(e)?mi(e):e.length;var t=Gl(e);return t==X||t==ne?e.size:Ks(e).length}function wc(e,t,a){var i=lu(e)?Oa:_n;return a&&so(e,t,a)&&(t=n),i(e,Rl(t,3))}var Sc=vn((function(e,t){if(null==e)return[];var a=t.length;return a>1&&so(e,t[0],t[1])?t=[]:a>2&&so(t[0],t[1],t[2])&&(t=[t[0]]),cn(e,Ss(t,1),[])})),_c=Et||function(){return la.Date.now()};function Nc(e,t){if("function"!=typeof t)throw new nt(c);return e=Wu(e),function(){if(--e<1)return t.apply(this,arguments)}}function Tc(e,t,a){return t=a?n:t,t=e&&null==t?e.length:t,Tl(e,S,n,n,n,n,t)}function Ic(e,t){var a;if("function"!=typeof t)throw new nt(c);return e=Wu(e),function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=n),a}}var Oc=vn((function(e,t,a){var i=v;if(a.length){var s=ri(a,Vl(Oc));i|=D}return Tl(e,i,t,a,s)})),Ec=vn((function(e,t,a){var i=v|g;if(a.length){var s=ri(a,Vl(Ec));i|=D}return Tl(t,i,e,a,s)}));function zc(e,t,a){t=a?n:t;var i=Tl(e,x,n,n,n,n,n,t);return i.placeholder=zc.placeholder,i}function Fc(e,t,a){t=a?n:t;var i=Tl(e,k,n,n,n,n,n,t);return i.placeholder=Fc.placeholder,i}function Mc(e,t,a){var i,s,l,o,r,u,d=0,h=!1,m=!1,p=!0;if("function"!=typeof e)throw new nt(c);function b(t){var a=i,l=s;return i=s=n,d=t,o=e.apply(l,a),o}function f(e){return d=e,r=Do(g,t),h?b(e):o}function y(e){var a=e-u,i=e-d,s=t-a;return m?Rt(s,l-i):s}function v(e){var a=e-u,i=e-d;return u===n||a>=t||a<0||m&&i>=l}function g(){var e=_c();if(v(e))return C(e);r=Do(g,y(e))}function C(e){return r=n,p&&i?b(e):(i=s=n,o)}function x(){r!==n&&An(r),d=0,i=u=s=r=n}function k(){return r===n?o:C(_c())}function D(){var e=_c(),a=v(e);if(i=arguments,s=this,u=e,a){if(r===n)return f(u);if(m)return r=Do(g,t),b(u)}return r===n&&(r=Do(g,t)),o}return t=Gu(t)||0,ku(a)&&(h=!!a.leading,m="maxWait"in a,l=m?Vt(Gu(a.maxWait)||0,t):l,p="trailing"in a?!!a.trailing:p),D.cancel=x,D.flush=k,D}var Pc=vn((function(e,t){return ys(e,1,t)})),Yc=vn((function(e,t,a){return ys(e,Gu(t)||0,a)}));function jc(e){return Tl(e,N)}function $c(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new nt(c);var a=function(){var i=arguments,s=t?t.apply(this,i):i[0],n=a.cache;if(n.has(s))return n.get(s);var l=e.apply(this,i);return a.cache=n.set(s,l)||n,l};return a.cache=new($c.Cache||Vi),a}function Hc(e){if("function"!=typeof e)throw new nt(c);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vc(e){return Ic(2,e)}$c.Cache=Vi;var Rc=qn((function(e,t){t=1==t.length&&lu(t[0])?_a(t[0],La(Rl())):_a(Ss(t,1),La(Rl()));var a=t.length;return vn((function(i){var s=-1,n=Rt(i.length,a);while(++s<n)i[s]=t[s].call(this,i[s]);return va(e,this,i)}))})),qc=vn((function(e,t){var a=ri(t,Vl(qc));return Tl(e,D,n,t,a)})),Uc=vn((function(e,t){var a=ri(t,Vl(Uc));return Tl(e,w,n,t,a)})),Ac=Pl((function(e,t){return Tl(e,_,n,n,n,t)}));function Bc(e,t){if("function"!=typeof e)throw new nt(c);return t=t===n?t:Wu(t),vn(e,t)}function Wc(e,t){if("function"!=typeof e)throw new nt(c);return t=null==t?0:Vt(Wu(t),0),vn((function(a){var i=a[t],s=Un(a,0,t);return i&&Na(s,i),va(e,this,s)}))}function Lc(e,t,a){var i=!0,s=!0;if("function"!=typeof e)throw new nt(c);return ku(a)&&(i="leading"in a?!!a.leading:i,s="trailing"in a?!!a.trailing:s),Mc(e,t,{leading:i,maxWait:t,trailing:s})}function Gc(e){return Tc(e,1)}function Zc(e,t){return qc(Vn(t),e)}function Qc(){if(!arguments.length)return[];var e=arguments[0];return lu(e)?e:[e]}function Jc(e){return ps(e,b)}function Xc(e,t){return t="function"==typeof t?t:n,ps(e,b,t)}function Kc(e){return ps(e,m|b)}function eu(e,t){return t="function"==typeof t?t:n,ps(e,m|b,t)}function tu(e,t){return null==t||fs(e,t,Cd(t))}function au(e,t){return e===t||e!==e&&t!==t}var iu=Dl(Ms),su=Dl((function(e,t){return e>=t})),nu=Rs(function(){return arguments}())?Rs:function(e){return Du(e)&&dt.call(e,"callee")&&!wt.call(e,"callee")},lu=a.isArray,ou=ha?La(ha):qs;function ru(e){return null!=e&&xu(e.length)&&!gu(e)}function cu(e){return Du(e)&&ru(e)}function uu(e){return!0===e||!1===e||Du(e)&&Fs(e)==W}var du=Yt||Wh,hu=ma?La(ma):Us;function mu(e){return Du(e)&&1===e.nodeType&&!zu(e)}function pu(e){if(null==e)return!0;if(ru(e)&&(lu(e)||"string"==typeof e||"function"==typeof e.splice||du(e)||$u(e)||nu(e)))return!e.length;var t=Gl(e);if(t==X||t==ne)return!e.size;if(uo(e))return!Ks(e).length;for(var a in e)if(dt.call(e,a))return!1;return!0}function bu(e,t){return As(e,t)}function fu(e,t,a){a="function"==typeof a?a:n;var i=a?a(e,t):n;return i===n?As(e,t,n,a):!!i}function yu(e){if(!Du(e))return!1;var t=Fs(e);return t==Z||t==G||"string"==typeof e.message&&"string"==typeof e.name&&!zu(e)}function vu(e){return"number"==typeof e&&jt(e)}function gu(e){if(!ku(e))return!1;var t=Fs(e);return t==Q||t==J||t==B||t==ie}function Cu(e){return"number"==typeof e&&e==Wu(e)}function xu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Y}function ku(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Du(e){return null!=e&&"object"==typeof e}var wu=pa?La(pa):Ws;function Su(e,t){return e===t||Ls(e,t,Ul(t))}function _u(e,t,a){return a="function"==typeof a?a:n,Ls(e,t,Ul(t),a)}function Nu(e){return Eu(e)&&e!=+e}function Tu(e){if(co(e))throw new s(r);return Gs(e)}function Iu(e){return null===e}function Ou(e){return null==e}function Eu(e){return"number"==typeof e||Du(e)&&Fs(e)==K}function zu(e){if(!Du(e)||Fs(e)!=te)return!1;var t=kt(e);if(null===t)return!0;var a=dt.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&ut.call(a)==bt}var Fu=ba?La(ba):Zs;function Mu(e){return Cu(e)&&e>=-Y&&e<=Y}var Pu=fa?La(fa):Qs;function Yu(e){return"string"==typeof e||!lu(e)&&Du(e)&&Fs(e)==le}function ju(e){return"symbol"==typeof e||Du(e)&&Fs(e)==oe}var $u=ya?La(ya):Js;function Hu(e){return e===n}function Vu(e){return Du(e)&&Gl(e)==ce}function Ru(e){return Du(e)&&Fs(e)==ue}var qu=Dl(tn),Uu=Dl((function(e,t){return e<=t}));function Au(e){if(!e)return[];if(ru(e))return Yu(e)?pi(e):tl(e);if(Nt&&e[Nt])return ni(e[Nt]());var t=Gl(e),a=t==X?li:t==ne?ci:Hd;return a(e)}function Bu(e){if(!e)return 0===e?e:0;if(e=Gu(e),e===P||e===-P){var t=e<0?-1:1;return t*j}return e===e?e:0}function Wu(e){var t=Bu(e),a=t%1;return t===t?a?t-a:t:0}function Lu(e){return e?ms(Wu(e),0,H):0}function Gu(e){if("number"==typeof e)return e;if(ju(e))return $;if(ku(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ku(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(je,"");var a=Ge.test(e);return a||Qe.test(e)?ia(e.slice(2),a?2:8):Le.test(e)?$:+e}function Zu(e){return al(e,xd(e))}function Qu(e){return e?ms(Wu(e),-Y,Y):0===e?e:0}function Ju(e){return null==e?"":En(e)}var Xu=ll((function(e,t){if(uo(t)||ru(t))al(t,Cd(t),e);else for(var a in t)dt.call(t,a)&&ls(e,a,t[a])})),Ku=ll((function(e,t){al(t,xd(t),e)})),ed=ll((function(e,t,a,i){al(t,xd(t),e,i)})),td=ll((function(e,t,a,i){al(t,Cd(t),e,i)})),ad=Pl(hs);function id(e,t){var a=xi(e);return null==t?a:cs(a,t)}var sd=vn((function(e,t){e=at(e);var a=-1,i=t.length,s=i>2?t[2]:n;s&&so(t[0],t[1],s)&&(i=1);while(++a<i){var l=t[a],o=xd(l),r=-1,c=o.length;while(++r<c){var u=o[r],d=e[u];(d===n||au(d,rt[u])&&!dt.call(e,u))&&(e[u]=l[u])}}return e})),nd=vn((function(e){return e.push(n,Ol),va(Sd,n,e)}));function ld(e,t){return Ma(e,Rl(t,3),Ts)}function od(e,t){return Ma(e,Rl(t,3),Is)}function rd(e,t){return null==e?e:_s(e,Rl(t,3),xd)}function cd(e,t){return null==e?e:Ns(e,Rl(t,3),xd)}function ud(e,t){return e&&Ts(e,Rl(t,3))}function dd(e,t){return e&&Is(e,Rl(t,3))}function hd(e){return null==e?[]:Os(e,Cd(e))}function md(e){return null==e?[]:Os(e,xd(e))}function pd(e,t,a){var i=null==e?n:Es(e,t);return i===n?a:i}function bd(e,t){return null!=e&&Jl(e,t,Ps)}function fd(e,t){return null!=e&&Jl(e,t,Ys)}var yd=yl((function(e,t,a){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),e[t]=a}),wh(Th)),vd=yl((function(e,t,a){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),dt.call(e,t)?e[t].push(a):e[t]=[a]}),Rl),gd=vn(Vs);function Cd(e){return ru(e)?ts(e):Ks(e)}function xd(e){return ru(e)?ts(e,!0):en(e)}function kd(e,t){var a={};return t=Rl(t,3),Ts(e,(function(e,i,s){ds(a,t(e,i,s),e)})),a}function Dd(e,t){var a={};return t=Rl(t,3),Ts(e,(function(e,i,s){ds(a,i,t(e,i,s))})),a}var wd=ll((function(e,t,a){ln(e,t,a)})),Sd=ll((function(e,t,a,i){ln(e,t,a,i)})),_d=Pl((function(e,t){var a={};if(null==e)return a;var i=!1;t=_a(t,(function(t){return t=Rn(t,e),i||(i=t.length>1),t})),al(e,jl(e),a),i&&(a=ps(a,m|p|b,El));var s=t.length;while(s--)Fn(a,t[s]);return a}));function Nd(e,t){return Id(e,Hc(Rl(t)))}var Td=Pl((function(e,t){return null==e?{}:un(e,t)}));function Id(e,t){if(null==e)return{};var a=_a(jl(e),(function(e){return[e]}));return t=Rl(t),dn(e,a,(function(e,a){return t(e,a[0])}))}function Od(e,t,a){t=Rn(t,e);var i=-1,s=t.length;s||(s=1,e=n);while(++i<s){var l=null==e?n:e[Io(t[i])];l===n&&(i=s,l=a),e=gu(l)?l.call(e):l}return e}function Ed(e,t,a){return null==e?e:xn(e,t,a)}function zd(e,t,a,i){return i="function"==typeof i?i:n,null==e?e:xn(e,t,a,i)}var Fd=Nl(Cd),Md=Nl(xd);function Pd(e,t,a){var i=lu(e),s=i||du(e)||$u(e);if(t=Rl(t,4),null==a){var n=e&&e.constructor;a=s?i?new n:[]:ku(e)&&gu(n)?xi(kt(e)):{}}return(s?Ca:Ts)(e,(function(e,i,s){return t(a,e,i,s)})),a}function Yd(e,t){return null==e||Fn(e,t)}function jd(e,t,a){return null==e?e:Mn(e,t,Vn(a))}function $d(e,t,a,i){return i="function"==typeof i?i:n,null==e?e:Mn(e,t,Vn(a),i)}function Hd(e){return null==e?[]:Ga(e,Cd(e))}function Vd(e){return null==e?[]:Ga(e,xd(e))}function Rd(e,t,a){return a===n&&(a=t,t=n),a!==n&&(a=Gu(a),a=a===a?a:0),t!==n&&(t=Gu(t),t=t===t?t:0),ms(Gu(e),t,a)}function qd(e,t,a){return t=Bu(t),a===n?(a=t,t=0):a=Bu(a),e=Gu(e),js(e,t,a)}function Ud(e,t,a){if(a&&"boolean"!=typeof a&&so(e,t,a)&&(t=a=n),a===n&&("boolean"==typeof t?(a=t,t=n):"boolean"==typeof e&&(a=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Bu(e),t===n?(t=e,e=0):t=Bu(t)),e>t){var i=e;e=t,t=i}if(a||e%1||t%1){var s=Wt();return Rt(e+s*(t-e+aa("1e-"+((s+"").length-1))),t)}return bn(e,t)}var Ad=dl((function(e,t,a){return t=t.toLowerCase(),e+(a?Bd(t):t)}));function Bd(e){return vh(Ju(e).toLowerCase())}function Wd(e){return e=Ju(e),e&&e.replace(Xe,Ka).replace(Ut,"")}function Ld(e,t,a){e=Ju(e),t=En(t);var i=e.length;a=a===n?i:ms(Wu(a),0,i);var s=a;return a-=t.length,a>=0&&e.slice(a,s)==t}function Gd(e){return e=Ju(e),e&&Te.test(e)?e.replace(_e,ei):e}function Zd(e){return e=Ju(e),e&&Ye.test(e)?e.replace(Pe,"\\$&"):e}var Qd=dl((function(e,t,a){return e+(a?"-":"")+t.toLowerCase()})),Jd=dl((function(e,t,a){return e+(a?" ":"")+t.toLowerCase()})),Xd=ul("toLowerCase");function Kd(e,t,a){e=Ju(e),t=Wu(t);var i=t?mi(e):0;if(!t||i>=t)return e;var s=(t-i)/2;return Cl(Mt(s),a)+e+Cl(Ft(s),a)}function eh(e,t,a){e=Ju(e),t=Wu(t);var i=t?mi(e):0;return t&&i<t?e+Cl(t-i,a):e}function th(e,t,a){e=Ju(e),t=Wu(t);var i=t?mi(e):0;return t&&i<t?Cl(t-i,a)+e:e}function ah(e,t,a){return a||null==t?t=0:t&&(t=+t),Bt(Ju(e).replace($e,""),t||0)}function ih(e,t,a){return t=(a?so(e,t,a):t===n)?1:Wu(t),yn(Ju(e),t)}function sh(){var e=arguments,t=Ju(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var nh=dl((function(e,t,a){return e+(a?"_":"")+t.toLowerCase()}));function lh(e,t,a){return a&&"number"!=typeof a&&so(e,t,a)&&(t=a=n),a=a===n?H:a>>>0,a?(e=Ju(e),e&&("string"==typeof t||null!=t&&!Fu(t))&&(t=En(t),!t&&ii(e))?Un(pi(e),0,a):e.split(t,a)):[]}var oh=dl((function(e,t,a){return e+(a?" ":"")+vh(t)}));function rh(e,t,a){return e=Ju(e),a=null==a?0:ms(Wu(a),0,e.length),t=En(t),e.slice(a,a+t.length)==t}function ch(e,t,a){var i=gi.templateSettings;a&&so(e,t,a)&&(t=n),e=Ju(e),t=ed({},t,i,Il);var s,l,o=ed({},t.imports,i.imports,Il),r=Cd(o),c=Ga(o,r),u=0,d=t.interpolate||Ke,h="__p += '",m=it((t.escape||Ke).source+"|"+d.source+"|"+(d===Ee?Be:Ke).source+"|"+(t.evaluate||Ke).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Zt+"]")+"\n";e.replace(m,(function(t,a,i,n,o,r){return i||(i=n),h+=e.slice(u,r).replace(et,ti),a&&(s=!0,h+="' +\n__e("+a+") +\n'"),o&&(l=!0,h+="';\n"+o+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=r+t.length,t})),h+="';\n";var b=t.variable;b||(h="with (obj) {\n"+h+"\n}\n"),h=(l?h.replace(ke,""):h).replace(De,"$1").replace(we,"$1;"),h="function("+(b||"obj")+") {\n"+(b?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var f=Ch((function(){return Ue(r,p+"return "+h).apply(n,c)}));if(f.source=h,yu(f))throw f;return f}function uh(e){return Ju(e).toLowerCase()}function dh(e){return Ju(e).toUpperCase()}function hh(e,t,a){if(e=Ju(e),e&&(a||t===n))return e.replace(je,"");if(!e||!(t=En(t)))return e;var i=pi(e),s=pi(t),l=Qa(i,s),o=Ja(i,s)+1;return Un(i,l,o).join("")}function mh(e,t,a){if(e=Ju(e),e&&(a||t===n))return e.replace(He,"");if(!e||!(t=En(t)))return e;var i=pi(e),s=Ja(i,pi(t))+1;return Un(i,0,s).join("")}function ph(e,t,a){if(e=Ju(e),e&&(a||t===n))return e.replace($e,"");if(!e||!(t=En(t)))return e;var i=pi(e),s=Qa(i,pi(t));return Un(i,s).join("")}function bh(e,t){var a=T,i=I;if(ku(t)){var s="separator"in t?t.separator:s;a="length"in t?Wu(t.length):a,i="omission"in t?En(t.omission):i}e=Ju(e);var l=e.length;if(ii(e)){var o=pi(e);l=o.length}if(a>=l)return e;var r=a-mi(i);if(r<1)return i;var c=o?Un(o,0,r).join(""):e.slice(0,r);if(s===n)return c+i;if(o&&(r+=c.length-r),Fu(s)){if(e.slice(r).search(s)){var u,d=c;s.global||(s=it(s.source,Ju(We.exec(s))+"g")),s.lastIndex=0;while(u=s.exec(d))var h=u.index;c=c.slice(0,h===n?r:h)}}else if(e.indexOf(En(s),r)!=r){var m=c.lastIndexOf(s);m>-1&&(c=c.slice(0,m))}return c+i}function fh(e){return e=Ju(e),e&&Ne.test(e)?e.replace(Se,bi):e}var yh=dl((function(e,t,a){return e+(a?" ":"")+t.toUpperCase()})),vh=ul("toUpperCase");function gh(e,t,a){return e=Ju(e),t=a?n:t,t===n?si(e)?vi(e):Fa(e):e.match(t)||[]}var Ch=vn((function(e,t){try{return va(e,n,t)}catch(a){return yu(a)?a:new s(a)}})),xh=Pl((function(e,t){return Ca(t,(function(t){t=Io(t),ds(e,t,Oc(e[t],e))})),e}));function kh(e){var t=null==e?0:e.length,a=Rl();return e=t?_a(e,(function(e){if("function"!=typeof e[1])throw new nt(c);return[a(e[0]),e[1]]})):[],vn((function(a){var i=-1;while(++i<t){var s=e[i];if(va(s[0],this,a))return va(s[1],this,a)}}))}function Dh(e){return bs(ps(e,m))}function wh(e){return function(){return e}}function Sh(e,t){return null==e||e!==e?t:e}var _h=bl(),Nh=bl(!0);function Th(e){return e}function Ih(e){return Xs("function"==typeof e?e:ps(e,m))}function Oh(e){return sn(ps(e,m))}function Eh(e,t){return nn(e,ps(t,m))}var zh=vn((function(e,t){return function(a){return Vs(a,e,t)}})),Fh=vn((function(e,t){return function(a){return Vs(e,a,t)}}));function Mh(e,t,a){var i=Cd(t),s=Os(t,i);null!=a||ku(t)&&(s.length||!i.length)||(a=t,t=e,e=this,s=Os(t,Cd(t)));var n=!(ku(a)&&"chain"in a)||!!a.chain,l=gu(e);return Ca(s,(function(a){var i=t[a];e[a]=i,l&&(e.prototype[a]=function(){var t=this.__chain__;if(n||t){var a=e(this.__wrapped__),s=a.__actions__=tl(this.__actions__);return s.push({func:i,args:arguments,thisArg:e}),a.__chain__=t,a}return i.apply(e,Na([this.value()],arguments))})})),e}function Ph(){return la._===this&&(la._=ft),this}function Yh(){}function jh(e){return e=Wu(e),vn((function(t){return rn(t,e)}))}var $h=gl(_a),Hh=gl(ka),Vh=gl(Oa);function Rh(e){return no(e)?Va(Io(e)):hn(e)}function qh(e){return function(t){return null==e?n:Es(e,t)}}var Uh=kl(),Ah=kl(!0);function Bh(){return[]}function Wh(){return!1}function Lh(){return{}}function Gh(){return""}function Zh(){return!0}function Qh(e,t){if(e=Wu(e),e<1||e>Y)return[];var a=H,i=Rt(e,H);t=Rl(t),e-=H;var s=Ba(i,t);while(++a<e)t(a);return s}function Jh(e){return lu(e)?_a(e,Io):ju(e)?[e]:tl(To(Ju(e)))}function Xh(e){var t=++ht;return Ju(e)+t}var Kh=vl((function(e,t){return e+t}),0),em=Sl("ceil"),tm=vl((function(e,t){return e/t}),1),am=Sl("floor");function im(e){return e&&e.length?ks(e,Th,Ms):n}function sm(e,t){return e&&e.length?ks(e,Rl(t,2),Ms):n}function nm(e){return Ha(e,Th)}function lm(e,t){return Ha(e,Rl(t,2))}function om(e){return e&&e.length?ks(e,Th,tn):n}function rm(e,t){return e&&e.length?ks(e,Rl(t,2),tn):n}var cm=vl((function(e,t){return e*t}),1),um=Sl("round"),dm=vl((function(e,t){return e-t}),0);function hm(e){return e&&e.length?Aa(e,Th):0}function mm(e,t){return e&&e.length?Aa(e,Rl(t,2)):0}return gi.after=Nc,gi.ary=Tc,gi.assign=Xu,gi.assignIn=Ku,gi.assignInWith=ed,gi.assignWith=td,gi.at=ad,gi.before=Ic,gi.bind=Oc,gi.bindAll=xh,gi.bindKey=Ec,gi.castArray=Qc,gi.chain=Ur,gi.chunk=Fo,gi.compact=Mo,gi.concat=Po,gi.cond=kh,gi.conforms=Dh,gi.constant=wh,gi.countBy=ec,gi.create=id,gi.curry=zc,gi.curryRight=Fc,gi.debounce=Mc,gi.defaults=sd,gi.defaultsDeep=nd,gi.defer=Pc,gi.delay=Yc,gi.difference=Yo,gi.differenceBy=jo,gi.differenceWith=$o,gi.drop=Ho,gi.dropRight=Vo,gi.dropRightWhile=Ro,gi.dropWhile=qo,gi.fill=Uo,gi.filter=ac,gi.flatMap=nc,gi.flatMapDeep=lc,gi.flatMapDepth=oc,gi.flatten=Wo,gi.flattenDeep=Lo,gi.flattenDepth=Go,gi.flip=jc,gi.flow=_h,gi.flowRight=Nh,gi.fromPairs=Zo,gi.functions=hd,gi.functionsIn=md,gi.groupBy=uc,gi.initial=Xo,gi.intersection=Ko,gi.intersectionBy=er,gi.intersectionWith=tr,gi.invert=yd,gi.invertBy=vd,gi.invokeMap=hc,gi.iteratee=Ih,gi.keyBy=mc,gi.keys=Cd,gi.keysIn=xd,gi.map=pc,gi.mapKeys=kd,gi.mapValues=Dd,gi.matches=Oh,gi.matchesProperty=Eh,gi.memoize=$c,gi.merge=wd,gi.mergeWith=Sd,gi.method=zh,gi.methodOf=Fh,gi.mixin=Mh,gi.negate=Hc,gi.nthArg=jh,gi.omit=_d,gi.omitBy=Nd,gi.once=Vc,gi.orderBy=bc,gi.over=$h,gi.overArgs=Rc,gi.overEvery=Hh,gi.overSome=Vh,gi.partial=qc,gi.partialRight=Uc,gi.partition=fc,gi.pick=Td,gi.pickBy=Id,gi.property=Rh,gi.propertyOf=qh,gi.pull=lr,gi.pullAll=or,gi.pullAllBy=rr,gi.pullAllWith=cr,gi.pullAt=ur,gi.range=Uh,gi.rangeRight=Ah,gi.rearg=Ac,gi.reject=gc,gi.remove=dr,gi.rest=Bc,gi.reverse=hr,gi.sampleSize=xc,gi.set=Ed,gi.setWith=zd,gi.shuffle=kc,gi.slice=mr,gi.sortBy=Sc,gi.sortedUniq=Cr,gi.sortedUniqBy=xr,gi.split=lh,gi.spread=Wc,gi.tail=kr,gi.take=Dr,gi.takeRight=wr,gi.takeRightWhile=Sr,gi.takeWhile=_r,gi.tap=Ar,gi.throttle=Lc,gi.thru=Br,gi.toArray=Au,gi.toPairs=Fd,gi.toPairsIn=Md,gi.toPath=Jh,gi.toPlainObject=Zu,gi.transform=Pd,gi.unary=Gc,gi.union=Nr,gi.unionBy=Tr,gi.unionWith=Ir,gi.uniq=Or,gi.uniqBy=Er,gi.uniqWith=zr,gi.unset=Yd,gi.unzip=Fr,gi.unzipWith=Mr,gi.update=jd,gi.updateWith=$d,gi.values=Hd,gi.valuesIn=Vd,gi.without=Pr,gi.words=gh,gi.wrap=Zc,gi.xor=Yr,gi.xorBy=jr,gi.xorWith=$r,gi.zip=Hr,gi.zipObject=Vr,gi.zipObjectDeep=Rr,gi.zipWith=qr,gi.entries=Fd,gi.entriesIn=Md,gi.extend=Ku,gi.extendWith=ed,Mh(gi,gi),gi.add=Kh,gi.attempt=Ch,gi.camelCase=Ad,gi.capitalize=Bd,gi.ceil=em,gi.clamp=Rd,gi.clone=Jc,gi.cloneDeep=Kc,gi.cloneDeepWith=eu,gi.cloneWith=Xc,gi.conformsTo=tu,gi.deburr=Wd,gi.defaultTo=Sh,gi.divide=tm,gi.endsWith=Ld,gi.eq=au,gi.escape=Gd,gi.escapeRegExp=Zd,gi.every=tc,gi.find=ic,gi.findIndex=Ao,gi.findKey=ld,gi.findLast=sc,gi.findLastIndex=Bo,gi.findLastKey=od,gi.floor=am,gi.forEach=rc,gi.forEachRight=cc,gi.forIn=rd,gi.forInRight=cd,gi.forOwn=ud,gi.forOwnRight=dd,gi.get=pd,gi.gt=iu,gi.gte=su,gi.has=bd,gi.hasIn=fd,gi.head=Qo,gi.identity=Th,gi.includes=dc,gi.indexOf=Jo,gi.inRange=qd,gi.invoke=gd,gi.isArguments=nu,gi.isArray=lu,gi.isArrayBuffer=ou,gi.isArrayLike=ru,gi.isArrayLikeObject=cu,gi.isBoolean=uu,gi.isBuffer=du,gi.isDate=hu,gi.isElement=mu,gi.isEmpty=pu,gi.isEqual=bu,gi.isEqualWith=fu,gi.isError=yu,gi.isFinite=vu,gi.isFunction=gu,gi.isInteger=Cu,gi.isLength=xu,gi.isMap=wu,gi.isMatch=Su,gi.isMatchWith=_u,gi.isNaN=Nu,gi.isNative=Tu,gi.isNil=Ou,gi.isNull=Iu,gi.isNumber=Eu,gi.isObject=ku,gi.isObjectLike=Du,gi.isPlainObject=zu,gi.isRegExp=Fu,gi.isSafeInteger=Mu,gi.isSet=Pu,gi.isString=Yu,gi.isSymbol=ju,gi.isTypedArray=$u,gi.isUndefined=Hu,gi.isWeakMap=Vu,gi.isWeakSet=Ru,gi.join=ar,gi.kebabCase=Qd,gi.last=ir,gi.lastIndexOf=sr,gi.lowerCase=Jd,gi.lowerFirst=Xd,gi.lt=qu,gi.lte=Uu,gi.max=im,gi.maxBy=sm,gi.mean=nm,gi.meanBy=lm,gi.min=om,gi.minBy=rm,gi.stubArray=Bh,gi.stubFalse=Wh,gi.stubObject=Lh,gi.stubString=Gh,gi.stubTrue=Zh,gi.multiply=cm,gi.nth=nr,gi.noConflict=Ph,gi.noop=Yh,gi.now=_c,gi.pad=Kd,gi.padEnd=eh,gi.padStart=th,gi.parseInt=ah,gi.random=Ud,gi.reduce=yc,gi.reduceRight=vc,gi.repeat=ih,gi.replace=sh,gi.result=Od,gi.round=um,gi.runInContext=e,gi.sample=Cc,gi.size=Dc,gi.snakeCase=nh,gi.some=wc,gi.sortedIndex=pr,gi.sortedIndexBy=br,gi.sortedIndexOf=fr,gi.sortedLastIndex=yr,gi.sortedLastIndexBy=vr,gi.sortedLastIndexOf=gr,gi.startCase=oh,gi.startsWith=rh,gi.subtract=dm,gi.sum=hm,gi.sumBy=mm,gi.template=ch,gi.times=Qh,gi.toFinite=Bu,gi.toInteger=Wu,gi.toLength=Lu,gi.toLower=uh,gi.toNumber=Gu,gi.toSafeInteger=Qu,gi.toString=Ju,gi.toUpper=dh,gi.trim=hh,gi.trimEnd=mh,gi.trimStart=ph,gi.truncate=bh,gi.unescape=fh,gi.uniqueId=Xh,gi.upperCase=yh,gi.upperFirst=vh,gi.each=rc,gi.eachRight=cc,gi.first=Qo,Mh(gi,function(){var e={};return Ts(gi,(function(t,a){dt.call(gi.prototype,a)||(e[a]=t)})),e}(),{chain:!1}),gi.VERSION=l,Ca(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){gi[e].placeholder=gi})),Ca(["drop","take"],(function(e,t){wi.prototype[e]=function(a){a=a===n?1:Vt(Wu(a),0);var i=this.__filtered__&&!t?new wi(this):this.clone();return i.__filtered__?i.__takeCount__=Rt(a,i.__takeCount__):i.__views__.push({size:Rt(a,H),type:e+(i.__dir__<0?"Right":"")}),i},wi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ca(["filter","map","takeWhile"],(function(e,t){var a=t+1,i=a==z||a==M;wi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Rl(e,3),type:a}),t.__filtered__=t.__filtered__||i,t}})),Ca(["head","last"],(function(e,t){var a="take"+(t?"Right":"");wi.prototype[e]=function(){return this[a](1).value()[0]}})),Ca(["initial","tail"],(function(e,t){var a="drop"+(t?"":"Right");wi.prototype[e]=function(){return this.__filtered__?new wi(this):this[a](1)}})),wi.prototype.compact=function(){return this.filter(Th)},wi.prototype.find=function(e){return this.filter(e).head()},wi.prototype.findLast=function(e){return this.reverse().find(e)},wi.prototype.invokeMap=vn((function(e,t){return"function"==typeof e?new wi(this):this.map((function(a){return Vs(a,e,t)}))})),wi.prototype.reject=function(e){return this.filter(Hc(Rl(e)))},wi.prototype.slice=function(e,t){e=Wu(e);var a=this;return a.__filtered__&&(e>0||t<0)?new wi(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),t!==n&&(t=Wu(t),a=t<0?a.dropRight(-t):a.take(t-e)),a)},wi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},wi.prototype.toArray=function(){return this.take(H)},Ts(wi.prototype,(function(e,t){var a=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=gi[i?"take"+("last"==t?"Right":""):t],l=i||/^find/.test(t);s&&(gi.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,r=t instanceof wi,c=o[0],u=r||lu(t),d=function(e){var t=s.apply(gi,Na([e],o));return i&&h?t[0]:t};u&&a&&"function"==typeof c&&1!=c.length&&(r=u=!1);var h=this.__chain__,m=!!this.__actions__.length,p=l&&!h,b=r&&!m;if(!l&&u){t=b?t:new wi(this);var f=e.apply(t,o);return f.__actions__.push({func:Br,args:[d],thisArg:n}),new Di(f,h)}return p&&b?e.apply(this,o):(f=this.thru(d),p?i?f.value()[0]:f.value():f)})})),Ca(["pop","push","shift","sort","splice","unshift"],(function(e){var t=lt[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);gi.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var s=this.value();return t.apply(lu(s)?s:[],e)}return this[a]((function(a){return t.apply(lu(a)?a:[],e)}))}})),Ts(wi.prototype,(function(e,t){var a=gi[t];if(a){var i=a.name+"",s=ra[i]||(ra[i]=[]);s.push({name:t,func:a})}})),ra[fl(n,g).name]=[{name:"wrapper",func:n}],wi.prototype.clone=Si,wi.prototype.reverse=_i,wi.prototype.value=Ni,gi.prototype.at=Wr,gi.prototype.chain=Lr,gi.prototype.commit=Gr,gi.prototype.next=Zr,gi.prototype.plant=Jr,gi.prototype.reverse=Xr,gi.prototype.toJSON=gi.prototype.valueOf=gi.prototype.value=Kr,gi.prototype.first=gi.prototype.head,Nt&&(gi.prototype[Nt]=Qr),gi},Ci=gi();la._=Ci,s=function(){return Ci}.call(t,a,t,i),s===n||(i.exports=s)}).call(this)}).call(this,a("77e5"),a("7523")(e))},d365:function(e,t,a){},d386:function(e,t,a){"use strict";var i=a("d276"),s=a.n(i);s.a},d485:function(e,t,a){},d5e2:function(e,t,a){"use strict";var i=a("b991"),s=a.n(i);s.a},d61d:function(e,t,a){},d67b:function(e,t,a){"use strict";var i=a("16b6"),s=a.n(i);s.a},d6be:function(e,t,a){"use strict";var i=a("5f8f"),s=a.n(i);s.a},d6ca:function(e,t,a){"use strict";var i=a("d1dc"),s=a.n(i);s.a},d763:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总查询",name:"tab1"}},[a("summaryH",{ref:"summaryH",on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细结算",name:"tab2"}},[a("detailH",{ref:"detailH"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main nextCollectFeesDetail"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left","margin-top":"5px"}},[a("sc-bill-code",{ref:"billcodeRef",nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",[a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("签收时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1,disabled:2===e.signStatus||0===e.signStatus},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("结算状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("费用类型：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.feeType,callback:function(t){e.feeType=t},expression:"feeType"}},e._l(e.feeTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"dh_content"},[a("ul",[a("li",{staticClass:"m-l-20"},[a("label",{staticClass:"w-r-62"},[e._v("派件时间：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue2,callback:function(t){e.dateValue2=t},expression:"dateValue2"}})],1)])]),a("div",{staticClass:"dh_content h-test2",staticStyle:{display:"inline-block",width:"calc(100% - 322px)"}},[a("ul",[a("li",[a("label",{staticClass:"m-l-20"},[e._v("签收状态：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.signStatus,callback:function(t){e.signStatus=t},expression:"signStatus"}},e._l(e.signStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-l-20"},[e._v("是否退件：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.isBack,callback:function(t){e.isBack=t},expression:"isBack"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-l-20"},[e._v("是否问题件：")]),a("el-select",{staticClass:"w-i-85",model:{value:e.isProblem,callback:function(t){e.isProblem=t},expression:"isProblem"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"h-test",staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.isearchExport}},[e._v("导出")])],1)])])]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight-10+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("cell-setting",{ref:"cellSetAction",attrs:{cellObj:e.tableHead.columns,spreadHeadData:e.tableHeadNew.columns,menuName:"nextCollectFeesDetail"},on:{callBack:e.changeCell}})],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("9a33"),a("ed63"),a("8cf2"),a("54d0")),r=(a("f548"),a("ac9f")),c=(a("163d"),a("ac0d")),u=a("391c"),d=a("a3be"),h=a("f37e"),m=a("4055");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={mixins:[c["b"]],data:function(){var e=this;return{isSucessMsg:!0,isJson:!1,limit:16,ishowHeights:0,ishowHeight:0,billCode:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],dateValue2:[],feeType:-2,feeTypeOptions:[{value:-2,label:"全部"},{value:0,label:"代收"},{value:1,label:"到付"}],billsTypeStatus:-2,status:-2,statusOptions:[{value:-2,label:"全部"},{value:0,label:"未结算"},{value:1,label:"已线下收款"},{value:2,label:"已线上扣款"}],signStatus:-1,signStatusOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],isBack:-2,isProblem:-2,queryType:0,cancelSettlement:!1,beSettled:!1,isStatusOptions:[{value:-2,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],source:"",sourceType:[{label:"全部",id:""},{label:"淘宝COD",id:"TB_ONLINE"},{label:"快递管家COD",id:"KDGJ_COD"},{label:"快递管家普通COD",id:"KDGJ_PTCOD"},{label:"网点录单",id:"WDLD"},{label:"掌中通录单",id:"ZZT"},{label:"快递鸟",id:"KDN"},{label:"菜鸟线下",id:"WAY_ BILL_OFFLINE"},{label:"菜鸟",id:"WAY_BILL"},{label:"微信",id:"Wechat"},{label:"shenzhou",id:"shenzhou"}],accountUserId:"",usersId:"",currRow:[],tableData:[],tableHeadNew:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[]},tableHead:{rowStyle:function(e){return 1===Number(e.operateStatus)||2===Number(e.operateStatus)?{foreColor:"green"}:5===Number(e.operateStatus)?{foreColor:"#ff0000"}:void 0},columns:[{displayName:"运单号",name:"billCode",size:150,hlock:!0,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"结算状态",name:"operateStatus",hlock:!0,size:100,value:function(e){return Object(h["w"])(Number(e.operateStatus))}},{displayName:"费用类型",name:"goodsPaymentType",isFrozen:!0,hlock:!0,size:100,value:function(e){return Object(h["o"])(Number(e.goodsPaymentType))}},{displayName:"业务员",name:"userName",size:100,isCode:!0},{displayName:"业务员编号",name:"userCode",size:100,isCode:!0},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:100,isCode:!0},{displayName:"应结算金额",name:"oughtSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"已结算金额",name:"haveSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"代收/到付款",name:"goodsPaymentFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"实收货款",name:"factGoods",size:100,showTotal:!0,formatter:"0.00"},{displayName:"手续费收入",name:"ztPaiFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"寄件网点",name:"sendSiteName",size:100,isCode:!0},{displayName:"派件时间",name:"dispDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收状态",name:"signStatus",size:120,value:function(e){return Object(h["z"])(Number(e.signStatus))}},{displayName:"签收人",name:"signMan",size:100,isCode:!0},{displayName:"签收时间",name:"signDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"扣款人",name:"operateManName",size:100,isCode:!0},{displayName:"扣款时间",name:"operateDate",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"问题件",name:"otherType",value:function(e){return Object(h["s"])(Number(e.otherType))}},{displayName:"退件",name:"returnType",value:function(e){return Object(h["s"])(Number(e.returnType))}},{displayName:"渠道来源",name:"source",size:100,isCode:!0}]},optionsClone:"",exportUrl:d["Mb"],editDialogVisible:!1,batchTitle:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode",size:100}],batchUrl:"",billCodeEdit:"",checkedEdit:!1,transType:"",iShowNZ:!1,feeEdit:0,accountUserIdEditZ:"",accountUserIdEditN:"",accountUserIdEditZN:"",remarkText:"",editTitle:"",settlementType:0,settlementTypeEdit:"",exportObj:{fileName:"收派件代收到付-明细结算"}}},created:function(){var e=this,t={menu:"nextCollectFeesDetail"};Object(d["Pc"])(t).then((function(t){0===t.code?t.data?e.changeCell(JSON.parse(t.data)):(e.tableHeadNew=Object(u["cloneDeep"])(b({},e.tableHead)),e.z_method.refreshSpread()):e.msg(t.message)})).catch((function(t){e.msg(t.message)}))},methods:{detailed:function(e,t){var a=this;this.reset(),"1"===e.hradio?this.dateValue=[this.moment(e.date).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.date).format("YYYY-MM-DD")+" 23:59:59"]:(this.dateValue=[],this.dateValue2=[this.moment(e.date).format("YYYY-MM-DD")+" 00:00:00",this.moment(e.date).format("YYYY-MM-DD")+" 23:59:59"]),this.feeType=e.goodsPaymentType,this.billsTypeStatus=e.dispAccountType,"notSettleVotes"===t&&(this.status=0),"otherVotes"===t&&(this.isProblem=1),setTimeout((function(){e.dispAccountId&&(a.accountUserId=e.dispAccountId),a.onSearch()}),0)},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},reset:function(){this.billCode="",this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],this.dateValue2=[],this.feeType=-2,this.billsTypeStatus=-2,this.status=-2,this.signStatus=-1,this.isBack=-2,this.isProblem=-2,this.accountUserId="",this.usersId="",this.payStatus=-2,this.queryType=0,this.source="",this.cancelSettlement=!1,this.beSettled=!1},changeCell:function(e){var t=Object(u["cloneDeep"])(b({},this.tableHead)),a=Object(o["a"])(e);t=t.columns.filter((function(e){var t=a.map((function(e){return e.displayName}));return t.includes(e.displayName)})),this.tableHeadNew.columns=t,this.z_method.refreshSpread()},onSearch:function(){this.currRow=[];var e="";if(this.billCode){if(!m["billUtils"].regRemark(this.billCode))return void this.msg("单号不能有特殊符号和表情");var t=Object(u["trim"])(this.billCode).split(/[,\r\n]/);if(t.length>1e3)return void this.msg("最多支持1000个运单号查询");e=t.join(",")}else if(3===this.dateValue.length){if(this.dateValue[2]<0)return void this.msg("签收的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue[2])return void this.msg("签收时间最多可查询"+this.limit+"天的数据,请重新选择时间");if(0!=this.dateValue2.length){var a="派件";if(3===this.dateValue2.length){if(this.dateValue2[2]<0)return void this.msg(a+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(a+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else if(2===this.dateValue2.length){if(null!=this.dateValue2[0]||null!=this.dateValue2[1])return void this.msg("请填写完整的"+a+"时间段")}else if(1===this.dateValue2.length&&null!=this.dateValue2[0])return void this.msg("请填写完整的"+a+"时间段")}}else if(2===this.dateValue.length){if(null!=this.dateValue[0]||null!=this.dateValue[1])return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、派件时间不能同时为空");var i="派件";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+i+"时间段"):void this.msg("签收时间、派件时间不能同时为空"):void this.msg("请填写完整的"+i+"时间段");if(this.dateValue2[2]<0)return void this.msg(i+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(i+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}else{if(0!==this.dateValue.length)return void this.msg("请填写完整的签收时间段");if(0==this.dateValue2.length)return void this.msg("签收时间、派件时间不能同时为空");var s="派件";if(3!==this.dateValue2.length)return 2===this.dateValue2.length?null!=this.dateValue2[0]||null!=this.dateValue2[1]?void this.msg("请填写完整的"+s+"时间段"):void this.msg("签收时间、派件时间不能同时为空"):void this.msg("请填写完整的"+s+"时间段");if(this.dateValue2[2]<0)return void this.msg(s+"的开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.dateValue2[2])return void this.msg(s+"时间最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var n={signStartDate:null==this.dateValue[0]?"":this.dateValue[0],signEndDate:null==this.dateValue[1]?"":this.dateValue[1],scanStartDate:null==this.dateValue2[0]?"":this.dateValue2[0],scanEndDate:null==this.dateValue2[1]?"":this.dateValue2[1],payStatus:this.payStatus,dispAccountType:this.billsTypeStatus,settlementId:this.accountUserId,operateStatus:this.status,userId:this.usersId,signStatus:this.signStatus,isProblem:this.isProblem,queryType:this.queryType,cancelSettlement:this.cancelSettlement,beSettled:this.beSettled,isReturn:this.isBack,isError:this.queryType,source:this.source,goodsPaymentType:this.feeType,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.accountUserId&&(n.settlementType=this.settlementType),e&&(n.billCode=e),this.optionsClone=Object(u["cloneDeep"])(n),this.query(n)},query:function(e){var t=this;Object(d["Pb"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCode?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},isearchExport:function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")},handleClose:function(){this.editDialogVisible=!1},proving:function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e},close:function(){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()}},watch:{signStatus:{handler:function(e,t){2!==e&&0!==e||(this.dateValue=[],3!==this.dateValue2.length&&(this.dateValue2=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]))},deep:!0},ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},feeEdit:{handler:function(e,t){if(e){var a=e+"";a.length<=7?(a=a.split("."),a[0].length<=4?this.feeEdit=this.proving(e):this.feeEdit=t):this.feeEdit=t}else this.feeEdit=0}},remarkText:{handler:function(e,t){m["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-190:this.z_param.isNode?this.$store.getters.clientHeight-330:this.$store.getters.clientHeight-260},isdisabledFn:function(){if("编辑备注"==this.batchTitle)return!(this.remarkText.length>0)}}},y=f,v=(a("385f"),a("623f")),g=Object(v["a"])(y,n,l,!1,null,null,null),C=g.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main collectFeeSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 73px)"}},[a("ul",[a("li",[a("el-radio",{attrs:{label:"1"},model:{value:e.radioTime,callback:function(t){e.radioTime=t},expression:"radioTime"}},[e._v("签收时间")]),a("el-radio",{attrs:{label:"2"},model:{value:e.radioTime,callback:function(t){e.radioTime=t},expression:"radioTime"}},[e._v("派件时间")])],1),a("li",[a("label",[e._v("日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("费用类型：")]),a("el-select",{staticClass:"w-i-106",model:{value:e.feeType,callback:function(t){e.feeType=t},expression:"feeType"}},e._l(e.feeTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},k=[],D=(a("cc57"),{mixins:[c["b"]],data:function(){return{isQs:!1,requestUrl:d["Ob"],exportObj:{fileName:"收派件代收到付-汇总"},radioTime:"1",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],feeType:-2,feeTypeOptions:[{value:-2,label:"全部"},{value:0,label:"代收"},{value:1,label:"到付"}],billsTypeStatus:-2,tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"日期",name:"date",size:120,formatter:"yyyy-MM-dd"},{displayName:"结算对象",name:"accountUserName",size:150,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:150,isCode:!0},{displayName:"费用类型",name:"goodsPaymentType",size:100,value:function(e){return Object(h["o"])(Number(e.goodsPaymentType))}},{displayName:"应结算金额",name:"oughtSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"已结算金额",name:"haveSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"未结算金额",name:"notSettlement",size:100,showTotal:!0,formatter:"0.00"},{displayName:"应结算票数",name:"oughtSettleVotes",size:100,showTotal:!0},{displayName:"已结算票数",name:"haveSettleVotes",size:100,showTotal:!0},{displayName:"未结算票数",name:"notSettleVotes",size:100,showTotal:!0},{displayName:"问题件数",name:"otherVotes",size:100,showTotal:!0},{displayName:"退件数",name:"returnVotes",size:100,showTotal:!0}]},limit:16,ishowHeights:0,ishowHeight:0}},methods:{dblclick:function(e,t,a){t.hradio=this.radioTime,this.$emit("goto","tab2",t,this.tableHead.columns[a.col].name)},onSearch:function(){if(this.dateValue[2]<0)this.msg("开始日期不能大于结束日期,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={dateType:this.radioTime,startDate:null==this.dateValue[0]?"":this.dateValue[0],endDate:null==this.dateValue[1]?"":this.dateValue[1],goodsPaymentType:this.feeType,dispAccountType:this.billsTypeStatus,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(u["cloneDeep"])(e),this.query(e)}},query:function(e){var t=this;Object(d["Nb"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-160:this.z_param.isNode?this.$store.getters.clientHeight-260:this.$store.getters.clientHeight-190}}}),w=D,S=(a("ccc6"),Object(v["a"])(w,x,k,!1,null,null,null)),_=S.exports,N={name:"nextCollectFee",components:{summaryH:_,detailH:C},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailH.detailed(t,a)}}},T=N,I=Object(v["a"])(T,i,s,!1,null,"1d418a82",null);t["default"]=I.exports},d7d3:function(e,t,a){"use strict";var i=a("6917"),s=a.n(i);s.a},d7d4:function(e,t,a){},d82b:function(e,t,a){"use strict";var i=a("4568"),s=a.n(i);s.a},d9a9:function(e,t,a){},daea:function(e,t,a){"use strict";var i=a("7875"),s=a.n(i);s.a},dcb2:function(e,t,a){},dd5c:function(e,t,a){},de8a:function(e,t,a){(function(e,t){(function(e,a){"use strict";if(!e.setImmediate){var i,s=1,n={},l=!1,o=e.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(e);r=r&&r.setTimeout?r:e,"[object process]"==={}.toString.call(e.process)?m():p()?b():e.MessageChannel?f():o&&"onreadystatechange"in o.createElement("script")?y():v(),r.setImmediate=c,r.clearImmediate=u}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var l={callback:e,args:t};return n[s]=l,i(s),s++}function u(e){delete n[e]}function d(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(a,i);break}}function h(e){if(l)setTimeout(h,0,e);else{var t=n[e];if(t){l=!0;try{d(t)}finally{u(e),l=!1}}}}function m(){i=function(e){t.nextTick((function(){h(e)}))}}function p(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}function b(){var t="setImmediate$"+Math.random()+"$",a=function(a){a.source===e&&"string"===typeof a.data&&0===a.data.indexOf(t)&&h(+a.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(a){e.postMessage(t+a,"*")}}function f(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;h(t)},i=function(t){e.port2.postMessage(t)}}function y(){var e=o.documentElement;i=function(t){var a=o.createElement("script");a.onreadystatechange=function(){h(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a)}}function v(){i=function(e){setTimeout(h,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,a("77e5"),a("4c39"))},dee1:function(e,t,a){"use strict";var i=a("ccb1"),s=a.n(i);s.a},dffb:function(e,t,a){},e209:function(e,t,a){},e3bf:function(e,t,a){"use strict";var i=a("a0ad"),s=a.n(i);s.a},e5b6:function(e,t,a){"use strict";var i=a("2d1f"),s=a.n(i);s.a},e688:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"周期汇总",name:"tab1",lazy:""}},[a("circleBill",{attrs:{params:e.detailHeadData,lazy:""},on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"日汇总",name:"tab2",lazy:""}},[a("day-bill",{ref:"refDayBill",attrs:{params:e.detailHeadData,lazy:""}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("ul",{staticClass:"clear-both sz-search-box"},[a("li",[a("label",[e._v("结款日：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("结算客户：")]),a("sc-users",{ref:"refSettlement",attrs:{type:"3",remote:!0,param:{types:"4"},"popper-class":"max-index"},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",[e._v("应收金额：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.totalFee,callback:function(t){e.totalFee=t},expression:"totalFee"}},e._l(e.totalFeeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",[e._v("收款状态：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.hexiaoStatus,callback:function(t){e.hexiaoStatus=t},expression:"hexiaoStatus"}},e._l(e.hexiaoStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n            ")]),a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出")])],1)]),a("p",{staticClass:"notice"},[e._v("\n          温馨提示：客户周期账单只统计客户费用已审核的数据\n        ")])])])],1),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"innerTipsWrap"},[a("el-button",{attrs:{type:"danger",disabled:e.payDisabled},on:{click:e.collectionStatus}},[e._v("收款")]),a("p",{staticClass:"innerTips",on:{click:function(t){e.opDialog=!0}}},[e._v(" 如何设置结款日?")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("receipt-dialog",{ref:"refReceiptDialog",attrs:{currRow:e.currRow}}),a("tips-dialog",{ref:"tipsDialog",attrs:{dialog:e.opDialog},on:{dealDialog:function(t){e.opDialog=!e.opDialog}}})],1)},l=[],o=a("ac0d"),r=a("391c"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:e.isMulti?"批量收款":"收款",visible:e.show,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{open:e.openAreaDialog,"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"receipt-box"},[a("ul",[e.isMulti?e._e():[a("li",[a("span",[e._v("结款日：")]),a("el-date-picker",{attrs:{type:"date",disabled:""},model:{value:e.payObject.borrowingDate,callback:function(t){e.$set(e.payObject,"borrowingDate",t)},expression:"payObject.borrowingDate"}})],1),a("li",[a("span",[e._v("客户名称：")]),a("el-input",{attrs:{disabled:""},model:{value:e.payObject.customerName,callback:function(t){e.$set(e.payObject,"customerName",t)},expression:"payObject.customerName"}})],1),a("li",[a("span",[e._v("已收金额：")]),a("el-input",{attrs:{disabled:""},model:{value:e.payObject.hexiaoFeeYing,callback:function(t){e.$set(e.payObject,"hexiaoFeeYing",t)},expression:"payObject.hexiaoFeeYing"}})],1),a("li",[a("span",[e._v("剩余金额：")]),a("el-input",{attrs:{disabled:""},model:{value:e.payObject.expensesFee,callback:function(t){e.$set(e.payObject,"expensesFee",t)},expression:"payObject.expensesFee"}})],1)],a("li",[a("span",[e._v("收款户头：")]),a("sc-account",{attrs:{popperClass:"pop-z-index"},model:{value:e.payObject.paymentAccount,callback:function(t){e.$set(e.payObject,"paymentAccount",t)},expression:"payObject.paymentAccount"}})],1),a("li",[a("span",[e._v("收款金额：")]),e.isMulti?[a("el-input",{attrs:{placeholder:"按应收金额收取",disabled:""}})]:e._e(),e.isMulti?e._e():[a("el-input",{attrs:{maxlength:20},on:{input:function(t){return e.payObject.hexiaoFee=e.proving(t)}},model:{value:e.payObject.hexiaoFee,callback:function(t){e.$set(e.payObject,"hexiaoFee",t)},expression:"payObject.hexiaoFee"}})]],2)],2)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)]),a("sz-batch-process",{ref:"batchProcess",attrs:{title:"批量收款",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,"data-validate":e.dataValidate,columns:e.columns},on:{model:e.close}})],1)},u=[],d=(a("5ab2"),a("6d57"),a("e10e"),a("f548"),a("163d"),a("5431"),a("ac9f")),h=a("a3be");function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(d["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"receiptDialog",props:{currRow:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,payObject:{borrowingDate:"",customerName:"",hexiaoFeeYing:"",expensesFee:"",paymentAccount:"",hexiaoFee:""},isMulti:!1,columns:[],batchUrl:"",batchData:[],dialogVisible:!1}},mounted:function(){},methods:{openAreaDialog:function(){var e=this.currRow[0],t=e.customerName,a=e.borrowingDate,i=e.hexiaoFee,s=e.expensesFee,n=e.id;a=this.moment(a).format("YYYY-MM-DD"),this.payObject=p({},this.payObject,{id:n,customerName:t,borrowingDate:a,hexiaoFeeYing:i,expensesFee:s,paymentAccount:"",hexiaoFee:""}),this.isMulti=this.currRow.length>1},onSubmit:function(){var e=this;if(this.payObject.paymentAccount)if(this.isMulti)this.showBatchProcess();else if(""!==this.payObject.hexiaoFee)if("0"!=this.payObject.hexiaoFee){var t=Number.parseFloat(this.payObject.hexiaoFee);if(Math.abs(t)>Math.abs(Number.parseFloat(this.payObject.expensesFee)))this.msg("收款金额不能超出剩余未结金额");else{console.log(this.payObject);var a=this.payObject,i=a.id,s=a.paymentAccount,n=a.hexiaoFee,l={type:0,id:i,paymentAccount:s,hexiaoFee:Number.parseFloat(n)};Object(h["bc"])(l).then((function(t){0===t.code?(e.msg("收款成功","success"),e.$parent.onSearch(),e.show=!1):e.msg(t.message)}))}}else this.msg("收款金额不能为0");else this.msg("收款金额必填!");else this.msg("必须选择户头!")},msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:1e3})},dataValidate:function(e){var t=this;return new Promise((function(a,i){a({type:1,id:e.id,paymentAccount:t.payObject.paymentAccount})}))},showBatchProcess:function(){var e=this;this.batchData=this.currRow.map((function(t,a){return t.borrowingDate=e.moment(t.borrowingDate).format("YYYY-MM-DD"),t})),this.columns=[{displayName:"结款日",name:"borrowingDate"},{displayName:"结算客户",name:"customerName"}],this.batchUrl="/avg/customercyclesum/hexiao",this.show=!1,this.dialogVisible=!0,this.$nextTick((function(){e.$refs.batchProcess.startNew()}))},close:function(){this.$parent.onSearch(),this.dialogVisible=!1},proving:function(e){e+="";var t=!1;return 0==e.indexOf("-")&&(t=!0),e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),t&&(e="-"+e),e}}},f=b,y=(a("6051"),a("3807"),a("623f")),v=Object(y["a"])(f,c,u,!1,null,"24be6a67",null),g=v.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"tipsDialog"},[a("el-dialog",{attrs:{title:"结款日设置流程",visible:e.dialog,width:"400px",center:"","close-on-click-modal":!1,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialog=t}}},[a("div",{staticClass:"setBody"},[e._v("\n          • 设置流程：打开“结算对象配置-客户配置”——选择需要设置结款日的客户——点击编辑——选择结款周期——完成；"),a("br"),e._v(" • 说明：历史数据可在周期账单日汇总中手动重新获取结款日。\n      ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeHandle}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.goSetPage}},[e._v(" 立即前往 ")])],1)])],1)},x=[],k={name:"tipsDialog",props:{dialog:{type:Boolean,default:!1}},data:function(){return{show:!1}},mounted:function(){},methods:{goSetPage:function(){this.$router.push({path:"/objConfig"}),this.closeHandle()},closeHandle:function(){this.$emit("dealDialog")}}},D=k,w=(a("d11c"),Object(y["a"])(D,C,x,!1,null,"a401dd86",null)),S=w.exports,_=a("4055"),N={mixins:[o["b"],o["a"]],components:{receiptDialog:g,tipsDialog:S},props:{params:{type:Object,default:function(){}}},data:function(){var e=this;return{collapseHeight:0,exportTableHead:this.params,opDialog:!1,dateValue:[this.moment(new Date).subtract(15,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(0,"days").format("YYYY-MM-DD")],hexiaoStatus:-2,hexiaoStatusOptions:[{value:-2,label:"全部"},{value:2,label:"全额收款"},{value:1,label:"部分收款"},{value:0,label:"未收款"},{value:3,label:"超额收款"}],totalFee:-2,totalFeeOptions:[{value:-2,label:"全部"},{value:1,label:"大于0"},{value:0,label:"等于0"},{value:-1,label:"小于0"}],requestUrl:h["eb"],limit:31,exportObj:{fileName:"周期汇总"},settlementId:"",tableData:[],loading:"",currRow:[],tableHead:{dblclick:this.dbclick,columns:[{displayName:"选择",name:"check",allCheck:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,size:50,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"结款日",name:"borrowingDate",formatter:"yyyy-MM-dd"},{displayName:"收款状态",name:"hexiaoStatusShow"},{displayName:"结算客户",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"发件票数",name:"billCount",showTotal:!0},{displayName:"运费合计",name:"tranFee",showTotal:!0},{displayName:"理赔合计",name:"claimsFee",showTotal:!0},{displayName:"加收合计",name:"claimsAddFee",showTotal:!0},{displayName:"应收金额",name:"totalFee",showTotal:!0},{displayName:"已收金额",name:"hexiaoFee",showTotal:!0},{displayName:"费用差额",name:"expensesFee",showTotal:!0},{displayName:"收款人",name:"hexiaoMan"},{displayName:"收款时间",name:"hexiaoTime",formatter:"yyyy-MM-dd"},{displayName:"结款周期",name:"accountCycleShow"}]}}},mounted:function(){},methods:{onSearch:function(){this.clear();var e=_["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],this.limit,"结款日","days");if(e){var t=this.moment(this.dateValue[1]).diff(this.moment(this.dateValue[0]),"days");if(t>15&&(""==this.settlementId||null==this.settlementId))this.msg("必须选择一个客户");else{this.pagination.currentPage=1;var a={beginBorrowingDate:this.dateValue[0]+" 00:00:00",endBorrowingDate:this.dateValue[1]+" 23:59:59",hexiaoStatus:this.hexiaoStatus,totalFee:this.totalFee,pageSize:this.pagination.pageSize,currentPage:1};""!=this.settlementId&&null!=this.settlementId&&(a.customerId=this.settlementId),this.optionsClone=Object(r["cloneDeep"])(a),this.query(a)}}},query:function(e){var t=this;Object(h["bb"])(e).then((function(e){return console.log(e.code),0===e.code&&e.data&&e.data.list&&0==e.data.list.length?(t.msg("查询结果为空"),t.tableData=[],void(t.pagination.total=0)):0!==e.code&&e.message?(t.msg(e.message),t.tableData=[],void(t.pagination.total=0)):(t.tableData=e.data.list,void(t.pagination.total=e.data.totalRow))})).catch((function(e){t.tableData=[],t.pagination={currentPage:1,total:0,pageSize:100},e.message?t.msg(e.message):t.msg("服务器异常，请联系管理员")}))},checkboxAllClick:function(e){this.filterCurrRow([],e)},filterCurrRow:function(e,t){this.currRow=Object(r["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},collectionStatus:function(){Object(r["isEmpty"])(this.currRow)?this.msg("必须选择下面的一个客户！"):this.$refs.refReceiptDialog.show=!0},searchExport:function(){if(0!==this.tableData.length){var e={totalRow:this.pagination.total,checklistData:this.tableData,fileName:"周期汇总",url:h["eb"],paramIn:this.optionsClone,type:"page",methodType:"post"};this.exportBasicUtils(e)}else this.msg("请先查询有数据的")},clear:function(){this.currRow=[]},dbclick:function(e,t){this.$emit("goto","day",t)}},computed:{payDisabled:function(){return!(this.currRow.length>0)},contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-160+this.collapseHeight:this.z_param.isNode?this.$store.getters.clientHeight-250+this.collapseHeight:this.$store.getters.clientHeight-190+this.collapseHeight}}},T=N,I=(a("29ac"),Object(y["a"])(T,n,l,!1,null,"78381dc8",null)),O=I.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main"},[a("div",{staticClass:"sz-search"},[a("sc-expand-collapse",{model:{value:e.collapseHeight,callback:function(t){e.collapseHeight=t},expression:"collapseHeight"}},[a("div",{attrs:{slot:"collapse"},slot:"collapse"},[a("ul",{staticClass:"clear-both sz-search-box"},[a("li",[a("label",[e._v("结算日期：")]),a("sc-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",[e._v("结算客户：")]),a("sc-users",{ref:"refSettlement",attrs:{type:"3",remote:!0,param:{types:"4"},"popper-class":"max-index"},model:{value:e.settlementId,callback:function(t){e.settlementId=t},expression:"settlementId"}})],1),a("li",[a("label",[e._v("应收金额：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.totalComZero,callback:function(t){e.totalComZero=t},expression:"totalComZero"}},e._l(e.totalComZeroOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSearch(!1)}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询\n            ")])],1)]),a("p",{staticClass:"notice"},[e._v("\n          温馨提示：客户周期账单只统计客户费用已审核的数据\n        ")])])])],1),a("div",{staticClass:"sz-search-btn"},[a("div",{staticClass:"innerTipsWrap"},[a("el-button",{attrs:{type:"danger",disabled:e.payDisabled},on:{click:function(t){e.codeDialogVisible=!0}}},[e._v("删除")]),a("el-button",{attrs:{type:"primary",disabled:e.payDisabled},on:{click:function(t){return e.showBatchProcess("update")}}},[e._v("更新结款日")]),a("p",{staticClass:"innerTips",on:{click:function(t){e.opDialog=!0}}},[e._v(" 如何设置结款日?")])],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchExport}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sc-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("verification",{attrs:{titles:"是否确认删除？",titleCon:"删除后将无法恢复",dialogVisibles:e.codeDialogVisible},on:{callBack:e.callBack}}),a("tips-dialog",{ref:"tipsDialog",attrs:{dialog:e.opDialog},on:{dealDialog:function(t){e.opDialog=!e.opDialog}}}),a("sz-batch-process",{ref:"batchProcess",attrs:{title:"批量收款",dialogVisible:e.dialogVisible,tableData:e.batchData,batchUrl:e.batchUrl,"data-validate":e.dataValidate,columns:e.columns},on:{model:e.close}})],1)},z=[],F=(a("9a33"),{mixins:[o["b"],o["a"]],components:{receiptDialog:g,tipsDialog:S},props:{params:{type:Object,default:function(){}}},data:function(){var e=this;return{collapseHeight:0,opDialog:!1,codeDialogVisible:!1,requestUrl:h["db"],limit:31,exportObj:{fileName:"日汇总-"},settlementId:"",tableData:[],currRow:[],loading:"",dateValue:[this.moment(new Date).subtract(15,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(0,"days").format("YYYY-MM-DD")],borrowingDate:"",accountCycle:"",totalComZero:-2,totalComZeroOptions:[{value:-2,label:"全部"},{value:1,label:"大于0"},{value:0,label:"等于0"},{value:-1,label:"小于0"}],tableHead:{dblclick:this.dbclick,columns:[{displayName:"选择",name:"check",allCheck:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,size:50,isEdit:!0,isCheckBox:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"结算日期",name:"billDate",formatter:"yyyy-MM-dd"},{displayName:"结算客户",name:"customerName"},{displayName:"客户编码",name:"customerCode",isCode:!0},{displayName:"结款日",name:"borrowingDate",formatter:"yyyy-MM-dd"},{displayName:"发件票数",name:"billCount",showTotal:!0},{displayName:"运费合计",name:"tranFee",showTotal:!0},{displayName:"理赔合计",name:"claimsFee",showTotal:!0},{displayName:"加收合计",name:"claimsAddFee",showTotal:!0},{displayName:"应收金额",name:"totalFee",showTotal:!0},{displayName:"结款周期",name:"accountCycleName"}]},exportTableHead:this.tableData,tableHeadDetail:this.params,columns:[],batchUrl:"",batchData:[],dialogVisible:!1}},mounted:function(){},methods:{onSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.clear();var t=_["billUtils"].timeVerification(this.dateValue[0],this.dateValue[1],this.limit,"结算日期","days");if(t){var a=this.moment(this.dateValue[1]).diff(this.moment(this.dateValue[0]),"days");if(a>15&&(""==this.settlementId||null==this.settlementId))this.msg("必须选择一个客户");else{this.pagination.currentPage=1;var i={billStartDate:this.dateValue[0]+" 00:00:00",billEndtDate:this.dateValue[1]+" 23:59:59",totalComZero:this.totalComZero,pageSize:this.pagination.pageSize,currentPage:1};e?(i.borrowingDate=this.borrowingDate+" 00:00:00",i.accountCycle=this.accountCycle):(delete i.borrowingDate,delete i.accountCycle),""!=this.settlementId&&null!=this.settlementId&&(i.customerId=this.settlementId),this.optionsClone=Object(r["cloneDeep"])(i),this.query(i)}}},query:function(e){var t=this;Object(h["cb"])(e).then((function(e){return console.log(e.code),0===e.code&&e.data&&e.data.list&&0==e.data.list.length?(t.msg("查询结果为空"),t.tableData=[],void(t.pagination.total=0)):0!==e.code&&e.message?(t.msg(e.message),t.tableData=[],void(t.pagination.total=0)):(t.tableData=e.data.list,void(t.pagination.total=e.data.totalRow))})).catch((function(e){t.tableData=[],t.pagination={currentPage:1,total:0,pageSize:100},e.message?t.msg(e.message):t.msg("服务器异常，请联系管理员")}))},checkboxAllClick:function(e){this.filterCurrRow([],e)},filterCurrRow:function(e,t){this.currRow=Object(r["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},searchExport:function(){if(0!==this.tableData.length){var e={totalRow:this.pagination.total,checklistData:this.tableData,fileName:"日汇总",url:h["db"],paramIn:this.optionsClone,type:"page",methodType:"post"};this.exportBasicUtils(e)}else this.msg("请先查询有数据的")},getDayOfMonth:function(e,t){if("first"===t)return e+"-01";if("last"===t){var a=e.split("-");return e+"-"+this.getLastDay(a[0],a[1])}},getLastDay:function(e,t){var a=e,i=t++;t>12&&(i-=12,a++);var s=new Date(a,i,1);return new Date(s.getTime()-864e5).getDate()},clear:function(){this.currRow=[]},dbclick:function(e,t){this.$emit("goto","detail",t)},prvGoMonth:function(e){this.totalComZero=-2,this.settlementId=e.customerId,this.dateValue=[this.moment(e.billStartDate).format("YYYY-MM-DD"),this.moment(e.billEndtDate).format("YYYY-MM-DD")],this.borrowingDate=this.moment(e.borrowingDate).format("YYYY-MM-DD"),this.accountCycle=e.accountCycle,this.onSearch(!0)},callBack:function(e){this.codeDialogVisible=!1,e&&this.showBatchProcess("delete")},showBatchProcess:function(e){var t=this;this.batchData=this.currRow.map((function(e,a){return e.billDate=t.moment(e.billDate).format("YYYY-MM-DD"),e})),this.columns=[{displayName:"结算日期",name:"billDate"},{displayName:"结算客户",name:"customerName"}],"delete"==e?this.batchUrl="/avg/customercycleday/delete":"update"==e&&(this.batchUrl="/avg/customercycleday/updateBrroDate"),this.dialogVisible=!0,this.$nextTick((function(){t.$refs.batchProcess.startNew()}))},close:function(){this.onSearch(!1),this.dialogVisible=!1},dataValidate:function(e){return new Promise((function(t,a){t({customerCycleDayId:e.id})}))}},computed:{payDisabled:function(){return!this.currRow.length},contentHeight:function(){var e=this;setTimeout((function(){e.z_method.refreshSpread()}),0);var t=this.collapseHeight?30:0;return this.z_param.isActiveH?this.$store.getters.clientHeight-160+this.collapseHeight-t:this.z_param.isNode?this.$store.getters.clientHeight-230+this.collapseHeight-t:this.$store.getters.clientHeight-190+this.collapseHeight-t}}}),M=F,P=(a("b02a"),Object(y["a"])(M,E,z,!1,null,"c2c9ecae",null)),Y=P.exports,j=(a("96c8"),{name:"customerCircleBills",components:{circleBill:O,dayBill:Y},data:function(){return{activeName:"tab1",detailHeadData:{columns:[{displayName:"单号",name:"billCode",isCode:!0,dblclick:function(e){e&&_["billUtils"].openBills(e)}},{displayName:"订单编号",name:"orderCode",isCode:!0},{displayName:"交易号",name:"partnerTradeId",isCode:!0},{displayName:"账单日期",name:"billTime",formatter:"yyyy-MM-dd"},{displayName:"收件扫描时间",name:"scanTime",formatter:"yyyy-MM-dd hh:mm:ss",size:140},{displayName:"揽件业务员",name:"scanUserName"},{displayName:"工号",name:"scanUserCode",isCode:!0},{displayName:"客户名称",name:"accountUserName"},{displayName:"班次类型",name:"classType",value:function(e){return 1==e["classType"]?"汽运":2==e["classType"]?"航空":3==e["classType"]?"早航班":4==e["classType"]?"晚航班":5==e["classType"]?"5铁运":void 0}},{displayName:"目的省",name:"dispProvName"},{displayName:"目的城市",name:"dispCityName"},{displayName:"结款周期",name:"accountCycle"},{displayName:"结算重量",name:"accountWeight",showTotal:!0},{displayName:"签收网点",name:"signSiteName"},{displayName:"签收时间",name:"signTime",size:140,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"面单费",name:"szBillFee",formatter:"0.00",value:function(e){return e["szBillFee"]?e.szBillFee:0},showTotal:!0},{displayName:"增值加收费",name:"valueAddedFee",showTotal:!0},{displayName:"运费/通票费",name:"avgWeightFee",showTotal:!0,formatter:"0.00",value:function(e){return e["avgWeightFee"]?e.avgWeightFee:0}},{displayName:"附加费/加收费",name:"operAddFee",formatter:"0.00",value:function(e){return e["operAddFee"]?e.operAddFee:0},showTotal:!0},{displayName:"应收费用",name:"toAccountFee",showTotal:!0},{displayName:"代收款",name:"codGoodsFee",showTotal:!0},{displayName:"代收款手续费",name:"codFee",showTotal:!0},{displayName:"到付款",name:"difGoodsFee",showTotal:!0},{displayName:"到付款手续费",name:"diFee",showTotal:!0},{displayName:"退件标识",name:"returnStatus",value:function(e){return e.returnStatus?"是":"否"}},{displayName:"运单发放客户",name:"billProvideManName"}]}}},mounted:function(){},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){var a=this;this.z_method.refreshSpread(),"day"==e&&(this.activeName="tab2",this.$nextTick((function(){a.$refs.refDayBill.prvGoMonth(t)})))}}}),$=j,H=Object(y["a"])($,i,s,!1,null,"f8e5ee32",null);t["default"]=H.exports},e71d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"汇总",name:"tab1"}},[a("summaryT",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"明细",name:"tab2"}},[a("detailT",{ref:"detailed"})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main transFeeShareD"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"bill-code"},[a("sc-bill-code",{ref:"billcodeRef",attrs:{singleText:"包号"},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticClass:"dh_content"}),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.isearchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight-4+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHead.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}})],1)},l=[],o=(a("9a33"),a("f548"),a("ac0d")),r=a("391c"),c=a("a3be"),u=a("4055"),d={name:"transFeeShareD",mixins:[o["b"]],data:function(){var e=this;return{billCode:"",ishowHeights:0,ishowHeight:0,tableHead:{columns:[{displayName:"运单号",name:"billCode",size:150,isCode:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"扫描时间",name:"scanTime",size:200,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"账单日期",name:"billTime",size:200,formatter:"yyyy-MM-dd"},{displayName:"所属包号",name:"bagCode",size:150,isCode:!0},{displayName:"结算对象",name:"accountUserName",size:150,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:150,isCode:!0},{displayName:"结算重量",name:"accountWeight",showTotal:!0,isCode:!0,size:150},{displayName:"分摊成本",name:"centerRecFee",showTotal:!0,isCode:!0,size:150}]},tableData:[],optionsClone:"",requestUrl:c["Rc"],exportObj:{fileName:"包中转费分摊-明细"},exportUrl:"/bills/bagTransit/export"}},methods:{detailed:function(e){this.billCode=e.billCode,this.onSearch()},isearchExport:function(){0!==this.tableData.length?this.pagination.total>this.pagination.pageSize&&this.pagination.total>5e3?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.searchExport()):this.msg("没有数据无法导出")},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},onSearch:function(){var e="";if(0!==this.billCode.replace(/\s+/g,"").length)if(u["billUtils"].regRemark(this.billCode)){var t=Object(r["trim"])(this.billCode).split(/[,\r\n]/);if(t.length>400)this.msg("最多支持400个包号查询");else{e=t.join(","),this.pagination.currentPage=1;var a={codes:e,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(r["cloneDeep"])(a),this.query(a)}}else this.msg("包号不能有特殊符号和表情");else this.msg("包号不能为空")},query:function(e){var t=this;Object(c["Qc"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-240:this.$store.getters.clientHeight-330}}},h=d,m=(a("d5e2"),a("623f")),p=Object(m["a"])(h,n,l,!1,null,null,null),b=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main transFeeShareS"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"bill-code"},[a("sc-bill-code",{ref:"billcodeRef",attrs:{singleText:"包号"},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticClass:"dh_content"},[a("ul",[a("li",[a("label",[e._v("扫描时间：")]),a("sc-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1)])]),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport1}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight-4+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},y=[],v={name:"transFeeShareS",mixins:[o["b"]],data:function(){return{billCode:"",ishowHeights:0,ishowHeight:0,dateValue:[this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment(new Date).format("YYYY-MM-DD")+" 23:59:59"],limit:31,tableHead:{dblclick:this.dblclick,columns:[{displayName:"包号",name:"billCode",size:150,isCode:!0},{displayName:"扫描时间",name:"scanTime",size:200,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"结算重量",name:"weight",showTotal:!0,isCode:!0,size:150},{displayName:"中转费成本",name:"transitFee",showTotal:!0,isCode:!0,size:150}]},tableData:[],optionsClone:"",requestUrl:c["Tc"],exportObj:{fileName:"包中转费分摊-汇总"}}},methods:{dblclick:function(e,t,a){this.$emit("goto","tab2",t)},searchExport1:function(){this.optionsClone.codes?this.checklistExport():this.searchExport()},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},onSearch:function(){var e="";if(0===this.billCode.replace(/\s+/g,"").length){if(this.dateValue[2]<0)return void this.msg("开始时间不能大于结束时间,请重新选择扫描时间");if(this.limit<=this.dateValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择扫描时间")}else{if(!u["billUtils"].regRemark(this.billCode))return void this.msg("包号不能有特殊符号和表情");var t=Object(r["trim"])(this.billCode).split(/[,\r\n]/);if(t.length>1e3)return void this.msg("最多支持1000个包号查询");e=t.join(",")}this.pagination.currentPage=1;var a={startTime:this.dateValue[0],endTime:this.dateValue[1],pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};e&&(a.codes=e),this.optionsClone=Object(r["cloneDeep"])(a),this.query(a)},query:function(e){var t=this;Object(c["Sc"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.codes?(t.pagination.total=0,t.checklistData=Object(r["cloneDeep"])(t.tableData)):t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.checklistData=Object(r["cloneDeep"])(t.tableData),t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.checklistData=Object(r["cloneDeep"])(t.tableData),t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-240:this.$store.getters.clientHeight-330}}},g=v,C=(a("86ee"),Object(m["a"])(g,f,y,!1,null,null,null)),x=C.exports,k={name:"transferFeeShare",components:{detailT:b,summaryT:x},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t)}}},D=k,w=Object(m["a"])(D,i,s,!1,null,null,null);t["default"]=w.exports},e780:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"发件费用明细",name:"tab1"}},[a("detailH",{ref:"detailed"})],1),a("el-tab-pane",{attrs:{label:"收下级网点中转费",name:"tab2"}},[a("summaryH",{on:{goto:e.goto}})],1),a("el-tab-pane",{attrs:{label:"中转费汇总",name:"tab3"}},[a("interchange-fee",{on:{goto:e.interGoto}})],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendReceiveFeeDetail"},[a("show-more",{attrs:{msg:"提示:下级网点账单在本页面编辑，扣款在收下级网点中转费页面;"},model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticStyle:{float:"left","margin-top":"5px"}},[a("sc-bill-code",{ref:"billcodeRef",attrs:{twoText:e.nameArr,onlyBill:!1},on:{typeChange:e.getType},nativeOn:{keyup:function(t){return e.keyup(t)}},model:{value:e.billCode,callback:function(t){e.billCode=t},expression:"billCode"}})],1),a("div",{staticStyle:{display:"inline-block"}},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("el-select",{staticClass:"input-80",on:{change:e.changeType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{key:1,attrs:{label:"账单日期",value:1}}),a("el-option",{key:2,attrs:{label:"扫描时间",value:2}}),a("el-option",{key:4,attrs:{label:"首重时间",value:4}})],1),1==e.type?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):e._e(),1!=e.type?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}):e._e()],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("账单类型：")]),a("el-select",{staticClass:"input-h-85 duxun",attrs:{multiple:""},on:{change:e.changnub},model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("结算对象：")]),a("sc-users",{staticClass:"input-h-85",attrs:{type:"7",param:e.settleParam,optionAdd:e.optionAdd},on:{change:e.settlementChange},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("扣款状态：")]),a("el-select",{staticClass:"input-h-85 duxun",attrs:{multiple:""},on:{change:e.changnub2},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-85"},[e._v("签收日期：")]),a("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!0,editable:!1,isCheckMsg:!1},model:{value:e.signdate,callback:function(t){e.signdate=t},expression:"signdate"}})],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("客户：")]),a("sc-users",{staticClass:"input-h-85",attrs:{type:"3",optionAdd:e.optionAdd},model:{value:e.customerId,callback:function(t){e.customerId=t},expression:"customerId"}})],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("业务员：")]),a("sc-users",{staticClass:"input-h-85",attrs:{type:"2",optionAdd:e.optionAdd},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}})],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("运单发放：")]),a("sc-users",{staticClass:"input-h-85",attrs:{type:"8",optionAdd:e.optionAdd},on:{change:e.userProvCustomerChange},model:{value:e.userProvCustomerId,callback:function(t){e.userProvCustomerId=t},expression:"userProvCustomerId"}})],1)])]),a("div",{staticClass:"dh_content row3"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-85"},[e._v("应收费用：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.feeType,callback:function(t){e.feeType=t},expression:"feeType"}},e._l(e.votesIsZeroOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-68"},[e._v("产品类型：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.productType,callback:function(t){e.productType=t},expression:"productType"}},e._l(e.productOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("面单类型：")]),a("el-select",{staticClass:"inputh-85 duxun",model:{value:e.billTypes,callback:function(t){e.billTypes=t},expression:"billTypes"}},e._l(e.billsTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("增值类型：")]),a("sc-select-multiple",{ref:"topSearchValueAdded",attrs:{params:{dictionaryType:"valueAddedType"}},model:{value:e.valueAddedType,callback:function(t){e.valueAddedType=t},expression:"valueAddedType"}})],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("目的地省：")]),a("sc-province",{staticClass:"inputh-85",model:{value:e.provinceId,callback:function(t){e.provinceId=t},expression:"provinceId"}})],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("目的地市：")]),a("sc-city",{staticClass:"inputh-85",attrs:{optionAdd:e.optionAdd2},model:{value:e.cityId,callback:function(t){e.cityId=t},expression:"cityId"}})],1)])])]),a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both row4"},[a("li",[a("label",{staticClass:"w-r-60"},[e._v("签收状态：")]),a("el-select",{staticClass:"inputh-102",model:{value:e.signType,callback:function(t){e.signType=t},expression:"signType"}},e._l(e.signTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("班次类型：")]),a("sc-select-multiple",{ref:"topSearchTransport",attrs:{params:{dictionaryType:"transportType"}},model:{value:e.transport,callback:function(t){e.transport=t},expression:"transport"}})],1),a("li",[a("label",{staticClass:"w-r-122"},[e._v("物品类型：")]),a("sc-select-multiple",{ref:"topSearchGoods",attrs:{params:{dictionaryType:"goodsType"}},model:{value:e.goodsType,callback:function(t){e.goodsType=t},expression:"goodsType"}})],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("结算重量：")]),a("el-input",{staticClass:"input-40-40",model:{value:e.weightS,callback:function(t){e.weightS="string"===typeof t?t.trim():t},expression:"weightS"}},[a("template",{slot:"append"},[e._v("≤W≤")])],2),a("el-input",{staticClass:"input-40",model:{value:e.weightE,callback:function(t){e.weightE="string"===typeof t?t.trim():t},expression:"weightE"}})],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("首次扣款：")]),a("el-select",{staticClass:"input-h-85",model:{value:e.firstDeduction,callback:function(t){e.firstDeduction=t},expression:"firstDeduction"}},e._l(e.firstDeductionOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("退件：")]),a("el-select",{staticClass:"input-h-85",model:{value:e.isBack,callback:function(t){e.isBack=t},expression:"isBack"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both row5"},[a("li",[a("label",{staticClass:"w-r-60"},[e._v("问题件：")]),a("el-select",{staticClass:"inputh-102",model:{value:e.isProblem,callback:function(t){e.isProblem=t},expression:"isProblem"}},e._l(e.isProblemOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-85"},[e._v("面单费：")]),a("el-select",{model:{value:e.isBillFee,callback:function(t){e.isBillFee=t},expression:"isBillFee"}},e._l(e.votesIsZeroOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-122"},[e._v("增值加收费用：")]),a("el-select",{model:{value:e.valueAddedFee,callback:function(t){e.valueAddedFee=t},expression:"valueAddedFee"}},e._l(e.valueAddedFeeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-65 "},[e._v("操作费：")]),a("el-select",{staticClass:"input-h-85",model:{value:e.iswork,callback:function(t){e.iswork=t},expression:"iswork"}},e._l(e.zeroOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",{staticClass:"w-r-65"},[e._v("是否集包：")]),a("el-select",{model:{value:e.isBag,callback:function(t){e.isBag=t},expression:"isBag"}},e._l(e.isStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 156px)"}},[a("ul",{staticClass:"clear-both row6"},[a("li",{staticStyle:{"margin-left":"0px !important"}},[a("label",{staticClass:"w-r-60"},[e._v("计算方式：")]),a("el-select",{staticClass:"inputh-102",model:{value:e.jzchecked,callback:function(t){e.jzchecked=t},expression:"jzchecked"}},e._l(e.jzcheckedOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"当前应收费用和上次扣款金额不一致，现结算对象与上次扣款对象不一致的数据。线上扣款的数据系统将自动取消，线下收款的数据可手动取消",placement:"bottom-start"}},[a("el-checkbox",{staticStyle:{color:"#000"},model:{value:e.cancleHexiaoFee,callback:function(t){e.cancleHexiaoFee=t},expression:"cancleHexiaoFee"}},[e._v("待取消扣款数据")])],1)],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{staticClass:"m-b-16",attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{staticClass:"m-b-16",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"自营的数据，对开通神州预付款的账户可进行线上扣款操作，可在管网点账—预付款流水报表页面中查看结算明细。",placement:"bottom-start"}},[e.z_method.showBtn("btn_sendReceiveFee_toCharge")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n              线上扣款\n            ")])],1):e._e()]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"自营的数据，通过线下结算的，可进行标记作用，不产生神州流水变化。",placement:"bottom-start"}},[e.z_method.showBtn("btn_sendReceiveFee_underlineCharge")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n              线下收款\n            ")])],1):e._e()]),e.z_method.showBtn("btn_sendReceiveFee_cancelToCharge")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            取消扣款\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_lock")?a("li",[a("el-button",{attrs:{type:"success",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            锁定\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_lockOff")?a("li",[a("el-button",{attrs:{type:"success",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            解锁\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_edit")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            编辑\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_batches")?a("li",[a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            批带\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_recalculation")?a("li",[a("el-button",{attrs:{type:"success",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            重新计算\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_supplement")?a("li",[a("el-button",{attrs:{type:"warning"},on:{click:e.supplement}},[e._v("\n            补单号\n          ")])],1):e._e(),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此操作将从账单中删除单号数据，无法恢复，请谨慎操作！",placement:"bottom-start"}},[e.z_method.showBtn("btn_sendReceiveFee_delBillNo")?a("li",[a("el-button",{attrs:{disabled:0===e.currRow.length,type:"warning"},on:{click:e.delBillNo}},[e._v("\n              删单号\n            ")])],1):e._e()]),e.z_method.showBtn("btn_sendReceiveFee_handSyncSendaBillsInfo")?a("li",[a("el-button",{attrs:{type:"warning",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            同步信息\n          ")])],1):e._e(),a("li",[e.z_method.showBtn("btn_sendReceiveFee_synchronousBillIssue")?a("el-button",{attrs:{type:"primary",disabled:0===e.currRow.length},on:{click:e.showSynchronousBillIssue}},[e._v("\n            同步运单发放\n          ")]):e._e()],1),e.z_method.showBtn("btn_sendReceiveFee_import")?a("li",[a("el-button",{attrs:{type:"primary"},on:{click:e.batchImport}},[e._v("\n            导入\n          ")])],1):e._e(),e.z_method.showBtn("btn_sendReceiveFee_import")?a("li",[a("a",{staticClass:"download-btn",attrs:{href:"../attachment/template/sendReceiveFee.xlsx",download:"运单信息修改导入模板"}},[a("el-button",{attrs:{type:"primary",disabled:e.downloadDisabled},on:{click:e.downloadBoard}},[e._v("下载模板")])],1)]):e._e()],1)]),a("div",{staticStyle:{"margin-right":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.showCell}},[e._v("\n        显示列设置\n      ")])],1),e.z_method.showBtn("btn_sendReceiveFee_exprot")?a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.isearchExport}},[e._v("导出")])],1):e._e()]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHeadNew},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("sc-cell-setting",{ref:"refTxCell",attrs:{menuName:"收中转费/客户运费",menuKey:"sendReceiveFeeDetail",spreadHeadData:e.tableHead.columns},on:{model:e.onColumns}}),a("async-export",{ref:"asyncExport",attrs:{exportData:e.tableHeadNew.columns,exportName:e.exportObj.fileName,exportUrl:e.exportUrl,exportOption:e.optionsClone}}),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHeadNew,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"选择需要同步的信息",visible:e.dialogVisibleTB,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"320px",center:""},on:{"update:visible":function(t){e.dialogVisibleTB=t}}},[a("div",{staticClass:"pdH",staticStyle:{"background-color":"#fff"}},[a("ul",{staticStyle:{"padding-top":"16px"}},[a("li",[a("el-checkbox",{model:{value:e.scanUserIdCheck,callback:function(t){e.scanUserIdCheck=t},expression:"scanUserIdCheck"}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("业务员")])]),a("el-checkbox",{model:{value:e.recWeightCheck,callback:function(t){e.recWeightCheck=t},expression:"recWeightCheck"}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("网点重量")])])],1),a("li",[a("el-checkbox",{model:{value:e.customerIdCheck,callback:function(t){e.customerIdCheck=t},expression:"customerIdCheck"}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("客户")])]),a("el-checkbox",{staticStyle:{"margin-left":"14px"},model:{value:e.centerWeightCheck,callback:function(t){e.centerWeightCheck=t},expression:"centerWeightCheck"}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v("中心重量")])])],1)]),a("div",{staticStyle:{color:"red","font-size":"8px",padding:"8px 10px 16px"}},[e._v("\n        注：同步信息解决新老系统切换导致数据信息缺失的问题，同步后系统无法撤回，请谨慎操作！\n      ")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.isTD},on:{click:e.checkBillPost}},[e._v("确 定")])],1)]),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,"data-validate":e.delDataValidate,tableData:e.currRow,batchUrl:e.batchUrl},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],attrs:{title:"批带",visible:e.dialogVisiblePD,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"320px",center:""},on:{"update:visible":function(t){e.dialogVisiblePD=t}}},[a("div",{staticClass:"pdH"},[a("ul",[a("li",[a("el-radio",{attrs:{label:"1"},model:{value:e.radioPDS,callback:function(t){e.radioPDS=t},expression:"radioPDS"}},[e._v("中心重量设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"2"},model:{value:e.radioPDS,callback:function(t){e.radioPDS=t},expression:"radioPDS"}},[e._v("收件重量设置为结算重量")])],1),a("li",[a("el-radio",{attrs:{label:"3"},model:{value:e.radioPDS,callback:function(t){e.radioPDS=t},expression:"radioPDS"}},[e._v("运单发放业务员设置为揽件业务员")])],1),a("li",[a("el-radio",{attrs:{label:"4"},model:{value:e.radioPDS,callback:function(t){e.radioPDS=t},expression:"radioPDS"}},[e._v("运单发放客户更新客户名称")])],1),a("li",[a("el-radio",{attrs:{label:"5"},model:{value:e.radioPDS,callback:function(t){e.radioPDS=t},expression:"radioPDS"}},[e._v("运单发放网点设置为结算网点")])],1)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:""===e.radioPDS},on:{click:e.checkBillPost}},[e._v("确 定")])],1)]),a("detail-edit",{ref:"edit",attrs:{"row-data":e.rowData,"is-self":e.isSelf,title:e.editTitle},on:{getCurrRow:e.getCurrRow}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],staticClass:"editT",attrs:{title:e.editTitle,visible:e.dialogVisibleEdit,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:e.dialogwidth,center:""},on:{"update:visible":function(t){e.dialogVisibleEdit=t}}},["补单号"===e.editTitle?a("div",[a("div",{staticStyle:{float:"left","padding-left":"24px"}},[a("sc-bill-code",{ref:"billcodeRefEdit",attrs:{height:200},nativeOn:{keyup:function(t){return e.keyupEdit(t)}},model:{value:e.billCodeEdit,callback:function(t){e.billCodeEdit=t},expression:"billCodeEdit"}})],1),a("div",{staticClass:"edit"},[a("ul",[a("li",[a("label",[e._v("账单类别：")]),a("el-select",{model:{value:e.billsTypeStatusEdit,callback:function(t){e.billsTypeStatusEdit=t},expression:"billsTypeStatusEdit"}},e._l(e.billsTypeStatusOptionsEdit,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("label",[e._v("下级网点：")]),a("sc-site",{attrs:{param:{child:!0},"popper-class":"max-index",disabled:0===e.billsTypeStatusEdit},model:{value:e.siteIdEdit,callback:function(t){e.siteIdEdit=t},expression:"siteIdEdit"}})],1),a("li",[a("label",[e._v("账单日期：")]),a("el-date-picker",{attrs:{type:"date",clearable:!1},model:{value:e.billTimeEdit,callback:function(t){e.billTimeEdit=t},expression:"billTimeEdit"}}),a("label",[e._v("业务员：")]),a("sc-users",{attrs:{type:"2","popper-class":"max-index",disabled:99===e.billsTypeStatusEdit},model:{value:e.userIdEdit,callback:function(t){e.userIdEdit=t},expression:"userIdEdit"}})],1),a("li",[a("label",[e._v("客户：")]),a("sc-users",{attrs:{type:"3","popper-class":"max-index",disabled:99===e.billsTypeStatusEdit},model:{value:e.customerIdEdit,callback:function(t){e.customerIdEdit=t},expression:"customerIdEdit"}}),a("label",[e._v("目的地市：")]),a("sc-city",{ref:"cityref",attrs:{"popper-class":"max-index"},model:{value:e.cityIdEdit,callback:function(t){e.cityIdEdit=t},expression:"cityIdEdit"}})],1),a("li",[a("label",[e._v("结算重量：")]),a("el-input",{model:{value:e.weightEdit,callback:function(t){e.weightEdit=t},expression:"weightEdit"}}),a("label",[e._v("物品类型：")]),a("sc-select-multiple",{attrs:{multiple:!1,params:{dictionaryType:"goodsType"}},model:{value:e.goodsTypeEdit,callback:function(t){e.goodsTypeEdit=t},expression:"goodsTypeEdit"}})],1),a("li",[a("label",[e._v("班次类型：")]),a("sc-select-multiple",{attrs:{multiple:!1,params:{dictionaryType:"transportType"}},model:{value:e.transportEdit,callback:function(t){e.transportEdit=t},expression:"transportEdit"}}),a("label",[e._v("备注：")]),a("el-input",{attrs:{maxlength:"30"},model:{value:e.markEdit,callback:function(t){e.markEdit="string"===typeof t?t.trim():t},expression:"markEdit"}})],1)])])]):e._e(),"补单号"!==e.editTitle?a("div",[e.currRoweq1?a("div",{staticClass:"edit"},[a("ul",[a("li",[a("label",[e._v("运单号：")]),a("el-input",{attrs:{disabled:e.dialogVisibleEdit},model:{value:e.billCodeEdit,callback:function(t){e.billCodeEdit=t},expression:"billCodeEdit"}}),a("label",[e._v("扫描时间：")]),a("el-input",{attrs:{disabled:e.dialogVisibleEdit},model:{value:e.signTimeEdit,callback:function(t){e.signTimeEdit=t},expression:"signTimeEdit"}})],1),a("li",{staticClass:"radioEdit"},[a("el-radio-group",{model:{value:e.radioEdits,callback:function(t){e.radioEdits=t},expression:"radioEdits"}},[a("el-radio",{staticStyle:{"padding-left":"24px"},attrs:{label:2,disabled:e.isradioEdits},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(2)}}},[e._v(" 转下级账单\n              ")]),a("el-radio",{staticStyle:{"padding-left":"134px"},attrs:{label:1,disabled:!e.isradioEdits},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(1)}}},[e._v(" 转自营账单\n              ")])],1)],1),a("li",[a("label",[e._v("账单日期：")]),a("el-date-picker",{attrs:{type:"date",clearable:!1},model:{value:e.billTimeEdit,callback:function(t){e.billTimeEdit=t},expression:"billTimeEdit"}}),a("label",[e._v("客户：")]),a("sc-users",{attrs:{type:"3","popper-class":"max-index",disabled:2===e.radioEdits},model:{value:e.customerIdEdit,callback:function(t){e.customerIdEdit=t},expression:"customerIdEdit"}})],1),a("li",[a("label",[e._v("业务员：")]),a("sc-users",{attrs:{type:"2","popper-class":"max-index",disabled:2===e.radioEdits},model:{value:e.userIdEdit,callback:function(t){e.userIdEdit=t},expression:"userIdEdit"}}),a("label",[e._v("下级网点：")]),a("sc-site",{attrs:{param:{child:!0},"popper-class":"max-index",disabled:1===e.radioEdits},model:{value:e.siteIdEdit,callback:function(t){e.siteIdEdit=t},expression:"siteIdEdit"}})],1),a("li",[a("label",[e._v("结算重量：")]),a("el-input",{model:{value:e.weightEdit,callback:function(t){e.weightEdit=t},expression:"weightEdit"}}),a("label",[e._v("目的地市：")]),a("sc-city",{ref:"cityref",attrs:{"popper-class":"max-index"},model:{value:e.cityIdEdit,callback:function(t){e.cityIdEdit=t},expression:"cityIdEdit"}})],1),a("li",[a("label",[e._v("班次类型：")]),a("sc-select-multiple",{attrs:{multiple:!1,params:{dictionaryType:"transportType"}},model:{value:e.transportEdit,callback:function(t){e.transportEdit=t},expression:"transportEdit"}}),a("label",[e._v("物品类型：")]),a("sc-select-multiple",{attrs:{multiple:!1,params:{dictionaryType:"goodsType"}},model:{value:e.goodsTypeEdit,callback:function(t){e.goodsTypeEdit=t},expression:"goodsTypeEdit"}})],1),a("li",[a("label",[e._v("备注：")]),a("el-input",{staticClass:"w-445",attrs:{maxlength:"30"},model:{value:e.markEdit,callback:function(t){e.markEdit="string"===typeof t?t.trim():t},expression:"markEdit"}})],1)])]):e._e(),e.currRoweq1?e._e():a("div",{staticClass:"recharge-box"},[a("div",{staticClass:"receipt-box"},[a("ul",[a("li",[a("div",{staticClass:"label name"},[e._v("名称")]),a("div",{staticClass:"label checkbox"},[e._v("是否修改")]),a("div",{staticClass:"label"},[e._v("内容")])]),a("li",{staticStyle:{"justify-content":"space-evenly"}},[a("el-radio-group",{model:{value:e.radioEdits,callback:function(t){e.radioEdits=t},expression:"radioEdits"}},[a("el-radio",{attrs:{label:2},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(2)}}},[e._v(" 转下级账单")]),a("el-radio",{staticStyle:{"padding-left":"160px"},attrs:{label:1},nativeOn:{click:function(t){return t.preventDefault(),e.clickitem(1)}}},[e._v(" 转自营账单\n                ")])],1)],1),a("li",[a("div",{staticClass:"label name"},[e._v("账单日期：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.isbillTimeEdit,callback:function(t){e.isbillTimeEdit=t},expression:"isbillTimeEdit"}})],1),a("div",{staticClass:"label input"},[a("el-date-picker",{staticClass:"dateTimeH",attrs:{type:"date",disabled:!e.isbillTimeEdit,clearable:!1},model:{value:e.billTimeEdit,callback:function(t){e.billTimeEdit=t},expression:"billTimeEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("业务员：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{attrs:{disabled:2===e.radioEdits},model:{value:e.isuserIdEdit,callback:function(t){e.isuserIdEdit=t},expression:"isuserIdEdit"}})],1),a("div",{staticClass:"label input"},[a("sc-users",{attrs:{type:"2","popper-class":"max-index",disabled:!e.isuserIdEdit||2===e.radioEdits},model:{value:e.userIdEdit,callback:function(t){e.userIdEdit=t},expression:"userIdEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("客户：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{attrs:{disabled:2===e.radioEdits},model:{value:e.iscustomerIdEdit,callback:function(t){e.iscustomerIdEdit=t},expression:"iscustomerIdEdit"}})],1),a("div",{staticClass:"label input"},[a("sc-users",{attrs:{type:"3","popper-class":"max-index",disabled:!e.iscustomerIdEdit||2===e.radioEdits},model:{value:e.customerIdEdit,callback:function(t){e.customerIdEdit=t},expression:"customerIdEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("下级网点：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{attrs:{disabled:1===e.radioEdits},model:{value:e.issiteIdEdit,callback:function(t){e.issiteIdEdit=t},expression:"issiteIdEdit"}})],1),a("div",{staticClass:"label input"},[a("sc-site",{attrs:{param:{child:!0},"popper-class":"max-index",disabled:!e.issiteIdEdit||1===e.radioEdits},model:{value:e.siteIdEdit,callback:function(t){e.siteIdEdit=t},expression:"siteIdEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("目的地市：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.iscityIdEdit,callback:function(t){e.iscityIdEdit=t},expression:"iscityIdEdit"}})],1),a("div",{staticClass:"label input"},[a("sc-city",{ref:"cityref",attrs:{"popper-class":"max-index",disabled:!e.iscityIdEdit},model:{value:e.cityIdEdit,callback:function(t){e.cityIdEdit=t},expression:"cityIdEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("班次类型：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.istransportEdit,callback:function(t){e.istransportEdit=t},expression:"istransportEdit"}})],1),a("div",{staticClass:"label input"},[a("sc-select-multiple",{attrs:{disabled:!e.istransportEdit,multiple:!1,params:{dictionaryType:"transportType"}},model:{value:e.transportEdit,callback:function(t){e.transportEdit=t},expression:"transportEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("物品类型：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.isgoodsTypeEdit,callback:function(t){e.isgoodsTypeEdit=t},expression:"isgoodsTypeEdit"}})],1),a("div",{staticClass:"label input"},[a("sc-select-multiple",{attrs:{multiple:!1,params:{dictionaryType:"goodsType"}},model:{value:e.goodsTypeEdit,callback:function(t){e.goodsTypeEdit=t},expression:"goodsTypeEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("结算重量：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.isweightEdit,callback:function(t){e.isweightEdit=t},expression:"isweightEdit"}})],1),a("div",{staticClass:"label input"},[a("el-input",{attrs:{disabled:!e.isweightEdit},model:{value:e.weightEdit,callback:function(t){e.weightEdit=t},expression:"weightEdit"}})],1)]),a("li",[a("div",{staticClass:"label name"},[e._v("备注：")]),a("div",{staticClass:"label checkbox"},[a("el-checkbox",{model:{value:e.ismarkEdit,callback:function(t){e.ismarkEdit=t},expression:"ismarkEdit"}})],1),a("div",{staticClass:"label input"},[a("el-input",{attrs:{maxlength:"30",disabled:!e.ismarkEdit},model:{value:e.markEdit,callback:function(t){e.markEdit="string"===typeof t?t.trim():t},expression:"markEdit"}})],1)])])])])]):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checkBillPost}},[e._v("确 定")])],1)]),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],staticClass:"hdialog",attrs:{title:"总成本",visible:e.dialogVisiblecost,"modal-append-to-body":!1,"before-close":e.handleClose,width:"320px",center:""},on:{"update:visible":function(t){e.dialogVisiblecost=t}}},[a("div",{staticClass:"pdH"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.feeCostDta,border:""}},[a("el-table-column",{attrs:{prop:"name",label:"成本项",width:"180"}}),a("el-table-column",{attrs:{prop:"fee",label:"金额"}})],1)],1)]),a("szSupplement",{ref:"supplementRef",on:{callBack:e.supplementaction}}),a("sz-import",{ref:"batchImportRef",attrs:{columns:e.importParams.columns,"batch-url":e.importParams.batchUrl,"data-validate":e.dataValidate,"update-data":e.importParams.updateData,maximum:e.maximum,width:1e3,isErrorData:!0},on:{model:e.close,errorData:e.errorData}}),a("csv",{attrs:{visible:e.exportErrorObj.visible,fileName:e.exportErrorObj.fileName,head:e.exportErrorObj,paramData:e.exportErrorObj.excelData,sum:e.exportErrorObj.sum,current:e.exportErrorObj.current},on:{clear:e.closeDialogtest}}),a("synchronousBillIssue",{ref:"synchronousBillIssue",attrs:{continueFlag:!0,checkedRows:e.currRow,type:!0}}),a("verification",{attrs:{isError:!0,titles:"确认是否进行账单数据删除操作?",titleCon:"删除单号数据无法恢复，请谨慎操作，以免影响账单完整性",dialogVisibles:e.dialogVisibles},on:{callBack:e.callBack}})],1)},l=[],o=(a("5ab2"),a("e10e"),a("d9ba")),r=(a("6d57"),a("9a33"),a("ac9f")),c=(a("f548"),a("163d"),a("a2e5")),u=a("ac0d"),d=a("391c"),h=a("a3be"),m=a("f37e"),p=a("4055"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"detailEdit",attrs:{title:e.title,visible:e.dialogVisible,width:"370px","close-on-click-modal":!1,"modal-append-to-body":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("ul",[a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("运单号:")]),a("el-input",{staticStyle:{"margin-left":"10px",width:"200px"},attrs:{maxlength:"20",disabled:!0},model:{value:e.editOne.billcode,callback:function(t){e.$set(e.editOne,"billcode",t)},expression:"editOne.billcode"}})],1)]),a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("扫描时间:")]),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!0,type:"datetime",placeholder:"选择日期时间"},model:{value:e.editOne.scanTime,callback:function(t){e.$set(e.editOne,"scanTime",t)},expression:"editOne.scanTime"}})],1)]),a("li",[a("p",{staticClass:"vertical-p"},[a("el-checkbox",{style:{color:!0===e.editOne.bills?"#409EFF":"black"},on:{change:e.changeAttr},model:{value:e.editOne.bills,callback:function(t){e.$set(e.editOne,"bills",t)},expression:"editOne.bills"}},[e._v("\n              需要转入"+e._s(e.isType=!0===e.isSelf?"下级":"自营")+"账单\n            ")]),a("span",{staticStyle:{display:"flex","justify-content":"flex-end",flex:"auto",color:"red","font-size":"13px","line-height":"27px"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"line-height":"27px"}}),e._v("点击选择账单将转入"+e._s(e.isType=!0===e.isSelf?"下级":"自营")+"账单")])],1)]),a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("账单日期:")]),a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"auto"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editOne.statementDate,callback:function(t){e.$set(e.editOne,"statementDate",t)},expression:"editOne.statementDate"}})],1)]),e.isSelf&&!e.editOne.bills||!e.isSelf&&e.editOne.bills?a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("业务员:")]),a("sc-users",{ref:"csanUser",staticStyle:{"margin-left":"10px","z-index":"3000"},attrs:{type:"2","popper-class":"max-index",isClearResetData:!0},model:{value:e.editOne.userId,callback:function(t){e.$set(e.editOne,"userId",t)},expression:"editOne.userId"}})],1)]):e._e(),e.isSelf&&!e.editOne.bills||!e.isSelf&&e.editOne.bills?a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("客户:")]),a("sc-users",{ref:"scanCustomer",staticStyle:{"margin-left":"10px"},attrs:{type:"3","popper-class":"max-index",isClearResetData:!0},model:{value:e.editOne.customerId,callback:function(t){e.$set(e.editOne,"customerId",t)},expression:"editOne.customerId"}})],1)]):e._e(),e.isSelf&&e.editOne.bills||!e.isSelf&&!e.editOne.bills?a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("下级网点:")]),a("sc-site",{ref:"nextSite",staticClass:"ddd",staticStyle:{"margin-left":"10px"},attrs:{param:{child:!0},"popper-class":"max-index",isClearResetData:!0,popperClass:"siteId"},model:{value:e.editOne.siteId,callback:function(t){e.$set(e.editOne,"siteId",t)},expression:"editOne.siteId"}})],1)]):e._e(),a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("结算重量:")]),a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{maxlength:"20"},model:{value:e.editOne.weight,callback:function(t){e.$set(e.editOne,"weight",t)},expression:"editOne.weight"}})],1)]),a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("目的城市:")]),a("sc-city",{staticClass:"input-h-85",staticStyle:{width:"auto","margin-left":"10px"},attrs:{popperClass:"cityLa"},model:{value:e.editOne.cityId,callback:function(t){e.$set(e.editOne,"cityId",t)},expression:"editOne.cityId"}})],1)]),a("li",{staticStyle:{display:"flex"}},[a("div",{staticClass:"vertical-p"},[a("label",[e._v("班次类型:")]),a("div",{staticStyle:{width:"200px","margin-left":"10px"}},[a("sc-select-multiple",{attrs:{multiple:!1,"popper-class":"max-index",params:{dictionaryType:"transportType"}},model:{value:e.editOne.transport,callback:function(t){e.$set(e.editOne,"transport",t)},expression:"editOne.transport"}})],1)])]),a("li",{staticStyle:{display:"flex"}},[a("div",{staticClass:"vertical-p"},[a("label",[e._v("物品类型:")]),a("div",{staticStyle:{width:"200px","margin-left":"10px"}},[a("sc-select-multiple",{attrs:{multiple:!1,"popper-class":"max-index",params:{dictionaryType:"goodsType"}},model:{value:e.editOne.productId,callback:function(t){e.$set(e.editOne,"productId",t)},expression:"editOne.productId"}})],1)])]),a("li",[a("p",{staticClass:"vertical-p"},[a("label",[e._v("备注:")]),a("el-input",{staticStyle:{"margin-left":"10px"},attrs:{maxlength:"30",placeholder:"最多输入30个字符"},model:{value:e.editOne.remarks,callback:function(t){e.$set(e.editOne,"remarks",t)},expression:"editOne.remarks"}})],1)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.upDate}},[e._v("确 定")])],1)]),a("el-dialog",{staticClass:"detailEditList",attrs:{title:e.title,visible:e.dialogVisibleList,width:"370px","close-on-click-modal":!1,"modal-append-to-body":!1,"before-close":e.handleCloseList},on:{"update:visible":function(t){e.dialogVisibleList=t}}},[a("div",{staticStyle:{padding:"1px 10px 0 10px"}},[a("div",[a("ul",[a("li",{staticStyle:{flex:"1.5","justify-content":"center"}},[e._v("名称")]),a("li",{staticStyle:{flex:"1.3"}},[e._v("是否修改")]),a("li",{staticStyle:{flex:"4"}},[e._v("内容")])])]),a("ul",[a("li",[e._v("账单日期:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},model:{value:e.isbillDate,callback:function(t){e.isbillDate=t},expression:"isbillDate"}})],1),a("li",[a("el-date-picker",{staticStyle:{"margin-left":"10px",width:"auto"},attrs:{disabled:!e.isbillDate,type:"date",placeholder:"选择日期"},model:{value:e.billDate,callback:function(t){e.billDate=t},expression:"billDate"}})],1)]),a("ul",[a("li",[e._v("结算重量:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},model:{value:e.isWeight,callback:function(t){e.isWeight=t},expression:"isWeight"}})],1),a("li",[a("el-input",{staticStyle:{"margin-left":"10px",width:"auto"},attrs:{maxlength:"20",disabled:!e.isWeight},model:{value:e.batchWeight,callback:function(t){e.batchWeight=t},expression:"batchWeight"}})],1)]),a("ul",[a("li",[e._v("目的城市:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},model:{value:e.isCity,callback:function(t){e.isCity=t},expression:"isCity"}})],1),a("li",[a("sc-city",{staticClass:"input-h-85",staticStyle:{width:"auto","margin-left":"10px"},attrs:{disabled:!e.isCity,popperClass:"obCity"},model:{value:e.batchCityId,callback:function(t){e.batchCityId=t},expression:"batchCityId"}})],1)]),a("ul",[a("li",[e._v("班次类型:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},model:{value:e.isTransport,callback:function(t){e.isTransport=t},expression:"isTransport"}})],1),a("li",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"auto","margin-left":"10px"}},[a("sc-select-multiple",{attrs:{disabled:!e.isTransport,multiple:!1,"popper-class":"max-index",params:{dictionaryType:"transportType"}},model:{value:e.batchTransport,callback:function(t){e.batchTransport=t},expression:"batchTransport"}})],1)])]),a("ul",[a("li",[e._v("物品类型:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},model:{value:e.isItem,callback:function(t){e.isItem=t},expression:"isItem"}})],1),a("li",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{width:"auto","margin-left":"10px"}},[a("sc-select-multiple",{attrs:{disabled:!e.isItem,multiple:!1,"popper-class":"max-index",params:{dictionaryType:"goodsType"}},model:{value:e.batchItemType,callback:function(t){e.batchItemType=t},expression:"batchItemType"}})],1)])]),a("ul",[a("li",[e._v("备注:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},model:{value:e.isRemarks,callback:function(t){e.isRemarks=t},expression:"isRemarks"}})],1),a("li",[a("el-input",{staticStyle:{width:"auto","margin-left":"10px"},attrs:{maxlength:"30",disabled:!e.isRemarks,placeholder:"最多输入30个字符"},model:{value:e.batchremarks,callback:function(t){e.batchremarks=t},expression:"batchremarks"}})],1)]),a("div",{staticStyle:{"margin-top":"10px",color:"red",display:"flex","align-items":"center","justify-content":"center"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"line-height":"27px"}}),e._v(" 信息项一旦勾选，若填写为空值，则数据项被清空\n      ")]),a("div",{staticStyle:{"margin-top":"10px",display:"flex","align-items":"center","justify-content":"center"}},[a("el-checkbox",{model:{value:e.subordinate,callback:function(t){e.subordinate=t},expression:"subordinate"}},[e._v("需要转入下级账单")]),a("el-checkbox",{model:{value:e.selfSupport,callback:function(t){e.selfSupport=t},expression:"selfSupport"}},[e._v("需要转入自营账单")])],1),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.selfSupport,expression:"!selfSupport"}]},[a("li",[e._v("下级网点:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},on:{change:e.changeSite},model:{value:e.isOutlets,callback:function(t){e.isOutlets=t},expression:"isOutlets"}})],1),a("li",[a("sc-site",{staticStyle:{width:"auto","margin-left":"10px"},attrs:{param:{child:!0},disabled:!e.isOutlets,popperClass:"batchSiteId",isClearResetData:!0},model:{value:e.batchSiteId,callback:function(t){e.batchSiteId=t},expression:"batchSiteId"}})],1)]),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.subordinate,expression:"!subordinate"}]},[a("li",[e._v("业务员:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},on:{change:e.changeUser},model:{value:e.isUser,callback:function(t){e.isUser=t},expression:"isUser"}})],1),a("li",[a("sc-users",{staticStyle:{width:"auto","margin-left":"10px"},attrs:{type:"2",disabled:!e.isUser,popperClass:"batchUserId",isClearResetData:!0},model:{value:e.batchUserId,callback:function(t){e.batchUserId=t},expression:"batchUserId"}})],1)]),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.subordinate,expression:"!subordinate"}]},[a("li",[e._v("客户:")]),a("li",[a("el-checkbox",{staticStyle:{"margin-right":"0"},on:{change:e.changeCustomer},model:{value:e.isCustomer,callback:function(t){e.isCustomer=t},expression:"isCustomer"}})],1),a("li",[a("sc-users",{staticStyle:{width:"auto","margin-left":"10px"},attrs:{type:"3",disabled:!e.isCustomer,popperClass:"batchCustomerId",isClearResetData:!0},model:{value:e.batchCustomerId,callback:function(t){e.batchCustomerId=t},expression:"batchCustomerId"}})],1)]),a("div",{staticStyle:{"margin-top":"10px",color:"red",display:"flex","justify-content":"center","font-size":"12px","white-space":"pre"}},[a("i",{staticClass:"el-icon-warning",staticStyle:{"line-height":"27px","font-size":"20px"}}),e._v(" "+e._s(e.tips)+"\n      ")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleList=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.Submit}},[e._v("确 定")])],1)])],1)},f=[],y=(a("2b45"),a("6bf2")),v=a.n(y);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x,k={name:"detail-edit",props:{title:String,isSelf:Boolean,rowData:Object},data:function(){return{dialogVisible:!1,editOne:{billcode:"",scanTime:"",bills:"",statementDate:"",siteId:"",userId:"",customerId:"",weight:"",cityId:"",transport:-1,productId:"",remarks:""},dialogVisibleList:!1,billCode:"",isbillDate:!1,billDate:v()().format("YYYY-MM-DD"),isWeight:!1,batchWeight:"",isCity:!1,batchCityId:"",isTransport:!1,batchTransport:1,isItem:!1,batchItemType:1,isRemarks:!1,batchremarks:"",subordinate:!1,selfSupport:!1,isOutlets:!1,batchSiteId:"",isUser:!1,batchUserId:"",isCustomer:!1,batchCustomerId:"",tips:"不选择转入类型变更仅对同类型账单进行转换；\n 勾选后对所有账单有效；",isType:""}},methods:{Submit:function(){if(isNaN(this.batchWeight))return this.$message({message:"请输入正确的数字!",type:"warning",duration:2e3});var e=this.$parent.billCodesList.filter((function(e,t,a){return a.indexOf(e)===t})),t=[];console.info(this.batchremarks);for(var a=0;a<e.length;a++){var i={billCode:e[a],billDate:this.isbillDate?v()(this.billDate).format("YYYY-MM-DD"):void 0,accountWeight:this.isWeight?""===this.batchWeight?this.batchWeight=0:this.batchWeight.toString().replace(/ /g,""):void 0,dispCityId:this.isCity?""===this.batchCityId?0:this.batchCityId:void 0,classType:this.isTransport?this.batchTransport:void 0,goodsType:this.isItem?this.batchItemType:void 0,remark:this.isRemarks?this.batchremarks:void 0,accountUserId:this.isOutlets?""===this.batchSiteId?0:this.batchSiteId:void 0,scanUserId:this.isUser?""===this.batchUserId?0:this.batchUserId:void 0,customerId:this.isCustomer?""===this.batchCustomerId?0:this.batchCustomerId:void 0,types:!0===this.subordinate?2:1,forcedUpdate:!1};!1===this.subordinate&&!1===this.selfSupport&&(i.types=void 0),!0===this.subordinate&&(i.scanUserId=void 0,i.customerId=void 0),!0===this.selfSupport&&(i.accountUserId=void 0),!1===this.isbillDate&&(i.billDate=void 0),!1===this.isWeight&&(i.accountWeight=void 0),!1===this.isCity&&(i.dispCityId=void 0),!1===this.isTransport&&(i.classType=void 0),!1===this.isItem&&(i.goodsType=void 0),!1===this.isRemarks&&(i.remark=void 0),console.log("夏季网点，业务员，客户",this.batchSiteId,this.batchUserId,this.batchCustomerId),!0===this.isOutlets&&(i.accountUserId=this.isOutlets&&""===this.batchSiteId||void 0===this.batchSiteId||null===this.batchSiteId?0:this.batchSiteId,i.scanUserId=void 0,i.customerId=void 0),!0===this.isUser&&(i.scanUserId=this.isUser&&""===this.batchUserId||void 0===this.batchUserId||null===this.batchUserId?0:this.batchUserId,i.customerId=this.isCustomer&&""===this.batchCustomerId||void 0===this.batchCustomerId||null===this.batchCustomerId?0:this.batchCustomerId,i.accountUserId=void 0),!0===this.isCustomer&&(i.scanUserId=this.isUser&&""===this.batchUserId||void 0===this.batchUserId||null===this.batchUserId?0:this.batchUserId,i.customerId=this.isCustomer&&""===this.batchCustomerId||void 0===this.batchCustomerId||null===this.batchCustomerId?0:this.batchCustomerId,i.accountUserId=void 0),t.push(i)}for(var s=this.$parent.currRow,n=0;n<s.length;n++)for(var l=0;l<t.length;l++)s[n].billCode===t[l].billCode&&(s[n]=C({},s[n],{},t[l]));this.$parent.batchDialogVisible=!0,this.$parent.currRow=[],this.$emit("getCurrRow",s),this.dialogVisibleList=!1},upDate:function(){var e=this;if(console.log("单个编辑提交..."),console.info(this.editOne,this.isSelf),isNaN(this.editOne.weight))return this.$message({message:"请输入正确的数字!",type:"warning",duration:2e3});var t={};if(!0===this.isSelf)if(t.customerId=""!==this.editOne.customerId?this.editOne.customerId:0,t.billCode=this.editOne.billcode,t.billDate=v()(this.editOne.statementDate).format("YYYY-MM-DD"),t.accountUserId=""===this.editOne.siteId||null===this.editOne.siteId?0:this.editOne.siteId,t.scanUserId=""===this.editOne.userId||null===this.editOne.userId?0:this.editOne.userId,t.customerId=""===this.editOne.customerId||null===this.editOne.customerId?0:this.editOne.customerId,t.accountWeight=""!==this.editOne.weight?this.editOne.weight.toString().replace(/ /g,""):0,t.dispCityId=""!==this.editOne.cityId?this.editOne.cityId:0,t.classType=""!==this.editOne.transport?this.editOne.transport:0,t.goodsType=""!==this.editOne.productId?this.editOne.productId:0,t.remark=""!==this.editOne.remarks?this.editOne.remarks:"",t.types=!0===this.editOne.bills?2:void 0,t.forcedUpdate=!0,!0===this.editOne.bills){if(t.scanUserId=void 0,t.customerId=void 0,""===this.editOne.siteId||null===this.editOne.siteId||void 0===this.editOne.siteId||0===this.editOne.siteId)return this.$message({message:"请输入下级网点!",type:"warning",duration:2e3})}else t.accountUserId=void 0;else!0===this.editOne.bills&&(this.editOne.siteId=""),console.info("业务员",this.editOne.userId,"客户",this.editOne.customerId,"下级网点",this.editOne.siteId),t.billCode=this.editOne.billcode,t.billDate=v()(this.editOne.statementDate).format("YYYY-MM-DD"),t.accountUserId=""===this.editOne.siteId||null===this.editOne.siteId?0:this.editOne.siteId,t.scanUserId=""!==this.editOne.userId?this.editOne.userId:0,t.customerId=""!==this.editOne.customerId?this.editOne.customerId:0,t.accountWeight=""!==this.editOne.weight?this.editOne.weight:0,t.dispCityId=""!==this.editOne.cityId?this.editOne.cityId:0,t.classType=""!==this.editOne.transport?this.editOne.transport:0,t.goodsType=""!==this.editOne.productId?this.editOne.productId:0,t.remark=""!==this.editOne.remarks?this.editOne.remarks:"",t.types=!0===this.editOne.bills?1:void 0,t.forcedUpdate=!0,!0===this.editOne.bills?t.accountUserId=void 0:(t.scanUserId=void 0,t.customerId=void 0);Object(c["d"])("/bills/new/sendaBills/forcedUpdate",t).then((function(t){0===t.code&&(e.dialogVisible=!1,e.$message({message:"编辑成功!",type:"warning",duration:2e3}),e.$parent.currRow=[]),setTimeout((function(){e.$parent.fetchData({page:e.$parent.pagination.currentPage})}),500),e.dialogVisible=!1}),(function(t){e.dialogVisible=!1}))},changeAttr:function(e){var t=this;console.info(e,this.rowData.scanUserId),console.info("changeAttr    "+this.editOne.userId),this.optionsuserId=this.editOne.userId,this.optionssiteId=this.editOne.siteId,this.optionsComster=this.editOne.customerId,!0===this.isSelf?!0===e?(console.info("勾选下级"),console.info(this.editOne.siteId,this.optionssiteId),this.$nextTick((function(){t.editOne.siteId=""}))):(console.info("不勾选下级"),this.$nextTick((function(){t.editOne.userId="",t.editOne.customerId="",t.$nextTick((function(){t.editOne.userId=t.optionsuserId,t.editOne.customerId=t.optionsComster}))}))):(console.info(e),!0===e?this.$nextTick((function(){console.log("勾选自营"),t.editOne.userId="",t.editOne.customerId=""})):(console.info("不勾选自营"),this.$nextTick((function(){t.editOne.siteId="",t.$nextTick((function(){t.editOne.siteId=t.optionssiteId}))}))))},changeSite:function(e){!0===e&&(this.isUser=!1,this.isCustomer=!1)},changeUser:function(e){!0===e&&(this.isOutlets=!1)},changeCustomer:function(e){!0===e&&(this.isOutlets=!1)},handleClose:function(e){e()},handleCloseList:function(e){e()}},watch:{subordinate:{handler:function(e){!0===e&&(this.selfSupport=!1,this.tips="选择后自营账单会变更为下级账单，原下级账单不做变更；"),!1===e&&!1===this.selfSupport&&(this.tips="不选择转入类型变更仅对同类型账单进行转换；\n 勾选后对所有账单有效；")}},selfSupport:{handler:function(e){!0===e&&(this.subordinate=!1,this.tips="选择后下级账单会变更为自营账单，原自营账单不做变更；"),!1===e&&!1===this.subordinate&&(this.tips="不选择转入类型变更仅对同类型账单进行转换；\n 勾选后对所有账单有效；")}}},created:function(){this.optionsuserId="",this.optionssiteId="",this.optionsComster="",this.optionsClone=Object.assign({},this.editOne)}},D=k,w=(a("fe47"),a("6151"),a("623f")),S=Object(w["a"])(D,b,f,!1,null,"0b7c98c4",null),_=S.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"verification"},[a("el-dialog",{attrs:{"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,visible:e.dialogVisibles,width:"400px"},on:{"update:visible":function(t){e.dialogVisibles=t}}},[a("div",{staticClass:"dialog-body"},[a("div",{staticClass:"dialog-title"},[e.isError?a("i",{staticClass:"el-icon-error"}):a("i",{staticClass:"el-icon-warning"}),a("div",[e._v(e._s(e.titles))])]),a("div",{staticClass:"dialog-con"},[e._v(e._s(e.titleCon))]),a("div",{staticClass:"dialog-inp"},[a("p",[a("span",{staticClass:"c-r"},[e._v("*")]),e._v("输入确认码")]),a("el-input",{ref:"inputref",attrs:{maxlength:"3",placeholder:"请输入"},model:{value:e.varInput,callback:function(t){e.varInput="string"===typeof t?t.trim():t},expression:"varInput"}}),a("div",{staticClass:"veri"},[e._v(e._s(e.randomNum))])],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:0==e.varInput.length},on:{click:e.handleAct}},[e._v("确 定")])],1)])],1)},T=[],I={name:"verification",props:{dialogVisibles:{type:Boolean,default:!1},titles:{type:[Number,String],default:"是否确认删除该报价组？"},titleCon:{type:[Number,String],default:"注意待删除的报价组还存在客户哦"},isError:{type:Boolean,default:!0}},data:function(){return{randomNum:111,varInput:""}},watch:{dialogVisibles:function(e,t){var a=this;this.randomNumA(),this.$nextTick((function(){a.$refs.inputref.focus()}))}},methods:{msg:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({showClose:!0,message:e,type:t,duration:2e3})},handleAct:function(){if(this.$refs.inputref.focus(),""!=this.varInput)return this.varInput!==this.randomNum?(this.varInput="",this.msg("确认码有误!"),void this.randomNumA()):(this.varInput="",void this.$emit("callBack",!0));this.msg("请输入确认码!")},handleClose:function(e){this.varInput="",this.$emit("callBack",!1)},randomNumA:function(){this.randomNum=Math.floor(899*Math.random()+100)+""}}},O=I,E=(a("2a24"),Object(w["a"])(O,N,T,!1,null,null,null)),z=E.exports,F=(a("f1ac9"),a("49a5"),a("35dc"));function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y={mixins:[u["b"]],data:function(){var e=this;return{isButton:"",dialogVisibles:!1,maximum:5e3,scanUserIdCheck:!1,recWeightCheck:!1,customerIdCheck:!1,centerWeightCheck:!1,dialogVisibleTB:!1,exportErrorObj:{visible:!1,sum:1,current:0,fileName:"运单修改失败数据",excelData:[],columns:[{displayName:"运单号",name:"billCode",isCode:!0},{displayName:"业务员",name:"recMan",isCode:!0},{displayName:"客户",name:"customer",isCode:!0},{displayName:"下级网点",name:"subSite",isCode:!0},{displayName:"结算重量",name:"weight",isCode:!0},{displayName:"目的地市",name:"city",isCode:!0},{displayName:"处理结果",name:"msg",isCode:!0}]},importParams:{columns:[{displayName:"运单号",name:"billCode",size:120},{displayName:"业务员",name:"recMan",size:120},{displayName:"客户",name:"customer",size:80},{displayName:"下级网点",name:"subSite",size:80},{displayName:"结算重量",name:"weight",size:100},{displayName:"目的地市",name:"city",size:100}],batchUrl:"/bills/new/sendaBills/forcedUpdateOfImportData",updateData:[]},downloadDisabled:!1,rowData:{},cancleHexiaoFee:!1,billCodesList:[],isSelf:!1,currRoweq1:!1,feeCostDta:[],dialogVisiblecost:!1,dialogwidth:"560px",billCodeEdit:"",isradioEdits:!1,radioEdits:"",editTitle:"",signTimeEdit:"",billTimeEdit:this.moment().format("YYYY-MM-DD"),isbillTimeEdit:!1,customerIdEdit:"",iscustomerIdEdit:!1,userIdEdit:"",siteIdEdit:"",weightEdit:0,cityIdEdit:"",transportEdit:"",goodsTypeEdit:"",markEdit:"",isuserIdEdit:!1,issiteIdEdit:!1,isweightEdit:!1,iscityIdEdit:!1,istransportEdit:!1,isgoodsTypeEdit:!1,ismarkEdit:!1,dialogVisibleEdit:!1,radioPDS:"",dialogVisiblePD:!1,batchTitle:"",batchDialogVisible:!1,columns:[{displayName:"运单号",name:"billCode"}],supplementUrl:"",batchUrl:"",optionAdd:[{code:"",id:0,name:"为空"}],optionAdd2:[{children:[{fullName:"为空",id:0}]}],ishowHeights:0,ishowHeight:0,currRow:[],nameArr:["单号","包号"],billType:0,billCode:"",billCodes:"",bagNos:"",type:1,limit:31,accountUserType:"",dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],billsTypeStatus:[-2,-1,0,2,4,99],billsTypeStatusOld:[-2,-1,0,2,4,99],billsTypeStatusOptions:[{value:-2,label:"全部"},{value:-1,label:"无对象"},{value:0,label:"客户"},{value:2,label:"承包区"},{value:4,label:"业务员"},{value:99,label:"下级网点"}],billsTypeStatusEdit:0,billsTypeStatusOptionsEdit:[{value:0,label:"自营账单"},{value:99,label:"下级账单"}],accountUserId:"",siteId:"",signdate:[],customerId:"",userId:"",userProvCustomerId:"",userProvCustomerType:"",productType:-1,productOptions:[{label:"全部",value:-1},{label:"普通快件",value:1},{label:"星联件",value:2},{label:"星联冷链件",value:4},{label:"时效件",value:3}],feeType:-1,votesIsZeroOptions:[{value:-1,label:"全部"},{value:0,label:"＝0"},{value:1,label:"＞0"}],productId:"",cityId:"",provinceId:"",status:[-1,2,1,6],statusold:[-1,2,1,6],statusOptions:[{value:-1,label:"全部"},{value:2,label:"未扣款"},{value:1,label:"已线上扣款"},{value:6,label:"已线下收款"}],billTypes:-1,billTypesStatus:[-1,0,1,2,3],billsTypeOptions:[{value:-1,label:"全部"},{value:0,label:"电子面单"},{value:1,label:"普通面单"},{value:2,label:"星联面单"},{value:3,label:"时效面单"}],valueAddedType:[],jzchecked:-1,jzcheckedOptions:[{value:-1,label:"全部"},{value:0,label:"按单票"},{value:1,label:"按均重"}],signType:-1,signTypeOptions:[{value:-1,label:"全部"},{value:1,label:"已签收"},{value:0,label:"未签收"},{value:2,label:"第三方签收"}],transport:[],goodsType:[],weightS:"",weightE:"",firstDeduction:-1,firstDeductionOptions:[{value:-1,label:"全部"},{value:1,label:"一致"},{value:2,label:"不一致"}],isStatusOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:0,label:"否"}],isBack:-1,isBag:-1,isProblem:-1,isProblemOptions:[{value:-1,label:"全部"},{value:1,label:"是"},{value:2,label:"否"}],isFee:-1,isBillFee:-1,iswork:-1,zeroOptions:[{value:-1,label:"全部"},{value:-2,label:"＜0"},{value:0,label:"＝0"},{value:1,label:"＞0"}],valueAddedFee:-1,valueAddedFeeOptions:[{value:-1,label:"全部"},{value:0,label:"＝0"},{value:1,label:"＞0"}],tableData:[],tableHeadNew:{rowStyle:function(e){return 4!==Number(e.billStatus)&&6!==Number(e.billStatus)||1!==Number(e.tagCancelHexiaoFee)?4===Number(e.billStatus)||6===Number(e.billStatus)?{foreColor:"green"}:void 0:{foreColor:"red"}},columns:[]},tableHead:{rowStyle:function(e){return 4!==Number(e.billStatus)&&6!==Number(e.billStatus)||1!==Number(e.tagCancelHexiaoFee)?4===Number(e.billStatus)||6===Number(e.billStatus)?{foreColor:"green"}:void 0:{foreColor:"red"}},columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,hlock:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"运单号",name:"billCode",size:150,isCode:!0,hlock:!0,lock:!0,dblclick:function(t){window.open(e.z_param.billsUrl+t)}},{displayName:"扣款状态",name:"billStatus",size:100,hlock:!0,lock:!0,value:function(e){return Object(m["m"])(Number(e.billStatus))}},{displayName:"包号",name:"bagCode",size:150,hlock:!0,isCode:!0,lock:!0},{displayName:"账单日期",name:"billTime",size:120,hlock:!0,isFrozen:!0,lock:!0,formatter:"yyyy-MM-dd"},{displayName:"扫描时间",name:"scanTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"首重时间",name:"firstWeightTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"客户名称",name:"customerName",size:100,isCode:!0},{displayName:"客户编码",name:"customerCode",size:100,isCode:!0},{displayName:"业务员",name:"scanUserName",size:100,isCode:!0},{displayName:"业务员工号",name:"scanUserCode",size:100,isCode:!0},{displayName:"账单类型",name:"type",size:100,value:function(e){return Object(m["c"])(Number(e.type))}},{displayName:"结算对象",name:"accountUserName",size:100,isCode:!0},{displayName:"结算对象编码",name:"accountUserCode",size:100,isCode:!0},{displayName:"班次类型",name:"classTypeName",size:100},{displayName:"产品类型",name:"productName",size:100},{displayName:"物品类型",name:"goodsTypeName",size:100},{displayName:"增值类型",name:"valueAddedTypeName"},{displayName:"目的地省",name:"dispProvName",size:100,isCode:!0},{displayName:"目的地市",name:"dispCityName",size:100,isCode:!0},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"网点重量",name:"recWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"中心重量",name:"centerWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"派件网点",name:"dispSiteName",size:100,isCode:!0},{displayName:"签收网点",name:"signSiteName",size:100,isCode:!0},{displayName:"签收状态",name:"signStatus",size:100,value:function(e){return Object(m["x"])(Number(e.signStatus))}},{displayName:"签收时间",name:"signTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"面单费",name:"szBillFee",size:100,showTotal:!0,formatter:"0.00",value:function(e){return 0===e.billStatus||1===e.billStatus?"":e.szBillFee}},{displayName:"增值加收费",name:"valueAddedFee",showTotal:!0,value:function(e){return 0===e.billStatus||1===e.billStatus?"":e.valueAddedFee}},{displayName:"中转费/运费/通票费",name:"avgWeightFee",size:150,showTotal:!0,formatter:"0.00",value:function(e){return 0===e.billStatus||1===e.billStatus?"":e.avgWeightFee}},{displayName:"操作费/附加费/加收费",name:"operAddFee",size:150,showTotal:!0,formatter:"0.00",value:function(e){return 0===e.billStatus||1===e.billStatus?"":e.operAddFee}},{displayName:"应收费用",name:"toAccountFee",showTotal:!0,formatter:"0.00",value:function(e){var t=e.billStatus,a=e.toAccountFee;return 0===t||1===t?"":a}},{displayName:"掌中通现付值",name:"commonFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"代收到付类型",name:"goodsPaymentTypeName",size:100},{displayName:"代收到付款",name:"goodsPaymentFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"计算方式",name:"avgStatus",size:100,value:function(e){return Object(m["r"])(Number(e.avgStatus))}},{displayName:"是否锁定",name:"lockStatus",size:100,value:function(e){return Object(m["s"])(Number(e.lockStatus))}},{displayName:"锁定/解锁时间",name:"lockTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"锁定/解锁人",name:"lockManName",size:100,isCode:!0},{displayName:"退件标识",name:"returnStatus",size:100,value:function(e){return Object(m["s"])(Number(e.returnStatus))}},{displayName:"问题件",name:"problemPiecesType",size:100,value:function(e){return Object(m["s"])(Number(e.problemPiecesType))}},{displayName:"面单类型",name:"billType",size:100,value:function(e){return Object(m["t"])(Number(e.billType))}},{displayName:"数据来源",name:"dataSource",size:100,value:function(e){return Object(m["h"])(Number(e.dataSource))}},{displayName:"运单发放",name:"billProvideManName",size:100,isCode:!0},{displayName:"运单发放网点",name:"billUseSiteName",size:100,isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"扣款人",name:"hexiaoMan",size:100,isCode:!0},{displayName:"上次扣款金额",name:"hexiaoFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"上次扣款对象",name:"hexiaoUserName",size:100},{displayName:"修改时间",name:"feeModifieTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"修改人",name:"editor",size:100,isCode:!0},{displayName:"订单渠道",name:"orderSource",size:100,isCode:!0},{displayName:"订单编号",name:"orderCode",size:100,isCode:!0},{displayName:"交易号",name:"partnerTradeId",size:100,isCode:!0},{displayName:"订单重量",name:"parcelWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扫描员",name:"scanName",size:100,isCode:!0},{displayName:"扫描员工号",name:"scanCode",size:100,isCode:!0},{displayName:"总成本",name:"totalCost",size:100,showTotal:!0,formatter:"0.00",dblclick:function(t,a){e.showDig(a)}},{displayName:"代收到付手续费",name:"szGoodsPaymentServiceFee",size:120,showTotal:!0,formatter:"0.00"},{displayName:"中转费成本",name:"centerRecFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"二级中转费",name:"twoLevelFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"有偿派费",name:"dispFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"罚款",name:"fine",size:100,showTotal:!0,formatter:"0.00"},{displayName:"面单成本",name:"billCost",size:100,showTotal:!0,formatter:"0.00"},{displayName:"建包费",name:"creaBagFee",size:100,showTotal:!0,formatter:"0.00",value:function(t){return e.fmtCreaBagFee(t.creaBagFee)}},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},exportObj:{fileName:"收发件费用-收自营账单"},optionsClone:"",exportUrl:"/bills/new/sendaBills/export",settleParam:{types:""}}},created:function(){"57210"===this.z_param.siteInfo.siteCode?this.maximum=1e4:this.maximum=5e3},methods:(x={onColumns:function(e){this.tableHeadNew.columns=e},changnub:function(e){if(-1===e.indexOf(-2)&&this.billsTypeStatusOld.indexOf(-2)>-1)this.billsTypeStatus=[];else if(e.indexOf(-2)>-1&&this.billsTypeStatusOld.indexOf(-2)>-1){var t=e.indexOf(-2);t>-1&&(e.splice(t,1),this.billsTypeStatus=e)}else(-1===e.indexOf(-2)&&5===e.length||-2===e[e.length-1])&&(this.billsTypeStatus=[-2,-1,0,2,4,99]);this.billsTypeStatusOld=this.billsTypeStatus},changnub2:function(e){if(-1===e.indexOf(-1)&&this.statusold.indexOf(-1)>-1)this.status=[];else if(e.indexOf(-1)>-1&&this.statusold.indexOf(-1)>-1){var t=e.indexOf(-1);t>-1&&(e.splice(t,1),this.status=e)}else(-1===e.indexOf(-1)&&3===e.length||-1===e[e.length-1])&&(this.status=[-1,2,1,6]);this.statusold=this.status},showSynchronousBillIssue:function(){this.isButton="",this.$refs.synchronousBillIssue.show=!0},errorData:function(e){e.map((function(e){e.billCode=Object(d["trim"])(e.billCode)?Object(d["trim"])(e.billCode):"",e.recMan=Object(d["trim"])(e.recMan)?Object(d["trim"])(e.recMan):"",e.customer=Object(d["trim"])(e.customer)?Object(d["trim"])(e.customer):"",e.subSite=Object(d["trim"])(e.subSite)?Object(d["trim"])(e.subSite):"",e.weight=Object(d["trim"])(e.weight)?Object(d["trim"])(e.weight):"",e.city=Object(d["trim"])(e.city)?Object(d["trim"])(e.city):"",e.billCode&&(e.billCode=Object(d["trim"])(e.billCode).replace(/[(\n)+]|[(\r\n)+]/g,""),e.billCode=e.billCode.replace(/,/g,"，")),e.recMan&&(e.recMan=Object(d["trim"])(e.recMan).replace(/[(\n)+]|[(\r\n)+]/g,""),e.recMan=e.recMan.replace(/,/g,"，")),e.customer&&(e.customer=Object(d["trim"])(e.customer).replace(/[(\n)+]|[(\r\n)+]/g,""),e.customer=e.customer.replace(/,/g,"，")),e.subSite&&(e.subSite=Object(d["trim"])(e.subSite).replace(/[(\n)+]|[(\r\n)+]/g,""),e.subSite=e.subSite.replace(/,/g,"，")),e.weight&&(e.weight=Object(d["trim"])(e.weight).replace(/[(\n)+]|[(\r\n)+]/g,""),e.weight=e.weight.replace(/,/g,"，")),e.city&&(e.city=Object(d["trim"])(e.city).replace(/[(\n)+]|[(\r\n)+]/g,""),e.city=e.city.replace(/,/g,"，")),e.msg&&(e.msg=Object(d["trim"])(e.msg).replace(/[(\n)+]|[(\r\n)+]/g,""),e.msg=e.msg.replace(/,/g,"，"))})),this.exportErrorObj=P({},this.exportErrorObj,{sum:1,current:1,excelData:e,visible:!1}),this.exportErrorCsv(this)},exportErrorCsv:function(e){e.exportErrorObj.visible=!0},closeDialogtest:function(e){this.exportErrorObj.visible=e,this.exportErrorObj.current=1},dataValidate:function(e){return new Promise((function(t,a){var i="";Object(d["trim"])(e.subSite)||Object(d["trim"])(e.customer)||Object(d["trim"])(e.recMan)?Object(d["trim"])(e.subSite)&&(Object(d["trim"])(e.customer)||Object(d["trim"])(e.recMan))&&(i="无法确定账单属于自营或下级!"):i="无法确定账单属于自营或下级!",e.weight&&(/^\d+(\.\d{1,100})?$/.test(e.weight)||(i+="结算重量必须为有效数字!"),e.weight>999&&(i+="金额不能大于999!")),i?a(i):(e.billCode=String(e.billCode).replace(/[(\n)+]|[(\r\n)+]/g,""),Object(d["trim"])(e.recMan)&&(e.recMan=String(e.recMan).replace(/[(\n)+]|[(\r\n)+]/g,"")),Object(d["trim"])(e.customer)&&(e.customer=String(e.customer).replace(/[(\n)+]|[(\r\n)+]/g,"")),Object(d["trim"])(e.subSite)&&(e.subSite=String(e.subSite).replace(/[(\n)+]|[(\r\n)+]/g,"")),Object(d["trim"])(e.weight)&&(e.weight=String(e.weight).replace(/[(\n)+]|[(\r\n)+]/g,"")),Object(d["trim"])(e.city)&&(e.city=String(e.city).replace(/[(\n)+]|[(\r\n)+]/g,"")),t(e))}))},batchImport:function(){this.editTitle="导入",this.$refs.batchImportRef.import()},downloadBoard:function(){var e=this;this.downloadDisabled=!0,setTimeout((function(){e.downloadDisabled=!1}),1500)},supplement:function(){this.isButton="",this.$refs.supplementRef.handleOpen()},supplementaction:function(e){this.currRow=Object(d["cloneDeep"])(e),this.batchDialogVisible=!0,this.batchUrl="/bills/new/sendaBills/supplyBill",this.batchTitle="补单号"},showDig:function(e){this.dialogVisiblecost=!0,this.feeCostDta=[{name:"代收到付手续费",fee:e.szGoodsPaymentServiceFee},{name:"中转费成本",fee:e.centerRecFee},{name:"二级中转费",fee:e.twoLevelFee},{name:"有偿派费",fee:e.dispFee},{name:"业务员提成",fee:e.userRoyalty},{name:"罚款",fee:e.fine},{name:"面单成本",fee:e.billCost},{name:"建包费",fee:this.fmtCreaBagFee(e.creaBagFee)},{name:"总成本",fee:e.totalCost}]},fmtCreaBagFee:function(e){return e||0},othersD:function(e,t){var a=this;this.reset(),this.type=1,this.dateValue=[this.moment(e.billDate).format("YYYY-MM-DD"),this.moment(e.billDate).format("YYYY-MM-DD")],"totalZeroCount"===t&&(this.feeType=0),this.settleParam.types="0",this.accountUserType=0,this.billsTypeStatus=[0],setTimeout((function(){a.accountUserId=e.accountUserId,a.onSearch()}),100)},othersDa:function(e,t){var a=this;this.reset(),this.type=4,this.timeValue=[this.moment(e.scanDate).format("YYYY-MM-DD")+" 08:00:00",this.moment(e.scanDate).add(1,"day").format("YYYY-MM-DD")+" 08:00:00"],this.jzchecked=1,"undoBillCount"===t?this.status=[2]:"signTicketCount"===t?this.signType=1:"problemCount"===t?this.isProblem=1:"returnCount"===t&&(this.isBack=1),this.settleParam.types="2",this.accountUserType=2,this.billsTypeStatus=[2],setTimeout((function(){a.accountUserId=e.accountUserId,a.onSearch()}),0)},detailed:function(e,t){var a=this;this.reset(),this.type=1,this.dateValue=[this.moment(e.scanComeDate).format("YYYY-MM-DD"),this.moment(e.scanComeDate).format("YYYY-MM-DD")],"votesIsZero"===t&&(this.feeType=0),this.settleParam.types="99",this.billsTypeStatus=[99],this.accountUserType=99,setTimeout((function(){a.accountUserId=e.scanSiteId,a.onSearch()}),0)},interDetail:function(e,t){var a=this;this.reset(),"countWeiHexiao"===t&&(this.status=[2]),"countFeeZero"===t&&(this.feeType=0),this.dateValue=[this.moment(e.billDate).format("YYYY-MM-DD"),this.moment(e.billDate).format("YYYY-MM-DD")],"承包区"===e.type?(this.billsTypeStatus=[2],this.accountUserType=2):"业务员"===e.type&&(this.billsTypeStatus=[4],this.accountUserType=4),this.settleParam.types="2,4",setTimeout((function(){a.accountUserId=e.accountUserId,a.onSearch()}),0)},clickitem:function(e){e===this.radioEdits?this.radioEdits="":this.radioEdits=e},handleClose:function(){this.dialogVisiblecost=!1,this.dialogVisiblePD=!1,this.radioPDS="",this.dialogVisibleEdit=!1,this.radioEdits="",this.editTitle="",this.billCodeEdit="",this.signTimeEdit="",this.billTimeEdit=this.moment().format("YYYY-MM-DD"),this.isbillTimeEdit=!1,this.customerIdEdit="",this.iscustomerIdEdit=!1,this.userIdEdit="",this.siteIdEdit="",this.weightEdit=0,this.cityIdEdit="",this.transportEdit=1,this.goodsTypeEdit=1,this.markEdit="",this.isuserIdEdit=!1,this.issiteIdEdit=!1,this.isweightEdit=!1,this.iscityIdEdit=!1,this.istransportEdit=!1,this.isgoodsTypeEdit=!1,this.ismarkEdit=!1,this.isradioEdits=!1,this.billsTypeStatusEdit=0,this.radioEdits="",this.currRoweq1=!this.currRoweq1,this.dialogVisibleTB=!1,this.scanUserIdCheck=!1,this.recWeightCheck=!1,this.customerIdCheck=!1,this.centerWeightCheck=!1},reset:function(){this.billCode="",this.type=1,this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")],this.timeValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"],this.billsTypeStatus=[-2,-1,0,2,4,99],this.billsTypeStatusOld=[-2,-1,0,2,4,99],this.accountUserId="",this.accountUserType="",this.siteId="",this.signdate=[],this.customerId="",this.userId="",this.userProvCustomerId="",this.userProvCustomerType="",this.feeType=-1,this.productId="",this.cityId="",this.provinceId="",this.status=[-1,2,1,6],this.statusold=[-1,2,1,6],this.billTypes=-1,this.billTypesStatus=[-1,0,1,2,3],this.signType=-1,this.transport=-1,this.weightS="",this.weightE="",this.firstDeduction=-1,this.isBack=-1,this.isBag=-1,this.isProblem=-1,this.isFee=-1,this.isBillFee=-1,this.iswork=-1,this.$refs.billcodeRef.type=!0,this.jzchecked=-1,this.valueAddedType=-1,this.valueAddedFee=-1,this.productType=-1,this.$refs.topSearchTransport.initAllSelected(),this.$refs.topSearchGoods.initAllSelected(),this.$refs.topSearchValueAdded.initAllSelected()},keyup:function(){this.billCode=this.billCode.replace(/,/g,"").replace(/，/g,"")},keyupEdit:function(){this.billCodeEdit=this.billCodeEdit.replace(/，/g,"")},settlementChange:function(e){this.accountUserType=null!==e?e.type:""},userProvCustomerChange:function(e){this.userProvCustomerType=null!==e?e.type:""}},Object(r["a"])(x,"keyupEdit",(function(){this.billCodeEdit=this.billCodeEdit.replace(/,/g,"").replace(/，/g,"")})),Object(r["a"])(x,"changeType",(function(e){1===e?this.dateValue=[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().format("YYYY-MM-DD")]:this.timeValue=4===e?[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 08:00:00",this.moment().format("YYYY-MM-DD")+" 08:00:00"]:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().format("YYYY-MM-DD")+" 23:59:59"]})),Object(r["a"])(x,"getType",(function(e){this.billType=e?0:1})),Object(r["a"])(x,"isearchExport",(function(){0!==this.tableData.length?this.optionsClone.billCode?(this.checklistData=this.tableData,this.checklistExport()):this.pagination.total>this.pagination.pageSize?this.pagination.total>8e5?this.msg("最大只支持导出80万，请选择更精准的查询条件"):this.$refs.asyncExport.export():(this.checklistData=this.tableData,this.checklistExport()):this.msg("没有数据无法导出")})),Object(r["a"])(x,"close",(function(e){this.batchDialogVisible=!1,this.currRow=[],"补单号"!==this.editTitle&&(this.optionsClone.currentPage=this.pagination.currentPage,this.pagination.currentPage=this.pagination.currentPage,this.query(this.optionsClone)),this.handleClose()})),Object(r["a"])(x,"showCell",(function(){this.$refs.refTxCell.open()})),Object(r["a"])(x,"onSearch",(function(){this.currRow=[];var e="",t=2===this.type?"收件":3===this.type?"到件":4===this.type?"首重":"";if(this.billCode){if(!p["billUtils"].regRemark(this.billCode))return void this.msg("单号不能有特殊符号和表情");var a=Object(d["trim"])(this.billCode).split(/[\r\n]/);if(a.length>1e3)return void this.msg("最多支持1000个运单号查询");e=a.join(",")}else{var i=!1,s=!1;if(1===this.type){if(3===this.dateValue.length){if(this.dateValue[2]<0)return void this.msg("账单开始日期不能大于结束日期,请重新选择账单日期");if(this.limit<=this.dateValue[2])return void this.msg("账单日期最多可查询"+this.limit+"天");s=!0}else if(3!==this.signdate.length&&(i=!0),i=!(!this.dateValue[0]&&!this.dateValue[1])||0===this.signdate.length,i)return void this.msg("请填写完整的账单日期")}else if(3===this.timeValue.length){if(this.timeValue[2]<0)return void this.msg(t+"开始时间不能大于结束时间,请重新选择"+t+"时间");if(this.limit<=this.timeValue[2])return void this.msg(t+"时间最多可查询"+this.limit+"天");s=!0}else if(3!==this.signdate.length&&(i=!0),i=!(!this.timeValue[0]&&!this.timeValue[1])||0===this.signdate.length,i)return void this.msg("请填写完整的"+t+"时间");if(3===this.signdate.length){if(this.signdate[2]<0)return void this.msg("签收开始日期不能大于结束日期,请重新选择签收日期");if(this.limit<=this.signdate[2])return void this.msg("签收日期最多可查询"+this.limit+"天")}else if(0!==this.signdate.length){if(i)return void this.msg("请填写完整的签收日期");if(this.signdate[0]||this.signdate[1])return void this.msg("请填写完整的签收日期");if(!s)return t=t?t+"时间":"账单日期",void this.msg("请填写完整的"+t)}if(4===this.type&&!this.accountUserId)return void this.msg("请选择结算对象")}if((this.weightS||0===this.weightS)&&(this.weightE||0===this.weightE)&&this.weightS>this.weightE)this.msg("结算的开始重量不可大于结束重量");else{this.pagination.currentPage=1;var n={billCodes:"",bagNos:"",type:this.type,startDate:1===this.type?null==this.dateValue[0]?"":this.dateValue[0]+" 00:00:00":null==this.timeValue[0]?"":this.timeValue[0],endDate:1===this.type?null==this.dateValue[1]?"":this.dateValue[1]+" 23:59:59":null==this.timeValue[1]?"":this.timeValue[1],startSignDate:null==this.signdate[0]?"":this.signdate[0]+" 00:00:00",endSignDate:null==this.signdate[1]?"":this.signdate[1]+" 23:59:59",accountUserId:this.accountUserId,accountUserType:this.accountUserType,lowSiteId:this.siteId,customerId:this.customerId,salesmanId:this.userId,userProvCustomerId:this.userProvCustomerId,userProvCustomerType:this.userProvCustomerType,dispatchId:this.cityId,dispProvId:this.provinceId,cancleHexiaoFee:!0===this.cancleHexiaoFee?this.cancleHexiaoFee:void 0,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage,valueAddedFee:this.valueAddedFee,billTypes:this.billTypes,productType:this.productType};if(0===this.userProvCustomerId&&(n.userProvCustomerType=-3),this.billsTypeStatus.length>0)n.billType=this.billsTypeStatus.join(",");else if(!this.billCode)return void this.msg("请选择账单类型");if(-1!==this.feeType&&(n.isZeroFee=this.feeType),this.status.length>0)n.billStatus=this.status.join(",");else if(!this.billCode)return void this.msg("请选择扣款状态");-1!==this.signType&&(n.signStatus=this.signType),this.transport.length>0&&(n.classTypes=this.transport.join(",")),this.goodsType.length>0&&(n.objectTypes=this.goodsType.join(",")),this.valueAddedType.length>0&&(n.valueAddedTypes=this.valueAddedType.join(",")),(this.weightS||0===this.weightS)&&(n.accountWeightStart=this.weightS),(this.weightE||0===this.weightE)&&(n.accountWeightEnd=this.weightE),-1!==this.firstDeduction&&(n.hexiaoFeeStatus=this.firstDeduction),-1!==this.isBack&&(n.returnStatus=this.isBack),-1!==this.isFee&&(n.renewalFeeType=this.isFee),-1!==this.isProblem&&(n.problemPiecesType=this.isProblem),-1!==this.isBillFee&&(n.areaBillFeeTypes=this.isBillFee),-1!==this.isBag&&(n.isPackage=this.isBag),-1!==this.iswork&&(n.areaOperFeeIsZero=this.iswork),e&&(0===this.billType?n.billCodes=e:n.bagNos=e),-1!==this.jzchecked&&(n.avgStatus=this.jzchecked),this.optionsClone=Object(d["cloneDeep"])(n),this.query(n)}})),Object(r["a"])(x,"query",(function(e){var t=this;Object(h["Dc"])(e).then((function(e){t.settleParam.types&&(t.settleParam.types=""),0===e.code?e.data&&e.data.list.length>0?(t.tableData=e.data.list,t.optionsClone.billCodes?t.pagination.total=0:t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.settleParam.types&&(t.settleParam.types=""),t.pagination.total=0,t.tableData=[]}))})),Object(r["a"])(x,"delDataValidate",(function(e){var t=this;return new Promise((function(a,i){if("删单号"===t.isButton)return a({billCodes:[e.billCode]});a(e)}))})),Object(r["a"])(x,"callBack",(function(e){e&&(this.batchDialogVisible=!0,this.batchTitle="执行删单号",this.batchUrl="/bills/senda/delSendaByBillCodes",this.columns=[{displayName:"运单号",name:"billCode"}]),this.dialogVisibles=!1})),Object(r["a"])(x,"delBillNo",(function(){for(var e=0;e<this.currRow.length;e++)if(4===this.currRow[e].billStatus||6===this.currRow[e].billStatus)return this.msg("已线上扣款/已线下收款不允许删除数据");this.isButton="删单号",this.dialogVisibles=!0})),Object(r["a"])(x,"checkBill",(function(e){var t=this;if(this.isButton="",console.log(e),this.batchTitle=e.toElement.innerText,0!==this.currRow.length)if(console.log("this.batchTitle===>"+this.batchTitle),"编辑"==this.batchTitle)if(this.dialogwidth="560px",this.currRoweq1=1===this.currRow.length,this.editTitle="编辑",1===this.currRow.length){var a=this.currRow[0];this.$refs.edit.dialogVisible=!0,this.$refs.edit.dialogVisibleList=!1,this.$nextTick((function(){setTimeout((function(){t.editTitle="编辑",t.billCodeEdit=a.billCode,t.signTimeEdit=a.scanTime?t.moment(a.scanTime).format("YYYY-MM-DD HH:mm:ss"):"",t.isradioEdits=99===a.type,t.billTimeEdit=t.moment(a.billTime).format("YYYY-MM-DD"),0!==a.customerId?t.customerIdEdit=a.customerId:t.customerIdEdit="",0!==a.scanUserId?t.userIdEdit=a.scanUserId:t.userIdEdit="",0!==a.recSiteId?t.siteIdEdit=a.recSiteId:t.siteIdEdit="",t.weightEdit=a.accountWeight,0!==a.dispCityId?t.cityIdEdit=a.dispCityId:t.cityIdEdit="",0!==a.classType&&(t.transportEdit=a.classType),0!==a.goodsType&&(t.goodsTypeEdit=a.goodsType),t.markEdit=a.remark,console.info("行数据",a,"编辑属性",t.$refs.edit.editOne,t.$refs.edit.optionsClone),t.$refs.edit.editOne.billcode="",t.$refs.edit.editOne.scanTime="",t.$refs.edit.editOne.bills="",t.$refs.edit.editOne.statementDate="",t.$refs.edit.editOne.siteId="",t.$refs.edit.editOne.userId="",t.$refs.edit.editOne.customerId="",t.$refs.edit.editOne.weight="",t.$refs.edit.editOne.cityId="",t.$refs.edit.editOne.transport=-1,t.$refs.edit.editOne.productId="",t.$refs.edit.editOne.remarks="",t.$refs.edit.editOne.billcode=a.billCode,t.$refs.edit.editOne.scanTime=a.scanTime,t.$refs.edit.editOne.statementDate=a.billDate,t.$nextTick((function(){t.$refs.edit.editOne.siteId=a.accountUserId,t.$refs.edit.editOne.userId=a.scanUserId,t.$refs.edit.editOne.customerId=a.customerId})),t.$refs.edit.editOne.weight=a.accountWeight,0===a.dispCityId?t.$refs.edit.editOne.cityId="":t.$refs.edit.editOne.cityId=a.dispCityId,console.info("物品类型",a.goodsType),t.$refs.edit.editOne.transport=a.classType,t.$refs.edit.editOne.productId=a.goodsType,t.$refs.edit.editOne.remarks=a.remark,t.rowData=a,!0===t.isradioEdits?(console.info("下级"),t.isSelf=!1,t.$refs.edit.editOne.userId="",t.$refs.edit.editOne.customerId=""):(console.info("自营"),t.isSelf=!0,t.$refs.edit.editOne.siteId="")}),0)}))}else this.currRow.forEach((function(e,a,i){t.billCodesList.push(e.billCode)})),this.batchUrl="/bills/new/sendaBills/forcedUpdate",this.editTitle="批量编辑",this.batchTitle=this.editTitle,this.$refs.edit.billCode="",this.$refs.edit.isbillDate=!1,this.$refs.edit.billDate=this.moment().format("YYYY-MM-DD"),this.$refs.edit.isWeight=!1,this.$refs.edit.batchWeight="",this.$refs.edit.isCity=!1,this.$refs.edit.batchCityId="",this.$refs.edit.isTransport=!1,this.$refs.edit.batchTransport=1,this.$refs.edit.isItem=!1,this.$refs.edit.batchItemType=1,this.$refs.edit.isRemarks=!1,this.$refs.edit.batchremarks="",this.$refs.edit.subordinate=!1,this.$refs.edit.selfSupport=!1,this.$refs.edit.isOutlets=!1,this.$refs.edit.batchSiteId="",this.$refs.edit.isUser=!1,this.$refs.edit.batchUserId="",this.$refs.edit.isCustomer=!1,this.$refs.edit.batchCustomerId="",this.$refs.edit.dialogVisible=!1,this.$refs.edit.dialogVisibleList=!0,this.$nextTick((function(){t.customerIdEdit="",t.userIdEdit="",t.siteIdEdit="",t.cityIdEdit=""}));else"批带"==this.batchTitle?this.dialogVisiblePD=!0:"补单号"==this.batchTitle?(this.dialogwidth="750px",this.billCodeEdit="",this.editTitle="补单号",this.billTimeEdit=this.moment().format("YYYY-MM-DD"),this.weightEdit=0,this.billsTypeStatusEdit=0,this.transportEdit=1,this.goodsTypeEdit=1,this.dialogVisibleEdit=!0):"同步信息"==this.batchTitle?(this.editTitle="同步信息",this.dialogVisibleTB=!0,this.scanUserIdCheck=!1,this.recWeightCheck=!1,this.customerIdCheck=!1,this.centerWeightCheck=!1):this.checkBillPost();else this.msg("请选择需要的数据！")})),Object(r["a"])(x,"getCurrRow",(function(e){var t=this;console.info("row",e),this.$nextTick((function(){t.currRow=e}))})),Object(r["a"])(x,"checkBillPost",(function(){var e=this;if(this.columns=[{displayName:"运单号",name:"billCode"}],"线上扣款"==this.batchTitle)this.batchUrl="/bills/new/sendaBills/hexiao";else if("线下收款"==this.batchTitle)this.batchUrl="/bills/new/sendaBills/offLineCollection";else if("取消扣款"==this.batchTitle)this.batchUrl="/bills/new/sendaBills/fanhexiao";else if("重新计算"==this.batchTitle)this.batchUrl="/bills/new/sendaBills/recalculate";else if("锁定"==this.batchTitle)this.currRow.map((function(e){e.isLock=1})),this.currRow=Object(d["cloneDeep"])(this.currRow),this.batchUrl="/bills/new/sendaBills/lock";else if("解锁"==this.batchTitle)this.currRow.map((function(e){e.isLock=0})),this.currRow=Object(d["cloneDeep"])(this.currRow),this.batchUrl="/bills/new/sendaBills/lock";else if("编辑"==this.batchTitle||"批量编辑"==this.batchTitle){if(2===this.radioEdits&&!this.siteIdEdit)return void this.msg("请选择下级网点");var t={};"编辑"===this.batchTitle?t.forcedUpdate=!0:t.forcedUpdate=!1,(this.istransportEdit||"编辑"===this.batchTitle)&&(t.classType=this.transportEdit),(this.isgoodsTypeEdit||"编辑"===this.batchTitle)&&(t.goodsType=this.goodsTypeEdit),(this.isweightEdit||"编辑"===this.batchTitle)&&(t.accountWeight=this.weightEdit),(this.isbillTimeEdit||"编辑"===this.batchTitle)&&(t.billDate=this.billTimeEdit?this.moment(this.billTimeEdit).format("YYYY-MM-DD"):""),this.radioEdits&&(t.types=this.radioEdits),(this.iscityIdEdit||"编辑"===this.batchTitle)&&(t.dispCityId=this.cityIdEdit?this.cityIdEdit:0),(this.ismarkEdit||"编辑"===this.batchTitle)&&(t.remark=this.markEdit?this.markEdit:""),!this.issiteIdEdit&&"编辑"!==this.batchTitle||2!==this.radioEdits&&""!==this.radioEdits||(t.accountUserId=this.siteIdEdit?this.siteIdEdit:0),!this.iscustomerIdEdit&&"编辑"!==this.batchTitle||1!==this.radioEdits&&""!==this.radioEdits||(t.customerId=this.customerIdEdit?this.customerIdEdit:0),!this.isuserIdEdit&&"编辑"!==this.batchTitle||1!==this.radioEdits&&""!==this.radioEdits||(t.scanUserId=this.userIdEdit?this.userIdEdit:0),this.currRow=this.currRow.map((function(a){return P({},t,{billCode:a.billCode,forcedUpdate:"批量编辑"!==e.batchTitle})})),this.currRow=Object(d["cloneDeep"])(this.currRow),this.dialogVisibleEdit=!1,this.batchUrl="/bills/new/sendaBills/forcedUpdate"}else if("批带"==this.batchTitle)this.currRow=this.currRow.map((function(t){return{billCode:t.billCode,batchType:e.radioPDS}})),this.currRow=Object(d["cloneDeep"])(this.currRow),this.dialogVisiblePD=!1,this.batchUrl="/bills/new/sendaBills/batch";else if("补单号"==this.batchTitle){if(99===this.billsTypeStatusEdit&&!this.siteIdEdit)return void this.msg("请选择下级网点");if(99===this.billsTypeStatusEdit&&!this.cityIdEdit)return void this.msg("请选择目的市");var a="";if(!this.billCodeEdit||!Object(d["trim"])(this.billCodeEdit)||","===Object(d["trim"])(this.billCodeEdit))return void this.msg("请输入单号");a=Object(d["trim"])(this.billCodeEdit).split(/[,\r\n]/);var i=/^[a-z0-9\,]+$/i;if(!i.test(a.join(",")))return void this.msg("当前单号有特殊字符、中文或表情");for(var s=0;s<a.length;s++)""!=a[s]&&null!=a[s]&&void 0!=Object(o["a"])(a[s])||(a.splice(s,1),s-=1);if(a.length>100)return void this.msg("最多支持100个单号查询");var n={type:this.billsTypeStatusEdit,billDate:this.moment(this.billTimeEdit).format("YYYY-MM-DD"),classType:this.transportEdit,goodsType:this.goodsTypeEdit,accountWeight:this.weightEdit};99===this.billsTypeStatusEdit?n.oneSiteId=this.siteIdEdit:(this.customerIdEdit&&(n.customerId=this.customerIdEdit),this.userIdEdit&&(n.userId=this.userIdEdit)),this.cityIdEdit&&(n.cityId=this.cityIdEdit),this.markEdit&&(n.remark=this.markEdit),this.currRow=a.map((function(e){return P({},n,{billCode:e})})),this.dialogVisibleEdit=!1,this.batchUrl="/bills/new/sendaBills/againScanRec"}else if("同步信息"==this.batchTitle){this.dialogVisibleTB=!1;var l={};this.scanUserIdCheck&&(l.scanUserId=1),this.recWeightCheck&&(l.recWeight=1),this.customerIdCheck&&(l.customerId=1),this.centerWeightCheck&&(l.centerWeight=1),this.currRow=this.currRow.map((function(e){return P({},l,{billCode:e.billCode})})),this.currRow=Object(d["cloneDeep"])(this.currRow),this.batchUrl="/bills/new/sendaBills/handSyncSendaBillsInfo"}this.batchDialogVisible=!0})),Object(r["a"])(x,"checkboxAllClick",(function(e){this.selectionSite([],e)})),Object(r["a"])(x,"selectionSite",(function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))})),Object(r["a"])(x,"proving",(function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e})),x),watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},weightS:{handler:function(e,t){var a=e+"";a.length<=12?(a=a.split("."),a[0].length<=9?this.weightS=this.proving(e):this.weightS=t):this.weightS=t}},weightE:{handler:function(e,t){var a=e+"";a.length<=12?(a=a.split("."),a[0].length<=9?this.weightE=this.proving(e):this.weightE=t):this.weightE=t}},weightEdit:{handler:function(e,t){if(e){var a=e+"";a.length<=12?(a=a.split("."),a[0].length<=9?this.weightEdit=this.proving(e):this.weightEdit=t):this.weightEdit=t}else this.weightEdit=0}},markEdit:{handler:function(e,t){p["billUtils"].regRemark(e)?this.markEdit=e:this.markEdit=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-340:this.z_param.isNode?this.$store.getters.clientHeight-400:this.$store.getters.clientHeight-340},isTD:function(){return!this.scanUserIdCheck&&(!this.recWeightCheck&&(!this.customerIdCheck&&!this.centerWeightCheck))}},components:{detailEdit:_,synchronousBillIssue:F["a"],verification:z}},j=Y,$=(a("efa8"),Object(w["a"])(j,n,l,!1,null,null,null)),H=$.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main sendReceiveFeeSummary"},[a("show-more",{attrs:{msg:"提示:下级账单在本页面扣款，在发件费用明细页面中编辑;"},model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content"},[a("ul",{staticClass:"clear-both"},[a("li",[a("label",{staticClass:"w-r-62"},[e._v("账单日期：")]),a("sz-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("下级网点：")]),a("sc-site",{attrs:{param:{child:!0}},model:{value:e.siteId,callback:function(t){e.siteId=t},expression:"siteId"}})],1),a("li",[a("label",{staticClass:"w-r-62"},[e._v("扣款状态：")]),a("el-select",{model:{value:e.deductStatus,callback:function(t){e.deductStatus=t},expression:"deductStatus"}},e._l(e.deductStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"buttonMove"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1),a("div",{staticStyle:{clear:"both"}})])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下级网点的数据，同步扣款至下级网点中天预付款账户。",placement:"bottom-start"}},[e.z_method.showBtn("btn_sendReceiveFee_toChargeNet")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            线上扣款\n          ")])],1):e._e()]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下级网点的数据，通过线下结算的，可进行标记作用，不产生中天预付款流水变化。",placement:"bottom-start"}},[e.z_method.showBtn("btn_sendReceiveFee_underlineChargeNet")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            线下收款\n          ")])],1):e._e()]),e.z_method.showBtn("btn_sendReceiveFee_cancelToChargeNet")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            取消扣款\n          ")])],1):e._e()],1)]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:e.batchUrl,"data-validate":e.dataValidate},on:{model:e.close}})],1)},R=[],q=(a("cc57"),{mixins:[u["b"]],data:function(){var e,t=this;return e={ishowHeights:0,ishowHeight:0,dateValue:[this.moment(new Date).subtract(2,"days").format("YYYY-MM-DD"),this.moment(new Date).subtract(1,"days").format("YYYY-MM-DD")],limit:31,siteId:"",deductStatus:-1,deductStatusOptions:[{value:-1,label:"全部"},{value:0,label:"未扣款"},{value:1,label:"待扣款"},{value:2,label:"已线上扣款"},{value:3,label:"已线下收款"}],votesIsZero:-1,votesIsZeroOptions:[{value:-1,label:"全部"},{value:1,label:"＝0"},{value:2,label:"≥1"}],currRow:[],tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,onchange:function(e,a){t.selectionSite(e,a)},dblclick:function(e){t.selectionSite()}},{displayName:"账单日期",name:"scanComeDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"下级网点",name:"scanSite",size:100,isCode:!0},{displayName:"下级网点编码",name:"scanSiteCode",size:100,isCode:!0},{displayName:"到件票数",name:"comeNum",size:100,showTotal:!0},{displayName:"结算重量",name:"accountWeight",size:100,showTotal:!0,formatter:"0.00"},{displayName:"增值加收费",name:"valueAddedFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"中转费/通票费",name:"centerRecFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"操作费/加收费",name:"operAddFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"应收费用",name:"totalFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扣款金额",name:"deductMoney",size:100,showTotal:!0,formatter:"0.00"},{displayName:"费用差额",name:"chargeFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"中转费成本",name:"transferFeeCost",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扣款状态",name:"deductStatus",size:120,value:function(e){return Object(m["j"])(Number(e.deductStatus))}},{displayName:"扣款人",name:"hexiaoMan",size:100,isCode:!0},{displayName:"扣款时间",name:"hexiaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"结算编号",name:"settlementEncoding",size:240,isCode:!0},{displayName:"结算流水号",name:"transactionSettlement",size:100,isCode:!0},{displayName:"费用为0票数",name:"votesIsZero",size:100,showTotal:!0},{displayName:"备注",name:"remark",size:400,isConversionComma:!0,isCode:!0}]},exportObj:{fileName:"收发件费用-收下级网点中转费"},optionsClone:"",requestUrl:h["Gc"],batchTitle:"",batchDialogVisible:!1,columns:[{displayName:"账单日期",name:"scanComeDate"},{displayName:"下级网点",name:"scanSite"},{displayName:"费用合计",name:"totalFee"},{displayName:"到件票数",name:"comeNum"},{displayName:"结算重量",name:"accountWeight"}],batchUrl:""},Object(r["a"])(e,"batchUrl",""),Object(r["a"])(e,"requestMode","get"),Object(r["a"])(e,"sbc","sendReceiveFeeSummary"),e},methods:{dblclick:function(e,t,a){this.$emit("goto","tab1",t,this.tableHead.columns[a.col].name)},dataValidate:function(e){var t=this;return new Promise((function(a,i){2!==e.deductStatus&&3!==e.deductStatus&&1!==e.deductStatus||"线上扣款"!=t.batchTitle?0!==e.deductStatus&&1!==e.deductStatus||"取消扣款"!=t.batchTitle?a(e):i("待扣款/未扣款数据不可取消扣款"):i("待扣款/已扣款数据不可扣款")}))},close:function(e){this.batchDialogVisible=!1,this.currRow=[],this.onSearch()},onSearch:function(){if(this.currRow=[],this.dateValue[2]<0)this.msg("开始日期不能大于结束日期,请重新选择日期");else if(this.limit<=this.dateValue[2])this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期");else{this.pagination.currentPage=1;var e={startDate:null==this.dateValue[0]?"":this.dateValue[0],endDate:null==this.dateValue[1]?"":this.dateValue[1],scanSiteId:this.siteId,deductStatus:this.deductStatus,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};this.optionsClone=Object(d["cloneDeep"])(e),this.query(e)}},ischeckrow:function(e){return e.forEach((function(t,a){t.remark&&(e[a].remark=t.remark.replace(/,/g,"-"))})),e},query:function(e){var t=this;Object(h["Fc"])(e).then((function(e){0===e.code?e.data&&e.data.list.length>0?(t.tableData=t.ischeckrow(e.data.list),t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟")):(t.pagination.total=0,t.tableData=[],t.msg(e.message))})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},checkBill:function(e){var t=this;0!==this.currRow.length?(this.batchTitle=e.toElement.innerText,this.currRow=Object(d["cloneDeep"])(this.currRow),this.currRow.forEach((function(e){e.scanComeDate=t.moment(e.scanComeDate).format("YYYY-MM-DD")})),this.checkBillPost()):this.msg("请选择需要结算的数据！")},checkBillPost:function(){"线上扣款"==this.batchTitle?this.batchUrl="/bills/BelowSendSum/toCharge":"线下收款"==this.batchTitle?this.batchUrl="/bills/BelowSendSum/offLineCollection":"取消扣款"==this.batchTitle&&(this.batchUrl="/bills/BelowSendSum/cancelToCharge"),this.batchDialogVisible=!0},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-170:this.z_param.isNode?this.$store.getters.clientHeight-240:this.$store.getters.clientHeight-190}}}),U=q,A=(a("d82b"),Object(w["a"])(U,V,R,!1,null,null,null)),B=A.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("div",{staticClass:"search-box"},[a("ul",{staticClass:"search-input-box"},[a("li",[a("span",{staticClass:"label"},[e._v("账单日期:")]),a("div",{staticClass:"datePicker"},[a("el-date-picker",{ref:"timePickerA",attrs:{type:"date",editable:!1,clearable:!1},on:{change:e.startDateChange},model:{value:e.queryContent.startDate,callback:function(t){e.$set(e.queryContent,"startDate",t)},expression:"queryContent.startDate"}}),e._v("\n          至\n          "),a("el-date-picker",{ref:"timePickerB",attrs:{editable:!1,clearable:!1,type:"date"},model:{value:e.queryContent.endDate,callback:function(t){e.$set(e.queryContent,"endDate",t)},expression:"queryContent.endDate"}})],1)]),a("li",[a("span",{staticClass:"label"},[e._v("账单类型:")]),a("el-select",{ref:"billType",staticClass:"short-select",attrs:{placeholder:""},model:{value:e.queryContent.type,callback:function(t){e.$set(e.queryContent,"type",t)},expression:"queryContent.type"}},e._l(e.billType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1),a("li",[a("span",{staticClass:"label"},[e._v("业务员/承包区:")]),a("sc-users",{ref:"refSettlement",staticClass:"short-input",attrs:{type:"2",param:{types:"2,4"},placeholder:""},model:{value:e.queryContent.accountUserId,callback:function(t){e.$set(e.queryContent,"accountUserId",t)},expression:"queryContent.accountUserId"}})],1),a("li",[a("span",{staticClass:"label"},[e._v("费用为0票数:")]),a("el-select",{ref:"feeCount",staticClass:"short-select",attrs:{placeholder:""},model:{value:e.queryContent.feeZero,callback:function(t){e.$set(e.queryContent,"feeZero",t)},expression:"queryContent.feeZero"}},e._l(e.feeType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)],1)]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportNew}},[e._v("导出")])],1),a("div",{style:{height:e.contentHeight+"px"},on:{click:e.onClickTable}},[a("Spread",{attrs:{ngData:e.tableData,headData:e.tableHead}})],1),a("div",{staticClass:"page-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)]),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)},L=[],G={name:"interChangeFee",mixins:[u["b"]],activated:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()}))},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-180:this.z_param.isNode?this.$store.getters.clientHeight-246:this.$store.getters.clientHeight-190}},data:function(){return{queryContent:{feeZero:-1,type:-1,startDate:v()().subtract(15,"days").format("YYYY-MM-DD"),endDate:v()().format("YYYY-MM-DD"),accountUserId:""},billType:[{label:"全部",id:-1},{label:"业务员",id:4},{label:"承包区",id:2}],feeType:[{label:"全部",id:-1},{label:"=0",id:0},{label:"≥1",id:1}],optionsClone:{},tableData:[],tableHead:{dblclick:this.dblclick,columns:[{displayName:"账单日期",name:"billDate",size:120,formatter:"yyyy-MM-dd"},{displayName:"账单类型",name:"type",size:120},{displayName:"业务员/承包区",name:"accountUserName",size:120},{displayName:"工号",name:"userCode",size:120,isCode:!0},{displayName:"发件票数",name:"sendTotal",size:120,showTotal:!0},{displayName:"发件重量",name:"accountWeight",size:120,showTotal:!0},{displayName:"增值加收费",name:"valueAddedFee",size:120,showTotal:!0},{displayName:"中转费/通票费",name:"centerFee",size:120,showTotal:!0},{displayName:"操作费/加收费",name:"operFee",size:120,showTotal:!0},{displayName:"应收费用",name:"totalFee",size:120,showTotal:!0},{displayName:"首次扣款金额",name:"firstHexiaoFee",size:120,showTotal:!0},{displayName:"前后费用差额",name:"subtractFee",size:120,showTotal:!0},{displayName:"已扣款数",name:"countHexiao",size:120,showTotal:!0},{displayName:"未扣款数",name:"countWeiHexiao",size:120,showTotal:!0},{displayName:"费用为0票数",name:"countFeeZero",size:120,showTotal:!0},{displayName:"问题件数",name:"countOther",size:120,showTotal:!0},{displayName:"退件数",name:"countReturn",size:120,showTotal:!0}]},requestUrl:h["Cb"],exportObj:{fileName:"业务员/承包区中转费"}}},methods:{startDateChange:function(e){e&&this.$refs.timePickerB.focus()},onSearch:function(){if(this.queryContent.startDate||this.queryContent.endDate)if(this.queryContent.startDate&&this.queryContent.endDate)if(v()(this.queryContent.startDate).isAfter(this.queryContent.endDate))this.msg("账单日期开始时间不能大于结束时间");else{var e=v()(this.queryContent.endDate).format("YYYY-MM-DD")+" 23:59:59",t=v()(e).subtract(16,"days"),a=v()(t).isAfter(v()(this.queryContent.startDate));a?this.msg("账单日期相差不能大于16天"):(this.queryContent.startDate=v()(this.queryContent.startDate).format("YYYY-MM-DD"),this.queryContent.endDate=v()(this.queryContent.endDate).format("YYYY-MM-DD"),this.pagination.currentPage=1,this.queryContent.pageSize=this.pagination.pageSize,this.queryContent.currentPage=this.pagination.currentPage,this.query(this.queryContent))}else this.msg("请选择完整的账单日期时间段");else this.msg("账单日期不能为空!")},query:function(e){var t=this;e&&(this.optionsClone=Object(d["cloneDeep"])(e)),Object(h["Bb"])(this.optionsClone).then((function(e){0===e.code&&e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):0===e.code&&(t.msg("暂无数据！"),t.pagination.total=0,t.tableData=[])})).catch((function(e){t.pagination.total=0,t.tableData=[]}))},onClickTable:function(){this.$refs.refSettlement.autoBlur(),this.$refs.timePickerA._data.pickerVisible=!1,this.$refs.timePickerB._data.pickerVisible=!1,this.$refs.billType.visible=!1,this.$refs.feeCount.visible=!1},exportNew:function(){this.searchExport()},dblclick:function(e,t,a){this.$emit("goto","tab1",t,this.tableHead.columns[a.col].name)}}},Z=G,Q=(a("2d11"),Object(w["a"])(Z,W,L,!1,null,"5543c0d2",null)),J=Q.exports,X={name:"sendReceiveFee",components:{summaryH:B,detailH:H,interchangeFee:J},data:function(){return{activeName:"tab1"}},methods:{onTabClick:function(){this.z_method.refreshSpread()},goto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.detailed(t,a)},interGoto:function(e,t,a){this.activeName=e,this.z_method.refreshSpread(),this.$refs.detailed.interDetail(t,a)}},mounted:function(){this.z_param.isActiveH&&("customerFreightReview"!==this.$route.params.checkname&&"checkInterchangeFee"!==this.$route.params.checkname||(this.activeName=this.$route.params.tabname,this.z_method.refreshSpread(),"customerFreightReview"===this.$route.params.checkname?this.$refs.detailed.othersD(this.$route.params.val,this.$route.params.cell):"checkInterchangeFee"===this.$route.params.checkname&&this.$refs.detailed.othersDa(this.$route.params.val,this.$route.params.cell)))},activated:function(){"customerFreightReview"!==this.$route.params.checkname&&"checkInterchangeFee"!==this.$route.params.checkname||(this.activeName=this.$route.params.tabname,this.z_method.refreshSpread(),"customerFreightReview"===this.$route.params.checkname?this.$refs.detailed.othersD(this.$route.params.val,this.$route.params.cell):"checkInterchangeFee"===this.$route.params.checkname&&this.$refs.detailed.othersDa(this.$route.params.val,this.$route.params.cell))}},K=X,ee=Object(w["a"])(K,i,s,!1,null,"b53bc8b8",null);t["default"]=ee.exports},e787:function(e,t,a){},e7bf:function(e,t,a){"use strict";var i=a("a5a9"),s=a.n(i);s.a},e816:function(e,t,a){},e87a:function(e,t,a){},e8c7:function(e,t,a){"use strict";var i=a("02d5"),s=a.n(i);s.a},e96f:function(e,t,a){},e9d4:function(e,t,a){},ea35:function(e,t,a){"use strict";var i=a("7aa8"),s=a.n(i);s.a},eabf:function(e,t,a){"use strict";var i=a("fc2a"),s=a.n(i);s.a},ebfc:function(e,t,a){},ec39:function(e,t,a){"use strict";var i=a("94f7"),s=a.n(i);s.a},ed93:function(e,t,a){},eeac:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.number?a("el-tab-pane",{attrs:{label:"工号配置",name:"工号配置"}},[a("number-config")],1):e._e(),e.customer?a("el-tab-pane",{attrs:{label:"客户配置",name:"客户配置"}},[a("customer-config")],1):e._e()],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" small-font-mod"},[a("div",{staticClass:"row custome-managerMid"},[a("div",{staticClass:"row back-white padding-lr  padding-bot"},[a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("员工名称：")]),a("sc-users",{ref:"user",attrs:{type:"2"},model:{value:e.params.id,callback:function(t){e.$set(e.params,"id",t)},expression:"params.id"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label"},[e._v("所属承包区：")]),a("sc-users",{ref:"areaId",attrs:{type:"2",param:{types:"2"}},model:{value:e.params.areaId,callback:function(t){e.$set(e.params,"areaId",t)},expression:"params.areaId"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("类型：")]),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("是否开账户：")]),a("div",{staticClass:"form-btns"},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.params.openAccount,callback:function(t){e.$set(e.params,"openAccount",t)},expression:"params.openAccount"}},e._l(e.openAccounts,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("工号状态：")]),a("div",{staticClass:"form-btns"},[a("el-radio-group",{model:{value:e.params.disable,callback:function(t){e.$set(e.params,"disable",t)},expression:"params.disable"}},[a("el-radio-button",{attrs:{label:"-1"}},[e._v("全部")]),a("el-radio-button",{attrs:{label:"0"}},[e._v("启用")]),a("el-radio-button",{attrs:{label:"1"}},[e._v("禁用")])],1)],1)])]),a("div",{staticClass:"row margin-topB back-white padding-lr",staticStyle:{"border-top":"10px solid #E9EEF2"}},[a("div",{staticClass:"padding-top"},[e.z_method.showBtn("btn_numberManagement_batchUpdate")?a("el-button",{attrs:{type:"primary",disabled:e.isSelect},on:{click:e.editOn}},[e._v("编辑类型\n        ")]):e._e(),a("a",{ref:"down",staticStyle:{"margin-left":"10px"},attrs:{href:"../attachment/template/002.xlsx",download:"结算对象工号配置.xlsx"}},[a("el-button",{attrs:{type:"primary"}},[e._v("下载修改类型模板")])],1),e.z_method.showBtn("btn_numberManagement_importExcelNew")?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.importType}},[a("i",{staticClass:"el-icon-upload2"}),e._v(" 导入修改类型\n        ")]):e._e(),e.z_method.showBtn("btn_numberManagement_numerExport")?a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:e.exportExcel}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出\n        ")]):e._e(),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:e.query}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询")])],1),a("div",{staticClass:"sz-content",style:{height:e.tableH+"px"}},[a("spread",{staticStyle:{padding:"10px 0 0"},attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"sz-pagination-box",staticStyle:{height:"32px","padding-right":"10px","margin-right":"10px"}},[a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.params.currentPage,"page-sizes":[100,200,300,400],"page-size":e.params.pageSize,total:e.params.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sz-import",{ref:"batchImportRef",attrs:{isErrorData:!0,columns:e.importParams.columns,"batch-url":e.importParams.batchUrl,"data-validate":e.dataValidate,"update-data":e.importParams.updateData}})],1)]),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,title:"批量编辑类型",visible:e.batchEditDialog,width:"350px"},on:{"update:visible":function(t){e.batchEditDialog=t}}},[a("div",{staticStyle:{"text-align":"center",height:"90px",background:"white"}},[a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("类型：")]),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.batchEditParams.type,callback:function(t){e.$set(e.batchEditParams,"type",t)},expression:"batchEditParams.type"}},e._l(e.editTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("所属承包区：")]),e.batchAreaId?a("sc-users",{ref:"editOne",staticStyle:{width:"120px"},attrs:{disabled:e.oneArea,type:"2",param:{types:"2"},"popper-class":"max-index"},model:{value:e.batchEditParams.areaId,callback:function(t){e.$set(e.batchEditParams,"areaId",t)},expression:"batchEditParams.areaId"}}):e._e()],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.batchEditDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.batchEditSub}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"编辑",visible:e.editDialog,width:"500px"},on:{"update:visible":function(t){e.editDialog=t}}},[a("div",{staticStyle:{"text-align":"center",background:"white",display:"flex","flex-wrap":"wrap",padding:"5px 0 15px"}},[a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("员工工号：")]),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:e.editParams.userCode,callback:function(t){e.$set(e.editParams,"userCode",t)},expression:"editParams.userCode"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("员工名称：")]),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:e.editParams.userName,callback:function(t){e.$set(e.editParams,"userName",t)},expression:"editParams.userName"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("类型：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.type,callback:function(t){e.$set(e.editParams,"type",t)},expression:"editParams.type"}},e._l(e.editTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("所属承包区：")]),e.area?a("sc-users",{ref:"editOne",staticStyle:{width:"150px"},attrs:{disabled:e.batchArea,type:"2",param:{types:"2"},"popper-class":"max-index"},model:{value:e.editParams.areaId,callback:function(t){e.$set(e.editParams,"areaId",t)},expression:"editParams.areaId"}}):e._e()],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("结款方式：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.accountType,callback:function(t){e.$set(e.editParams,"accountType",t)},expression:"editParams.accountType"}},e._l(e.accountTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("结款周期：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.accountCycle,callback:function(t){e.$set(e.editParams,"accountCycle",t)},expression:"editParams.accountCycle"}},e._l(e.accountCycles,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e.Independent?a("div",{staticClass:"form-div margin-topB",staticStyle:{visibility:"hidden"}},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}}),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"}})],1):e._e(),e.Independent?a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"80px","text-align":"right",display:"inline-block"}},[e._v("独立计算：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.partCalc,callback:function(t){e.$set(e.editParams,"partCalc",t)},expression:"editParams.partCalc"}},e._l(e.partCalcs,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("确 定")])],1)]),a("sz-batch-process",{attrs:{title:"批量编辑类型",dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:e.batchUrls},on:{model:e.close}}),a("el-dialog",{attrs:{"custom-class":"tips","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"信息",visible:e.editTips,width:"360px"},on:{"update:visible":function(t){e.editTips=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.tips))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editTips=!1}}},[e._v("确 定")])],1)])],1)},l=[],o=(a("5ab2"),a("6d57"),a("e10e"),a("ac9f")),r=a("a3be"),c=a("ac0d"),u=a("391c");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"numberConfig",mixins:[c["a"]],data:function(){var e=this;return{tips:"",editTips:!1,batchUrls:"",batchAreaId:!1,area:!1,params:{id:"",areaId:"",openAccount:"-1",type:"-1",disable:"-1",total:0,pageSize:100,currentPage:1},optionsClone:{},batchEditParams:{type:"",areaId:""},editParams:{userCode:"",userName:"",type:"",areaId:"",accountType:"0",accountCycle:"0",partCalc:"1"},exportObj:{visible:!1,sum:1,current:0,fileName:"结算对象配置-工号",excelData:[]},isSelect:!0,oneArea:!0,batchArea:!0,tableData:[],currRow:[],cur:"",editDialog:!1,batchEditDialog:!1,batchDialogVisible:!1,tableH:300,Independent:!1,isDown:!1,importParams:{columns:[{displayName:"工号编码",name:"userCode",size:120},{displayName:"所属承包区工号",name:"areaCode",size:120},{displayName:"工号类型",name:"type",size:80}],batchUrl:"/basic/user/importData",updateData:[]},columns:[{displayName:"工号编码",name:"userCode",size:120},{displayName:"工号名称",name:"userName",size:120}],types:[{value:"-1",label:"全部"},{value:"0",label:"直营客户"},{value:"1",label:"承包区业务员"},{value:"2",label:"承包区"},{value:"3",label:"承包区客户"},{value:"4",label:"直营业务员"},{value:"5",label:"职能部门"}],openAccounts:[{value:"-1",label:"全部"},{value:"0",label:"是"},{value:"1",label:"否"}],editTypes:[{value:"0",label:"直营客户"},{value:"1",label:"承包区业务员"},{value:"2",label:"承包区"},{value:"3",label:"承包区客户"},{value:"4",label:"直营业务员"},{value:"5",label:"职能部门"}],accountTypes:[{value:"0",label:"暂不设置"},{value:"1",label:"现金"},{value:"2",label:"支票"},{value:"3",label:"银行转账"},{value:"4",label:"预付款"}],accountCycles:[{value:"0",label:"暂不设置"},{value:"1",label:"日结"},{value:"2",label:"周结"},{value:"3",label:"月结"},{value:"4",label:"半月结"},{value:"5",label:"季度结"},{value:"6",label:"三日结"}],partCalcs:[{value:"0",label:"是"},{value:"1",label:"否"}],tableHead:{columns:[{displayName:"选择",name:"check",allCheck:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,size:50,isHideFilter:!1,isEdit:!0,showTotal:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"员工工号",name:"userCode",isCode:!0},{displayName:"员工名称",name:"userName"},{displayName:"所属承包区编号",name:"areaCode",width:130,isCode:!0},{displayName:"所属承包区名称",name:"areaName",width:130},{displayName:"类型",name:"type",value:function(e){switch(e.type){case 0:return"直营客户";case 1:return"承包区业务员";case 2:return"承包区";case 3:return"承包区客户";case 4:return"直营业务员";case 5:return"职能部门";default:return""}}},{displayName:"结算对象名称",name:"settlementName"},{displayName:"是否开户",name:"openAccount",value:function(e){return 0===e.openAccount?"是":1===e.openAccount?"否":""}},{displayName:"结款方式",name:"accountType",value:function(e){switch(e.accountType){case 0:return"暂不设置";case 1:return"现金";case 2:return"支票";case 3:return"银行转账";case 4:return"预付款";default:return""}}},{displayName:"结款周期",name:"accountCycle",value:function(e){switch(e.accountCycle){case 0:return"暂不设置";case 1:return"日结";case 2:return"周结";case 3:return"月结";case 4:return"半月结";case 5:return"季度结";case 6:return"三日结";default:return""}}},{displayName:"是否独立计算",name:"partCalc",value:function(e){return 0===e.partCalc?"是":1===e.partCalc?"否":""}},{displayName:"工号状态",name:"disable",value:function(e){return 0===e.disable?"启用":1===e.disable?"禁用":""}}]}}},methods:{edit:function(){var e=this;if(console.log(this.editParams),("1"===this.editParams.type||"3"===this.editParams.type)&&""===this.editParams.areaId)return this.tips="承包区不能为空",this.editTips=!0;var t=h({id:this.currRow[0].id},this.editParams);delete t.userName,delete t.userCode,Object(r["Q"])(t).then((function(t){t.status?(e.editDialog=!1,e.onQuery()):(e.tips=t.message,e.editTips=!0)}))},importType:function(){this.$refs.batchImportRef.import()},batchEditSub:function(){if(console.log(this.batchEditParams),"1"===this.batchEditParams.type||"3"===this.batchEditParams.type){if(!this.batchEditParams.areaId)return this.tips="承包区不能为空",this.editTips=!0;this.batchUrls="/basic/user/batchUpdateUserType?type="+this.batchEditParams.type+"&areaId="+this.batchEditParams.areaId}else{if("0"!==this.batchEditParams.type&&"2"!==this.batchEditParams.type&&"4"!==this.batchEditParams.type&&"5"!==this.batchEditParams.type)return this.tips="请选择类型",this.editTips=!0;this.batchUrls="/basic/user/batchUpdateUserType?type="+this.batchEditParams.type}this.batchEditDialog=!1,this.batchDialogVisible=!0},query:function(){this.params.currentPage=1,this.onQuery()},onQuery:function(){var e=this;delete this.params.total,this.optionsClone=this.params,Object(r["lb"])(this.params).then((function(t){if(console.log(t),!t||0!==t.code||!t.data||0===t.data.list.length)return e.tableData=[],e.params.total=0,e.params.currentPage=1,e.params.pageSize=100,e.$message({message:"查询结果无数据",type:"warning"});e.isSelect=!0;var a=t.data;e.tableData=a.list,e.params.total=a.totalRow}))},close:function(e){this.batchDialogVisible=!1,this.currRow=[],this.onQuery()},exportExcel:function(){if(0===this.params.total)return this.$message({message:"没有数据无法导出",type:"warning"});var e={totalRow:this.params.total,checklistData:this.tableData,url:"/basic/user/page",paramIn:this.optionsClone,fileName:"结算对象配置-工号",type:"page",methodType:"post"};this.exportBasicUtils(e)},editOn:function(){var e=this;console.log("编辑"),1===this.currRow.length?(this.cur=this.currRow[0].type+"",this.editDialog=!0,this.$nextTick((function(){e.area=!0,e.$nextTick((function(){e.editParams={userCode:e.currRow[0].userCode,userName:e.currRow[0].userName,type:e.currRow[0].type+"",accountType:void 0!==e.currRow[0].accountType?e.currRow[0].accountType+"":"0",accountCycle:void 0!==e.currRow[0].accountCycle?e.currRow[0].accountCycle+"":"0",partCalc:void 0!==e.currRow[0].partCalc?e.currRow[0].partCalc+"":"1",areaId:e.currRow[0].areaId}}))}))):(this.batchEditDialog=!0,this.$nextTick((function(){e.batchAreaId=!0})))},dataValidate:function(e){return console.log("导入",e),new Promise((function(t,a){t(e)}))},handleSizeChange:function(e){this.params.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.params.currentPage=e,this.onQuery()},checkboxAllClick:function(e){this.filterCurrRow([],e)},filterCurrRow:function(e,t){this.currRow=Object(u["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},downLoadFile:function(){var e=this;return setTimeout((function(){e.isDown=!1,e.$refs.down.href="../attachment/template/002.xlsx"}),1500),this.isDown=!0,!1},closeDialog:function(e){this.exportObj.visible=e,this.exportObj.current=1},onresize:function(){this.tableH=document.body.clientHeight-260,this.z_method.refreshSpread()}},watch:{"batchEditParams.type":{handler:function(e){this.oneArea="1"!==e&&"3"!==e,this.batchEditParams.areaId=""}},"editParams.type":{handler:function(e){console.log("监听"),this.editParams.areaId="","1"===e||"3"===e?(this.cur===e&&(this.editParams.areaId=this.currRow[0].areaId),this.batchArea=!1,this.Independent=!1):"2"===e?(console.log(this.currRow[0],this.currRow[0].areaId),this.editParams.areaId=this.currRow[0].id,this.editParams.partCalc=void 0!==this.currRow[0].partCalc?this.currRow[0].partCalc+"":"1",this.batchArea=!0,this.Independent=!0):(this.batchArea=!0,this.Independent=!1)}},currRow:{handler:function(e){this.isSelect=0===e.length}}},activated:function(){this.z_method.refreshSpread()},mounted:function(){var e=this;console.log(this.z_method.showBtn("btn_batchUpdate")),this.$nextTick((function(){e.z_method.refreshSpread()})),window.addEventListener("resize",this.onresize)},created:function(){this.tableH=document.body.clientHeight-260},destroyed:function(){window.removeEventListener("resize",this.onresize)}},p=m,b=(a("7e39"),a("e3bf"),a("623f")),f=Object(b["a"])(p,n,l,!1,null,"7140e556",null),y=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:" small-font-mod"},[a("div",{staticClass:"row custome-managerMid"},[a("div",{staticClass:"row back-white padding-lr  padding-bot"},[a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("客户名称：")]),a("sc-users",{attrs:{type:"3"},model:{value:e.params.id,callback:function(t){e.$set(e.params,"id",t)},expression:"params.id"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("父客户名称：")]),a("sc-users",{attrs:{type:"3"},model:{value:e.params.parentId,callback:function(t){e.$set(e.params,"parentId",t)},expression:"params.parentId"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("所属工号：")]),a("sc-users",{attrs:{type:"2"},model:{value:e.params.userId,callback:function(t){e.$set(e.params,"userId",t)},expression:"params.userId"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("结算对象：")]),a("sc-users",{attrs:{type:"1"},model:{value:e.params.settlementId,callback:function(t){e.$set(e.params,"settlementId",t)},expression:"params.settlementId"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("结款方式：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.accountType,callback:function(t){e.$set(e.params,"accountType",t)},expression:"params.accountType"}},e._l(e.accountTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("是否开账户：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.accountStatus,callback:function(t){e.$set(e.params,"accountStatus",t)},expression:"params.accountStatus"}},e._l(e.openAccounts,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("类型：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.type,callback:function(t){e.$set(e.params,"type",t)},expression:"params.type"}},e._l(e.types,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("结款周期：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.accountCycle,callback:function(t){e.$set(e.params,"accountCycle",t)},expression:"params.accountCycle"}},e._l(e.accountCycles,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("取重量方式：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.takeWeightWay,callback:function(t){e.$set(e.params,"takeWeightWay",t)},expression:"params.takeWeightWay"}},e._l(e.takeWeightWays,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("账单是否取客户：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.billTakeCustomer,callback:function(t){e.$set(e.params,"billTakeCustomer",t)},expression:"params.billTakeCustomer"}},e._l(e.billTakeCustomers,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("状态：")]),a("div",{staticClass:"form-btns"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.params.enable,callback:function(t){e.$set(e.params,"enable",t)},expression:"params.enable"}},e._l(e.enables,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("客户姓名：")]),a("div",{staticClass:"form-btns"},[a("el-input",{model:{value:e.params.customerMz,callback:function(t){e.$set(e.params,"customerMz",t)},expression:"params.customerMz"}})],1)]),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0"}},[e._v("手机号码：")]),a("div",{staticClass:"form-btns"},[a("el-input",{model:{value:e.params.customerPhone,callback:function(t){e.$set(e.params,"customerPhone",t)},expression:"params.customerPhone"}})],1)])]),a("div",{staticClass:"row margin-topB back-white padding-lr",staticStyle:{"border-top":"10px solid #E9EEF2"}},[a("div",{staticClass:"padding-top"},[a("el-button",{attrs:{type:"primary",disabled:e.isSelect},on:{click:e.editOn}},[e._v("编辑")]),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:e.exportExcel}},[a("i",{staticClass:"el-icon-download"}),e._v(" 导出")]),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:e.query}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询")])],1),a("div",{staticClass:"sz-content",style:{height:e.tableH+"px"}},[a("spread",{staticStyle:{padding:"10px 0 0"},attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}})],1),a("div",{staticClass:"sz-pagination-box",staticStyle:{height:"32px","padding-right":"10px","margin-right":"10px"}},[a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.params.currentPage,"page-sizes":[100,200,300,400],"page-size":e.params.pageSize,total:e.params.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1),a("sc-csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}})],1)]),a("el-dialog",{attrs:{"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"批量修改结款方式",visible:e.batchEditDialog,width:"350px"},on:{"update:visible":function(t){e.batchEditDialog=t}}},[a("div",{staticStyle:{display:"flex","justify-content":"center","flex-wrap":"wrap",padding:"5px 0 15px",background:"white"}},[a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("结款方式：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.batchEditParams.accountType,callback:function(t){e.$set(e.batchEditParams,"accountType",t)},expression:"batchEditParams.accountType"}},e._l(e.editAccountTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("结款周期：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.batchEditParams.accountCycle,callback:function(t){e.$set(e.batchEditParams,"accountCycle",t)},expression:"batchEditParams.accountCycle"}},e._l(e.editAccountCycles,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),3==e.batchEditParams.accountCycle?a("div",{staticClass:"form-div margin-topB flexCol"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("结款日：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.batchEditParams.accountDay,callback:function(t){e.$set(e.batchEditParams,"accountDay",t)},expression:"batchEditParams.accountDay"}},e._l(e.accountDayOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("取重方式：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.batchEditParams.takeWeightWay,callback:function(t){e.$set(e.batchEditParams,"takeWeightWay",t)},expression:"batchEditParams.takeWeightWay"}},e._l(e.editTakeWeightWays,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("账单是否取客户：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.batchEditParams.billTakeCustomer,callback:function(t){e.$set(e.batchEditParams,"billTakeCustomer",t)},expression:"batchEditParams.billTakeCustomer"}},e._l(e.editBillTakeCustomer,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.batchEditDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.batchEditSub}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{"modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"编辑客户",visible:e.editDialog,width:"560px"},on:{"update:visible":function(t){e.editDialog=t}}},[a("div",{staticStyle:{background:"white",display:"flex","flex-wrap":"wrap",padding:"5px 0 15px"}},[a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("客户名称：")]),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:e.editParams.customerName,callback:function(t){e.$set(e.editParams,"customerName",t)},expression:"editParams.customerName"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("客户类型：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.type,callback:function(t){e.$set(e.editParams,"type",t)},expression:"editParams.type"}},e._l(e.ediTtypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("父客户名称：")]),a("sc-users",{directives:[{name:"show",rawName:"v-show",value:"4"===e.editParams.type||"6"===e.editParams.type||"8"===e.editParams.type,expression:"editParams.type==='4'||editParams.type==='6'||editParams.type==='8'"}],staticStyle:{width:"150px"},attrs:{disabled:"4"===e.editParams.type||"6"===e.editParams.type||"8"===e.editParams.type,"popper-class":"max-index",type:"3"},model:{value:e.editParams.parentId,callback:function(t){e.$set(e.editParams,"parentId",t)},expression:"editParams.parentId"}}),a("scan-user",{directives:[{name:"show",rawName:"v-show",value:"5"===e.editParams.type,expression:"editParams.type==='5'"}],ref:"scanUser",staticStyle:{width:"150px"},attrs:{disabled:"4"===e.editParams.type||"6"===e.editParams.type||"8"===e.editParams.type,"popper-class":"max-index",type:"9",param:{types:"4"}},model:{value:e.editParams.parentId,callback:function(t){e.$set(e.editParams,"parentId",t)},expression:"editParams.parentId"}}),a("scan-user",{directives:[{name:"show",rawName:"v-show",value:"7"===e.editParams.type,expression:"editParams.type==='7'"}],ref:"scanUser",staticStyle:{width:"150px"},attrs:{disabled:"4"===e.editParams.type||"6"===e.editParams.type||"8"===e.editParams.type,"popper-class":"max-index",type:"9",param:{types:"6"}},model:{value:e.editParams.parentId,callback:function(t){e.$set(e.editParams,"parentId",t)},expression:"editParams.parentId"}}),a("scan-user",{directives:[{name:"show",rawName:"v-show",value:"9"===e.editParams.type,expression:"editParams.type==='9'"}],ref:"scanUser",staticStyle:{width:"150px"},attrs:{disabled:"4"===e.editParams.type||"6"===e.editParams.type||"8"===e.editParams.type,"popper-class":"max-index",type:"9",param:{types:"8"}},model:{value:e.editParams.parentId,callback:function(t){e.$set(e.editParams,"parentId",t)},expression:"editParams.parentId"}})],1),e.editDialog?a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("所属工号：")]),a("sc-users",{directives:[{name:"show",rawName:"v-show",value:"6"===e.editParams.type,expression:"editParams.type==='6'"}],staticStyle:{width:"150px"},attrs:{type:"2",param:{types:"1,2"},disabled:"4"===e.editParams.type||"5"===e.editParams.type||"7"===e.editParams.type||"9"===e.editParams.type,"popper-class":"max-index"},model:{value:e.editParams.userId,callback:function(t){e.$set(e.editParams,"userId",t)},expression:"editParams.userId"}}),a("sc-users",{directives:[{name:"show",rawName:"v-show",value:"8"===e.editParams.type,expression:"editParams.type==='8'"}],staticStyle:{width:"150px"},attrs:{type:"2",param:{types:"4"},disabled:"4"===e.editParams.type||"5"===e.editParams.type||"7"===e.editParams.type||"9"===e.editParams.type,"popper-class":"max-index"},model:{value:e.editParams.userId,callback:function(t){e.$set(e.editParams,"userId",t)},expression:"editParams.userId"}}),a("sc-users",{directives:[{name:"show",rawName:"v-show",value:"4"===e.editParams.type||"5"===e.editParams.type||"7"===e.editParams.type||"9"===e.editParams.type,expression:"editParams.type==='4'||editParams.type==='5'||editParams.type==='7'||editParams.type==='9'"}],staticStyle:{width:"150px"},attrs:{type:"2",disabled:"4"===e.editParams.type||"5"===e.editParams.type||"7"===e.editParams.type||"9"===e.editParams.type,"popper-class":"max-index"},model:{value:e.editParams.userId,callback:function(t){e.$set(e.editParams,"userId",t)},expression:"editParams.userId"}})],1):e._e(),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("结款方式：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.accountType,callback:function(t){e.$set(e.editParams,"accountType",t)},expression:"editParams.accountType"}},e._l(e.editAccountTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("独立计算：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{disabled:"4"===e.editParams.type||"5"===e.editParams.type||"7"===e.editParams.type||"9"===e.editParams.type,placeholder:"请选择"},model:{value:e.editParams.partCalc,callback:function(t){e.$set(e.editParams,"partCalc",t)},expression:"editParams.partCalc"}},e._l(e.partCalcs,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"4"===e.editParams.type?a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("取重方式：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.takeWeightWay,callback:function(t){e.$set(e.editParams,"takeWeightWay",t)},expression:"editParams.takeWeightWay"}},e._l(e.editTakeWeightWays,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"4"===e.editParams.type?a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("账单是否取客户：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.billTakeCustomer,callback:function(t){e.$set(e.editParams,"billTakeCustomer",t)},expression:"editParams.billTakeCustomer"}},e._l(e.editBillTakeCustomer,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("客户姓名：")]),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入内容"},model:{value:e.editParams.customerMz,callback:function(t){e.$set(e.editParams,"customerMz",t)},expression:"editParams.customerMz"}})],1),a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("手机号码：")]),a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:"5"===e.editParams.type||"7"===e.editParams.type||"9"===e.editParams.type,placeholder:"请输入内容"},model:{value:e.editParams.customerPhone,callback:function(t){e.$set(e.editParams,"customerPhone",t)},expression:"editParams.customerPhone"}})],1),a("div",{staticClass:"form-div margin-topB flexCol"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"105px","text-align":"right",display:"inline-block"}},[e._v("结款周期：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.accountCycle,callback:function(t){e.$set(e.editParams,"accountCycle",t)},expression:"editParams.accountCycle"}},e._l(e.editAccountCycles,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                    根据结款周期生成客户周期账单\n                ")]),a("i",{staticClass:"el-icon-question pointer m-l-8",staticStyle:{"margin-left":"2px","font-size":"16px"}})])],1),3==e.editParams.accountCycle?a("div",{staticClass:"form-div margin-topB"},[a("label",{staticClass:"form-label",staticStyle:{"padding-right":"0",width:"88px","text-align":"right",display:"inline-block"}},[e._v("结款日：")]),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.editParams.accountDay,callback:function(t){e.$set(e.editParams,"accountDay",t)},expression:"editParams.accountDay"}},e._l(e.accountDayOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("确 定")])],1)]),a("sz-batch-process",{attrs:{title:"批量编辑类型",dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.currRow,batchUrl:"/basic/customerManager/updateAccountType"},on:{model:e.close}}),a("el-dialog",{attrs:{"custom-class":"tips","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,title:"信息",visible:e.editTips,width:"360px"},on:{"update:visible":function(t){e.editTips=t}}},[a("span",[a("i",{staticClass:"el-icon-warning"}),e._v(" "+e._s(e.tips))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editTips=!1}}},[e._v("确 定")])],1)])],1)},g=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sc-select"},[a("el-select",{directives:[{name:"maxlength",rawName:"v-maxlength"}],ref:"refSzUserSelect",attrs:{multiple:e.multiple,clearable:e.clearable,filterable:e.filterable,disabled:e.disabled,"collapse-tags":e.collapseTags,"multiple-limit":e.multipleLimit,remote:e.remote,"remote-method":e.searchRemote,"no-match-text":" ",placeholder:e.placeholder,popperClass:e.popperClass},on:{change:e.changeItem,clear:e.clear,blur:e.blur,focus:e.onFocus},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}},e._l(e.optionAdd.concat(e.options),(function(e){return a("el-option",{key:e.id,attrs:{label:e.name+e.code,value:e.id,disabled:e.disabled}})})),1)],1)},x=[],k=a("54d0"),D=(a("163d"),a("bea0")),w=a("a2e5"),S=(a("f548"),a("ed63"),a("8cf2"),a("0261"));S["default"].directive("maxlength",{bind:function(e,t){var a=e.querySelector("input"),i=30;t.value&&(void 0!=t.value.max&&(i=t.value.max),void 0!=t.value.type&&(a.type=t.value.type)),a.maxLength=i}}),S["default"].directive("drag-dialog",{bind:function(e,t,a){var i=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",s.style.cssText+=";top:0px;";var n=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,l=e.clientY-i.offsetTop,o=s.offsetWidth,r=s.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=s.offsetLeft,h=c-s.offsetLeft-o,m=s.offsetTop,p=u-s.offsetTop-r,b=n(s,"left"),f=n(s,"top");b.includes("%")?(b=+document.body.clientWidth*(+b.replace(/\%/g,"")/100),f=+document.body.clientHeight*(+f.replace(/\%/g,"")/100)):(b=+b.replace(/\px/g,""),f=+f.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,n=e.clientY-l;-i>d?i=-d:i>h&&(i=h),-n>m?n=-m:n>p&&(n=p),s.style.cssText+=";left:".concat(i+b,"px;top:").concat(n+f,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}},update:function(e,t,a){setTimeout((function(){var t=e.querySelector(".el-dialog");t.style.cssText+=";top:0px;left:0px"}),600)}});var _=a("d29c"),N=a.n(_);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O={name:"scUsers",components:{"el-select":D["Select"],"el-option":D["Option"],"el-option-group":D["OptionGroup"]},props:{value:{type:[Number,String,Array]},default:[Number,String],type:{type:[String,Number],default:0},clearable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!1},multipleLimit:{type:Number,default:10},placeholder:{type:String,default:"请选择"},popperClass:{type:String,default:""},param:{type:Object,default:function(){}},remote:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},isClearResetData:{type:Boolean,default:!1},optionAdd:{type:Array,default:function(){return[]}},isDefaultLoadedData:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value,options:[],globalOptions:[],loading:!1,urlArr:[{name:"获取结算账户",url:"/basic/combo/accountNameAll",type:0},{name:"获取结算对象",url:"/basic/combo/settlement",type:1},{name:"获取业务员",url:"/basic/combo/user",type:2},{name:"获取客户",url:"/basic/combo/customer",type:3},{name:"运单发放",url:"/basic/combo/userOrCustomer",type:4},{name:"直营父客户",url:"/thrall/combox/parentCustomersBill",type:5},{name:"客户运费审核不做权限",url:" /thrall/combox/customers",type:6},{name:"结算对象and下级网点",url:"/basic/settlement/query",type:7},{name:"业务员and客户and下级网点",url:"/basic/combo/userOrCustomerAndSite",type:8},{name:"直营父客户、承包区父客户、业务员父客户",url:"/basic/customerManager/parentCustomers",type:9}],valueId:"",isLoadedData:!1}},mounted:function(){this.isDefaultLoadedData&&this.getSettlement()},methods:{onFocus:function(){0!=this.globalOptions.length||this.isLoadedData||this.isDefaultLoadedData||(this.isLoadedData=!0,this.getSettlement())},searchRemote:N.a.debounce((function(e){this.$emit("search",e),""!=e&&this.getSettlement(e)}),500),getSettlement:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=I({name:0===this.type?"%".concat(t,"%"):t},this.param),i=this.urlArr[this.type].url;Object(w["d"])(i,a,!0,!1).then((function(t){t.data&&t.data.length>0?(e.options=t.data,0===e.globalOptions.length&&(e.globalOptions=t.data)):e.optionAdd.length>0?e.options=[{id:"34523",name:"没有数据哟",code:"",disabled:!0}]:e.options=[]})).catch((function(e){}))},getId:function(e){var t=this,a=I({id:this.multiple?e.join(","):e},this.param),i=this.urlArr[this.type].url;Object(w["d"])(i,a,!0,!1).then((function(a){t.isLoadedData=!0,a.data&&a.data.length>0?(t.options=a.data,t.inputValue=e):(t.options=[],t.inputValue=t.multiple?[]:"")})).catch((function(e){}))},changeItem:function(e){var t={};t=this.multiple?this.options.filter((function(t){return t.id==e[e.length-1]})):this.options.filter((function(t){return t.id==e}));var a=t[0]?t[0]:null;this.$emit("input",this.inputValue),this.$emit("change",a)},chooseOne:function(e,t,a){var i=this,s=I({name:0===this.type?"%".concat(e,"%"):e},this.param),n=this.urlArr[this.type].url;Object(w["d"])(n,s,!0,!1).then((function(e){if(e.data&&e.data.length>0){var s;(s=i.options).push.apply(s,Object(k["a"])(e.data)),i.options=i.options.concat(i.options);var n={};i.options=i.options.reduce((function(e,t){return n[t.id]||(n[t.id]=!0,e.push(t)),e}),[]);var l=i.options.filter((function(e){return e.id==t})),o=l[0]?l[0]:null;null==o?(i.$emit("input",""),i.inputValue=""):(i.$emit("input",t),i.inputValue=t)}a(self,i.inputValue)}))},blur:function(){var e=this;0===this.options.length&&setTimeout((function(){e.options=e.globalOptions}),500)},clear:function(){this.inputValue=this.multiple?[]:"",this.isClearResetData||0===this.globalOptions.length?this.getSettlement():this.options=this.globalOptions},msg:function(e){this.$message({showClose:!0,message:e,type:"warning",duration:5e3})},autoBlur:function(){this.$refs.refSzUserSelect&&(this.$refs.refSzUserSelect.visible=!1)}},watch:{value:function(e,t){var a=Number(e);if(a&&"NaN"!=a&&a!=this.inputValue&&""!=e&&this.remote)this.inputValue=e,this.getId(e);else{this.isLoadedData||this.getSettlement(),this.$emit("input",e);var i=!1;this.optionAdd.map((function(e){0===e.id&&(i=!0)})),this.inputValue=0!==e||i?e:""}}}},E=O,z=(a("0cf0"),Object(b["a"])(E,C,x,!1,null,null,null)),F=z.exports;function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y={name:"customerConfig",mixins:[c["a"]],data:function(){var e=this;return{params:{id:"",parentId:"",userId:"",settlementId:"",accountType:"-1",accountStatus:"-1",type:"-1",accountCycle:"-1",takeWeightWay:"-1",billTakeCustomer:"-1",enable:"0",customerMz:"",customerPhone:"",total:0,pageSize:100,currentPage:1},editDialog:!1,editTips:!1,customerType:"",editParams:{customerName:"",type:"",parentId:"",userId:"",accountType:"0",partCalc:"",accountCycle:"3",accountDay:"1",takeWeightWay:"0",customerMz:"",customerPhone:"",billTakeCustomer:"1"},batchEditDialog:!1,batchEditParams:{accountType:"",accountCycle:"3",accountDay:"1",takeWeightWay:"",billTakeCustomer:""},batchDialogVisible:!1,columns:[{displayName:"客户编码",name:"customerCode",size:120},{displayName:"客户名称",name:"customerName",size:120}],exportObj:{visible:!1,sum:1,current:0,fileName:"结算对象配置-工号",excelData:[]},optionsClone:{},tips:"",currRow:[],tableData:[],tableH:300,isSelect:!0,accountTypes:[{value:"-1",label:"全部"},{value:"0",label:"暂不设置"},{value:"1",label:"现金"},{value:"2",label:"支票"},{value:"3",label:"银行转账"},{value:"4",label:"预付款"}],openAccounts:[{value:"-1",label:"全部"},{value:"0",label:"是"},{value:"1",label:"否"}],types:[{value:"-1",label:"全部"},{value:"4",label:"直营父客户"},{value:"5",label:"直营子客户"},{value:"6",label:"承包区父客户"},{value:"7",label:"承包区子客户"},{value:"8",label:"业务员父客户"},{value:"9",label:"业务员子客户"}],accountCycles:[{value:"-1",label:"全部"},{value:"3",label:"月结"},{value:"4",label:"半月结(每月16/1日)"},{value:"2",label:"周结(每周1)"},{value:"1",label:"日结"}],takeWeightWays:[{value:"-1",label:"全部"},{value:"0",label:"网点收发重量"},{value:"1",label:"网点收发与中心称重最大值"}],billTakeCustomers:[{value:"-1",label:"全部"},{value:"1",label:"是"},{value:"2",label:"否"}],enables:[{value:"0",label:"启用"},{value:"1",label:"禁用"}],ediTtypes:[{value:"4",label:"直营父客户"},{value:"5",label:"直营子客户"},{value:"6",label:"承包区父客户"},{value:"7",label:"承包区子客户"},{value:"8",label:"业务员父客户"},{value:"9",label:"业务员子客户"}],partCalcs:[{value:"0",label:"是"},{value:"1",label:"否"}],editAccountTypes:[{value:"0",label:"暂不设置"},{value:"1",label:"现金"},{value:"2",label:"支票"},{value:"3",label:"银行转账"},{value:"4",label:"预付款"}],editAccountCycles:[{value:"3",label:"月结"},{value:"4",label:"半月结(每月16/1日)"},{value:"2",label:"周结(每周1)"},{value:"1",label:"日结"}],accountDayOption:[],editTakeWeightWays:[{value:"0",label:"网点收发重量"},{value:"1",label:"网点收发与中心称重最大值"}],editBillTakeCustomer:[{value:"1",label:"是"},{value:"2",label:"否"}],tableHead:{columns:[{displayName:"选择",name:"check",allCheck:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,size:50,isHideFilter:!1,isEdit:!0,showTotal:!0,onchange:function(t,a){e.filterCurrRow(t,a)}},{displayName:"客户编码",name:"customerCode",width:100,isCode:!0},{displayName:"客户名称",name:"customerName",width:100},{displayName:"客户类型",name:"type",width:100,value:function(e){switch(e.type){case-1:return"全部";case 4:return"直营父客户";case 5:return"直营子客户";case 6:return"承包区父客户";case 7:return"承包区子客户";case 8:return"业务员父客户";case 9:return"业务员子客户";default:return""}}},{displayName:"运单剩余量",name:"billNum"},{displayName:"父客户编码",name:"parentCode",width:100,isCode:!0},{displayName:"父客户名称",name:"parentName",width:100},{displayName:"揽件业务员工号",name:"userCode",width:110,isCode:!0},{displayName:"揽件业务员名称",name:"userName",width:110},{displayName:"承包区工号",name:"areaCode",isCode:!0},{displayName:"承包区名称",name:"areaName"},{displayName:"结算对象名称",name:"settlementName",width:130},{displayName:"是否开账户",name:"accountStatus",value:function(e){switch(e.accountStatus){case-1:return"全部";case 0:return"是";case 1:return"否";default:return""}}},{displayName:"结款方式",name:"accountType",value:function(e){switch(e.accountType){case-1:return"全部";case 0:return"暂不设置";case 1:return"现金";case 2:return"支票";case 3:return"银行转账";case 4:return"预付款";default:return""}}},{displayName:"结款周期",name:"accountCycle",value:function(e){switch(e.accountCycle){case-1:return"全部";case 0:return"暂不设置";case 1:return"日结";case 2:return"周结";case 3:return"月结"+e.accountDay+"日";case 4:return"半月结";case 5:return"季度结";case 6:return"三日结";default:return""}}},{displayName:"是否独立计算",name:"partCalc",value:function(e){switch(e.partCalc){case 0:return"是";case 1:return"否";default:return""}}},{displayName:"取重方式",name:"takeWeightWay",width:170,value:function(e){switch(e.takeWeightWay){case-1:return"全部";case 0:return"网点收发重量";case 1:return"网点收发与中心称重最大值";default:return""}}},{displayName:"账单是否取客户",name:"billTakeCustomer",value:function(e){switch(e.billTakeCustomer){case-1:return"全部";case 1:return"是";case 2:return"否";default:return""}}},{displayName:"客户姓名",name:"customerMz",width:130},{displayName:"手机号码",name:"customerPhone",width:130}]}}},methods:{edit:function(){var e=this;if(console.log(this.editParams),("6"===this.editParams.type||"8"===this.editParams.type)&&(""===this.editParams.userId||void 0===this.editParams.userId||null===this.editParams.userId))return this.tips="请选择所属工号（该客户所属的业务员或承包区）",this.editTips=!0;if(this.editParams.customerMz.length>15)return this.tips="客户姓名字数不能超过15个汉字",this.editTips=!0;var t=P({id:this.currRow[0].id},this.editParams);Object(r["N"])(t).then((function(t){t.status?(e.editDialog=!1,e.onQuery()):(e.tips=t.message,e.editTips=!0)}))},batchEditSub:function(){var e=this.batchEditParams,t=e.accountType,a=e.accountCycle,i=e.accountDay,s=e.takeWeightWay,n=e.billTakeCustomer;console.log(t,a,s,n),this.currRow.forEach((function(e){e.accountType=t+"",e.accountCycle=a+"",e.accountDay=i+"",e.takeWeightWay=s+"",e.billTakeCustomer=n+""})),this.currRow=Object(u["cloneDeep"])(this.currRow),this.batchEditDialog=!1,this.batchDialogVisible=!0},query:function(){this.params.currentPage=1,this.onQuery()},onQuery:function(){var e=this;delete this.params.total,this.optionsClone=this.params,Object(r["ib"])(this.params).then((function(t){if(console.log(t),!t||0!==t.code||!t.data||0===t.data.list.length)return e.tableData=[],e.params.total=0,e.params.currentPage=1,e.params.pageSize=100,e.$message({message:"查询结果无数据",type:"warning"});e.isSelect=!0;var a=t.data;e.tableData=a.list,e.params.total=a.totalRow}))},close:function(e){this.batchDialogVisible=!1,this.currRow=[],this.onQuery()},exportExcel:function(){if(0===this.params.total)return this.$message({message:"没有数据无法导出",type:"warning"});var e={totalRow:this.params.total,checklistData:this.tableData,url:"/basic/customerManager/pageCustomer",paramIn:this.optionsClone,fileName:"结算对象配置-客户",type:"page",methodType:"post"};this.exportBasicUtils(e)},editOn:function(){var e=this;console.log("编辑"),1===this.currRow.length?(this.editDialog=!0,this.$nextTick((function(){e.editParams.userId="",e.$nextTick((function(){console.log("编辑的参数",e.currRow[0]);var t=e.currRow[0],a=t.customerName,i=t.type,s=t.parentId,n=t.userId,l=t.accountType,o=t.partCalc,r=t.accountCycle,c=t.accountDay,u=t.takeWeightWay,d=t.customerMz,h=t.customerPhone,m=t.billTakeCustomer;e.customerType=i,e.editParams={customerName:a,type:i+"",parentId:s,userId:n,accountType:l+"",partCalc:o+"",accountCycle:r+"",accountDay:c+"",takeWeightWay:u+"",customerMz:d,customerPhone:h,billTakeCustomer:m+""}}))}))):this.batchEditDialog=!0},handleSizeChange:function(e){this.params.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.params.currentPage=e,this.onQuery()},checkboxAllClick:function(e){this.filterCurrRow([],e)},filterCurrRow:function(e,t){this.currRow=Object(u["cloneDeep"])(this.tableData.filter((function(e){return 1==e.check})))},closeDialog:function(e){this.exportObj.visible=e,this.exportObj.current=1},onresize:function(){this.tableH=document.body.clientHeight-330,this.z_method.refreshSpread()}},watch:{"editParams.type":{handler:function(e){var t=this;"5"===e||"7"===e||"9"===e?this.$nextTick((function(){t.editParams.parentId="",t.editParams.userId=""})):"6"===e||"8"===e?this.$nextTick((function(){t.editParams.userId=t.currRow[0].userId,t.editParams.parentId=t.currRow[0].parentId})):"4"===e&&this.$nextTick((function(){t.editParams.userId="",t.editParams.parentId=t.currRow[0].parentId}))}},currRow:{handler:function(e){this.isSelect=0===e.length}}},mounted:function(){var e=this;this.$nextTick((function(){e.z_method.refreshSpread()})),window.addEventListener("resize",this.onresize),this.accountDayOption=[];for(var t=1;t<29;t++)this.accountDayOption.push({value:t+"",label:"每月"+t+"日"})},created:function(){this.tableH=document.body.clientHeight-330},destroyed:function(){window.removeEventListener("resize",this.onresize)},components:{scanUser:F}},j=Y,$=(a("984e"),a("ea35"),Object(b["a"])(j,v,g,!1,null,"471a98ec",null)),H=$.exports,V={name:"objConfig",data:function(){return{activeName:"客户配置",number:void 0!==this.z_method.showBtn("menu_numberManagement")&&this.z_method.showBtn("menu_numberManagement"),customer:void 0!==this.z_method.showBtn("menu_customerManagement")&&this.z_method.showBtn("menu_customerManagement")}},methods:{onTabClick:function(){this.z_method.refreshSpread()}},mounted:function(){console.log(this.number,this.customer)},beforeRouteEnter:function(e,t,a){console.log(e,t),a((function(e){e.number&&!e.customer?e.activeName="工号配置":e.customer&&!e.number&&(e.activeName="客户配置")}))},components:{numberConfig:y,customerConfig:H}},R=V,q=Object(b["a"])(R,i,s,!1,null,"42f91e7e",null);t["default"]=q.exports},ef72:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"sz-tab"},[a("summaryh")],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sz-main packageBillSummary"},[a("show-more",{model:{value:e.ishowHeights,callback:function(t){e.ishowHeights=t},expression:"ishowHeights"}},[a("div",{staticClass:"sz-search",attrs:{slot:"collapse"},slot:"collapse"},[a("div",{staticClass:"dh_content",staticStyle:{display:"inline-block",width:"calc(100% - 73px)","padding-top":"16px"}},[a("ul",[a("li",[a("el-select",{staticClass:"input-80",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{key:1,attrs:{label:"账单日期",value:1}}),a("el-option",{key:2,attrs:{label:"扣款时间",value:2}})],1),1==e.type?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):e._e(),1!=e.type?a("sz-date-picker",{staticClass:"input-160",attrs:{type:"datetimerange",valueFormat:"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",limit:e.limit,clearable:!1,editable:!1,isCheckMsg:!1},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}}):e._e()],1),a("li",[a("label",[e._v("固定费类型：")]),a("sz-accountFee",{staticClass:"inputh-85",model:{value:e.accountFee,callback:function(t){e.accountFee=t},expression:"accountFee"}})],1),a("li",[a("label",{staticClass:"w-r-60"},[e._v("账单类型：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.billsTypeStatus,callback:function(t){e.billsTypeStatus=t},expression:"billsTypeStatus"}},e._l(e.billsTypeStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("li",[a("label",[e._v("结算对象：")]),a("sc-users",{staticClass:"inputh-85",attrs:{type:"7"},on:{change:e.changtype},model:{value:e.accountUserId,callback:function(t){e.accountUserId=t},expression:"accountUserId"}})],1),a("li",[a("label",[e._v("扣款状态：")]),a("el-select",{staticClass:"inputh-85",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),a("div",{staticClass:"sz-search-btn",staticStyle:{"border-bottom":"0px"}},[a("div",{staticClass:"ulH"},[a("ul",[e.z_method.showBtn("btn_packageBill_hexiaoLine")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            扣预付款\n          ")])],1):e._e(),e.z_method.showBtn("btn_packageBill_hexiao")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            线下收款\n          ")])],1):e._e(),e.z_method.showBtn("btn_packageBill_fanhexiao")?a("li",[a("el-button",{attrs:{type:"danger",disabled:0===e.currRow.length},on:{click:e.checkBill}},[e._v("\n            取消扣款\n          ")])],1):e._e(),e.z_method.showBtn("btn_packageBill_save")?a("li",[a("el-button",{attrs:{type:"success"},on:{click:e.checkBill}},[e._v("\n            手工入账单\n          ")])],1):e._e()])]),a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.searchExport}},[e._v("导出")])],1)]),a("div",{staticClass:"sz-content",style:{height:e.contentHeight+e.ishowHeight+"px"}},[a("spread",{attrs:{ngData:e.tableData,headData:e.tableHead},on:{checkboxAllClick:e.checkboxAllClick}}),a("div",{staticClass:"sz-pagination-box"},[a("sz-pagination",{attrs:{page:e.pagination.currentPage,pageSize:e.pagination.pageSize,total:e.pagination.total},on:{fetchData:e.fetchData}})],1)],1),a("csv",{attrs:{visible:e.exportObj.visible,fileName:e.exportObj.fileName,head:e.tableHead,paramData:e.exportObj.excelData,sum:e.exportObj.sum,current:e.exportObj.current},on:{clear:e.closeDialog}}),a("sz-batch-process",{attrs:{title:e.batchTitle,dialogVisible:e.batchDialogVisible,columns:e.columns,tableData:e.cloneCrrow,batchUrl:e.batchUrl},on:{model:e.close}}),a("el-dialog",{directives:[{name:"drag-dialog",rawName:"v-drag-dialog"}],staticClass:"editT",attrs:{title:"手工入账单",visible:e.dialogVisibleEdit,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!1,width:"500px",center:""},on:{"update:visible":function(t){e.dialogVisibleEdit=t}}},[a("div",{staticClass:"edit"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"el-icon-star-on"}),e._v("账单日期：")]),a("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:12}},[a("el-date-picker",{staticClass:"w-i-100",attrs:{type:"date",placeholder:"选择日期",editable:!1,clearable:!1,"picker-options":e.pickerOptions},model:{value:e.billDate,callback:function(t){e.billDate=t},expression:"billDate"}})],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"el-icon-star-on"}),e._v("结算对象：")]),a("el-col",{attrs:{span:12}},[e.dialogVisibleEdit?a("sc-users",{staticClass:"w-i-100",attrs:{type:"7","popper-class":"max-index"},on:{change:e.changtypeEdit},model:{value:e.accountUserIdEdit,callback:function(t){e.accountUserIdEdit=t},expression:"accountUserIdEdit"}}):e._e()],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"el-icon-star-on"}),e._v("固定费类型：")]),a("el-col",{attrs:{span:12}},[a("sz-accountFee",{staticClass:"w-i-100",model:{value:e.accountFeeEdit,callback:function(t){e.accountFeeEdit=t},expression:"accountFeeEdit"}}),a("el-tooltip",{attrs:{placement:"right",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              友情提醒："),a("br"),e._v("\n              1、固定费类型系统默认包仓费、航空包仓"),a("br"),e._v("\n              费、其他固定费用三种。如需对其他费用类"),a("br"),e._v("\n              型报价，请至神州-结算交易类型配置-预付款"),a("br"),e._v("\n              交易类型配置中添加；"),a("br"),e._v("\n              2、添加方式，点击新增子类型，交易类型选"),a("br"),e._v("\n              扣款，费用主类型选固定费用，在费用子类"),a("br"),e._v("\n              型输入框中输入需要的费用类型；\n            ")]),a("i",{staticClass:"el-icon-question"})])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"el-icon-star-on"}),e._v("扣款模式：")]),a("el-col",{attrs:{span:12}},[a("el-select",{staticClass:"w-i-100",model:{value:e.deduction,callback:function(t){e.deduction=t},expression:"deduction"}},e._l(e.deductionOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-tooltip",{attrs:{placement:"right",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              温馨提示："),a("br"),e._v("\n              1、手动扣款：选择手动扣款后，由人工去"),a("br"),e._v("\n              操作扣款，选择扣预付款或者线下收款；"),a("br"),e._v("\n              2、选择自动扣款后，由系统每天固定时间"),a("br"),e._v("\n              自动从预付款中扣款，无需人工操作；\n            ")]),a("i",{staticClass:"el-icon-question"})])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("i",{staticClass:"el-icon-star-on"}),e._v("费用：")]),a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.feeEdit,callback:function(t){e.feeEdit=t},expression:"feeEdit"}})],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[e._v("备注：")]),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea",placeholder:"最多输入30个字！",maxlength:"30","show-word-limit":"",resize:"none",rows:"4"},model:{value:e.remarkText,callback:function(t){e.remarkText=t},expression:"remarkText"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.checkBillPost}},[e._v("确 定")])],1)])],1)},l=[],o=(a("9a33"),a("f548"),a("6d57"),a("163d"),a("ac0d")),r=a("391c"),c=a("a3be"),u=a("f37e"),d=a("4055"),h={mixins:[o["b"]],data:function(){var e=this;return{accountFee:"",ishowHeights:0,ishowHeight:0,currRow:[],type:1,limit:1,dateValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD"),this.moment().subtract(1,"days").format("YYYY-MM-DD")],timeValue:[this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 00:00:00",this.moment().subtract(1,"days").format("YYYY-MM-DD")+" 23:59:59"],billsTypeStatus:-2,billsTypeStatusOptions:[{value:-2,label:"全部"},{value:0,label:"客户"},{value:4,label:"业务员"},{value:2,label:"承包区"},{value:99,label:"下级网点"}],accountUserId:"",status:-1,statusOptions:[{value:-1,label:"全部"},{value:0,label:"未扣款"},{value:1,label:"待扣款"},{value:2,label:"已线上扣款"},{value:3,label:"已线下收款"}],tableData:[],tableHead:{columns:[{displayName:"选择",checked:!0,name:"check",allCheck:!0,isBillCode:!0,cellType:new GC.Spread.Sheets.CellTypes.CheckBox,isHideFilter:!1,iShow:!1,size:80,isEdit:!0,isCheckBox:!0,hlock:!0,onchange:function(t,a){e.selectionSite(t,a)},dblclick:function(t){e.selectionSite()}},{displayName:"扣款状态",name:"status",size:100,value:function(e){return 0===e.status?"未扣款":1===e.status||5===e.status?"待扣款":2===e.status?"已线上扣款":3===e.status?"已线下收款":""}},{displayName:"账单日期",name:"settlementTime",size:120,formatter:"yyyy-MM-dd"},{displayName:"固定费类型",name:"fixedTypeName",size:100,isCode:!0},{displayName:"结算对象",name:"objectName",size:100,isCode:!0},{displayName:"结算对象编码",name:"objectCode",size:100,isCode:!0},{displayName:"账单类型",name:"objectType",size:100,value:function(e){return Object(u["d"])(Number(e.objectType))}},{displayName:"扣款模式",name:"mode",size:150,value:function(e){return Object(u["l"])(Number(e.mode))}},{displayName:"金额",name:"fixedFee",size:100,showTotal:!0,formatter:"0.00"},{displayName:"扣款人",name:"hexiaoMan",size:100,isCode:!0},{displayName:"扣款时间",name:"heixaoTime",size:150,formatter:"yyyy-MM-dd hh:mm:ss"},{displayName:"创建人",name:"creator",size:100,isCode:!0},{displayName:"备注",name:"remark",size:400,isConversionComma:!0}]},exportObj:{fileName:"收包仓和固定费"},optionsClone:"",requestUrl:"/quote/new/lowerWaterBillAuto/query",requestMode:"get",batchDialogVisible:!1,columns:[{displayName:"账单日期",name:"settlementTime"},{displayName:"结算对象",name:"objectName"},{displayName:"金额",name:"fixedFee"}],batchTitle:"",batchUrl:"",dialogVisibleEdit:!1,billDate:this.moment().format("YYYY-MM-DD"),pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},accountUserIdEdit:"",accountFeeEdit:"",deduction:4,deductionOptions:[{value:4,label:"自动扣款"},{value:3,label:"手动扣款"}],feeEdit:0,remarkText:"",objectType:-1,objectTypeEdit:-1,cloneCrrow:[]}},methods:{changtype:function(e){this.limit=e?31:1,this.objectType=e?e.type:""},changtypeEdit:function(e){this.objectTypeEdit=e?e.type:""},handleClose:function(){this.dialogVisibleEdit=!1},close:function(){this.batchDialogVisible=!1,this.onSearch()},checkboxAllClick:function(e){this.selectionSite([],e)},selectionSite:function(e,t){this.currRow=this.tableData.filter((function(e){return 1==e.check}))},checkBill:function(e){this.batchTitle=e.toElement.innerText,"手工入账单"==this.batchTitle||0!==this.currRow.length?"手工入账单"==this.batchTitle?(this.billDate=this.moment().format("YYYY-MM-DD"),this.accountUserIdEdit="",this.accountFeeEdit="",this.deduction=4,this.feeEdit=0,this.remarkText="",this.dialogVisibleEdit=!0):this.checkBillPost():this.msg("请选择需要结算的数据！")},checkBillPost:function(){var e=this;if(this.cloneCrrow=Object(r["cloneDeep"])(this.currRow),"手工入账单"==this.batchTitle){if(!this.accountUserIdEdit)return void this.msg("请选择结算对象");if(!this.accountFeeEdit)return void this.msg("请选择固定费类型");if(0===this.feeEdit)return void this.msg("费用金额要大于0");var t={settlementTime:this.moment(this.billDate).format("YYYY-MM-DD"),objectId:this.accountUserIdEdit,objectType:this.objectTypeEdit,fixedType:this.accountFeeEdit,mode:this.deduction,fixedFee:this.feeEdit,remark:this.remarkText};Object(c["Zb"])(t).then((function(t){0===t.code&&0===t.statusCode?(e.dialogVisibleEdit=!1,e.msg("手工入账单成功！")):e.message(t.message)})).catch((function(e){}))}else"扣预付款"==this.batchTitle||"线下收款"==this.batchTitle?("线下收款"==this.batchTitle&&this.cloneCrrow.forEach((function(e){e.type=1})),this.cloneCrrow.forEach((function(t){t.settlementTime=e.moment(t.settlementTime).format("YYYY-MM-DD")})),this.cloneCrrow=Object(r["cloneDeep"])(this.cloneCrrow),this.batchUrl="/quote/new/lowerWaterBillAuto/hexiao",this.batchDialogVisible=!0):"取消扣款"==this.batchTitle&&(this.cloneCrrow.forEach((function(t){t.settlementTime=e.moment(t.settlementTime).format("YYYY-MM-DD")})),this.cloneCrrow=Object(r["cloneDeep"])(this.cloneCrrow),this.batchUrl="/quote/new/lowerWaterBillAuto/fanhexiao",this.batchDialogVisible=!0)},onSearch:function(){if(this.currRow=[],1===this.type){if(this.dateValue[2]<0)return void this.msg("开始日期不能大于结束日期,请重新选择日期");if(this.limit<=this.dateValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择日期")}else{if(this.timeValue[2]<0)return void this.msg("开始时间不能大于结束时间,请重新选择时间");if(this.limit<=this.timeValue[2])return void this.msg("最多可查询"+this.limit+"天的数据,请重新选择时间")}this.pagination.currentPage=1;var e={timeType:this.type,startTime:1===this.type?null==this.dateValue[0]?"":this.dateValue[0]:null==this.timeValue[0]?"":this.timeValue[0],endTime:1===this.type?null==this.dateValue[1]?"":this.dateValue[1]:null==this.timeValue[1]?"":this.timeValue[1],fixedType:this.accountFee,objectId:this.accountUserId,pageSize:this.pagination.pageSize,currentPage:this.pagination.currentPage};-2!==this.billsTypeStatus&&(e.objectType=this.billsTypeStatus),-1!==this.status&&(e.deductStatus=this.status),this.accountUserId&&(e.objectIdType=this.objectType),this.optionsClone=Object(r["cloneDeep"])(e),this.query(e)},query:function(e){var t=this;Object(c["ac"])(e).then((function(e){e.data.list&&e.data.list.length>0?(t.tableData=e.data.list,t.pagination.total=e.data.totalRow):(t.pagination.total=0,t.tableData=[],t.msg("没有数据哟"))})).catch((function(e){}))},proving:function(e){return e+="",e=e.replace(/[^\.\d\n]/g,""),e=e.replace(/[^\d.]/g,""),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),e.indexOf(".")<0&&""!=e&&(e=parseFloat(e)),e}},watch:{ishowHeights:{handler:function(e,t){var a=this;if(0===e)return this.ishowHeight=e,void this.z_method.refreshSpread();setTimeout((function(){a.ishowHeight=e,a.z_method.refreshSpread()}),400)},deep:!0},feeEdit:{handler:function(e,t){if(e){var a=e+"";a.length<=7?(a=a.split("."),a[0].length<=4?this.feeEdit=this.proving(e):this.feeEdit=t):this.feeEdit=t}else this.feeEdit=0}},remarkText:{handler:function(e,t){d["billUtils"].regRemark(e)?this.remarkText=e:this.remarkText=t}}},computed:{contentHeight:function(){return this.z_param.isActiveH?this.$store.getters.clientHeight-133:this.$store.getters.clientHeight-210}}},m=h,p=(a("9ce0"),a("623f")),b=Object(p["a"])(m,n,l,!1,null,null,null),f=b.exports,y={name:"packageBill",components:{summaryh:f},data:function(){return{}},methods:{}},v=y,g=Object(p["a"])(v,i,s,!1,null,"1bd12c42",null);t["default"]=g.exports},efa8:function(e,t,a){"use strict";var i=a("fca3"),s=a.n(i);s.a},efe0:function(e,t,a){"use strict";var i=a("970f"),s=a.n(i);s.a},f524:function(e,t,a){},f653:function(e,t,a){"use strict";var i=a("98e3"),s=a.n(i);s.a},f7a8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"结算信息配置"}},[e.flag?a("info-setting",{attrs:{"father-rules":e.rules}}):e._e()],1),a("el-tab-pane",{attrs:{label:"结算周期配置"}},[e.flag?a("timeSetting",{attrs:{"father-rules":e.rules}}):e._e()],1)],1)],1)},s=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"infoSetting"},[a("div",{staticClass:"head"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"danger"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticStyle:{"margin-left":"0px"},attrs:{type:"danger"},on:{click:e.cancelEdit}},[e._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"primary"},on:{click:e.commitSave}},[e._v("保存")]),a("span",{class:{"p-l-93":!e.isEdit}},[e._v("温馨提示：信息配置后即时生效，历史数据不按最新配置处理")]),a("span",{staticClass:"updateInfo"},[e._v("最新修改人："+e._s(e.infoName)+"    最新修改时间："+e._s(e.infoTime))])],1),e._m(0),a("div",{staticClass:"chooseInfo p-b-n"},[a("ul",[a("li",[e._v("揽收业务员获取：")]),a("li",[a("el-checkbox-group",{attrs:{disabled:!e.isEdit},model:{value:e.salesmanGain,callback:function(t){e.salesmanGain=t},expression:"salesmanGain"}},[a("el-checkbox-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&e.salesmanGain.indexOf("1")>-1},attrs:{label:"1"}},[e._v("掌中通打单业务员")]),a("el-checkbox-button",{key:"2",staticClass:"w-140",class:{disabled:!e.isEdit&&e.salesmanGain.indexOf("2")>-1,"b-l-1":e.salesmanGain.indexOf("1")>-1},attrs:{label:"2"}},[e._v("面单发放业务员")]),a("el-checkbox-button",{key:"3",staticClass:"disabled w-140",class:{"b-l-1":e.salesmanGain.indexOf("2")>-1},attrs:{label:"3",disabled:""}},[e._v("收件扫描业务员")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"揽收业务员按照顺序依次获取",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li"),a("li",[a("div",{staticClass:"popover"},[a("el-radio-group",{staticStyle:{padding:"0px 24px"},attrs:{disabled:!e.isEdit},model:{value:e.salesmanGainRadio,callback:function(t){e.salesmanGainRadio=t},expression:"salesmanGainRadio"}},[a("el-radio",{key:"2",attrs:{label:2}},[e._v("取最新一条扫描")]),a("el-radio",{key:"1",attrs:{label:1}},[e._v("取第一条扫描")])],1)],1)])])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("重量获取：")]),a("li",{staticStyle:{width:"140px"}},[e._v("网点重量：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.dotWeightGain,callback:function(t){e.dotWeightGain=t},expression:"dotWeightGain"}},[a("el-radio-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&"1"==e.dotWeightGain},attrs:{label:"1"}},[e._v("本网点重量")]),a("el-radio-button",{key:"2",staticClass:"w-140",class:{disabled:!e.isEdit&&"2"==e.dotWeightGain},attrs:{label:"2"}},[e._v("上级网点重量")]),a("el-radio-button",{key:"3",staticClass:"w-140",class:{disabled:!e.isEdit&&"3"==e.dotWeightGain},attrs:{label:"3"}},[e._v("最大重量")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"网点重量按照本网点（或上下级网点）收/发/到最大重量获取",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li"),a("li",{staticStyle:{width:"140px"}},[e._v("中心重量：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.coreWeightGain,callback:function(t){e.coreWeightGain=t},expression:"coreWeightGain"}},[a("el-radio-button",{key:"3",staticClass:"w-140",class:{disabled:!e.isEdit&&"3"===e.coreWeightGain},attrs:{label:"3"}},[e._v("网点所属中心")]),a("el-radio-button",{key:"0",staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.coreWeightGain},attrs:{label:"0"}},[e._v("第一称重中心")]),a("el-radio-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.coreWeightGain},attrs:{label:"1"}},[e._v("所有称重中心最大")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                      网点所属中心：选取本网点的所属中心，若所属中心未称重，则中心重量默认为0；"),a("br"),e._v("\n                      第一称重中心：选取第一个称重的中心数据，若第一个中心未称重，则选取第二个称重的中心重量，依次类推；\n                    ")]),a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li"),a("li",{staticStyle:{width:"140px"}},[e._v("结算重量：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.salesWeightGain,callback:function(t){e.salesWeightGain=t},expression:"salesWeightGain"}},[a("el-radio-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.salesWeightGain},attrs:{label:"1"}},[e._v("网点重量")]),a("el-radio-button",{key:"2",staticClass:"w-140",class:{disabled:!e.isEdit&&"2"===e.salesWeightGain},attrs:{label:"2"}},[e._v("中心重量")]),a("el-radio-button",{key:"3",staticClass:"w-140",class:{disabled:!e.isEdit&&"3"===e.salesWeightGain},attrs:{label:"3"}},[e._v("网点与中心最大")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("中心重量：中心有值则取中心重量，中心无值则取网点重量；")]),a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("目的地获取：")]),a("li",[a("el-checkbox-group",{attrs:{disabled:!e.isEdit},model:{value:e.destinationGain,callback:function(t){e.destinationGain=t},expression:"destinationGain"}},[a("el-checkbox-button",{key:"1",staticClass:"disabled w-140",attrs:{label:"1",disabled:""}},[e._v("订单地址")]),a("el-checkbox-button",{key:"2",staticClass:"w-140",class:{disabled:!e.isEdit&&e.destinationGain.indexOf("2")>-1,"b-l-1":e.destinationGain.indexOf("2")>-1},attrs:{label:"2"}},[e._v("集包城市")]),a("el-checkbox-button",{key:"3",staticClass:"w-140",class:{disabled:!e.isEdit&&e.destinationGain.indexOf("3")>-1,"b-l-1":e.destinationGain.indexOf("2")>-1},attrs:{label:"3"}},[e._v("中心下一站")]),a("el-checkbox-button",{key:"4",staticClass:"w-140",class:{disabled:!e.isEdit&&e.destinationGain.indexOf("4")>-1,"b-l-1":e.destinationGain.indexOf("3")>-1},attrs:{label:"4"}},[e._v("签收城市")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("1.退件不回写签收目的地"),a("br"),e._v("2.签收城市普通面单必获取，电子面单根据配置获取")]),a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("运输方式获取：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.transportGain,callback:function(t){e.transportGain=t},expression:"transportGain"}},[a("el-radio-button",{key:"0",staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.transportGain},attrs:{label:"0"}},[e._v("系统默认班次")]),a("el-radio-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.transportGain},attrs:{label:"1"}},[e._v("本网点发件班次")]),a("el-radio-button",{key:"2",staticClass:"w-140",class:{disabled:!e.isEdit&&"2"===e.transportGain},attrs:{label:"2"}},[e._v("首中心发件班次")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"系统默认取首次扫描班次，再根据配置获取班次",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("物品类型获取：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.goodsGain,callback:function(t){e.goodsGain=t},expression:"goodsGain"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit||"1"===e.goodsGain},attrs:{label:"1"}},[e._v("按实际扫描取值")])],1)],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("均重账单是否开通：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},on:{change:e.onWeightChange},model:{value:e.avg_status,callback:function(t){e.avg_status=t},expression:"avg_status"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&1===e.avg_status},attrs:{label:1}},[e._v("是")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&0===e.avg_status},attrs:{disabled:1==e.initializeRules.AVG_STATUS,label:0}},[e._v("否")])],1)],1),1===e.avg_status?a("li",{staticClass:"ml24"},[a("el-select",{attrs:{placeholder:"请选择",disabled:!e.isEdit},model:{value:e.avgDateModel,callback:function(t){e.avgDateModel=t},expression:"avgDateModel"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),a("li",{staticClass:"ml24"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("1、开通均重账单后，无法再关闭；"),a("br"),e._v("2、如不需要均重账单，可将报价中的计算方式设置为按单票；")]),a("i",{staticClass:"el-icon-question cp"})])],1)])]),e._m(1),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("派件业务员获取：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.paiGain,callback:function(t){e.paiGain=t},expression:"paiGain"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.paiGain},attrs:{label:"0"}},[e._v("首次派件业务员")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.paiGain},attrs:{label:"1"}},[e._v("最新派件业务员")])],1)],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("派费结算对象获取：")]),a("li",{staticStyle:{width:"140px"}},[e._v("自营派件：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.selfPai,callback:function(t){e.selfPai=t},expression:"selfPai"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"2"===e.selfPai},attrs:{label:"2"}},[e._v("签收业务员")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.selfPai},attrs:{label:"1"}},[e._v("派件业务员")])],1)],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li"),a("li",{staticStyle:{width:"140px"}},[e._v("下级派件：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.dotPai,callback:function(t){e.dotPai=t},expression:"dotPai"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.dotPai},attrs:{label:"0"}},[e._v("系统智能获取")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.dotPai},attrs:{label:"1"}},[e._v("签收网点")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"2"===e.dotPai},attrs:{label:"2"}},[e._v("最新派件网点")]),e._v("123\n                ")],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"系统智能获取：根据实际扫描更新",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])])])},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",[e._v("出港配置")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",[e._v("进港配置")])])}],o=(a("163d"),a("a3be")),r=a("391c"),c={name:"infoSetting",data:function(){return{isEdit:!1,initializeRules:{},infoName:"---",infoTime:"----年--月--日 --:--:--",salesmanGain:["1","3"],dotWeightGain:"3",coreWeightGain:"0",salesWeightGain:"3",destinationGain:["1"],transportGain:"0",goodsGain:"1",selfPai:"2",dotPai:"0",paiGain:"0",salesmanGainRadio:1,avg_status:0,avgDateModel:1,options:[{value:1,label:"首重时间8点至次日8点，账单日期记为当日"},{value:2,label:"首重时间0点至24点，账单日期记为当日"}]}},props:["fatherRules"],created:function(){this.initializeRules=Object(r["cloneDeep"])(this.fatherRules),this.checkInfo(this.fatherRules)},methods:{getRules:function(){var e=this;Object(o["pb"])().then((function(t){e.initializeRules=Object(r["cloneDeep"])(t.data),e.checkInfo(t.data)}))},commitSave:function(){var e=this,t=!1,a={};this.salesmanGain.indexOf("1")>-1&&-1===this.salesmanGain.indexOf("2")?a.PALM_USER="1":-1===this.salesmanGain.indexOf("1")&&this.salesmanGain.indexOf("2")>-1?a.PALM_USER="2":this.salesmanGain.indexOf("1")>-1&&this.salesmanGain.indexOf("2")>-1?a.PALM_USER="3":-1===this.salesmanGain.indexOf("1")&&-1===this.salesmanGain.indexOf("2")&&(a.PALM_USER="0"),Number(a.PALM_USER)!==Number(this.initializeRules.PALM_USER)&&(t=!0),a.RECE_USER=this.salesmanGainRadio,Number(a.RECE_USER)!==Number(this.initializeRules.RECE_USER)&&(t=!0),a.SITE_WEIGHT_VALUE=this.dotWeightGain,Number(a.SITE_WEIGHT_VALUE)!==Number(this.initializeRules.SITE_WEIGHT_VALUE)&&(t=!0),a.CENTER_WEIGHT_VALUE=this.coreWeightGain,Number(a.CENTER_WEIGHT_VALUE)!==Number(this.initializeRules.CENTER_WEIGHT_VALUE)&&(t=!0),a.SEND_ACCOUNT_WEIGHT=this.salesWeightGain,Number(a.SEND_ACCOUNT_WEIGHT)!==Number(this.initializeRules.SEND_ACCOUNT_WEIGHT)&&(t=!0),a.BAG=this.destinationGain.indexOf("2")>-1?"1":"0",Number(a.BAG)!==Number(this.initializeRules.BAG)&&(t=!0),a.CENTER_NEXT_STOP=this.destinationGain.indexOf("3")>-1?"1":"0",Number(a.CENTER_NEXT_STOP)!==Number(this.initializeRules.CENTER_NEXT_STOP)&&(t=!0),a.ELEC_BILL_DISPATCH=this.destinationGain.indexOf("4")>-1?"1":"0",Number(a.ELEC_BILL_DISPATCH)!==Number(this.initializeRules.ELEC_BILL_DISPATCH)&&(t=!0),a.SITE_SEND_CLASS_ITEM=this.transportGain,Number(a.SITE_SEND_CLASS_ITEM)!==Number(this.initializeRules.SITE_SEND_CLASS_ITEM)&&(t=!0),a.ITEM_TYPE=this.goodsGain,Number(a.ITEM_TYPE)!==Number(this.initializeRules.ITEM_TYPE)&&(t=!0),!this.selfPai||"1"!==this.selfPai&&"2"!==this.selfPai?this.$message({message:"请选择派费结算对象获取的自营派件！",type:"warning",duration:4e3}):(a.DISP_ACC_TYPE=this.selfPai,Number(a.DISP_ACC_TYPE)!==Number(this.initializeRules.DISP_ACC_TYPE)&&(t=!0),this.dotPai&&"3"!==this.dotPai?(a.LP_SETTLEMENT_SITE=this.dotPai,Number(a.LP_SETTLEMENT_SITE)!==Number(this.initializeRules.LP_SETTLEMENT_SITE)&&(t=!0),a.DISP_ACCOUNT_USER=this.paiGain,Number(a.DISP_ACCOUNT_USER)!==Number(this.initializeRules.DISP_ACCOUNT_USER)&&(t=!0),a.AVG_STATUS=this.avg_status,Number(a.AVG_STATUS)!==Number(this.initializeRules.AVG_STATUS)&&(t=!0),a.AVG_DATE_MODEL=this.avgDateModel,Number(a.AVG_DATE_MODEL)!==Number(this.initializeRules.avgDateModel)&&(t=!0),t?Object(o["uc"])(a).then((function(t){t.status?(e.isEdit=!1,e.$message({message:"操作成功",type:"success"}),e.getRules()):e.$message({message:t.message,type:"error"})})):this.cancelEdit()):this.$message({message:"请选择派费结算对象获取的下级派件！",type:"warning",duration:4e3}))},cancelEdit:function(){this.checkInfo(this.initializeRules),this.isEdit=!1},checkInfo:function(e){this.infoName=e.modifier,this.infoTime=this.moment(e.gmtModified).format("YYYY年MM月DD日 HH:mm:ss"),this.salesmanGain=["3"],"1"===e.PALM_USER?this.salesmanGain.push("1"):"2"===e.PALM_USER?this.salesmanGain.push("2"):"3"===e.PALM_USER&&(this.salesmanGain.push("1"),this.salesmanGain.push("2")),this.salesmanGainRadio=parseInt(e.RECE_USER),this.dotWeightGain=e.SITE_WEIGHT_VALUE,this.coreWeightGain=e.CENTER_WEIGHT_VALUE,this.salesWeightGain=e.SEND_ACCOUNT_WEIGHT,this.destinationGain=["1"],"1"===e.BAG&&this.destinationGain.push("2"),"1"===e.CENTER_NEXT_STOP&&this.destinationGain.push("3"),"1"===e.ELEC_BILL_DISPATCH&&this.destinationGain.push("4"),this.transportGain=e.SITE_SEND_CLASS_ITEM,this.selfPai=e.DISP_ACC_TYPE,this.dotPai=e.LP_SETTLEMENT_SITE,this.paiGain=e.DISP_ACCOUNT_USER,this.avg_status=Number(e.AVG_STATUS),this.avgDateModel=Number(e.AVG_DATE_MODEL)},onWeightChange:function(e){1===Number(this.initializeRules.AVG_STATUS)&&(this.avg_status=1,this.$message("您已开通均重账单，无法再关闭"))}}},u=c,d=(a("b73c"),a("623f")),h=Object(d["a"])(u,n,l,!1,null,null,null),m=h.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",{staticClass:"timeSetting"},[a("div",{staticClass:"head"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"danger"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticStyle:{"margin-left":"0px"},attrs:{type:"danger"},on:{click:e.cancelEdit}},[e._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"primary"},on:{click:e.commitSave}},[e._v("保存")]),a("span",{class:{"p-l-93":!e.isEdit}},[e._v("温馨提示：扣款返款类的数据隔天生效，历史数据需手动处理")]),a("span",{staticClass:"updateInfo"},[e._v("最新修改人："+e._s(e.infoName)+"    最新修改时间："+e._s(e.infoTime))])],1),e._m(0),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("欠费限制时间：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.arrearsTimeLimit,callback:function(t){e.arrearsTimeLimit=t},expression:"arrearsTimeLimit"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.arrearsTimeLimit},attrs:{label:"0"}},[e._v("欠费立刻限制扫描")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.arrearsTimeLimit},attrs:{label:"1"}},[e._v("欠费第二天开始限制")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"业务员预付款超出警戒金额时，限制业务员巴枪和掌中通收件扫描",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])]),e._m(1),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("中转费扣款：")]),a("li",{staticStyle:{width:"140px"}},[e._v("业务员预付款：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.salesmanPayTransfer,callback:function(t){e.salesmanPayTransfer=t},expression:"salesmanPayTransfer"}},[a("el-radio-button",{key:"0",staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.salesmanPayTransfer},attrs:{label:"0"}},[e._v("手动扣款")]),a("el-radio-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.salesmanPayTransfer},attrs:{label:"1"}},[e._v("自动扣款")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"自动扣款规则：每日中午开始扣昨日出费数据，费用变化自动对冲重扣",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li"),a("li",{staticStyle:{width:"140px"}},[e._v("下级中天预付款：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.ZTSubPayTransfer,callback:function(t){e.ZTSubPayTransfer=t},expression:"ZTSubPayTransfer"}},[a("el-radio-button",{key:"0",staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.ZTSubPayTransfer},attrs:{label:"0"}},[e._v("手动扣款")]),a("el-radio-button",{key:"1",staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.ZTSubPayTransfer},attrs:{label:"1",disabled:""}},[e._v("自动扣款")])],1)],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("发件代收到付返款：")]),a("li",{staticStyle:{width:"140px"}},[e._v("自营账单：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.selfBillsF,callback:function(t){e.selfBillsF=t},expression:"selfBillsF"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.selfBillsF},attrs:{label:"0"}},[e._v("手动返款")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.selfBillsF},attrs:{label:"1"}},[e._v("自动返款")])],1)],1),"1"===e.selfBillsF?a("li",{staticStyle:{"margin-left":"24px"}},[a("el-select",{attrs:{placeholder:"请选择自动返款周期",disabled:!e.isEdit},model:{value:e.selfBillsFStatus,callback:function(t){e.selfBillsFStatus=t},expression:"selfBillsFStatus"}},e._l(e.selfBillsFOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),2===e.selfBillsFStatus&&"1"===e.selfBillsF?a("li",{staticStyle:{"margin-left":"24px"}},[e._v("\n                月结返款日期：\n            ")]):e._e(),2===e.selfBillsFStatus&&"1"===e.selfBillsF?a("li",[a("el-select",{staticClass:"input-h-85",attrs:{placeholder:"",disabled:!e.isEdit},model:{value:e.selfBillsDStatus,callback:function(t){e.selfBillsDStatus=t},expression:"selfBillsDStatus"}},e._l(e.selfBillsDOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),2===e.selfBillsFStatus&&"1"===e.selfBillsF?a("li",[e._v("号")]):e._e()])]),e._m(2),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("派费返款：")]),a("li",{staticStyle:{width:"140px"}},[e._v("业务员预付款：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.salesmanPayPai,callback:function(t){e.salesmanPayPai=t},expression:"salesmanPayPai"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.salesmanPayPai},attrs:{label:"0"}},[e._v("手动返款")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"6"===e.salesmanPayPai},attrs:{label:"6"}},[e._v("自动返款")])],1)],1),"6"===e.salesmanPayPai?a("li",{staticStyle:{"margin-left":"24px"}},[a("el-select",{attrs:{placeholder:"请选择自动返款周期",disabled:!e.isEdit},model:{value:e.salesmanPayPaiStatus,callback:function(t){e.salesmanPayPaiStatus=t},expression:"salesmanPayPaiStatus"}},e._l(e.salesmanPayPaiOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"6"===e.salesmanPayPai&&5===e.salesmanPayPaiStatus?a("li",{staticStyle:{"margin-left":"24px"}},[e._v("\n                月结返款日期：\n            ")]):e._e(),"6"===e.salesmanPayPai&&5===e.salesmanPayPaiStatus?a("li",[a("el-select",{staticClass:"input-h-85",attrs:{placeholder:"",disabled:!e.isEdit},model:{value:e.salesmanPayPaiOptionsStatus,callback:function(t){e.salesmanPayPaiOptionsStatus=t},expression:"salesmanPayPaiOptionsStatus"}},e._l(e.selfBillsDOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),"6"===e.salesmanPayPai&&5===e.salesmanPayPaiStatus?a("li",[e._v("号")]):e._e()])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li"),a("li",{staticStyle:{width:"140px"}},[e._v("下级中天预付款：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.ZTSubPayPai,callback:function(t){e.ZTSubPayPai=t},expression:"ZTSubPayPai"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.ZTSubPayPai},attrs:{label:"0"}},[e._v("手动返款")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.ZTSubPayPai},attrs:{label:"1",disabled:""}},[e._v("自动返款")])],1)],1)])]),a("div",{staticClass:"chooseInfo"},[a("ul",[a("li",[e._v("派件代收到付扣款：")]),a("li",{staticStyle:{width:"140px"}},[e._v("自营账单：")]),a("li",[a("el-radio-group",{attrs:{disabled:!e.isEdit},model:{value:e.selfBillsP,callback:function(t){e.selfBillsP=t},expression:"selfBillsP"}},[a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"0"===e.selfBillsP},attrs:{label:"0"}},[e._v("手动扣款")]),a("el-radio-button",{staticClass:"w-140",class:{disabled:!e.isEdit&&"1"===e.selfBillsP},attrs:{label:"1"}},[e._v("自动扣款")])],1)],1),a("li",{staticStyle:{"margin-left":"24px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"每日扣昨日满足结算的数据",placement:"right"}},[a("i",{staticClass:"el-icon-question cp"})])],1)])])])},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",[e._v("欠费扫描限制")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",[e._v("出港配置")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("div",[e._v("进港配置")])])}],f={name:"timeSetting",data:function(){return{isEdit:!1,initializeRules:{},infoName:"---",infoTime:"----年--月--日 --:--:--",arrearsTimeLimit:"1",salesmanPayTransfer:"0",ZTSubPayTransfer:"0",selfBillsF:"0",selfBillsFStatus:1,selfBillsFOptions:[{value:1,label:"日结（签收后第7天返款）"},{value:2,label:"月结（固定日期返上月整月）"}],salesmanPayPai:"0",ZTSubPayPai:"0",selfBillsP:"0",selfBillsDStatus:"",selfBillsDOptions:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"},{value:12,label:"12"},{value:13,label:"13"},{value:14,label:"14"},{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"},{value:21,label:"21"},{value:22,label:"22"},{value:23,label:"23"},{value:24,label:"24"},{value:25,label:"25"},{value:26,label:"26"},{value:27,label:"27"},{value:28,label:"28"}],salesmanPayPaiStatus:1,salesmanPayPaiOptions:[{value:1,label:"日结(每日返昨日)"},{value:2,label:"周结(每周一返上周)"},{value:3,label:"10日结(每月11号、21号、1号返)"},{value:4,label:"半月结(每月16号、1号返)"},{value:5,label:"月结(固定日期返上月整月)"}],salesmanPayPaiOptionsStatus:1}},props:["fatherRules"],created:function(){this.initializeRules=Object(r["cloneDeep"])(this.fatherRules),this.checkInfo(this.fatherRules)},methods:{getRules:function(){var e=this;Object(o["pb"])().then((function(t){e.initializeRules=Object(r["cloneDeep"])(t.data),e.checkInfo(t.data)}))},commitSave:function(){var e=this,t=!1,a={};if(a.STOP_SCAN=this.arrearsTimeLimit,Number(a.STOP_SCAN)!==Number(this.initializeRules.STOP_SCAN)&&(t=!0),a.CENTER_FEE_PAYMENT=this.salesmanPayTransfer,Number(a.CENTER_FEE_PAYMENT)!==Number(this.initializeRules.CENTER_FEE_PAYMENT)&&(t=!0),"0"===this.selfBillsF?a.GOODS_PAYMENT_SEND_NEW=this.selfBillsF:(a.GOODS_PAYMENT_SEND_NEW=this.selfBillsFStatus+"",2===this.selfBillsFStatus&&(a.GOODS_PAYMENT_SEND_MONTHLY_DAY=this.selfBillsDStatus+"",Number(a.GOODS_PAYMENT_SEND_MONTHLY_DAY)!==Number(this.initializeRules.GOODS_PAYMENT_SEND_MONTHLY_DAY)&&(t=!0))),Number(a.GOODS_PAYMENT_SEND_NEW)!==Number(this.initializeRules.GOODS_PAYMENT_SEND_NEW)&&(t=!0),"0"===this.salesmanPayPai)a.SETTLEMENT_CYCLE=this.salesmanPayPai+"";else if(a.SETTLEMENT_CYCLE=this.salesmanPayPaiStatus+"",5===this.salesmanPayPaiStatus){if(!this.salesmanPayPaiOptionsStatus)return void this.$message({message:"请选择月结返款日期！",type:"warning",duration:4e3});a.MONTHLY_DAY=this.salesmanPayPaiOptionsStatus+"",Number(a.MONTHLY_DAY)!==Number(this.initializeRules.MONTHLY_DAY)&&(t=!0)}Number(a.SETTLEMENT_CYCLE)!==Number(this.initializeRules.SETTLEMENT_CYCLE)&&(t=!0),a.GOODS_PAYMENT_DISP=this.selfBillsP,Number(a.GOODS_PAYMENT_DISP)!==Number(this.initializeRules.GOODS_PAYMENT_DISP)&&(t=!0),t?Object(o["uc"])(a).then((function(t){e.isEdit=!1,e.$message({message:"操作成功",type:"success"}),e.getRules()})):this.cancelEdit()},cancelEdit:function(){this.checkInfo(this.initializeRules),this.isEdit=!1},checkInfo:function(e){this.infoName=e.modifier,this.infoTime=this.moment(e.gmtModified).format("YYYY年MM月DD日 HH:mm:ss"),this.arrearsTimeLimit=e.STOP_SCAN,this.salesmanPayTransfer=e.CENTER_FEE_PAYMENT,this.selfBillsF=e.GOODS_PAYMENT_SEND_NEW,"0"!==e.GOODS_PAYMENT_SEND_NEW?(this.selfBillsF="1",this.selfBillsFStatus=parseInt(e.GOODS_PAYMENT_SEND_NEW),"2"===e.GOODS_PAYMENT_SEND_NEW&&(this.selfBillsDStatus=e.GOODS_PAYMENT_SEND_MONTHLY_DAY)):(this.selfBillsF="0",this.selfBillsFStatus=1,this.selfBillsDStatus=1),"0"===e.SETTLEMENT_CYCLE?(this.salesmanPayPai="0",this.salesmanPayPaiStatus=1,this.salesmanPayPaiOptionsStatus=1):(this.salesmanPayPai="6",this.salesmanPayPaiStatus=parseInt(e.SETTLEMENT_CYCLE),"5"===e.SETTLEMENT_CYCLE&&(this.salesmanPayPaiOptionsStatus=e.MONTHLY_DAY)),this.selfBillsP=e.GOODS_PAYMENT_DISP}}},y=f,v=(a("52e6"),Object(d["a"])(y,p,b,!1,null,null,null)),g=v.exports,C={name:"settlement",created:function(){var e=this;Object(o["pb"])().then((function(t){e.rules=t.data,e.flag=!0}))},components:{infoSetting:m,timeSetting:g},data:function(){return{rules:{},flag:!1}},methods:{}},x=C,k=Object(d["a"])(x,i,s,!1,null,"032ad396",null);t["default"]=k.exports},f8e5:function(e,t,a){},f942:function(e,t,a){"use strict";var i=a("e87a"),s=a.n(i);s.a},fb06:function(e,t,a){"use strict";var i=a("d9a9"),s=a.n(i);s.a},fb0f:function(e,t,a){"use strict";var i=a("4fc1"),s=a.n(i);s.a},fb26:function(e,t,a){},fc2a:function(e,t,a){},fca3:function(e,t,a){},fdcb:function(e,t,a){},fe47:function(e,t,a){"use strict";var i=a("c8e6"),s=a.n(i);s.a}}]);
//# sourceMappingURL=about.fde56c46.js.map